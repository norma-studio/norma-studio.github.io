
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Загрузка файлов с помощью AJAX
... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Загрузка файлов с помощью AJAX
... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Загрузка файлов с помощью AJAX
... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Загрузка файлов с помощью AJAX
... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Кажется, я не могу дойти до конца интересных возможностей, которые вы можете применить с появляющимися веб-технологиями. Сегодня я покажу вам, как сделать что-то, что до последнего времени было почти беспрецедентным: загрузка файлов через AJAX....">
<meta property="og:description" content="Кажется, я не могу дойти до конца интересных возможностей, которые вы можете применить с появляющимися веб-технологиями. Сегодня я покажу вам, как сделать что-то, что до последнего времени было почти беспрецедентным: загрузка файлов через AJAX....">
<meta name="twitter:description" content="Кажется, я не могу дойти до конца интересных возможностей, которые вы можете применить с появляющимися веб-технологиями. Сегодня я покажу вам, как сделать что-то, что до последнего времени было почти беспрецедентным: загрузка файлов через AJAX....">
<meta property="aiturec:description" content="Кажется, я не могу дойти до конца интересных возможностей, которые вы можете применить с появляющимися веб-технологиями. Сегодня я покажу вам, как сделать что-то, что до последнего времени было почти беспрецедентным: загрузка файлов через AJAX....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/15/posts/18997/image/file-uploader.png">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/15/posts/18997/image/file-uploader.png">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/15/posts/18997/image/file-uploader.png">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/15/posts/18997/image/file-uploader.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/15/posts/18997/image/file-uploader.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824689-zagruzka-fajlov-s-pomoschyu-ajax.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824689-zagruzka-fajlov-s-pomoschyu-ajax.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824689-zagruzka-fajlov-s-pomoschyu-ajax.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824689-zagruzka-fajlov-s-pomoschyu-ajax.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824689-zagruzka-fajlov-s-pomoschyu-ajax.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824689-zagruzka-fajlov-s-pomoschyu-ajax.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824689-zagruzka-fajlov-s-pomoschyu-ajax.html" title="Загрузка файлов с помощью AJAX
... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Загрузка файлов с помощью AJAX
... | envatomarket.ru | norma-studio.github.io" title="Загрузка файлов с помощью AJAX
... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/45343254534.jpg" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824689-zagruzka-fajlov-s-pomoschyu-ajax.html" class="tm-user-info__username" title="
С. Баранов" aria-label="
С. Баранов">
С. Баранов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Загрузка файлов с помощью AJAX
...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824689-zagruzka-fajlov-s-pomoschyu-ajax" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article/220824689-zagruzka-fajlov-s-pomoschyu-ajax" class="tm-article-snippet__hubs-item-link"><span>Web Development</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824689-zagruzka-fajlov-s-pomoschyu-ajax.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/15/posts/18997/image/file-uploader.png">
    <meta itemprop="headline name" content="Загрузка файлов с помощью AJAX
... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Кажется, я не могу дойти до конца интересных возможностей, которые вы можете применить с появляющимися веб-технологиями. Сегодня я покажу вам, как сделать что-то, что до последнего времени было почти беспрецедентным: загрузка файлов через AJAX....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Кажется, я не могу дойти до конца интересных возможностей, которые вы можете применить с появляющимися веб-технологиями. Сегодня я покажу вам, как сделать что-то, что до последнего времени было почти беспрецедентным: загрузка файлов через AJAX....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Кажется, я не могу дойти до конца интересных возможностей, которые вы можете применить с появляющимися веб-технологиями. Сегодня я покажу вам, как сделать что-то, что до последнего времени было почти беспрецедентным: загрузка файлов через AJAX.</p><p>О, конечно, были хаки; но если вы похожи на меня и чувствуете себя грязными каждый раз, когда вы вводите <code>iframe</code>, вам это очень понравится. Присоединяйтесь ко мне!</p><h3>Ищете быстрое решение?</h3><p>Если вы ищете быстрое решение, на Envato Market имеется большая коллекция <span>скриптов и приложений для загрузки файлов</span>. </p><p>Этот <span>HTML5 загрузчик файлов</span>  особенно примечателен - вы можете легко добавлять файлы, перетаскивая их или кликая. Все файлы будут загружены через AJAX или могут быть добавлены в форму, и файлы могут быть переименованы перед загрузкой. Отличное, быстрое решение, если это то, что вы ищете!</p><figure><span><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/15/posts/18997/image/file-uploader.png" alt="Загрузка файлов с помощью AJAX..." title="Загрузка файлов с помощью AJAX..." width="50" height="50"></span></figure><hr><p>У нас имеются плохие новости? </p> <blockquote><p>Это не работает во всех браузерах. Однако с некоторым прогрессивным улучшением (или каким бы то ни было текущим модным словом) у нас будет страница загрузки, которая будет работать даже в IE6 (хотя и без черт AJAX).</p></blockquote> <blockquote><p>Наша  AJAX-загрузка будет работать до тех пор, пока доступен <code>FormData</code>; в противном случае пользователь получит обычную загрузку. </p></blockquote> <p>В нашем проекте есть три основных компонента.</p> <ul><li><code>multiple</code> атрибуты элемента <code>input</code> файла.</li> <li>Объект <code>FileReader</code> из нового API файлов.</li> <li>Объект <code>FormData</code> из XMLHttpRequest2.</li> </ul><p>Мы используем атрибут <code>multiple</code>, чтобы позволить пользователю выбирать несколько файлов для загрузки (многократная загрузка файлов будет работать нормально, даже если <code>FormData</code> недоступен). Как вы увидите, <code>FileReader</code> позволяет нам показывать миниатюры загружаемых файлов (мы будем ожидать изображения).</p> <p>Ни одна из наших трех функций не работает в IE9, поэтому все пользователи IE получат нормальную загрузку (хотя я понимаю, что поддержка `FileReader` доступна в IE10 Dev Preview 2). <code>FileReader</code> не работает в последней версии Safari (5.1), поэтому они не получат миниатюры, но они получат загрузку AJAX и подтверждение. Наконец, Opera 10.50 поддерживает <code>FileReader</code>, но не поддерживает <code>FormData</code>, поэтому он получит миниатюры, но обычную загрузку.</p> <p>Чтобы продолжить путь, давайте приступим к кодированию!</p> <hr><h2>Шаг 1: Разметка и стилизация</h2> <p>Начнем с некоторой базовой разметки и стилизации. Конечно, это не основная часть этого урока, я не буду относиться к вам как к новичку.</p> <h3>HTML-код</h3> <pre class="brush: html noskimlinks noskimwords">&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt;  &lt;meta charset="UTF-8" /&gt;  &lt;title&gt;HTML5 File API&lt;/title&gt;  &lt;link rel="stylesheet" href="style.css" /&gt;&lt;/head&gt;&lt;body&gt;  &lt;div id="main"&gt;    &lt;h1&gt;Upload Your Images&lt;/h1&gt;    &lt;form method="post" enctype="multipart/form-data"  action="upload.php"&gt;      &lt;input type="file" name="images" id="images" multiple /&gt;      &lt;button type="submit" id="btn"&gt;Upload Files!&lt;/button&gt;    &lt;/form&gt;    &lt;div id="response"&gt;&lt;/div&gt;    &lt;ul id="image-list"&gt;    &lt;/ul&gt;  &lt;/div&gt;  &lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"&gt;&lt;/script&gt;  &lt;script src="upload.js"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;</pre> <p>Довольно просто, не так ли? У нас есть форма, в которая отправляется post"ом на <code>upload.php</code>, который мы рассмотрим через секунду, и один элемент ввода, типа <code>file</code>. Обратите внимание, что он имеет boolean-атрибут <code>multiple</code>, который позволяет пользователю одновременно выбирать несколько файлов.</p> <p>Это действительно все, что нужно было здесь увидеть. Давайте двигаться дальше.</p> <h3>CSS</h3> <pre class="brush: css noskimlinks noskimwords">body {  font: 14px/1.5 helvetica-neue, helvetica, arial, san-serif;  padding:10px;}h1 {  margin-top:0;}#main {  width: 300px;  margin:auto;  background: #ececec;  padding: 20px;  border: 1px solid #ccc;}#image-list {  list-style:none;  margin:0;  padding:0;}#image-list li {  background: #fff;  border: 1px solid #ccc;  text-align:center;  padding:20px;  margin-bottom:19px;}#image-list li img {  width: 258px;  vertical-align: middle;  border:1px solid #474747;}</pre> <p>Здесь нет абсолютно никаких особенностей.</p> <hr><h2>Шаг 2: PHP</h2> <p>Мы также должны иметь возможность обрабатывать загрузки файлов на стороне сервера, поэтому давайте рассмотрим это далее.</p> <h3>upload.php</h3> <pre class="brush: php noskimlinks noskimwords">&lt;?phpforeach ($_FILES["images"]["error"] as $key =&gt; $error) {  if ($error == UPLOAD_ERR_OK) {    $name = $_FILES["images"]["name"][$key];    move_uploaded_file( $_FILES["images"]["tmp_name"][$key], "uploads/" . $_FILES["images"]["name"][$key]);  }}echo "&lt;h2&gt;Successfully Uploaded Images&lt;/h2&gt;";</pre> <p>Имейте в виду, что это были первые строки на PHP, которые я написал с легкостью первый год (<span>я парень из Ruby</span>). Вероятно, вам стоит немного позаботиться о безопасности; однако мы просто следим за тем, чтобы не было ошибок при загрузке. Мы используем встроенную функцию <code>move_uploaded_file</code>, чтобы переместить файл в папку <code>uploads</code>. Не забудьте убедиться, что папка доступна для записи.</p> <p>Итак, прямо сейчас у нас должна быть рабочая форма загрузки. Вы выбираете изображение (несколько, если хотите, и ваш браузер это позволяет), нажмите кнопку <em>“Upload Files!”</em>, и вы получите сообщение <em>“Successfully Uploaded Images.”</em></p> <p>Вот как выглядит наш мини-проект:</p> <div><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=371/net/uploads/legacy/1020_ajaxupload/form.png" alt="Загрузка файлов с помощью AJAX..." title="Загрузка файлов с помощью AJAX..." width="50" height="50"></div> <p>Но, сейчас 2011 год: мы хотим большего. Вы заметите, что мы связали jQuery и файл <code>upload.js</code>. Давайте рассмотрим это подробней.</p> <hr><h2> Шаг 3: JavaScript</h2> <p>Давайте не будем терять время: здесь начнем!</p> <pre class="brush: noskimlinks noskimwords">(function () {  var input = document.getElementById("images"),      formdata = false;      if (window.FormData) {    formdata = new FormData();    document.getElementById("btn").style.display = "none";  }  }();</pre> <p>Вот с чего мы начинаем. Мы создаем две переменные: <code>input</code> - это наш элемент ввода файла; <code>formdata</code> будет использоваться для отправки изображений на сервер, если браузер поддерживает это. Мы инициализируем его значением <code>false</code>, а затем проверяем, поддерживает ли браузер <code>FormData</code>; Если это так, мы создаем новый объект <code>FormData</code>. Кроме того, если мы можем отправить изображения с помощью AJAX, нам не нужна кнопка “Upload Images!”, Поэтому мы можем скрыть ее. Почему нам это не нужно? Ну, мы собираемся автоматически загружать изображения сразу после того, как пользователь их выбирает.</p> <p>Остальная часть JavaScript войдет в вашу анонимную функцию. Затем мы создадим небольшую вспомогательную функцию, которая будет отображать изображения в браузере:</p> <pre class="brush: noskimlinks noskimwords">function showUploadedItem (source) {  var list = document.getElementById("image-list"),      li   = document.createElement("li"),      img  = document.createElement("img");    img.src = source;    li.appendChild(img);  list.appendChild(li);}</pre> <p>Функция принимает один параметр: источник изображения (мы увидим, как его получать). Затем мы просто находим список в нашей разметке и создаем элемент списка и изображение. Мы установили источник изображения в полученный нами источник, поместили изображение в элемент списка и поместили элемент списка в список. Вуаля!</p> <p>Затем мы должны фактически отображать изображения, отображать их и загружать. Как мы уже говорили, мы это сделаем, когда событие <code>onchange</code> будет запущено на входном элементе.</p> <pre class="brush: noskimlinks noskimwords">if (input.addEventListener) {  input.addEventListener("change", function (evt) {    var i = 0, len = this.files.length, img, reader, file;        document.getElementById("response").innerHTML = "Uploading . . ."        for ( ; i &lt; len; i++ ) {      file = this.files[i];        if (!!file.type.match(/image.*/)) {      }     }        }, false);}</pre> <blockquote><p>Нам не нужно беспокоиться о проприетарной модели событий IE, потому что IE9 + поддерживает стандартную функцию addEventListener.</p></blockquote> <p>Там доступно больше возможностей, но давайте начнем с этого. Во-первых, нам не нужно беспокоиться о проприетарной модели событий IE, потому что IE9 + поддерживает стандартную функцию <code>addEventListener</code> (а IE9 и ниже не поддерживают новые функции).</p> <p>Итак, что мы хотим делать, когда пользователь выбрал файлы? Во-первых, мы создаем несколько переменных. Единственный важный момент сейчас - это <code>len = this.files.length</code>. Файлы, которые пользователь выбрал, будут доступны из объекта <code>this.files</code>. Прямо сейчас, нас беспокоит только свойство <code>length</code>, поэтому мы можем перебирать файлы ...</p> <p>... это именно то, что мы делаем дальше. Внутри нашего цикла мы устанавливаем текущий файл в <code>file</code> для удобства доступа. Следующее, что мы делаем, это подтверждение того, что файл является изображением. Мы можем сделать это, сравнивая свойство <code>type</code> с регулярным выражением. Мы ищем тип, начинающийся с "image", за которым следует что-либо. (Двойной знак восклицания впереди просто преобразует результат в булев тип.)</p> <p>Итак, что нам делать, если у нас есть изображение на руках?</p> <pre class="brush: noskimlinks noskimwords">if ( window.FileReader ) {  reader = new FileReader();  reader.onloadend = function (e) {     showUploadedItem(e.target.result);  };  reader.readAsDataURL(file);}if (formdata) {  formdata.append("images[]", file);}</pre> <p>Мы проверяем, поддерживает ли браузер создание объектов <code>FileReader</code>. Если это произойдет, мы его создадим. </p> <p>Вот как мы используем объект <code>FileReader</code>: мы собираемся передать наш объект <code>file</code> методу <code>reader.readAsDataURL</code>. Это создает <span>URL-адрес</span> для загруженного изображения. Однако это не работает так, как вы ожидали. URL-адрес данных не возвращается из функции. Вместо этого URL-адрес данных будет частью объекта события. </p> <p>Имея это в виду, нам нужно зарегистрировать функцию на событие <code>reader.onloadend</code>. Эта функция принимает объект события, с помощью которого мы получаем URL-адрес данных: он находится на <code>e.target.result</code> (да, <code>e.target</code> является объектом <code>reader</code>, но у меня были проблемы при использовании <code>reader</code> вместо <code>e.target</code> внутри этой функции) , Мы просто передадим этот URL-адрес нашей функции <code>showUploadedItem</code> (которую мы написали выше).</p> <p>Затем мы проверяем объект <code>formdata</code>. Помните, что если браузер поддерживает <code>FormData</code>, <code>formdata</code> будет объектом <code>FormData</code>; в противном случае оно будет <code>false</code>. Итак, если у нас есть объект <code>FormData</code>, мы будем вызывать метод <code>append</code>. Цель объекта <code>FormData</code> - хранить значения, которые вы отправляете через форму; поэтому метод <code>append</code> просто берет ключ и значение. В нашем случае наш ключ - <code>images[]</code>; добавив квадратные скобки к концу, мы проверяем каждый раз, что <code>append</code> добавляет другое значение, мы фактически добавляем его к этому массиву, а не переписываем свойство <code>image</code>.</p> <p>Мы почти закончили. В нашем цикле for мы отобразили каждое изображение для пользователя и добавили его в объект <code>formdata</code>. Теперь нам просто нужно загрузить изображения. Снаружи цикла <code>for</code>, вот последний фрагмент нашего пазла:</p> <pre class="brush: noskimlinks noskimwords">if (formdata) {  $.ajax({    url: "upload.php",    type: "POST",    data: formdata,    processData: false,    contentType: false,    success: function (res) {      document.getElementById("response").innerHTML = res;     }  });}</pre> <p>Опять же, мы должны убедиться, что у нас есть поддержка <code>FormData</code>; если мы этого не сделаем, кнопка “Upload Files!” будет видна, и пользователь загрузит фотографии. Однако, если у нас есть поддержка <code>FormData</code>, мы позаботимся о загрузке через AJAX. Мы используем jQuery для обработки всех особенностей AJAX во всех браузерах. </p> <p>Вероятно, вы знакомы с методом <code>$.ajax</code> jQuery: вы передаете ему объект options. Свойства <code>url</code>, <code>type</code> и <code>success</code> обязательны. Свойством <code>data</code> является наш объект <code>formdata</code>. Обратите внимание на свойства <code>processData</code> и <code>contentType</code>. Согласно документации jQuery, <code>processData</code> по умолчанию является <code>true</code> и будет обрабатывать и преобразовывать данные в строку запроса. Мы не хотим этого делать, поэтому мы устанавливаем значение <code>false</code>. Мы также устанавливаем <code>contentType</code> в <code>false</code>, чтобы убедиться, что данные попадают на сервер, как мы и ожидаем.</p> <p>Вот и все. Теперь, когда пользователь загружает страницу, они видят это:</p> <div><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1020_ajaxupload/ajax-start.png" alt="Загрузка файлов с помощью AJAX..." title="Загрузка файлов с помощью AJAX..." width="50" height="50"></div> <p>И после того, как они выберут изображения, они увидят это:</p> <div><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1020_ajaxupload/ajax-upload.png" alt="Загрузка файлов с помощью AJAX..." title="Загрузка файлов с помощью AJAX..." width="50" height="50"></div> <p>Так же были загружены изображения:</p> <div><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cdn.tutsplus.com/net/uploads/legacy/1020_ajaxupload/ajax-finder.png" class="lazy07" alt="Загрузка файлов с помощью AJAX..." title="Загрузка файлов с помощью AJAX..." width="50" height="50"></div> <hr><h2>Заключение</h2> <p>Загрузка файлов через AJAX довольно крутая, и здорово, что эти новые технологии поддерживают это без необходимости многословных хаков. Если у вас есть какие-либо вопросы о том, что мы здесь сделали, напишите это в комментариях! Большое вам спасибо за чтение!</p><p>И если вам по-прежнему нужна помощь в этой или любой другой проблеме с кодингом, вы можете найти решение в <span>Envato Studio</span>. </p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824689-zagruzka-fajlov-s-pomoschyu-ajax" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article/220824689-zagruzka-fajlov-s-pomoschyu-ajax" class="tm-article-body__tags-item-link">Web Development</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
33698</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
600</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
