
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Валидация формы в CodeIgniter: от начала до конца... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Валидация формы в CodeIgniter: от начала до конца... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Валидация формы в CodeIgniter: от начала до конца... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Валидация формы в CodeIgniter: от начала до конца... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Для разработчика веб-приложений, валидация формы является важной частью вашей работы, и ее нельзя недооценивать, поскольку это может привести к недостаткам безопасности в вашем приложении. Вы должны считать ее обязательной, если вы стремитесь обеспечить наилучшее поведение вашего приложения для конечного пользователя....">
<meta property="og:description" content="Для разработчика веб-приложений, валидация формы является важной частью вашей работы, и ее нельзя недооценивать, поскольку это может привести к недостаткам безопасности в вашем приложении. Вы должны считать ее обязательной, если вы стремитесь обеспечить наилучшее поведение вашего приложения для конечного пользователя....">
<meta name="twitter:description" content="Для разработчика веб-приложений, валидация формы является важной частью вашей работы, и ее нельзя недооценивать, поскольку это может привести к недостаткам безопасности в вашем приложении. Вы должны считать ее обязательной, если вы стремитесь обеспечить наилучшее поведение вашего приложения для конечного пользователя....">
<meta property="aiturec:description" content="Для разработчика веб-приложений, валидация формы является важной частью вашей работы, и ее нельзя недооценивать, поскольку это может привести к недостаткам безопасности в вашем приложении. Вы должны считать ее обязательной, если вы стремитесь обеспечить наилучшее поведение вашего приложения для конечного пользователя....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/413/profiles/18842/profileImage/thumb_140656049277268.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/413/profiles/18842/profileImage/thumb_140656049277268.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/413/profiles/18842/profileImage/thumb_140656049277268.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/413/profiles/18842/profileImage/thumb_140656049277268.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/413/profiles/18842/profileImage/thumb_140656049277268.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824940-validatsiya-formy-v-codeigniter-ot-nachala-do-kontsa.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824940-validatsiya-formy-v-codeigniter-ot-nachala-do-kontsa.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824940-validatsiya-formy-v-codeigniter-ot-nachala-do-kontsa.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824940-validatsiya-formy-v-codeigniter-ot-nachala-do-kontsa.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824940-validatsiya-formy-v-codeigniter-ot-nachala-do-kontsa.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824940-validatsiya-formy-v-codeigniter-ot-nachala-do-kontsa.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824940-validatsiya-formy-v-codeigniter-ot-nachala-do-kontsa.html" title="Валидация формы в CodeIgniter: от начала до конца... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Валидация формы в CodeIgniter: от начала до конца... | envatomarket.ru | norma-studio.github.io" title="Валидация формы в CodeIgniter: от начала до конца... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/63456435436.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824940-validatsiya-formy-v-codeigniter-ot-nachala-do-kontsa.html" class="tm-user-info__username" title="
М. Старостенко" aria-label="
М. Старостенко">
М. Старостенко</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Валидация формы в CodeIgniter: от начала до конца...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824940-validatsiya-formy-v-codeigniter-ot-nachala-do-kontsa" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="CodeIgniter" href="https://norma-studio.github.io/article/220824940-validatsiya-formy-v-codeigniter-ot-nachala-do-kontsa" class="tm-article-snippet__hubs-item-link"><span>CodeIgniter</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824940-validatsiya-formy-v-codeigniter-ot-nachala-do-kontsa.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/413/profiles/18842/profileImage/thumb_140656049277268.jpg">
    <meta itemprop="headline name" content="Валидация формы в CodeIgniter: от начала до конца... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Для разработчика веб-приложений, валидация формы является важной частью вашей работы, и ее нельзя недооценивать, поскольку это может привести к недостаткам безопасности в вашем приложении. Вы должны считать ее обязательной, если вы стремитесь обеспечить наилучшее поведение вашего приложения для конечного пользователя....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Для разработчика веб-приложений, валидация формы является важной частью вашей работы, и ее нельзя недооценивать, поскольку это может привести к недостаткам безопасности в вашем приложении. Вы должны считать ее обязательной, если вы стремитесь обеспечить наилучшее поведение вашего приложения для конечного пользователя....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Для разработчика веб-приложений, валидация формы является важной частью вашей работы, и ее нельзя недооценивать, поскольку это может привести к недостаткам безопасности в вашем приложении. Вы должны считать ее обязательной, если вы стремитесь обеспечить наилучшее поведение вашего приложения для конечного пользователя.<br></p><p>В этой статье мы рассмотрим встроенную библиотеку валидации формы в фреймворке CodeIgniter.<br></p><p>Вот основные моменты сегодняшней статьи:</p><ul><li>Базовая валидация формы</li> <li>Каскад и подготовка</li> <li>Пользовательские сообщения об ошибках</li> <li>Пользовательский колбэк для валидации</li> <li>Конфигурация валидации</li> </ul><h2>Пройдемся по основным правилам валидации</h2><p>В этом разделе мы рассмотрим основные принципы валидации формы в CodeIgniter.</p><p>Для этого нам необходимо создать контроллер и файлы отображения. Файл контроллера загружает библиотеку валидации и запускает правила проверки относительно представленных данных формы. Файл представления содержит XHTML-код формы, и мы сохраним его для наших нужд.</p><p>Давайте продолжим и создадим эти два файла.</p><p>Создайте файл <code class="inline">application/controllers/Validation.php</code> со следующим содержимым.</p><pre class="brush: php noskimlinks noskimwords">&lt;?php// application/controllers/Validation.phpdefined("BASEPATH") OR exit("No direct script access allowed");class Validation extends CI_Controller {    public function __construct()     {      parent::__construct();        // load form and url helpers    $this-&gt;load-&gt;helper(array("form", "url"));        // load form_validation library    $this-&gt;load-&gt;library("form_validation");    }    public function basic()    {        // basic required field        $this-&gt;form_validation-&gt;set_rules("text_field", "Text Field One", "required");                // basic required field with minimum length        $this-&gt;form_validation-&gt;set_rules("min_text_field", "Text Field Two", "required|min_length[8]");                // basic required field with maximum length        $this-&gt;form_validation-&gt;set_rules("max_text_field", "Text Field Three", "required|max_length[20]");                // basic required field with exact length        $this-&gt;form_validation-&gt;set_rules("exact_text_field", "Text Field Four", "required|exact_length[12]");                // basic required field but alphabets only        $this-&gt;form_validation-&gt;set_rules("alphabets_text_field", "Text Field Five", "required|alpha");                // basic required field but alphanumeric only        $this-&gt;form_validation-&gt;set_rules("alphanumeric_text_field", "Text Field Six", "required|alpha_numeric");                // basic email field with email validation        $this-&gt;form_validation-&gt;set_rules("valid_email_field", "Email Field", "required|valid_email");                // password field with confirmation field matching        $this-&gt;form_validation-&gt;set_rules("password_field", "Password One", "required");        $this-&gt;form_validation-&gt;set_rules("password_confirmation_field", "Password Confirmation Field", "required|matches[password_field]");                // basic required field with IPv4 validation        $this-&gt;form_validation-&gt;set_rules("valid_ip_field", "Valid IP Field", "required|valid_ip[ipv4]");                if ($this-&gt;form_validation-&gt;run() == FALSE)        {        $this-&gt;load-&gt;view("validate_form");        }        else        {        // load success template...        echo "It"s all Good!";        }    }    public function cascade()    {        // basic required field with cascaded rules        $this-&gt;form_validation-&gt;set_rules("text_field", "Text Field One", "required|alpha|min_length[8]|max_length[20]");                 if ($this-&gt;form_validation-&gt;run() == FALSE)        {        $this-&gt;load-&gt;view("validate_form");        }        else        {        // load success template...        echo "It"s all Good!";        }    }    public function prep()    {        // basic required field with trim prepping applied        $this-&gt;form_validation-&gt;set_rules("min_text_field", "Text Field Two", "trim|required|min_length[8]");                if ($this-&gt;form_validation-&gt;run() == FALSE)        {        $this-&gt;load-&gt;view("validate_form");        }        else        {        // load success template...        echo "It"s all Good!";        }    }    public function custom_message()    {        // basic required field with trim prepping applied        $this-&gt;form_validation-&gt;set_rules("alphabets_text_field", "Text Field Five", "required|alpha",        array("required"=&gt;"Please enter Text Field Five!","alpha"=&gt;"Only alphabets please!"));                if ($this-&gt;form_validation-&gt;run() == FALSE)        {        $this-&gt;load-&gt;view("validate_form");        }        else        {        // load success template...        echo "It"s all Good!";        }    }    public function custom_rule()    {        // basic required field with trim prepping applied        $this-&gt;form_validation-&gt;set_rules("text_field", "Text Field Five", "callback_custom_validation");                if ($this-&gt;form_validation-&gt;run() == FALSE)        {        $this-&gt;load-&gt;view("validate_form");        }        else        {        // load success template...        echo "It"s all Good!";        }    }        public function custom_validation($field_value)     {        if ($field_value == "" || $field_value == "demo")        {        $this-&gt;form_validation-&gt;set_message("custom_validation", "Come on, don"t act like spammer!");        return FALSE;        }        else        {        return TRUE;        }    }        public function configuration()    {        // if you pass group id, only elements in that group will be validated        // $this-&gt;form_validation-&gt;run("group_one")        if ($this-&gt;form_validation-&gt;run() == FALSE)        {        $this-&gt;load-&gt;view("validate_form");        }        else        {        // load success template...        echo "It"s all Good!";        }    }}</pre><p>Затем создайте файл отображения <code class="inline">application/views/validate_form.php</code>, как показано ниже.</p><pre class="brush: php noskimlinks noskimwords">&lt;html&gt;    &lt;head&gt;&lt;title&gt;Form Validation Example&lt;/title&gt;&lt;style&gt;.field_title{font-size: 13px;font-family:Arial;width: 300px;margin-top: 10px}.form_error{font-size: 13px;font-family:Arial;color:red;font-style:italic}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div class="form_error"&gt;  &lt;?php echo validation_errors(); ?&gt;&lt;/div&gt;&lt;?php echo form_open(); ?&gt;&lt;h2&gt;Form Validation Example&lt;/h2&gt;&lt;div&gt;&lt;div class="field_title"&gt;Text Field One (Required)&lt;/div&gt;&lt;input type="text" name="text_field" value="&lt;?php echo set_value("text_field"); ?&gt;" size="30" /&gt;&lt;/div&gt;&lt;div&gt;&lt;div class="field_title"&gt;Text Field Two (Minimum length)&lt;/div&gt;&lt;input type="text" name="min_text_field" value="&lt;?php echo set_value("min_text_field"); ?&gt;" size="30" /&gt;&lt;/div&gt;&lt;div&gt;&lt;div class="field_title"&gt;Text Field Three (Maximum length)&lt;/div&gt;&lt;input type="text" name="max_text_field" value="&lt;?php echo set_value("max_text_field"); ?&gt;" size="30" /&gt;&lt;/div&gt;&lt;div&gt;&lt;div class="field_title"&gt;Text Field Four (Exact length)&lt;/div&gt;&lt;input type="text" name="exact_text_field" value="&lt;?php echo set_value("exact_text_field"); ?&gt;" size="30" /&gt;&lt;/div&gt;&lt;div&gt;&lt;div class="field_title"&gt;Text Field Five (Alphabets only)&lt;/div&gt;&lt;input type="text" name="alphabets_text_field" value="&lt;?php echo set_value("alphabets_text_field"); ?&gt;" size="30" /&gt;&lt;/div&gt;&lt;div&gt;&lt;div class="field_title"&gt;Text Field Six (Alphanumeric only)&lt;/div&gt;&lt;input type="text" name="alphanumeric_text_field" value="&lt;?php echo set_value("alphanumeric_text_field"); ?&gt;" size="30" /&gt;&lt;/div&gt;&lt;div&gt;&lt;div class="field_title"&gt;Email Field&lt;/div&gt;&lt;input type="text" name="valid_email_field" value="&lt;?php echo set_value("valid_email_field"); ?&gt;" size="30" /&gt;&lt;/div&gt;&lt;div&gt;&lt;div class="field_title"&gt;Password Field&lt;/div&gt;&lt;input type="password" name="password_field" value="" size="30" /&gt;&lt;/div&gt;&lt;div&gt;&lt;div class="field_title"&gt;Password Confirmation Field&lt;/div&gt;&lt;input type="password" name="password_confirmation_field" value="" size="30" /&gt;&lt;/div&gt;&lt;div&gt;&lt;div class="field_title"&gt;IP Field&lt;/div&gt;&lt;input type="text" name="valid_ip_field" value="&lt;?php echo set_value("valid_ip_field"); ?&gt;" size="30" /&gt;&lt;/div&gt;&lt;div class="field_title"&gt;&lt;input type="submit" value="Submit" /&gt;&lt;/div&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;</pre><p>С помощью этой настройки вы должны увидеть форму при открытии <span>http://your-codeigniter-site/validation/basic</span> в своем браузере. Попробуйте отправить форму без заполнения каких-либо полей, и вы увидите список сообщений об ошибках! Не беспокойтесь, если вы не понимаете, как это работает, поскольку мы подробно рассмотрим каждый фрагмент кода.</p><p>История начинается с метода <code class="inline">__construct</code>.</p><pre class="brush: php noskimlinks noskimwords">public function __construct() {    parent::__construct();        // load form and url helpers    $this-&gt;load-&gt;helper(array("form", "url"));          // load form_validation library    $this-&gt;load-&gt;library("form_validation");}</pre><p>Я всегда предпочитаю загружать общие библиотеки и помощники в конструкторе самого контроллера, так как это хорошая привычка избегать дублирования кода в другом месте в методах контроллера. Это именно то, что мы сделали выше - мы загружаем помощники <code class="inline">form</code> и <code class="inline">url</code>, чтобы мы могли использовать методы утилиты, предоставляемые этими помощниками во всей остальной части приложения.</p><p>Затем мы загружаем библиотеку валидации формы, чтобы она позволяла нам связывать правила проверки формы с элементами формы, как мы увидим в следующем разделе.</p><p>Давайте рассмотрим код метода <code class="inline">basic</code>. Что делает этот метод? Если вы вызовете его с помощью метода <code class="inline">GET</code>, он отобразит форму и, если он был вызван с использованием метода <code class="inline">POST</code>, он применяет правила проверки представленных данных и отображает сообщения об ошибках, если они есть, вместе с формой.</p><pre class="brush: php noskimlinks noskimwords">public function basic(){// basic required field$this-&gt;form_validation-&gt;set_rules("text_field", "Text Field One", "required");// basic required field with minimum length$this-&gt;form_validation-&gt;set_rules("min_text_field", "Text Field Two", "required|min_length[8]");// basic required field with maximum length$this-&gt;form_validation-&gt;set_rules("max_text_field", "Text Field Three", "required|max_length[20]");// basic required field with exact length$this-&gt;form_validation-&gt;set_rules("exact_text_field", "Text Field Four", "required|exact_length[12]");// basic required field but alphabets only$this-&gt;form_validation-&gt;set_rules("alphabets_text_field", "Text Field Five", "required|alpha");// basic required field but alphanumeric only$this-&gt;form_validation-&gt;set_rules("alphanumeric_text_field", "Text Field Six", "required|alpha_numeric");// basic email field with email validation$this-&gt;form_validation-&gt;set_rules("valid_email_field", "Email Field", "required|valid_email");// password field with confirmation field matching$this-&gt;form_validation-&gt;set_rules("password_field", "Password One", "required");$this-&gt;form_validation-&gt;set_rules("password_confirmation_field", "Password Confirmation Field", "required|matches[password_field]");// basic required field with IPv4 validation$this-&gt;form_validation-&gt;set_rules("valid_ip_field", "Valid IP Field", "required|valid_ip[ipv4]");if ($this-&gt;form_validation-&gt;run() == FALSE){$this-&gt;load-&gt;view("validate_form");}else{// load success template...echo "It"s all Good!";}}</pre><p>Поскольку мы уже загрузили библиотеку валидации формы в конструкторе, вы можете получить к ней доступ, используя соглашение <code class="inline">$this-&gt;form_validation</code>.</p><p>Метод <code class="inline">set_rules</code> используется для привязки правила проверки к полю формы. Как правило, это три аргумента:</p><ul><li>Первый аргумент - это имя поля формы.</li> <li>Второй аргумент - это метка, которая используется для ссылки на поле формы при отображении сообщения об ошибке для этого поля.</li> <li>Третий аргумент - это правило, которое вы хотите применить к полю формы. Библиотека валидации формы содержит множество встроенных правил, которые вы могли бы использовать.</li> </ul><p>Давайте рассмотрим некоторые из этих правил, поскольку уже мы использовали их в основном методе.</p><p>Одним из наиболее часто используемых правил является правило <code class="inline">required</code>, которое делает поле формы обязательным.</p><pre class="brush: php noskimlinks noskimwords">// basic required field$this-&gt;form_validation-&gt;set_rules("text_field", "Text Field One", "required");</pre><p>Затем, если вы хотите создать поле формы определенной длины, вы можете использовать правила <code class="inline">min_length</code> и <code class="inline">max_length</code>.</p><pre class="brush: php noskimlinks noskimwords">// basic required field with minimum length$this-&gt;form_validation-&gt;set_rules("min_text_field", "Text Field Two", "required|min_length[8]");      // basic required field with maximum length$this-&gt;form_validation-&gt;set_rules("max_text_field", "Text Field Three", "required|max_length[20]");</pre><p>Первый гарантирует, что поле формы <code class="inline">min_text_field</code> является обязательным полем, и пользователь должен ввести по меньшей мере восемь символов в нем. Второй ограничивает максимальные символы, которые можно ввести в текстовое поле <code class="inline">max_text_field</code>, в дополнение к тому, чтобы сделать это обязательным полем.</p><p>Возможно, вы заметили, что мы использовали оператор <code class="inline">|</code> для одновременного применения нескольких правил. Это называется каскадом, и мы вернемся к нему позже.</p><p>С другой стороны, если вы хотите создать поле формы с точной длиной, вы можете использовать правило <code class="inline">exact_length</code>.</p><pre class="brush: php noskimlinks noskimwords">// basic required field with exact length$this-&gt;form_validation-&gt;set_rules("exact_text_field", "Text Field Four", "required|exact_length[12]");</pre><p>Что делать, если вы хотите проверить поле формы только на алфавит или буквенно-цифровые символы?</p><pre class="brush: php noskimlinks noskimwords">// basic required field but alphabets only$this-&gt;form_validation-&gt;set_rules("alphabets_text_field", "Text Field Five", "required|alpha");      // basic required field but alphanumeric only$this-&gt;form_validation-&gt;set_rules("alphanumeric_text_field", "Text Field Six", "required|alpha_numeric");</pre><p>Следующим кандидатом является проверка подлинности электронной почты.</p><pre class="brush: php noskimlinks noskimwords">// basic email field with email validation$this-&gt;form_validation-&gt;set_rules("valid_email_field", "Email Field", "required|valid_email");</pre><p>Затем правило <code class="inline">matches</code> позволяет сравнить значение поля формы с значением другого поля этой формы. Лучшим примером этого является поле пароля, которое должно совпадать с полем подтверждения пароля при отправке формы.</p><pre class="brush: php noskimlinks noskimwords">// password field with confirmation field matching rule$this-&gt;form_validation-&gt;set_rules("password_field", "Password One", "required");$this-&gt;form_validation-&gt;set_rules("password_confirmation_field", "Password Confirmation Field", "required|matches[password_field]");</pre><p>Последний пример нашего базового метода - это проверка IP-адреса.</p><p>Правило <code class="inline">valid_ip</code> проверяет IP-адрес на первый переданный аргумент. В следующем примере мы только ищем IP-адреса ipv4!</p><pre class="brush: php noskimlinks noskimwords">// basic required field with IPv4 validation$this-&gt;form_validation-&gt;set_rules("valid_ip_field", "Valid IP Field", "required|valid_ip[ipv4]");</pre><p>Это то что это касается базовой валидации в CodeIgniter.</p><h2>Как работает каскадирование и предварительная подготовка</h2><p>В этом разделе мы рассмотрим каскадирование и предварительную подготовку, которые позволят вам объединить несколько правил проверки в один проход.</p><p>Фактически, я бы сказал, что мы полностью использовали каскадирование в наших предыдущих примерах. Вспомните, про оператор tube, который использовался для объединения нескольких правил - и да, так называемых каскадных правил валидации.</p><p>Возьмите код метода <code class="inline">cascade</code>.</p><pre class="brush: php noskimlinks noskimwords">public function cascade(){// basic required field with cascaded rules$this-&gt;form_validation-&gt;set_rules("text_field", "Text Field One", "required|alpha|min_length[8]|max_length[20]"); if ($this-&gt;form_validation-&gt;run() == FALSE){$this-&gt;load-&gt;view("validate_form");}else{// load success template...echo "It"s all Good!";}}</pre><p>Как показано в примере выше, мы применили четыре правила валидации, разделенные символом оператора <code class="inline">|</code> к текстовому полю <code class="inline">text_field</code>. Поэтому в этом случае необходимо пройти каждое правило для проверки правильности формы!</p><p>Попробуйте и посмотрите, как это работает!</p><p>Затем есть предварительная подготовка, которая позволяет вам применять определенные операции над данными, которые отправляются. Чаще всего вы хотите удалить ведущие и конечные пробелы в представленных пользователем данных. Вероятно, первое, что приходит вам на ум в этом случае, - это использовать функцию trim, и хорошая новость заключается в том, что вы можете ее использовать!</p><p>Это именно то, что делает наш метод prep.</p><pre class="brush: php noskimlinks noskimwords">public function prep(){// basic required field with trim prepping applied$this-&gt;form_validation-&gt;set_rules("min_text_field", "Text Field Two", "trim|required|min_length[8]");if ($this-&gt;form_validation-&gt;run() == FALSE){$this-&gt;load-&gt;view("validate_form");}else{// load success template...echo "It"s all Good!";}}</pre><p>Как вы можете видеть, мы использовали слово <code class="inline">trim</code> в дополнение к правилам проверки. Таким образом, данные сначала обрезаются, а затем будут проходить другие правила валидации. Фактически, вы можете использовать любую функцию PHP, которая принимает один аргумент в соответствии с документацией CodeIgniter.</p><p>Попробуйте запустить наш пример, добавив несколько конечных пробелов и посмотрите, как это работает.</p><h2>Настройка сообщений об ошибках</h2><p>Если у вас была возможность запустить приведенные выше примеры, вы, возможно, заметили, что сообщения об ошибках, отображаемые пользователю, довольно систематичны и сгенерированы машиной. Возможно, вы хотите быть более креативными и менять их в определенных случаях.</p><p>Давайте посмотрим, как вы можете изменить сообщение об ошибке для любого правила проверки. Измение код метода <code class="inline">custom_message</code>.</p><pre class="brush: php noskimlinks noskimwords">public function custom_message(){    // field with custom error message$this-&gt;form_validation-&gt;set_rules("alphabets_text_field", "Text Field Five", "required|alpha",  array("required"=&gt;"Please enter Text Field Five!","alpha"=&gt;"Only alphabets please!"));if ($this-&gt;form_validation-&gt;run() == FALSE){$this-&gt;load-&gt;view("validate_form");}else{// load success template...echo "It"s all Good!";}}</pre><p>Обратите внимание на четвертый аргумент, предоставленный методу <code class="inline">set_rules</code>. Он содержит массив настраиваемых сообщений проверки для каждого правила проверки, а ключ каждого элемента массива - это правило валидации.</p><pre class="brush: php noskimlinks noskimwords">array(    "required"=&gt;"Please enter Text Field Five!",    "alpha"=&gt;"Only alphabets please!")</pre><p>Попробуйте, и вы должны увидеть наши сообщения об ошибках! Довольно круто, не так ли?</p><h2>Пользовательские колбэки валидации</h2><p>Хотя встроенная библиотека валидации уже содержит несколько правил, часто в своей повседневной работе бывает необходимо создать пользовательское правило. Это именно то, что мы обсудим в этом разделе.</p><p>Чтобы продемонстрировать это, мы создадим специальный обратный вызов валидации, а позже мы увидим, как его использовать вместе с методом <code class="inline">set_rules</code>.</p><p>Для начала давайте быстро рассмотрим метод <code class="inline">custom_rule</code>.</p><pre class="brush: php noskimlinks noskimwords">public function custom_rule(){    // field with custom validation callback passed$this-&gt;form_validation-&gt;set_rules("text_field", "Text Field Five", "callback_custom_validation");if ($this-&gt;form_validation-&gt;run() == FALSE){$this-&gt;load-&gt;view("validate_form");}else{// load success template...echo "It"s all Good!";}}</pre><p>Это ничем не отличается от обычного вызова метода <code class="inline">set_rules</code>, за исключением того, что мы предоставили <code class="inline">custom_validation</code>, а не какое-либо правило. Важно отметить, что вам нужно использовать префикс пользовательского запроса проверки валидации с помощью <code class="inline">callback_</code>, когда вы передаете его в качестве аргумента.</p><p>Затем давайте внедрим обратный вызов для проверки валидации.</p><pre class="brush: php noskimlinks noskimwords">public function custom_validation($field_value) {if ($field_value == "" || $field_value == "demo"){$this-&gt;form_validation-&gt;set_message("custom_validation", "Come on, don"t act like spammer!");return FALSE;}else{return TRUE;}}</pre><p>Когда вызывается обратный вызов, значение, введенное пользователем, будет передано в качестве первого аргумента. Таким образом, переменная <code class="inline">$field_value</code> содержит значение, введенное пользователем, для которого вы можете реализовать свою собственную логику валидации.</p><p>В приведенном выше примере вы должны увидеть сообщение об ошибке, если вы вводите пустое значение или <code class="inline">demo</code> в текстовое поле <code class="inline">Text Field Five</code>. Важно отметить, что когда вы устанавливаете сообщение об ошибке с помощью метода <code class="inline">set_message</code>, первым аргументом является имя самого метода обратного вызова собственной проверки.</p><p>И это была история пользовательских колбэков для валидации.</p><p>И последнее, но не менее важное: это конфигурация валидации, которая заслуживает некоторого внимания, когда мы продвигаемся к завершению этой статьи.</p><h2>Конфигурация валидации</h2><p>Как разработчик CodeIgniter, вы уже должны быть знакомы с каталогом <code class="inline">config</code>, который позволяет вам настроить различные аспекты вашего приложения CodeIgniter.</p><p>Например, <code class="inline">database.php</code> позволяет вам определять параметры, связанные с базой данных, в то время как <code class="inline">autoload.php</code> позволяет вам определять компоненты, которые должны быть автоматически загружены во время начальной загрузки приложения.</p><p>Точно так же вы можете создать файл <code class="inline">form_validation.php </code>в каталоге <code class="inline">config</code> и использовать этот файл для определения правил проверки на уровне приложения, которые можно использовать глобально. Если это звучит вам чуждо, нет лучшего способа понять это, чем на самом деле смотреть на практический пример.</p><p>Создайте файл <code class="inline">application/config/form_validation.php</code> со следующим содержимым.</p><pre class="brush: php noskimlinks noskimwords">&lt;?php$config = array(    array(        "field" =&gt; "text_field",        "label" =&gt; "Text Field One",        "rules" =&gt; "required"    ),    array(        "field" =&gt; "min_text_field",        "label" =&gt; "Text Field Two",        "rules" =&gt; "required|min_length[8]"    ),    array(        "field" =&gt; "max_text_field",        "label" =&gt; "Text Field Three",        "rules" =&gt; "required|max_length[20]"    ));</pre><p>Теперь давайте быстро посмотрим, как выглядит наш метод <code class="inline">configuration</code>.</p><pre class="brush: php noskimlinks noskimwords">public function configuration(){    // if you pass group id, only elements in that group will be validated    // $this-&gt;form_validation-&gt;run("group_one")    if ($this-&gt;form_validation-&gt;run() == FALSE)    {    $this-&gt;load-&gt;view("validate_form");    }    else    {    // load success template...    echo "It"s all Good!";    }}</pre><p>Попробуйте запустить <span>http://your-codeigniter-site/validation/configuration</span> и отправьте пустую форму. Вы увидите сообщения об ошибках для трех полей формы! Но подождите, откуда они берутся, поскольку мы не установили какие-либо правила проверки в нашем методе configuration?</p><p>Внимательные читатели уже заметили, что они автоматически извлекаются из файла конфигурации валидации, определенного в <code class="inline">application/config/form_validation.php</code>. Разве это не удивительно? Это позволяет централизовать правила в одном месте и уменьшает дублирование кода в методах действий.</p><p>Фактически, вы можете сгруппировать правила и применить валидацию к полям только определенной группы. Давайте посмотрим, как это сделать.</p><p>Замените код в <code class="inline">application/config/form_validation.php</code> следующим.</p><pre class="brush: php noskimlinks noskimwords">&lt;?php$config = array(    "group_one" =&gt; array(        array(            "field" =&gt; "text_field",            "label" =&gt; "Text Field One",            "rules" =&gt; "required"        )    ),    "group_two" =&gt; array(        array(            "field" =&gt; "min_text_field",            "label" =&gt; "Text Field Two",            "rules" =&gt; "required|min_length[8]"        ),        array(            "field" =&gt; "max_text_field",            "label" =&gt; "Text Field Three",            "rules" =&gt; "required|max_length[20]"        )    ));</pre><p>В вашем методе <code class="inline">configuration</code> найдите следующую строку:</p><pre class="brush: php noskimlinks noskimwords">if ($this-&gt;form_validation-&gt;run() == FALSE)</pre><p>И замените его на:</p><pre class="brush: php noskimlinks noskimwords">if ($this-&gt;form_validation-&gt;run("group_one") == FALSE)</pre><p>Теперь попробуйте отправить пустую форму, и вы увидите ошибку только для <code class="inline">Text Field One</code>. Это потому, что мы передали <code class="inline">group_one</code> как идентификатор группы, поэтому будут провалидированы только элементы из этой группы.</p><p>Наконец, давайте посмотрим на тип конфигурации, который позволяет вам определять правила на основе URL.</p><p>Замените код в <code class="inline">application/config/form_validation.php</code> следующим.</p><pre class="brush: php noskimlinks noskimwords">$config = array(    "validation/configuration" =&gt; array(        array(            "field" =&gt; "max_text_field",            "label" =&gt; "Text Field Three",            "rules" =&gt; "required|max_length[20]"        )    ));</pre><p>В этом типе конфигурации вам нужно использовать комбинацию имени контроллера и имени метода, разделенного символом <code class="inline">/</code>. Таким образом, вы можете сразу определить правила для нескольких методов действий.</p><p>Теперь вы должны увидеть сообщение об ошибке для <code class="inline">Text Field Three</code>, если вы попытаетесь отправить пустую форму по адресу <span>http://your-codeigniter-site/validation/configuration</span>.</p><p>И на этом история настройки валидации заканчивается!</p><h2>Заключение</h2><p>В этой статье мы подробно обсудили валидацию формы в CodeIgniter. </p><p>Мы начали наше путешествие с основных правил валидации, а затем перешли к более продвинутым темам, таким как каскадирование, предварительная подготовка и конфигурация валидации.</p><p>Надеюсь, вам понравилась эта статья, и вы можете поделиться своими ценными идеями в обратной связи ниже.<br></p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824940-validatsiya-formy-v-codeigniter-ot-nachala-do-kontsa" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="CodeIgniter" href="https://norma-studio.github.io/article/220824940-validatsiya-formy-v-codeigniter-ot-nachala-do-kontsa" class="tm-article-body__tags-item-link">CodeIgniter</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
33984</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
547</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
