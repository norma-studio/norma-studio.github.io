
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Как написать контекстное меню выделенного текста... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Как написать контекстное меню выделенного текста... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Как написать контекстное меню выделенного текста... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Как написать контекстное меню выделенного текста... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="В этом уроке мы узнаем, как создать так называемое «контекстное меню обмена». Этот интерфейс предполагает вывод меню, которое позволяет читателям поделиться страницей, цитируя выделенный текст. Вы сможете найти аналогичный интерфейс на нескольких популярных сайтах, таких как Medium....">
<meta property="og:description" content="В этом уроке мы узнаем, как создать так называемое «контекстное меню обмена». Этот интерфейс предполагает вывод меню, которое позволяет читателям поделиться страницей, цитируя выделенный текст. Вы сможете найти аналогичный интерфейс на нескольких популярных сайтах, таких как Medium....">
<meta name="twitter:description" content="В этом уроке мы узнаем, как создать так называемое «контекстное меню обмена». Этот интерфейс предполагает вывод меню, которое позволяет читателям поделиться страницей, цитируя выделенный текст. Вы сможете найти аналогичный интерфейс на нескольких популярных сайтах, таких как Medium....">
<meta property="aiturec:description" content="В этом уроке мы узнаем, как создать так называемое «контекстное меню обмена». Этот интерфейс предполагает вывод меню, которое позволяет читателям поделиться страницей, цитируя выделенный текст. Вы сможете найти аналогичный интерфейс на нескольких популярных сайтах, таких как Medium....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=800/uploads/users/69/posts/26933/image/inline-sharing-button-medium.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=800/uploads/users/69/posts/26933/image/inline-sharing-button-medium.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=800/uploads/users/69/posts/26933/image/inline-sharing-button-medium.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=800/uploads/users/69/posts/26933/image/inline-sharing-button-medium.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=800/uploads/users/69/posts/26933/image/inline-sharing-button-medium.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824319-kak-napisat-kontekstnoe-menyu-vydelennogo-teksta.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824319-kak-napisat-kontekstnoe-menyu-vydelennogo-teksta.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824319-kak-napisat-kontekstnoe-menyu-vydelennogo-teksta.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824319-kak-napisat-kontekstnoe-menyu-vydelennogo-teksta.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824319-kak-napisat-kontekstnoe-menyu-vydelennogo-teksta.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824319-kak-napisat-kontekstnoe-menyu-vydelennogo-teksta.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824319-kak-napisat-kontekstnoe-menyu-vydelennogo-teksta.html" title="Как написать контекстное меню выделенного текста... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Как написать контекстное меню выделенного текста... | envatomarket.ru | norma-studio.github.io" title="Как написать контекстное меню выделенного текста... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/636536435.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824319-kak-napisat-kontekstnoe-menyu-vydelennogo-teksta.html" class="tm-user-info__username" title="
С. Торгашев" aria-label="
С. Торгашев">
С. Торгашев</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Как написать контекстное меню выделенного текста...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Web Design" href="https://norma-studio.github.io/article/220824319-kak-napisat-kontekstnoe-menyu-vydelennogo-teksta" class="tm-article-snippet__hubs-item-link"><span>Web Design</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="UI Design" href="https://norma-studio.github.io/article/220824319-kak-napisat-kontekstnoe-menyu-vydelennogo-teksta" class="tm-article-snippet__hubs-item-link"><span>UI Design</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824319-kak-napisat-kontekstnoe-menyu-vydelennogo-teksta.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=800/uploads/users/69/posts/26933/image/inline-sharing-button-medium.jpg">
    <meta itemprop="headline name" content="Как написать контекстное меню выделенного текста... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="В этом уроке мы узнаем, как создать так называемое «контекстное меню обмена». Этот интерфейс предполагает вывод меню, которое позволяет читателям поделиться страницей, цитируя выделенный текст. Вы сможете найти аналогичный интерфейс на нескольких популярных сайтах, таких как Medium....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">В этом уроке мы узнаем, как создать так называемое «контекстное меню обмена». Этот интерфейс предполагает вывод меню, которое позволяет читателям поделиться страницей, цитируя выделенный текст. Вы сможете найти аналогичный интерфейс на нескольких популярных сайтах, таких как Medium....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>В этом уроке мы узнаем, как создать так называемое «контекстное меню обмена». Этот интерфейс предполагает вывод меню, которое позволяет читателям поделиться страницей, цитируя выделенный текст. Вы сможете найти аналогичный интерфейс на нескольких популярных сайтах, таких как <span>Medium</span>.</p><p>Прежде чем мы начнем создание нашего меню, мы рассмотрим более подробно, как этот же интерфейс работает у Medium, в частности выясним когда и как оно позиционируется по отношению к выделенной области. Это полезный шаг, который даст нам правильное техническое понимание, в конечном итоге также подскажет, каким образом мы будем писать наш собственный код.</p><p>Поехали!</p><h2>Анализ интерфейса Medium</h2><p>На следующем изображении мы видим, что меню обмена в Medium появляется в центре выделенного текста, независимо от его длины, выбираем ли мы только одно слово, предложение или весь абзац.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=800/uploads/users/69/posts/26933/image/inline-sharing-button-medium.jpg" alt="Как написать контекстное меню выделенного текста..." title="Как написать контекстное меню выделенного текста..." width="50" height="50"><figcaption>Контекстное меню обмена пользовательского интерфейса Medium </figcaption></figure><p>Если взглянуть, что находится под капотом через инструменты разработчика браузера Chrome, мы заметим, что положение меню определяется через свойства <code>top</code> и <code>left</code> встроенного стиля элемента. Мы можем заметить, что кнопка "поделиться" также имеет дополнительный класс-<em>модификатор</em> <code>highlightMenu--active</code>, который делает его видимым.</p><p><strong>Примечание:</strong> Если вы еще не знакомы с терминами <em>модификатор</em>, <em>блок</em> и <em>элемент</em>, вам стоит посмотреть вот этот более ранний урок: <span>введение в методологию БЭМ</span>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=800/uploads/users/69/posts/26933/image/inline-sharing-button-medium-position.jpg" alt="Как написать контекстное меню выделенного текста..." title="Как написать контекстное меню выделенного текста..." width="50" height="50"><figcaption>Стили, которые определяют положение контекстного меню в Medium</figcaption></figure><p>На вкладке <strong>Стили</strong> мы видим, что начальное положение устанавливается с помощью CSS через абсолютное позиционирование (<code>absolute</code>), значение <code>z-index</code> для поднятия выше других элементов на странице, свойство <code>top</code> и свойство <code>visibility</code> для вывода кнопок меню за пределы видимой зоны.</p><p>Таким образом, нам нужно будет:</p><ol><li>Получить длину выделенной области, чтобы мы могли определить центральную точку выделения.</li> <li>Создать модификатор, который будет отображать элемент.</li> <li>Установить позицию меню через свойства <code>top</code> и <code>left</code>, добавленные с помощью встроенных стилей.</li> </ol><h2>Создаем контекстное меню </h2><p>В этом примере, мы будем использовать кнопки Facebook и Twitter в нашем меню. Мы используем значки Facebook и Twitter в формате SVG, завернутые в тег <code>button</code> и несколько элементов <code>div</code>. Кроме того, как вы можете видеть из следующего фрагмента, мы также добавили элемент <code>span</code> для отображения треугольника в нижней части меню.</p><pre class="brush: html noskimlinks noskimwords">&lt;div class="sharing"&gt;    &lt;div class="sharing__buttons"&gt;        &lt;button id="share" title="Share"&gt;            &lt;svg class="icon icon--facebook" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512; width: 24px; height: 24px" xml:space="preserve"&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;g&gt;&lt;path d="M426.8,64H85.2C73.5,64,64,73.5,64,85.2l0,341.6c0,11.7,9.5,21.2,21.2,21.2H256V296h-45.9v-56H256v-41.4 c0-49.6,34.4-76.6,78.7-76.6c21.2,0,44,1.6,49.3,2.3v51.8l-35.3,0c-24.1,0-28.7,11.4-28.7,28.2V240h57.4l-7.5,56H320v152h106.8 c11.7,0,21.2-9.5,21.2-21.2V85.2C448,73.5,438.5,64,426.8,64z"/&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;        &lt;/button&gt;        &lt;button id="tweet" title="Tweet"&gt;            &lt;svg class="icon icon--twitter" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512; width: 24px; height: 24px" xml:space="preserve"&gt;&lt;path d="M492,109.5c-17.4,7.7-36,12.9-55.6,15.3c20-12,35.4-31,42.6-53.6c-18.7,11.1-39.4,19.2-61.5,23.5                C399.8,75.8,374.6,64,346.8,64c-53.5,0-96.8,43.4-96.8,96.9c0,7.6,0.8,15,2.5,22.1c-80.5-4-151.9-42.6-199.6-101.3                c-8.3,14.3-13.1,31-13.1,48.7c0,33.6,17.2,63.3,43.2,80.7C67,210.7,52,206.3,39,199c0,0.4,0,0.8,0,1.2c0,47,33.4,86.1,77.7,95c-8.1,2.2-16.7,3.4-25.5,3.4c-6.2,0-12.3-0.6-18.2-1.8c12.3,38.5,48.1,66.5,90.5,67.3c-33.1,26-74.9,41.5-120.3,41.5                c-7.8,0-15.5-0.5-23.1-1.4C62.8,432,113.7,448,168.3,448C346.6,448,444,300.3,444,172.2c0-4.2-0.1-8.4-0.3-12.5                C462.6,146,479,129,492,109.5z"/&gt;            &lt;/svg&gt;        &lt;/button&gt;    &lt;/div&gt;    &lt;span class="sharing__triangle"&gt;&lt;/span&gt;&lt;/div&gt;</pre><p>Не существует определенного правила по поводу цвета и формы меню; не стесняйтесь стилизовать меню так, чтобы оно соответствовало дизайну вашего сайта. Стоит обратить внимание на размер кнопок - их высоту и ширину. Наше меню, как вы можете видеть ниже, <code>84px</code> в ширину и <code>40px</code> в высоту. Позже мы будем использовать эти два значения для размещения меню в центре выделенной области.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=800/uploads/users/69/posts/26933/image/inline-sharing-button-size.jpg" alt="Как написать контекстное меню выделенного текста..." title="Как написать контекстное меню выделенного текста..." width="50" height="50"></figure><p>Стили, которые определяют начальное положение и видимость.</p><pre class="brush: css noskimlinks noskimwords">.sharing {  position: absolute;visibility: hidden;top: 0;left: 0;z-index: 500;}</pre><p>И наконец, класс, который мы добавляем, чтобы сделать кнопки меню видимыми.</p><pre class="brush: css noskimlinks noskimwords">.sharing--shown {visibility: visible;}</pre><h2>Делаем контекстное меню функциональным</h2><p>На данный момент наше контекстное меню не должно быть видимым на странице. Кроме того, когда мы нажмем кнопку Twitter или Facebook, не видно, чтобы появилось диалоговое окно "поделиться". В этом разделе, мы будем писать JavaScript код, чтобы сделать наши кнопки функциональными. И мы начинаем с функции <code>getHighlight()</code>.</p><pre class="brush: javascript noskimlinks noskimwords">function getHighlight() {    var selection = window.getSelection(); // 1.    var object = {parent : null,text   : "",rect   : null    };// If selection is not empty.    if ( selection.rangeCount &gt; 0 ) {        object = {            text   : selection.toString().trim(), // get the text.            parent : selection.anchorNode.parentNode, // get the element wrapping the text.            rect   : selection.getRangeAt(0).getBoundingClientRect() // get the bounding box.        };    }    return object; // 2.}</pre><p>Эта функция служит для:</p><ul><li>Получения выделенной области с помощью встроенной функции JavaScript <code>getSelection()</code>.</li> <li>Возвращения объекта, содержащего выделенный текст, элемент, в котором находится текст и объект прямоугольника выбранной области, который содержит ее размер, а также ее позицию — <code>top</code>, <code>bottom</code>, <code>left</code> и <code>right</code> — в пределах страницы.</li> </ul><p>Наша следующая функция называется <code>showMenu()</code>. Как и предполагает название, эта функция будет выводить меню.</p><pre class="brush: javascript noskimlinks noskimwords">var sharing = document.querySelector( ".sharing" );function showMenu() {// 1.    var highlight = getHighlight();// 2.    if ( highlight.text === "" ) {        sharing.setAttribute( "class", "sharing" );        sharing.style.left = 0;        sharing.style.top  = 0;        return;    }// 3./** * Only show the sharing button if the selected is a paragraph. */    if ( highlight.parent.nodeName !== "P" ) {        return;    }// 4.    var width = ( highlight.rect.width / 2 ) - 42;    /**     * The "42" is acquired from our sharing buttons width devided by 2.     */    sharing.setAttribute( "class", "sharing sharing--shown" );sharing.style.left = ( highlight.rect.left + width ) + "px";sharing.style.top  = ( highlight.rect.top - 40 ) + "px";/** * "40" is the height of our sharing buttons. * Herein, we lift it up above the higlighted area top position. */}</pre><p>В частности код в этой функции выполняет следующие действия:</p><ol><li>Получает объект из функции <code>getHighlighted()</code>.</li> <li>Скрывает меню и возвращает его в исходное положение, когда выделенная область является пустой и не содержит текста.</li> <li>Предотвращает появление кнопок, если выделенный текст не находится в пределах абзаца.</li> <li>Наконец, задает позицию через значения <code>top</code> и <code>left</code>  и добавляет класс <code>sharing--show</code>, чтобы сделать видимыми кнопки обмена. Я также добавил несколько строк комментариев, описывающих, откуда берутся некоторые из определяемых значений.</li> </ol><p>Мы будем считать, что большинство пользователей используют мышь, чтобы выделять содержимое в Интернете, таким образом мы можем привязать эту функцию к событию <code>mouseup</code>. Мобильные устройства обычно имеют свои собственные контекстные меню на выделение текста, поэтому в данном уроке мы сделаем упор на веб-сайтах.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/30/posts/26933/image/ios.png" alt="Как написать контекстное меню выделенного текста..." title="Как написать контекстное меню выделенного текста..." width="50" height="50"><figcaption>Выделение текста в Safari iOS</figcaption></figure><p>Мы устанавливаем задержку исполнения на <code>100ms</code> с помощью функции <code>setTimeout()</code>, чтобы быть уверенным в точном завершении выделения.</p><pre class="brush: javascript noskimlinks noskimwords">document.body.addEventListener( "mouseup", function() {     setTimeout( showMenu, 100 );} );</pre><p>Наша последняя функция, <code>openShareWindow()</code>, отвечает за запуск окна обмена при нажатии кнопки в меню. В этом уроке мы будем главным образом использовать это окно для того, чтобы поделиться в Twitter, поскольку Facebook имеет свой собственный <span>JavaScript SDK</span>.</p><pre class="brush: javascript noskimlinks noskimwords">function openShareWindow( url, w, h ) {var screenLeft = window.screenLeft !== undefined ? window.screenLeft : screen.left;var screenTop = window.screenTop !== undefined ? window.screenTop : screen.top;var width = window.innerWidth ? window.innerWidth : doc.documentElement.clientWidth ? doc.documentElement.clientWidth : screen.width;var height = window.innerHeight ? window.innerHeight : doc.documentElement.clientHeight ? doc.documentElement.clientHeight : screen.height;var left = ( ( width / 2 ) - ( w / 2 ) ) + screenLeft;var top = ( ( height / 2 ) - ( h / 2 ) ) + screenTop;var newWin = window.open( url, "", "scrollbars=no,width=" + w + ",height=" + h + ",top=" + top + ",left=" + left );if ( newWin ) {newWin.focus();}}</pre><h3>Клик...Клик...</h3><p>Далее мы привязываем событие <code>click</code> кнопок обмена к функции, которая запускает окно "поделиться".</p><pre class="brush: javascript noskimlinks noskimwords">// Facebook.document.getElementById( "share" ).addEventListener( "click", function() {    var highlight = getHighlight();    if ( highlight.text !== "" &amp;&amp; highlight.parent.nodeName === "P" ) {        FB.ui({            method : "share",            mobile_iframe: true,            href   : "http://bitly.com/2aiHmCs",            quote  : highlight.text // pass the text as Quote        });    }    event.preventDefault();} );</pre><p>Для кнопки Facebook мы используем Facebook JavaScript SDK. SDK позволяет нам передать текст для отображения в окне "поделиться" через параметр <code>quote</code>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=800/uploads/users/69/posts/26933/image/inline-sharing-button-facebook-window.jpg" alt="Как написать контекстное меню выделенного текста..." title="Как написать контекстное меню выделенного текста..." width="50" height="50"></figure><p>Twitter не предоставляет такой же JavaScript SDK. Так что, мы используем нашу функцию, <code>openShareWindow()</code> и передаем URL-адрес, отформатированный в соответствии с <span>их правилами</span>, а также передаем размер окна.</p><pre class="brush: javascript noskimlinks noskimwords">document.getElementById( "tweet" ).addEventListener( "click", function() {    var highlight = getHighlight();    if ( highlight.text !== "" &amp;&amp; highlight.parent.nodeName === "P" ) {        var docURL = encodeURIComponent( "http://bitly.com/2aiHmCs" );        var tweetText = encodeURIComponent( highlight.text );        var tweetURL = "https://twitter.com/intent/tweet?via=wdtuts&amp;url=" + docURL + "&amp;text=" + tweetText;        openShareWindow( tweetURL, 600, 420 );    }    event.preventDefault();} );</pre><p>Когда мы нажмите на кнопку обмена Twitter, должно запуститься окно, которое выглядит вот так.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=800/uploads/users/69/posts/26933/image/inline-sharing-button-twitter-window.jpg" alt="Как написать контекстное меню выделенного текста..." title="Как написать контекстное меню выделенного текста..." width="50" height="50"></figure><h2>Подводя итоги</h2><p>Наше контекстное меню обмена полностью готово! <span>Посмотрите этот пример</span>, чтобы увидеть его в действии, там же вы найдете исходный код, содержащий функции в полном объеме. Далее вы можете улучшить контекстное меню, добавив переходы или анимацию, чтобы сделать его использование более увлекательным.</p><h3>Дополнительные ресурсы</h3><p>Существует несколько библиотек API JavaScript, которые мы использовали в работе нашего контекстного меню. Некоторые из них были упомянуты в предыдущих уроках на Envato Tuts+, в то время как другие могут быть совершенно новым для вас. Так что дополню этот урок некоторыми ссылками.<br></p><ul><li><span>BEM: Блок элемент модификатор, введение</span></li> <li><span>Facebook JavaScript SDK</span></li> <li><span>Плагин Facebook — Quote</span></li> <li><span>Twitter Web Intent URL</span></li> <li><span>Selection Web API</span></li> <li><span>Range Web API</span></li> <li><span>Encode URL Component</span></li> <li><span>«Копировать в буфер обмена» c легкостью, используя Clipboard.js</span></li> </ul>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Web Design" href="https://norma-studio.github.io/article/220824319-kak-napisat-kontekstnoe-menyu-vydelennogo-teksta" class="tm-article-body__tags-item-link">Web Design</a></span><span class="tm-article-body__tags-item"><a aria-label="UI Design" href="https://norma-studio.github.io/article/220824319-kak-napisat-kontekstnoe-menyu-vydelennogo-teksta" class="tm-article-body__tags-item-link">UI Design</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
43196</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
606</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
