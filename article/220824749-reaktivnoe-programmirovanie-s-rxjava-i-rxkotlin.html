
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Реактивное программирование с RxJava и RxKotlin... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Реактивное программирование с RxJava и RxKotlin... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Реактивное программирование с RxJava и RxKotlin... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Реактивное программирование с RxJava и RxKotlin... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="С тех пор, как стал официально поддерживаемым языком для
разработки Android, Kotlin быстро завоевал популярность среди разработчиковAndroid, и Google сообщает о 6-кратном увеличении приложений, созданных с помощью Kotlin....">
<meta property="og:description" content="С тех пор, как стал официально поддерживаемым языком для
разработки Android, Kotlin быстро завоевал популярность среди разработчиковAndroid, и Google сообщает о 6-кратном увеличении приложений, созданных с помощью Kotlin....">
<meta name="twitter:description" content="С тех пор, как стал официально поддерживаемым языком для
разработки Android, Kotlin быстро завоевал популярность среди разработчиковAndroid, и Google сообщает о 6-кратном увеличении приложений, созданных с помощью Kotlin....">
<meta property="aiturec:description" content="С тех пор, как стал официально поддерживаемым языком для
разработки Android, Kotlin быстро завоевал популярность среди разработчиковAndroid, и Google сообщает о 6-кратном увеличении приложений, созданных с помощью Kotlin....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/769/posts/28345/preview_image/Getting-Started-RxJava-2.0-for-Android.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/769/posts/28345/preview_image/Getting-Started-RxJava-2.0-for-Android.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/769/posts/28345/preview_image/Getting-Started-RxJava-2.0-for-Android.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/769/posts/28345/preview_image/Getting-Started-RxJava-2.0-for-Android.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/769/posts/28345/preview_image/Getting-Started-RxJava-2.0-for-Android.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824749-reaktivnoe-programmirovanie-s-rxjava-i-rxkotlin.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824749-reaktivnoe-programmirovanie-s-rxjava-i-rxkotlin.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824749-reaktivnoe-programmirovanie-s-rxjava-i-rxkotlin.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824749-reaktivnoe-programmirovanie-s-rxjava-i-rxkotlin.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824749-reaktivnoe-programmirovanie-s-rxjava-i-rxkotlin.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824749-reaktivnoe-programmirovanie-s-rxjava-i-rxkotlin.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824749-reaktivnoe-programmirovanie-s-rxjava-i-rxkotlin.html" title="Реактивное программирование с RxJava и RxKotlin... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Реактивное программирование с RxJava и RxKotlin... | envatomarket.ru | norma-studio.github.io" title="Реактивное программирование с RxJava и RxKotlin... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/e_09402063.jpg" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824749-reaktivnoe-programmirovanie-s-rxjava-i-rxkotlin.html" class="tm-user-info__username" title="
А. Карпов" aria-label="
А. Карпов">
А. Карпов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Реактивное программирование с RxJava и RxKotlin...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824749-reaktivnoe-programmirovanie-s-rxjava-i-rxkotlin" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Android SDK" href="https://norma-studio.github.io/article/220824749-reaktivnoe-programmirovanie-s-rxjava-i-rxkotlin" class="tm-article-snippet__hubs-item-link"><span>Android SDK</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824749-reaktivnoe-programmirovanie-s-rxjava-i-rxkotlin.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/769/posts/28345/preview_image/Getting-Started-RxJava-2.0-for-Android.jpg">
    <meta itemprop="headline name" content="Реактивное программирование с RxJava и RxKotlin... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="С тех пор, как стал официально поддерживаемым языком для
разработки Android, Kotlin быстро завоевал популярность среди разработчиковAndroid, и Google сообщает о 6-кратном увеличении приложений, созданных с помощью Kotlin....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">С тех пор, как стал официально поддерживаемым языком для
разработки Android, Kotlin быстро завоевал популярность среди разработчиковAndroid, и Google сообщает о 6-кратном увеличении приложений, созданных с помощью Kotlin....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>С тех пор, как стал официально поддерживаемым языком дляразработки Android, Kotlin быстро завоевал популярность среди разработчиковAndroid, и Google сообщает о <span>6-кратном увеличении</span> приложений, созданных с помощью Kotlin.</p><p>Если вы ранее использовали RxJava или RxAndroid и хотите переключиться на Kotlin или хотите начать реактивное программирование с Kotlin,этот учебник для вас. Мы рассмотрим основные вопросы создания RxJava 2.0 <code class="inline">Observers</code>, <code class="inline">Observables</code> и потоков данных в Kotlin, прежде чем смотреть на то, как вы можете обрезать тонны кода шаблона из своих проектов, путем объединенияRxJava с функциями Kotlin.</p><p>Использование RxJava с Kotlin может помочь вам создаватьвысокореактивные приложения в меньшем количестве кодов, но языкпрограммирования не идеален, поэтому я также буду обмениваться обходнымрешением проблемы конверсии SAM, с которой сталкиваются многие разработчики,когда они впервые начинают использовать RxJava 2.0 с Kotlin.</p><p>Чтобы обернуть все, мы создадим приложение, демонстрирующее,как вы можете использовать RxJava для решения некоторых проблем, с которыми высталкиваетесь в реальных проектах Android.</p><p>Если вы первый раз пробуете RxJava, то по пути я также будупредоставлять всю справочную информацию, необходимую для понимания основных концепций RxJava. Даже если вы никогда не экспериментировали с RxJava раньше, в конце этой статьи вы будете иметь четкое представление о том, как использовать эту библиотеку в своих проектах, <em>и </em>вы создали несколько рабочих приложений,используя RxJava, RxKotlin, RxAndroid и RxBinding.</p><h3>Что такое RxJava, во всех случаях?</h3><p>RxJava - это реализация библиотеки ReactiveX с открытымисходным кодом, которая помогает создавать приложения в стиле реактивногопрограммирования. Хотя RxJava предназначен для обработки синхронных иасинхронных потоков данных, он не ограничивается «традиционными» типами данных. Определение «данных» RxJava довольно широко и включает такиевещи, как кеши, переменные, свойства и даже пользовательские события ввода,такие как щелчки и нажатия. Просто потому, что ваше приложение не имеет дело согромными числами или выполняет сложные преобразования данных, это не значит,что он не может извлечь выгоду из RxJava!</p><p>За небольшим опытом использования приложений RxJava дляAndroid вы можете ознакомиться с некоторыми другими моими сообщениями здесь, наEnvato Tuts +.</p><ul class="roundup-block__contents posts--half-width roundup-block--list"><li class="roundup-block__content"><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/769/posts/28345/preview_image/Getting-Started-RxJava-2.0-for-Android.jpg" alt="Реактивное программирование с RxJava и RxKotlin..." title="Реактивное программирование с RxJava и RxKotlin..." width="50" height="50"><div class="roundup-block__primary-category topic-code">Android SDK</div> <div class="roundup-block__content-title">Начало работы с RxJava 2 для Android</div> <div class="roundup-block__author">Jessica Thornsby</div></span></li> <li class="roundup-block__content"><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/369/posts/28565/preview_image/RxJava-RxAndroid-Introducing-RxBinding-and-RxLifecycle.jpg" alt="Реактивное программирование с RxJava и RxKotlin..." title="Реактивное программирование с RxJava и RxKotlin..." width="50" height="50"><div class="roundup-block__primary-category topic-code">Android SDK</div> <div class="roundup-block__content-title">RxJava 2 для Android-приложений: RxBinding и RxLifecycle</div> <div class="roundup-block__author">Jessica Thornsby</div></span></li> </ul><p>Итак, как работает RxJava?</p><p>RxJava расширяет шаблон разработки программного обеспеченияObserver, основанный на концепции наблюдателей и наблюдаемых. Чтобы создатьбазовый конвейер данных RxJava, вам необходимо:</p><ul><li>Создать наблюдаемый.</li> <li> Дайте наблюдаемым некоторые данные для выделения. </li> <li>Создайте наблюдателя.</li> <li>Подписывайте Наблюдателя в Наблюдаемого.</li> </ul><p>Как только Observable имеет хотя бы одного наблюдаемого, онначнет выпускать данные. Каждый раз, когда Observable испускает часть данных, онуведомляет об этом назначенного Observer, вызывая метод <code class="inline">onNext()</code>, и Observerзатем обычно выполняет некоторые действия в ответ на эту эмиссию данных. Как только Observable закончит выдавать данные, он уведомитObserver, вызвав <code class="inline">onComplete()</code>. После этого Observable завершит работу, и поток данных завершится.</p><p>Если возникает исключение, тогда вызывается <code class="inline">onError()</code>, иObservable будет немедленно завершен без каких-либо дополнительных данных или вызова <code class="inline">onComplete()</code>.</p><p>Но RxJava - это не <em>просто </em>передача данных из Observable вObserver! RxJava имеет <span>огромную коллекцию операторов</span>, которую вы можете использовать для фильтрации, слияния и преобразования этих данных. Например, представьте себе, что в вашем приложении естькнопка «<strong>Оплатить сейчас</strong>», которая определяет события <code class="inline">onClick</code>, и вы опасаетесь,что нетерпеливый пользователь может нажать кнопку несколько раз, в результате чего ваше приложение обработает несколько платежей. </p><p>RxJava позволяет преобразовывать эти события <code class="inline">onClick</code> в потокданных, который затем можно манипулировать с помощью различных операторовRxJava. В этом конкретном примере вы можете использовать оператор <code class="inline">debounce()</code>для фильтрации данных, которые происходят в быстрой последовательности,поэтому, даже если пользователь нажимает на кнопку «<strong>Оплатить сейчас</strong>», ваше приложение будет регистрировать только на один платеж.</p><h3>Каковы преимущества использования RxJava?</h3><p>Мы видели, как RxJava может помочь вам решить определеннуюпроблему в конкретном приложении, но что он должен предлагать проектам Androidв целом?</p><p>RxJava может упростить ваш код, предоставив вам способнаписать то, что вы хотите достичь, вместо того, чтобы писать списокинструкций, которые должны выполнять ваше приложение. Например, если вы хотитеигнорировать все данные, которые происходят в течение одного и того же500-миллисекундного периода, тогда вы должны написать:</p><pre class="brush: java noskimlinks noskimwords">.debounce(500, TimeUnit.MILLISECONDS)</pre><p>Кроме того, поскольку RxJava обрабатывает <em>почти все</em> какданные, он предоставляет шаблон, который вы можете применить к широкому спектру событий: создать Observable, создать Observer, подписать Observer к наблюдаемому, проверить и повторить. Этот формульный подход дает гораздо более простой, удобочитаемый код.</p><p>Другим важным преимуществом для разработчиков Androidявляется то, что RxJava может сильно пострадать от много поточности на Android.Сегодняшние мобильные пользователи ожидают, что их приложения смогут бытьмногозадачными, даже если это так просто, как загрузка данных в фоновом режиме,оставаясь при этом зависящей от пользовательского ввода.</p><p>Android имеет несколько встроенных решений для создания иуправления несколькими потоками, но ни один из них не прост в реализации, и онимогут быстро привести к сложному коду, который трудно читать и которыйподвержен ошибкам.</p><p>В RxJava вы создаете и управляете дополнительными потоками,используя комбинацию операторов и планировщиков. Вы можете легко изменить поток, в котором выполняетсяработа, используя оператор <code class="inline">subscribeOn</code> плюс планировщик. Например, здесь мы планируем работу над новым потоком:</p><pre class="brush: java noskimlinks noskimwords">.subscribeOn(Schedulers.newThread())</pre><p>Вы можете указать, где результаты этой работы должны бытьопубликованы, используя оператор <code class="inline">observOn</code>. Здесь мы публикуем результаты для всего важного основного потока пользовательского интерфейса Android, используя планировщик <code class="inline">AndroidSchedulers.mainThread</code>, который доступен как часть библиотекиRxAndroid:</p><pre class="brush: java noskimlinks noskimwords">.observeOn(AndroidSchedulers.mainThread())</pre><p>По сравнению с встроенными многопоточными решениями Android,подход RxJava <em>гораздо </em>более краток и понятен.</p><p>Опять же, вы можете узнать больше о том, как работаетRxJava, и о преимуществах добавления этой библиотеки в ваш проект в статье«<span>Начало работы с RxJava 2 для Android</span>».</p><h3>Должен ли я использовать RxJava или RxKotlin?</h3><p>Поскольку Kotlin на 100% совместим с Java, вы можете использоватьбольшинство библиотек Java в своих проектах Kotlin без каких-либо трудностей, абиблиотека RxJava не является исключением.</p><p><em>Существует </em>специальная <span>библиотека RxKotlin</span>, котораяпредставляет собой обертку Kotlin вокруг обычной библиотеки RxJava. Эта оболочка предоставляет расширения, которые оптимизируют RxJava для среды Kotlinи могут дополнительно уменьшить количество кода шаблона, который вам нужно написать.</p><p>Поскольку вы можете использовать RxJava в Kotlin, не требуяRxKotlin, мы будем использовать RxJava в этой статье, если не указано иное.</p><h2>Создание простых наблюдателей и наблюдаемых в Kotlin</h2><p>Наблюдатели и наблюдаемые являются строительными блокамиRxJava, поэтому давайте начнем с создания:</p><ul><li>Простой Observable, который испускает короткий поток данныхв ответ на событие нажатия кнопки.</li> <li>Наблюдаемый, который реагирует на эти данные, печатаяразличные сообщения в <strong>Logcat </strong>Android Studio.</li> </ul><p>Создайте новый проект с настройками по вашему выбору, но припоявлении запроса установите флажок <strong>Включить поддержку Kotlin</strong>. Затем откройте файл <strong>build.gradle</strong> вашего проекта и добавьте библиотеку RxJava в зависимости от проекта:</p><pre class="brush: xml noskimlinks noskimwords">dependencies {  implementation fileTree(dir: "libs", include: ["*.jar"])  implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"  implementation "androidx.appcompat:appcompat:1.0.0-alpha1"  implementation "androidx.constraintlayout:constraintlayout:1.1.0"  implementation "io.reactivex.rxjava2:rxjava:2.1.9"}</pre><p>Затем откройте файл <strong>activity_main.xml</strong> вашего проекта идобавьте кнопку, которая начнет поток данных:</p><pre class="brush: xml noskimlinks noskimwords">&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  xmlns:tools="http://schemas.android.com/tools"  android:layout_width="match_parent"  android:layout_height="match_parent"  android:orientation="vertical"  tools:context=".MainActivity" &gt;  &lt;Button      android:id="@+id/button"      android:layout_width="wrap_content"      android:layout_height="wrap_content"      android:text="Start RxJava stream" /&gt;&lt;/LinearLayout&gt;</pre><p>Существует несколько способов создания Observable, но однимиз самых простых является использование оператора <code class="inline">just()</code> для преобразования объекта или списка объектов в Observable.</p><p>В следующем коде мы создаем Observable (<code class="inline">myObservable</code>) и даемему элементы 1, 2, 3, 4 и 5 для выдиления. Мы также создаем Observer(<code class="inline">myObserver</code>), подписываемся на <code class="inline">myObservable</code>, а затем сообщаем ему печатать сообщение Logcat каждый раз, когда он получает новую эмиссию.</p><pre class="brush: java noskimlinks noskimwords">import androidx.appcompat.app.AppCompatActivityimport android.os.Bundleimport android.util.Logimport io.reactivex.Observableimport io.reactivex.Observerimport io.reactivex.disposables.Disposableimport kotlinx.android.synthetic.main.activity_main.*class MainActivity : AppCompatActivity() {  private var TAG = "MainActivity"  override fun onCreate(savedInstanceState: Bundle?) {      super.onCreate(savedInstanceState)      setContentView(R.layout.activity_main)//Start the stream when the button is clicked//      button.setOnClickListener { startRStream() }  }  private fun startRStream() {//Create an Observable//      val myObservable = getObservable()//Create an Observer//      val myObserver = getObserver()//Subscribe myObserver to myObservable//      myObservable              .subscribe(myObserver)  }  private fun getObserver(): Observer&lt;String&gt; {      return object : Observer&lt;String&gt; {          override fun onSubscribe(d: Disposable) {          }//Every time onNext is called, print the value to Android Studio’s Logcat//          override fun onNext(s: String) {              Log.d(TAG, "onNext: $s")          }//Called if an exception is thrown//          override fun onError(e: Throwable) {              Log.e(TAG, "onError: " + e.message)          }//When onComplete is called, print the following to Logcat//          override fun onComplete() {              Log.d(TAG, "onComplete")          }      }  }//Give myObservable some data to emit//  private fun getObservable(): Observable&lt;String&gt; {      return Observable.just("1", "2", "3", "4", "5")  }}</pre><p>Теперь вы можете проверить это приложение:</p><ul><li>Установите свой проект на физическом Android-смартфоне илипланшете или виртуальном устройстве Android (AVD).</li> <li>Нажмите на <strong>Start RxJava stream</strong></li> <li>Откройте монитор Logcat для Android Studio, выбрав вкладку«<strong>Монитор Android</strong>» (где курсор расположен на следующем снимке экрана), а затем выберите вкладку «<strong>Logcat</strong>».</li> </ul><p>На этом этапе Observable начнет выдавать свои данные, иObserver будет печатать свои сообщения в Logcat. Вывод Logcat должен выглядетьпримерно так:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/369/posts/31577/image/reactive-android-rxjava-kotlin-android-studio-logcat.png" alt="Реактивное программирование с RxJava и RxKotlin..." title="Реактивное программирование с RxJava и RxKotlin..." width="50" height="50"></figure><p>Вы можете <span>загрузить этот проект из GitHub</span>, если хотитепопробовать его сами.</p><h2>Kotlin Extensions для RxJava</h2><p>Теперь, когда мы увидели, как настроить простойRxJava-конвейер в Kotlin, давайте посмотрим, как вы можете добиться этого в<em>меньшем коде</em>, используя функции расширения RxKotlin.</p><p>Чтобы использовать библиотеку RxKotlin, вам нужно добавитьее как зависимость от проекта:</p><pre class="brush: xml noskimlinks noskimwords">dependencies {  implementation fileTree(dir: "libs", include: ["*.jar"])  implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"  implementation "androidx.appcompat:appcompat:1.0.0-alpha1"  implementation "androidx.constraintlayout:constraintlayout:1.1.0"  implementation "io.reactivex.rxjava2:rxjava:2.1.9"//Add the following//  implementation "io.reactivex.rxjava2:rxkotlin:2.2.0"}</pre><p>В следующем примере мы используем функцию расширения<code class="inline">RxKotlin toObservable()</code> для преобразования <code class="inline">List </code>в наблюдаемый. Мы такжеиспользуем функцию расширения <code class="inline">subscribeBy()</code>, поскольку она позволяет нампостроить Observer с использованием именованных аргументов, что приводит кболее четкому коду.</p><pre class="brush: java noskimlinks noskimwords">import android.os.Bundleimport androidx.appcompat.app.AppCompatActivityimport io.reactivex.rxkotlin.subscribeByimport io.reactivex.rxkotlin.toObservableimport kotlinx.android.synthetic.main.activity_main.*class MainActivity : AppCompatActivity() {  override fun onCreate(savedInstanceState: Bundle?) {      super.onCreate(savedInstanceState)      setContentView(R.layout.activity_main)//Start the stream when the button is clicked//      button.setOnClickListener { startRStream() }  }  private fun startRStream() {      val list = listOf("1", "2", "3", "4", "5")//Apply the toObservable() extension function//      list.toObservable()//Construct your Observer using the subscribeBy() extension function//              .subscribeBy(                      onNext = { println(it) },                      onError = { it.printStackTrace() },                      onComplete = { println("onComplete!") }              )  }}</pre><p>Вот результат, который вы должны увидеть:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/369/posts/31577/image/creating-observables-with-rxkotlin.png" alt="Реактивное программирование с RxJava и RxKotlin..." title="Реактивное программирование с RxJava и RxKotlin..." width="50" height="50"></figure><h3>Решение проблемы неоднозначности SAM RxJava</h3><p>RxKotlin также обеспечивает важное обходное решение для<span>проблемы с преобразованием SAM</span>, которое может возникать при наличии несколькихперегрузок параметров SAM для данного метода Java. Эта двусмысленность SAMсмущает компилятор Kotlin, поскольку он не может решить, какой интерфейс ондолжен преобразовать, и ваш проект не сможет получить результат.</p><p>Эта двусмысленность SAM является особой проблемой прииспользовании RxJava 2.0 с Kotlin, так как многие операторы RxJava принимаютнесколько SAM-совместимых типов.</p><p>Давайте рассмотрим проблему преобразования SAM в действии. Вследующем коде мы используем оператор <code class="inline">zip()</code> для объединения вывода двухнаблюдаемых: </p><pre class="brush: java noskimlinks noskimwords">import androidx.appcompat.app.AppCompatActivityimport android.os.Bundleimport io.reactivex.Observableimport kotlinx.android.synthetic.main.activity_main.*class MainActivity : AppCompatActivity() {  override fun onCreate(savedInstanceState: Bundle?) {      super.onCreate(savedInstanceState)      setContentView(R.layout.activity_main)//Start the stream when the button is clicked//      button.setOnClickListener { startRStream() }        }  private fun startRStream() {      val numbers = Observable.range(1, 6)      val strings = Observable.just("One", "Two", "Three",              "Four", "Five", "Six" )      val zipped = Observable.zip(strings, numbers) { s, n -&gt; "$s $n" }      zipped.subscribe(::println)  }}</pre><p>Это заставит компилятор Kotlin сбросить ошибку вывода типа.Однако RxKotlin предоставляет вспомогательные методы и функции расширения длязатронутых операторов, включая <code class="inline">Observables.zip()</code>, которые мы используем вследующем коде:</p><pre class="brush: java noskimlinks noskimwords">import android.os.Bundleimport androidx.appcompat.app.AppCompatActivityimport io.reactivex.Observableimport io.reactivex.rxkotlin.Observablesimport kotlinx.android.synthetic.main.activity_main.*class MainActivity : AppCompatActivity() {  override fun onCreate(savedInstanceState: Bundle?) {      super.onCreate(savedInstanceState)      setContentView(R.layout.activity_main)//Start the stream when the button is clicked//      button.setOnClickListener { startRStream() }  }  private fun startRStream() {      val numbers = Observable.range(1, 6)      val strings = Observable.just("One", "Two", "Three",              "Four", "Five", "Six" )      val zipped = Observables.zip(strings, numbers) { s, n -&gt; "$s $n" }      zipped.subscribe(::println)  }}</pre><p>Вот результат этого кода:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/369/posts/31577/image/solving-rxjava-sam-ambiguity-issue.png" alt="Реактивное программирование с RxJava и RxKotlin..." title="Реактивное программирование с RxJava и RxKotlin..." width="50" height="50"></figure><h2>Заключение</h2><p>В этом уроке я показал вам, как начать использоватьбиблиотеку RxJava в проектах Kotlin, в том числе с использованием рядадополнительных поддерживающих библиотек, таких как RxKotlin и RxBinding. Мырассмотрели, как вы можете создавать простые наблюдатели и наблюдаемых в RxKotlin, чтобы оптимизировать RxJava для платформыKotlin, используя функции расширения.<br></p><p>До сих пор мы использовали RxJava для создания простыхObservables, которые излучают данные, и наблюдателей, которые печатают этиданные в Logcat Android Studio, но это не то, как вы будете использовать RxJavaв реальном мире!</p><p>В следующем посте мы рассмотрим, как RxJava может помочьрешить реальные проблемы, с которыми вы столкнетесь при разработке приложенийдля Android. Мы будем использовать RxJava с Kotlin для создания классическогоэкрана <strong>регистрации</strong>.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824749-reaktivnoe-programmirovanie-s-rxjava-i-rxkotlin" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Android SDK" href="https://norma-studio.github.io/article/220824749-reaktivnoe-programmirovanie-s-rxjava-i-rxkotlin" class="tm-article-body__tags-item-link">Android SDK</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
37110</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
564</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
