
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Постоянные уведомления администратора WordPress: часть 4... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Постоянные уведомления администратора WordPress: часть 4... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Постоянные уведомления администратора WordPress: часть 4... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Постоянные уведомления администратора WordPress: часть 4... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="До сих пор в этой серии мы рассмотрели два отдельных способа уклонения от постоянных уведомлений администратора WordPress. Мы опишем это в этой четвертой и заключительной части серии учебников, рассмотрев еще два конкретных метода, чтобы навсегда убрать уведомления администратора. Мы покажем, как создавать собственные пользовательские типы уведомле...">
<meta property="og:description" content="До сих пор в этой серии мы рассмотрели два отдельных способа уклонения от постоянных уведомлений администратора WordPress. Мы опишем это в этой четвертой и заключительной части серии учебников, рассмотрев еще два конкретных метода, чтобы навсегда убрать уведомления администратора. Мы покажем, как создавать собственные пользовательские типы уведомле...">
<meta name="twitter:description" content="До сих пор в этой серии мы рассмотрели два отдельных способа уклонения от постоянных уведомлений администратора WordPress. Мы опишем это в этой четвертой и заключительной части серии учебников, рассмотрев еще два конкретных метода, чтобы навсегда убрать уведомления администратора. Мы покажем, как создавать собственные пользовательские типы уведомле...">
<meta property="aiturec:description" content="До сих пор в этой серии мы рассмотрели два отдельных способа уклонения от постоянных уведомлений администратора WordPress. Мы опишем это в этой четвертой и заключительной части серии учебников, рассмотрев еще два конкретных метода, чтобы навсегда убрать уведомления администратора. Мы покажем, как создавать собственные пользовательские типы уведомле...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/30137/image/4.1.png">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/30137/image/4.1.png">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/30137/image/4.1.png">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/30137/image/4.1.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/30137/image/4.1.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824816-postoyannye-uvedomleniya-administratora-wordpress-chast-4.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824816-postoyannye-uvedomleniya-administratora-wordpress-chast-4.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824816-postoyannye-uvedomleniya-administratora-wordpress-chast-4.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824816-postoyannye-uvedomleniya-administratora-wordpress-chast-4.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824816-postoyannye-uvedomleniya-administratora-wordpress-chast-4.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824816-postoyannye-uvedomleniya-administratora-wordpress-chast-4.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824816-postoyannye-uvedomleniya-administratora-wordpress-chast-4.html" title="Постоянные уведомления администратора WordPress: часть 4... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Постоянные уведомления администратора WordPress: часть 4... | envatomarket.ru | norma-studio.github.io" title="Постоянные уведомления администратора WordPress: часть 4... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/636536435.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824816-postoyannye-uvedomleniya-administratora-wordpress-chast-4.html" class="tm-user-info__username" title="
С. Торгашев" aria-label="
С. Торгашев">
С. Торгашев</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Постоянные уведомления администратора WordPress: часть 4...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824816-postoyannye-uvedomleniya-administratora-wordpress-chast-4" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="WordPress" href="https://norma-studio.github.io/article/220824816-postoyannye-uvedomleniya-administratora-wordpress-chast-4" class="tm-article-snippet__hubs-item-link"><span>WordPress</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824816-postoyannye-uvedomleniya-administratora-wordpress-chast-4.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/30137/image/4.1.png">
    <meta itemprop="headline name" content="Постоянные уведомления администратора WordPress: часть 4... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="До сих пор в этой серии мы рассмотрели два отдельных способа уклонения от постоянных уведомлений администратора WordPress. Мы опишем это в этой четвертой и заключительной части серии учебников, рассмотрев еще два конкретных метода, чтобы навсегда убрать уведомления администратора. Мы покажем, как создавать собственные пользовательские типы уведомле...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">До сих пор в этой серии мы рассмотрели два отдельных способа уклонения от постоянных уведомлений администратора WordPress. Мы опишем это в этой четвертой и заключительной части серии учебников, рассмотрев еще два конкретных метода, чтобы навсегда убрать уведомления администратора. Мы покажем, как создавать собственные пользовательские типы уведомле...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>До сих пор в этой серии мы рассмотрели два отдельных способа уклонения от постоянных уведомлений администратора WordPress. Мы опишем это в этой четвертой и заключительной части серии учебников, рассмотрев еще два конкретных метода, чтобы навсегда убрать уведомления администратора. Мы покажем, как создавать собственные пользовательские типы уведомлений и добавлять украшения, такие как значки.<br></p><h2>Прикрепленное уведомление администратора<br></h2><p>Мы уже знаем, как отображать уведомление администратора, которое может быть отклонено. Все, что нам нужно сделать, это добавить CSS класс <code class="inline">is-dismissible</code> к элементу div. Тем не менее, это только временное действие, и будет отклонять уведомление только для текущей страницы. Как только страница перезагружается, оно снова появляется.<br></p><p>Чтобы сделать его устраняемым навсегда, требуется больше кода, чем мы видели до сих пор, но его не так сложно реализовать. Давайте посмотрим поближе, как это делается.<br></p><p>Мы будем использовать пользовательский параметр для сохранения статуса отображения нашего уведомления администратора. При активации плагина эта опция будет создана/обновлена и установлена в значение true. Уведомление администратора будет отображаться только в том случае, если параметр в настоящий момент равен true.</p><p>Ключом к этому методу является использование Ajax, чтобы мы могли установить значение false при нажатии кнопки отклонения. После успешной установки значения false, условное выражение, которое проверяет статус параметра, завершится с ошибкой, и уведомление администратора больше не будет отображаться.<br></p><p>Начнем с добавления самого уведомления администратора, которое представляет собой уведомление простого типа. В <code class="inline">Gwyer_Dismissible_Admin_Notices::init()</code> добавьте новый вызов <code class="inline">add_action</code>:</p><pre class="brush: php noskimlinks noskimwords">add_action( "admin_notices", array( $this, "dismiss_admin_notice" ) );</pre><p>Затем добавьте функцию обратного вызова <code class="inline">reject_admin_notice()</code> в тот же класс:</p><pre class="brush: php noskimlinks noskimwords">public function dismiss_admin_notice() {    $whitelist_admin_pages = array( "settings_page_admin-notices/plugin-options" );    $admin_page = get_current_screen();    if( in_array( $admin_page-&gt;base, $whitelist_admin_pages ) ) :    ?&gt;    &lt;div id="an1" class="updated notice is-dismissible"&gt;        &lt;p&gt;Dismiss me, if you can. Ha ha ha!&lt;/p&gt;    &lt;/div&gt;    &lt;?php    endif;}</pre><p>Это добавляет уведомление администратора, которое отображается только на странице администрирования плагина и очень похоже на то, что мы видели в предыдущих уроках. Единственное небольшое отличие здесь заключается в том, что мы также добавили идентификатор CSS ID в контейнер уведомления <code class="inline">div</code>. Это будет использоваться, чтобы специально привлечь внимание администратора.<br></p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/30137/image/4.1.png" alt="Постоянные уведомления администратора WordPress: часть 4..." title="Постоянные уведомления администратора WordPress: часть 4..." width="50" height="50"></figure><p>Нам нужно добавить код JavaScript, чтобы сделать вызов Ajax, поэтому добавьте папку <code class="inline">js</code> в корневую папку плагина <code class="inline">admin-notices</code> и внутри создайте файл с именем <code class="inline">admin-notices.js</code>. Добавьте код в новый файл, чтобы проверить его правильную загрузку, выводя консольное сообщение.</p><pre class="brush: javascript noskimlinks noskimwords">jQuery(document).ready(function($) {    console.log( "admin-notices.js loaded!" );});</pre><p>В <code class="inline">Gwyer_Plugin_Options::init()</code> добавьте новый вызов <code class="inline">add_action</code> для размещения нашего файла скрипта:</p><pre class="brush: php noskimlinks noskimwords">add_action( "admin_enqueue_scripts", array( $this, "enqueue_scripts" ) );</pre><p>Мы хотим, чтобы этот файл JavaScript был загружен на странице параметров плагина, поэтому нам нужен способ загружать его по условию. Мы можем сделать это, проверив, какую страницу администрирования мы сейчас просматриваем, чтобы увидеть, является ли это страницей параметров плагина.</p><p>Мы можем получить доступ к нашей странице параметров плагина, сохранив возвращаемое значение <code class="inline">add_options_page()</code> в свойстве класса. Мы не нуждались в этом значении ранее, поэтому мы просто вызвали <code class="inline">add_options_page()</code> без сохранения возвращаемого значения.</p><p>Добавьте свойство класса в <code class="inline">Gwyer_Plugin_Options</code>:</p><pre class="brush: php noskimlinks noskimwords">protected $plugin_options_page;</pre><p>Затем в <code class="inline">create_admin_menu_page()</code> используйте это новое свойство, чтобы сохранить дескриптор на странице параметров плагина:</p><pre class="brush: php noskimlinks noskimwords">public function create_admin_menu_page() {    $this-&gt;plugin_options_page = add_options_page(      "Admin Notices",      "Admin Notices",      "manage_options",      __FILE__,      array( $this, "render_options_page" )    );}</pre><p>Наконец, мы можем поставить в очередь наш файл JavaScript, чтобы он загружался только на странице параметров плагина:</p><pre class="brush: php noskimlinks noskimwords">public function enqueue_scripts($hook) {  if( $hook != $this-&gt;plugin_options_page ) {    return;  }  wp_enqueue_script(    "gwyer-admin-notice-js",    plugin_dir_url( __FILE__ ) . "js/admin-notices.js"  );}</pre><p>Если все пойдет хорошо, вы увидите сообщение <strong>admin-notices.js загружен!</strong>, выводимое на консоль браузера.<br></p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/30137/image/4.2.png" alt="Постоянные уведомления администратора WordPress: часть 4..." title="Постоянные уведомления администратора WordPress: часть 4..." width="50" height="50"></figure><p>Обновите код JavaScript в <code class="inline">admin-notices.php</code> следующим образом:</p><pre class="brush: javascript noskimlinks noskimwords">jQuery(document).ready(function($) {    $(document).on("click", "#an1 .notice-dismiss", function( event ) {        data = {            action : "display_dismissible_admin_notice",        };    $.post(ajaxurl, data, function (response) {            console.log(response, "DONE!");        });    });});</pre><p>Здесь мы слушаем событие click на ID <code class="inline">an1</code>, который мы добавили в наше уведомление администратора ранее. Как только элемент нажимается, выполняется запрос Ajax. Давайте рассмотрим следующий запрос.<br></p><p>В <code class="inline">Gwyer_Dismissible_Admin_Notices::init()</code> добавьте новый вызов <code class="inline">add_action</code>:</p><pre class="brush: php noskimlinks noskimwords">add_action( "wp_ajax_display_dismissible_admin_notice", array( &amp;$this, "display_dismissible_admin_notice" ) );</pre><p>Это запустит функцию обратного вызова после срабатывания Ajax запроса <code class="inline">display_dismissible_admin_notice</code>. Помните, что это первоначально было определено как свойство <code class="inline">data.action</code> в нашем запросе Ajax.<br></p><p>Теперь добавьте функцию обратного вызова <code class="inline">display_dismissible_admin_notice</code> в <code class="inline">Gwyer_Dismissible_Admin_Notices</code>:</p><pre class="brush: php noskimlinks noskimwords">public function display_dismissible_admin_notice() {    echo "Processing Ajax request...";    wp_die();}</pre><p>Сохраните изменения, перезагрузите страницу параметров плагина и нажмите кнопку отмены уведомления администратора, чтобы увидеть запрос Ajax в действии!<br></p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/30137/image/4.3.png" alt="Постоянные уведомления администратора WordPress: часть 4..." title="Постоянные уведомления администратора WordPress: часть 4..." width="50" height="50"></figure><p>Если запрос был успешным, вы увидите сообщение <strong>Processing Ajax request... DONE!</strong>, отображенное в консоли браузера.</p><p>Заключительная часть головоломки состоит в том, чтобы создать настраиваемую опцию, первоначально установленную в true, но которая затем устанавливается в false при нажатии кнопки отклонения. Затем, когда загружается страница параметров плагина, уведомление администратора отображается только в том случае, если значение настраиваемой опции равно true.</p><p>В <code class="inline">Gwyer_Dismissible_Admin_Notices::init()</code> добавьте второй вызов <code class="inline">register_activation_hook()</code>:</p><pre class="brush: php noskimlinks noskimwords">register_activation_hook(  plugin_dir_path( __FILE__ ) . "admin-notices.php", array( $this, "create_custom_option" ) );</pre><p>И добавьте функцию обратного вызова <code class="inline">create_custom_option</code> в класс:</p><pre class="brush: php noskimlinks noskimwords">public function create_custom_option() {    update_option( "gwyer-dismiss", true );}</pre><p>Теперь, когда активируется плагин, создается пользовательская опция <code class="inline">gwyer-reject</code> и устанавливается в <code class="inline">true</code>.<br></p><p>Обновите <code class="inline">display_dismissible_admin_notice()</code>, чтобы обновить пользовательскую опцию при срабатывании запроса Ajax:</p><pre class="brush: php noskimlinks noskimwords">public function display_dismissible_admin_notice() {    update_option( "gwyer-dismiss", false );    wp_die();}</pre><p>Теперь все, что осталось сделать, это обновить  <code class="inline">update_download_admin_notice()</code>, чтобы проверить значение настраиваемой опции и вывести уведомление администратора, только если оно установлено в true.</p><pre class="brush: php noskimlinks noskimwords">public function dismiss_admin_notice() {    $whitelist_admin_pages = array( "settings_page_admin-notices/plugin-options" );    $admin_page = get_current_screen();    $display_status = get_option( "gwyer-dismiss" );    if( in_array( $admin_page-&gt;base, $whitelist_admin_pages ) &amp;&amp; $display_status  ) :        ?&gt;        &lt;div id="an1" class="updated notice is-dismissible"&gt;            &lt;p&gt;Dismiss me, if you can. Ha ha ha!&lt;/p&gt;        &lt;/div&gt;        &lt;?php    endif;}</pre><p>Деактивируйте и активируйте плагин, чтобы проверить добавленный код. Перейдите на страницу параметров плагина, отклоните уведомление администратора и обновите страницу. Уведомление больше не должно быть видимым. Ура!<br></p><p>Поскольку для каждой настраиваемой опции каждый раз, когда активируется плагин, пользовательский параметр устанавливается равным true, вы можете повторить описанные выше шаги, чтобы проверить доступное уведомление администратора столько раз, сколько захотите.</p><p>Чтобы все было просто, это был тривиальный пример использования запроса Ajax для установки опции пользовательского уведомления. На практике вам следует использовать значение <span>nonce</span> (число, используемое один раз) для <span>проверки запроса Ajax</span> как минимальной меры безопасности.</p><p>Проделана большая работа, только чтобы навсегда отменить уведомление администратора, но окончательный функционал работает хорошо. И вы можете использовать его в своих собственных плагинах.</p><h2>Уведомление о запрете пользовательского действия</h2><p>Пришло время взглянуть на несколько иной способ отклонения уведомлений администратора. Это тип уведомления администратора, который отображается на всех экранах администратора и не может быть отклонен до тех пор, пока не будут выполнены какие-либо действия.<br></p><p><em>Примечание: Используйте этот метод с осторожностью или вы рискуете быстро оттолкнуть пользователей своих плагинов!</em><br></p><p>Конкретное действие, на котором мы сосредоточимся в нашем примере, будет отображать уведомление администратора до тех пор, пока не будет установлен и активирован требуемый плагин или список плагинов.</p><p>В отличие от предыдущего метода, когда нам приходилось плясать с бубном, чтобы сделать уведомление администратора отклоняемым навсегда, решение для этого метода является приятно простым!</p><p>Во-первых, закомментируйте все вызовы функций в <code class="inline">Gwyer_Dismissible_Admin_Notices::init()</code>. Затем добавьте новую функцию <code class="inline">add_action()</code>:</p><pre class="brush: php noskimlinks noskimwords">add_action( "admin_notices", array( $this, "install_plugin_to_dismiss_admin_notice" ) );</pre><p>Определите обратный вызов следующим образом:</p><pre class="brush: php noskimlinks noskimwords">public function install_plugin_to_dismiss_admin_notice() {    if ( ! is_plugin_active( "hello-dolly/hello.php" ) ) :    ?&gt;    &lt;div class="notice notice-error"&gt;        &lt;p&gt;Please install and activate the &lt;strong&gt;Hello Dolly&lt;/strong&gt; plugin.&lt;/p&gt;    &lt;/div&gt;    &lt;?php    endif;}</pre><p>Вот и все! Я же сказал, что это просто, не так ли?<br></p><p>Единственное, что мы сделали по-другому в этот раз, это использовали WordPress функцию <code class="inline">is_plugin_active()</code>, чтобы проверить, установлен ли и активирован ли плагин Hello Dolly. Если нет, <code class="inline">is_plugin_active()</code> вернет false, и наше уведомление администратора появится.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/30137/image/4.4.png" alt="Постоянные уведомления администратора WordPress: часть 4..." title="Постоянные уведомления администратора WordPress: часть 4..." width="50" height="50"></figure><p>Попробуйте активировать плагин Hello Dolly, чтобы проверить уведомление администратора.</p><p>Это хорошо работает для отдельных плагинов, но что, если вы хотите напомнить пользователям активировать несколько плагинов? Вместо жесткого кодирования в информации о плагинах Hello Dolly мы могли бы создать массив для белого списка наших необходимых плагинов.</p><p>Замените <code class="inline">install_plugin_to_dismiss_admin_notice()</code> на:</p><pre class="brush: php noskimlinks noskimwords">public function install_plugin_to_dismiss_admin_notice() {    $required_plugins = array(        "Hello Dolly" =&gt; "hello-dolly/hello.php",        "Akismet" =&gt; "akismet/akismet.php"    );    $requires_activating = array();    foreach( $required_plugins as $required_plugin_name =&gt; $required_plugin_path  ) {        if( ! is_plugin_active( $required_plugin_path ) ) {            array_push( $requires_activating, $required_plugin_name );        }    }    if ( ! empty( $requires_activating ) ) :    ?&gt;    &lt;div class="notice notice-error"&gt;        &lt;p&gt;Please install and activate the following plugins: &lt;strong&gt;&lt;?php echo join( ", ", $requires_activating );?&gt;&lt;/strong&gt;.&lt;/p&gt;    &lt;/div&gt;    &lt;?php    endif;}</pre><p>Необходимые плагины теперь хранятся в массиве, который зацикливается, чтобы проверить, активирован ли каждый плагин. Для любого активного в данный момент плагина имя добавляется в массив <code class="inline">$require_activating</code>, который выводится через уведомление администратора как список требуемых имен плагинов, разделенных запятыми.<br></p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/30137/image/4.5.png" alt="Постоянные уведомления администратора WordPress: часть 4..." title="Постоянные уведомления администратора WordPress: часть 4..." width="50" height="50"></figure><h2>Пользовательские уведомления администратора<br></h2><p>Прежде чем мы закончим, давайте немного повеселимся, создав собственные пользовательские типы уведомлений. Давайте посмотрим, как добавить собственные пользовательские типы уведомлений. Сейчас вы уже полностью знакомы с четырьмя встроенными уведомлениями администратора, которые WordPress предоставляет по умолчанию, но не так сложно добавить наши собственные.<br></p><p>Во-первых, однако, закомментируйте все вызовы функций в <code class="inline">Gwyer_Dismissible_Admin_Notices::init()</code>, чтобы мы начинали с чистого листа.</p><p>Нам нужно добавить CSS для наших пользовательских типов уведомлений администратора, поэтому в корневую папку плагина добавьте папку <code class="inline">css</code> и внутри создайте файл с именем <code class="inline">admin-notices.css</code>. Чтобы установить его на всех страницах администратора, добавьте новый вызов <code class="inline">add_action</code> в <code class="inline">Gwyer_Plugin_Options::init()</code>.</p><pre class="brush: php noskimlinks noskimwords">add_action( "admin_enqueue_scripts", array( $this, "enqueue_styles" ) );</pre><p>Затем для вызова функции обратного вызова <code class="inline">enqueue_styles()</code> добавьте этот метод в тот же класс:</p><pre class="brush: php noskimlinks noskimwords">public function enqueue_styles() {  wp_enqueue_style(    "gwyer-admin-notice-css",    plugin_dir_url( __FILE__ ) . "css/admin-notices.css"  );}</pre><p>Теперь давайте настроим новый метод вывода наших пользовательских уведомлений администратора. В <code class="inline">Gwyer_Admin_Notices::init()</code> добавьте:</p><pre class="brush: php noskimlinks noskimwords">add_action( "admin_notices", array( $this, "custom_admin_notices" ) );</pre><p>Затем добавьте обратный вызов, чтобы отобразить список пользовательских уведомлений администратора:</p><pre class="brush: php noskimlinks noskimwords">  /*** Output custom admin notices.*/public function custom_admin_notices() {?&gt;  &lt;div class="notice notice-big-error"&gt;&lt;p&gt;Houston, I definitely think we have a problem!&lt;/p&gt;&lt;/div&gt;  &lt;div class="notice notice-admin-user-award"&gt;&lt;p&gt;Congratulations, you"ve won the Admin user of the year award!&lt;/p&gt;&lt;/div&gt;  &lt;div class="notice notice-light-bulb"&gt;&lt;p&gt;Now this is a great idea.&lt;/p&gt;&lt;/div&gt;  &lt;div class="notice notice-social-media"&gt;&lt;p&gt;Let"s connect!&lt;/p&gt;&lt;/div&gt;  &lt;div class="notice notice-neo"&gt;&lt;p&gt;Join Neo and follow the white rabbit. If you see him give him this carrot. The rabbit that is, not Neo!&lt;/p&gt;&lt;/div&gt;&lt;?php}</pre><p>Наконец, добавьте CSS в <code class="inline">admin-notices.css</code>, чтобы стилизовать наши пользовательские уведомления администратора:</p><pre class="brush: css noskimlinks noskimwords">.notice-big-error {    border: 3px solid red;    -webkit-transform: rotateZ(-1deg);    -ms-transform: rotateZ(-1deg);    transform: rotateZ(-1deg);}.notice-admin-user-award {    border-left: 5px solid purple;}.notice-admin-user-award p:before {    font: normal 24px/1 "dashicons";    content: "\f313";    color: purple;}.notice-light-bulb {    border-right: 5px solid #e2e224;}.notice-light-bulb p:before {    font: normal 22px/1 "dashicons";    content: "\f339";    color: #e6e610;}.notice-social-media {    border-left: 5px solid #1da25f;    padding-bottom: 5px;}.notice-social-media p {    padding-bottom: 0;    margin-bottom: 4px;}.notice-social-media:after {    font: normal 22px/1 "dashicons";    content: "\f301 \f304 \f462";    color: #888;}.notice-neo {    border-right: 10px solid orangered;    border-left: 10px solid orangered;}.notice-neo p:before {    font: normal 22px/1 "dashicons";    content: "\f511";    color: orangered;}</pre><p>После сохранения изменений загрузите любую страницу администратора, чтобы увидеть наши пользовательские уведомления администратора.<br></p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/30137/image/4.6.png" alt="Постоянные уведомления администратора WordPress: часть 4..." title="Постоянные уведомления администратора WordPress: часть 4..." width="50" height="50"></figure><p>Судя по результатам, вероятно, полезно использовать пользовательские уведомления администратора скромно, иначе вы рискуете, что они будут выглядеть слишком ярко. </p><p>Я не буду вдаваться в подробности об используемом пользовательском CSS. Это просто забавно, и большинство стилей довольно просты и понятны.</p><p>Мы использовали значки шрифтов dashicons для наших пользовательских уведомлений администратора для удобства, поскольку они доступны в администраторе WordPress по умолчанию. Но вы можете импортировать и использовать любые значки, которые вам нравятся для дополнительного оформления.</p><h2>Попробуйте код на своем проекте<br></h2><p>Весь код из этой серии учебников был помещен в <span>плагин WordPress</span> для возможности вам загрузить его. Взгляните на код, расширьте его и внедрите новые способы отображения (и удаления) уведомлений администратора. Обязательно сообщите мне в комментариях, если вы создадите что-нибудь классное! Мне бы хотелось увидеть, что вы придумали.</p><h2>Заключение</h2><p>Спасибо, что присоединились ко мне в этом курсе из четырех частей. Надеюсь, теперь у вас будет гораздо больше уверенности при внедрении уведомлений администратора в свои собственные проекты.</p><p>Мы рассмотрели множество различных аспектов уведомлений администратора WordPress, в том числе несколько способов их полного отклонения, что невозможно без специального кода.</p><p>Создание собственных пользовательских уведомлений тоже довольно просто, но на практике лучше не злоупотреблять их использованием в своих проектах. В большинстве случаев лучше придерживаться стилей WordPress по умолчанию, чтобы обеспечить постоянный пользовательский интерфейс.</p><p>WordPress невероятно активно развивается. Существуют темы, плагины, библиотеки и многие другие продукты, которые помогут вам создать свой сайт и проект. Открытая природа платформы также делает ее отличным вариантом, благодаря которому вы можете улучшить свои навыки программирования. В любом случае, вы можете увидеть, что у нас есть на <span>Envato Market</span>.</p><p>И не забудьте <span>загрузить плагин</span> и поиграть с кодом. Это отличный способ познакомиться с тем, как все части сочетаются друг с другом. И, пожалуйста, дайте мне знать свои мысли по уроку с помощью комментариев ниже.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824816-postoyannye-uvedomleniya-administratora-wordpress-chast-4" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="WordPress" href="https://norma-studio.github.io/article/220824816-postoyannye-uvedomleniya-administratora-wordpress-chast-4" class="tm-article-body__tags-item-link">WordPress</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
42812</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
460</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
