
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Безопасность данных iOS в покое: защита данных -... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Безопасность данных iOS в покое: защита данных -... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Безопасность данных iOS в покое: защита данных -... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Безопасность данных iOS в покое: защита данных -... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Это первая из трёх статей по защите пользовательских данных в состоянии покоя. Начнём с основ безопасности в iOS, чтобы ознакомиться с современными рекомендациями по их хранению со Swift....">
<meta property="og:description" content="Это первая из трёх статей по защите пользовательских данных в состоянии покоя. Начнём с основ безопасности в iOS, чтобы ознакомиться с современными рекомендациями по их хранению со Swift....">
<meta name="twitter:description" content="Это первая из трёх статей по защите пользовательских данных в состоянии покоя. Начнём с основ безопасности в iOS, чтобы ознакомиться с современными рекомендациями по их хранению со Swift....">
<meta property="aiturec:description" content="Это первая из трёх статей по защите пользовательских данных в состоянии покоя. Начнём с основ безопасности в iOS, чтобы ознакомиться с современными рекомендациями по их хранению со Swift....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1638/posts/28529/preview_image/tutorialImage.png">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1638/posts/28529/preview_image/tutorialImage.png">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1638/posts/28529/preview_image/tutorialImage.png">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1638/posts/28529/preview_image/tutorialImage.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1638/posts/28529/preview_image/tutorialImage.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824976-bezopasnost-dannyh-ios-v-pokoe-zaschita-dannyh-.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824976-bezopasnost-dannyh-ios-v-pokoe-zaschita-dannyh-.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824976-bezopasnost-dannyh-ios-v-pokoe-zaschita-dannyh-.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824976-bezopasnost-dannyh-ios-v-pokoe-zaschita-dannyh-.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824976-bezopasnost-dannyh-ios-v-pokoe-zaschita-dannyh-.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824976-bezopasnost-dannyh-ios-v-pokoe-zaschita-dannyh-.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824976-bezopasnost-dannyh-ios-v-pokoe-zaschita-dannyh-.html" title="Безопасность данных iOS в покое: защита данных -... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Безопасность данных iOS в покое: защита данных -... | envatomarket.ru | norma-studio.github.io" title="Безопасность данных iOS в покое: защита данных -... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/65404fb3f3f8602d7f5b3bdc85cbef02.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824976-bezopasnost-dannyh-ios-v-pokoe-zaschita-dannyh-.html" class="tm-user-info__username" title="
А. Крайнов" aria-label="
А. Крайнов">
А. Крайнов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Безопасность данных iOS в покое: защита данных -...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824976-bezopasnost-dannyh-ios-v-pokoe-zaschita-dannyh-" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="iOS SDK" href="https://norma-studio.github.io/article/220824976-bezopasnost-dannyh-ios-v-pokoe-zaschita-dannyh-" class="tm-article-snippet__hubs-item-link"><span>iOS SDK</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824976-bezopasnost-dannyh-ios-v-pokoe-zaschita-dannyh-.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1638/posts/28529/preview_image/tutorialImage.png">
    <meta itemprop="headline name" content="Безопасность данных iOS в покое: защита данных -... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Это первая из трёх статей по защите пользовательских данных в состоянии покоя. Начнём с основ безопасности в iOS, чтобы ознакомиться с современными рекомендациями по их хранению со Swift....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Это первая из трёх статей по защите пользовательских данных в состоянии покоя. Начнём с основ безопасности в iOS, чтобы ознакомиться с современными рекомендациями по их хранению со Swift....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Это первая из трёх статей по защите пользовательских данных в состоянии покоя. Начнём с основ безопасности в iOS, чтобы ознакомиться с современными рекомендациями по их хранению со Swift.</p><p>Любое приложение, которое хранит данные пользователя, должно заботиться об их безопасности и секретности. Возможные нарушения могут иметь очень серьезные последствия, как мы видели по некоторым примерам. В этом уроке даны рекомендации по защите данных пользователей.</p><h2>Права доступа</h2><p>Прежде, чем мы займемся настройками хранения данных, давайте взглянем на те, которые могут совместно использоваться системными приложениями. </p><p>Для многих версий iOS требовалось, чтобы приложения запрашивали разрешения на использование и хранение личных данных, которые являются внешними по отношению к приложению, например при сохранении и загрузке изображений в библиотеку. Начиная с iOS 10, любые API, которые обращаются к личным данным, требуют, чтобы вы объявили об этом заранее в файле <strong>info.plist</strong> . </p><p>Много фреймворков могут обращаться к данным вне вашего приложения и у каждого свой ключ доступа.</p><ul><li>Bluetooth Sharing: <code class="inline">NSBluetoothPeripheralUsageDescription</code> </li> <li>Calendar: <code class="inline">NSCalendarsUsageDescription</code> </li> <li>CallKit: <code class="inline">NSVoIPUsageDescription</code> </li> <li>Camera: <code class="inline">NSCameraUsageDescription</code> </li> <li>Contacts: <code class="inline">NSContactsUsageDescription</code> </li> <li>Health: <code class="inline">NSHealthShareUsageDescription</code>,  <code class="inline">NSHealthUpdateUsageDescription</code> </li> <li>HomeKit: <code class="inline">NSHomeKitUsageDescription</code> </li> <li>Location: <code class="inline">NSLocationAlwaysUsageDescription</code>, <code class="inline">NSLocationUsageDescription</code>, <code class="inline">NSLocationWhenInUseUsageDescription</code> </li> <li>Media Library: <code class="inline">NSAppleMusicUsageDescription</code> </li> <li>Microphone: <code class="inline">NSMicrophoneUsageDescription</code> </li> <li>Motion: <code class="inline">NSMotionUsageDescription</code> </li> <li>Photos: <code class="inline">NSPhotoLibraryUsageDescription</code> </li> <li>Reminders: <code class="inline">NSRemindersUsageDescription</code> </li> <li>SpeechRecognition:  <code class="inline">NSSpeechRecognitionUsageDescription</code> </li> <li>SiriKit: <code class="inline">NSSiriUsageDescription</code> </li> <li>TV Provider: <code class="inline">NSVideoSubscriberAccountUsageDescription</code><br></li> </ul><p>Например, вот запись в <strong>info.plist</strong>, которая позволяет приложению загружать и хранить значения в календаре.<br></p><pre class="brush: xml noskimlinks noskimwords">&lt;key&gt;NSCalendarsUsageDescription&lt;/key&gt;&lt;string&gt;View and add events to your calendar&lt;/string&gt;</pre><p>Если при попытке API получить доступ к данным отсутствует описание, приложение завершит работу.<br></p><h2>API защиты данных</h2><p>Во-первых, нужно определиться, какую информацию и какие данные необходимо хранить в приложении. Важные данные сохраняйте в рабочей памяти, а не в хранилище файлов. Это особенно важно для любой личной информации. </p><p>Но если вам необходимо хранить данные, рекомендуется включить Apple"s Data Protection.</p><p>Data Protection шифрует содержимое вашего приложения. Он полагается на код доступа, значит, безопасность шифрования связана с надёжностью пароля. С улучшением Touch ID и шифрования файловой системы, введенным в iOS 10.3, система защиты данных стала намного надёжней. Вы можете включить защиту данных в своем приложении, включив <b>Data Protection</b> в <b>Capabilities</b> файла проекта. Обновится профиль обеспечения и файл разрешений, чтобы запустить Data Protection. Защита данных предлагает четыре уровня защиты, описываемых структурой <code class="inline">FileProtectionType</code>:</p><ul><li> <code class="inline">none</code>: нет защиты.</li> <li> <code class="inline">complete</code>: данные недоступны, пока девайс заблокирован. Рекомендованная настройка для всех приложений.<br></li> <li> <code class="inline">completeUnlessOpen</code>: данные доступны, когда устройство разблокировано и останутся доступны, пока файл не будет закрыт, даже если пользователь заблокирует устройство. Файлы могут быть созданы, когда устройство заблокировано. Этот вариант хорош, когда вам нужно открыть файл для обработки и продолжить процесс, даже если приложение работает в фоновом режиме заблокированного устройства. В качестве примера может быть задание по загрузке файла на сервер.<br></li> <li> <code class="inline">completeUntilFirstUserAuthentication</code>:  файлы недоступны, пока пользователь не разблокирует устройство. После этого файлы становятся доступными, даже когда устройство заблокировано заново. Этот вариант хорош для файлов, которые понадобятся позднее, в фоновом режиме, когда устройство заблокировано, например, во время извлечения фона.<br></li> </ul><p><code class="inline">complete</code> по умолчанию. Чтобы избежать сбоев, когда ваш код пытается получить доступ к заблокированным данным, вы можете зарегистрироваться для получения уведомлений через <code class="inline">UIApplicationProtectedDataDidBecomeAvailable</code>и<code class="inline">UIApplicationProtectedDataWillBecomeUnavailable</code> для поиска, когда данные станут доступны.</p><pre class="brush: objc noskimlinks noskimwords">NotificationCenter.default.addObserver(forName: .UIApplicationProtectedDataDidBecomeAvailable, object: nil, queue: OperationQueue.main, using: { (notification) in    //...})NotificationCenter.default.addObserver(forName: .UIApplicationProtectedDataWillBecomeUnavailable, object: nil, queue: OperationQueue.main, using: { (notification) in    //...})</pre><p>Кроме того, можете проверить флажок <code>UIApplication.shared.isProtectedDataAvailable</code> .</p><p>Важно иметь в виду при включении защиты данных, что если вы используете какие-либо фоновые службы, этот код может потребовать доступ к вашим данным в фоновом режиме, когда устройство заблокировано. Для таких файлов потребуется уровень защиты <code class="inline">completeUntilFirstUserAuthentication</code>. Защиту каждого отдельного файла можно контролировать через класс <code class="inline">FileManager</code> .</p><pre class="brush: objc noskimlinks noskimwords">let ok = FileManager.default.createFile(atPath: somePath, contents: nil, attributes: [FileAttributeKey.protectionKey.rawValue: FileProtectionType.complete])do{    try FileManager.default.createDirectory(atPath: somePath, withIntermediateDirectories: true, attributes: [FileAttributeKey.protectionKey.rawValue: FileProtectionType.complete])}catch{    print(error)}</pre><p>Можно установить уровень защиты при записи в файл. Объект <code class="inline">Data</code> имеет метод, который может записывать свои данные в файл, и вы можете установить уровень защиты при вызове этого метода.</p><pre class="brush: objc noskimlinks noskimwords">let data = Data.init()let fileURL = try! FileManager.default.url(for: .documentDirectory, in: .userDomainMask, appropriateFor: nil, create: false).appendingPathComponent("somedata.dat")do{    try data.write(to: fileURL, options: ([.atomic, .completeFileProtection]))}catch{    print(error)}</pre><p>Вы также можете установить уровень защиты при настройке модели Core Data.</p><pre class="brush: objc noskimlinks noskimwords">let storeURL = docURL?.appendingPathComponent("Model.sqlite")let storeOptions: [AnyHashable: Any] = [NSPersistentStoreFileProtectionKey: FileProtectionType.complete]do{    try coordinator.addPersistentStore(ofType: NSSQLiteStoreType, configurationName: nil, at: storeURL, options: storeOptions)}catch{    print(error)}</pre><p>Чтобы изменить уровень защиты существующего файла, сделайте следующее:</p><pre class="brush: objc noskimlinks noskimwords">do{    try FileManager.default.setAttributes([FileAttributeKey.protectionKey : FileProtectionType.complete], ofItemAtPath: path)}catch{    print(error)}</pre><h2>Неприкосновенность данных<br></h2><p>Часть защиты сохранённых данных включает проверку их целостности. Не стоит слепо доверять данным, которые вы загружаете из хранилища; они могли быть случайно или злонамеренно изменены. Протокол <code class="inline">NSSecureCoding</code> можно использовать для безопасной загрузки и сохранения данных из хранилища. Он удостоверится, что загружаемые объекты содержат ожидаемые данные. Если вы будете сохранять свой объект, он должен соответствовать протоколу безопасного кодирования внутри вашего класса.</p><pre class="brush: objc noskimlinks noskimwords">class ArchiveExample : NSObject, NSSecureCoding{    var stringExample : String?    ...</pre><p>Класс должен быть унаследован от <code class="inline">NSObject</code>. Затем, чтобы включить безопасное кодирование, переопределите метод протокола <code class="inline">supportsSecureCoding</code>.</p><pre class="brush: objc noskimlinks noskimwords">static var supportsSecureCoding : Bool{    get    {        return true    }}</pre><p>Если ваш объект упорядочивается с помощью <code>init? (Coder aDecoder: NSCoder)</code>, метод <code>decodeObject (forKey :)</code> должен быть заменен на <code>decodeObject (of: forKey :)</code>, это гарантирует, что нужные типы объектов будут распакованы из хранилища.</p><pre class="brush: objc noskimlinks noskimwords">required init?(coder aDecoder: NSCoder){    stringExample = aDecoder.decodeObject(of: NSString.self, forKey: "string_example") as String?}func encode(with aCoder: NSCoder){    aCoder.encode(stringExample, forKey:"string_example")}</pre><p>Если вы используете <code class="inline">NSKeyedUnarchiver</code> для загрузки данных из хранилища, обязательно установите его свойство <code class="inline">RequireSecureCoding</code>.</p><pre class="brush: objc noskimlinks noskimwords">class func loadFromSavedData() -&gt; ArchiveExample?{    var object : ArchiveExample? = nil    let path = NSSearchPathForDirectoriesInDomains(.documentDirectory, .userDomainMask, true)[0] as String    let url = NSURL(fileURLWithPath: path)    let fileURL = url.appendingPathComponent("ArchiveExample.plist")    if FileManager.default.fileExists(atPath: (fileURL?.path)!)    {        do        {            let data = try Data.init(contentsOf: fileURL!)            let unarchiver = NSKeyedUnarchiver.init(forReadingWith: data)            unarchiver.requiresSecureCoding = true            object = unarchiver.decodeObject(of: ArchiveExample.self, forKey: NSKeyedArchiveRootObjectKey)            unarchiver.finishDecoding()        }        catch        {            print(error)        }    }    return object;}</pre><p>Включение безопасного кодирования для ваших операций сохранения не позволит вам случайно архивировать объект, который не придерживается безопасного протокола кодирования.</p><pre class="brush: objc noskimlinks noskimwords">func save(){    let path = NSSearchPathForDirectoriesInDomains(.documentDirectory, .userDomainMask, true)[0] as String    let url = NSURL(fileURLWithPath: path)    let filePath = url.appendingPathComponent("ArchiveExample.plist")?.path    let data = NSMutableData.init()    let archiver = NSKeyedArchiver.init(forWritingWith: data)    archiver.requiresSecureCoding = true    archiver.encode(self, forKey: NSKeyedArchiveRootObjectKey)    archiver.finishEncoding()        let options : NSData.WritingOptions = [.atomic, .completeFileProtection]    do    {        try data.write(toFile: filePath!, options:options)    }    catch    {        print(error)    }}</pre><p>Помимо <code class="inline">NSSecureCoding</code>, полезно выполнять собственные проверки данных при распаковке любого архива или любого произвольного ввода в целом.</p><h2>Следы данных<br></h2><p>По мере развития iOS появляются новые функции, которые могут способствовать утечке хранимых данных. Начиная с iOS 9, вы можете проиндексировать ваш контент в поиске Spotlight, а в iOS 10 можно пользоваться виджетами, вроде Today Widget, который виден на заблокированном экране. Будьте осторожны, выставляя свой контент с этими новыми функциями. Вы можете показать больше, чем хотелось!</p><p>В iOS 10 появилась новая функция Handoff, в которой ваши скопированные данные автоматически распределяются между устройствами. Опять же, будьте осторожны с конфиденциальными данными для передачи. Вы можете пометить личный контент как <code class="inline">localOnly</code>. Или установить дату и время истечения срока действия данных.<br></p><pre class="brush: objc noskimlinks noskimwords">let stringToCopy = "copy me to pasteboard"let pasteboard = UIPasteboard.generalif #available(iOS 10, *){    let tomorrow = Date().addingTimeInterval(60 * 60 * 24)    pasteboard.setItems([[kUTTypeUTF8PlainText as String : stringToCopy]], options: [UIPasteboardOption.localOnly : true, UIPasteboardOption.expirationDate: tomorrow])}else{    pasteboard.string = stringToCopy}</pre><p>Сохранённые файлы могут автоматически получать резервные копии, как в iTunes, так и в iCloud. Несмотря на то, что резервные копии могут быть зашифрованы, рекомендуется исключить конфиденциальные файлы, которым не нужно покидать устройство. Это можно сделать, установив для файла флажок <code class="inline">IsExcludedFromBackup</code>.<br></p><pre class="brush: objc noskimlinks noskimwords">let path: String = ...var url = URL(fileURLWithPath: path)do{    var resourceValues = URLResourceValues()    //or if you want to first check the flag:    //var resourceValues = try url.resourceValues(forKeys: [.isExcludedFromBackupKey])        resourceValues.isExcludedFromBackup = true;    try url.setResourceValues(resourceValues)}catch{    print(error)}</pre><p>Анимация, которая появляется при переходе приложения в фоновый режим, достигается снимком screenshot с вашего приложения, который затем используется для анимации. Когда вы смотрите на список открытых приложений, этот снимок там присутствует. Он сохраняется на устройстве. </p><p>Рекомендуется скрыть конфиденциальные данные, чтобы они не были зафиксированы на снимке экрана. Для этого настройте уведомление, когда приложение перейдет на задний план и установите свойство сокрытия элементов UI, которые вы хотите исключить. Они должны быть скрыты до захвата экрана iOS. Затем вы можете отображать элементы UI.<br></p><pre class="brush: objc noskimlinks noskimwords">NotificationCenter.default.addObserver(self, selector: #selector(didEnterBackground), name: .UIApplicationDidEnterBackground, object: nil)NotificationCenter.default.addObserver(self, selector: #selector(willEnterForeground), name: .UIApplicationWillEnterForeground, object: nil)</pre><p>Удалите уведомления, когда представление исчезнет.<br></p><pre class="brush: objc noskimlinks noskimwords">NotificationCenter.default.removeObserver(self, name: .UIApplicationDidEnterBackground, object: nil)NotificationCenter.default.removeObserver(self, name: .UIApplicationWillEnterForeground, object: nil)</pre><p>У вашего приложения имеется кэш клавиатуры для текстовых полей с автокоррекцией. Вводимый текст вместе с новыми словами хранится в кеше, чтобы можно было получить различные слова, которые были ранее использованы. Единственный способ отключить кеш-память клавиатуры - отключить параметр автокоррекции<br></p><pre class="brush: objc noskimlinks noskimwords">textField.autocorrectionType = UITextAutocorrectionType.no</pre><p>Вы должны настроить поле пароля для безопасного ввода текста. Защищённые текстовые поля не отображают пароль или не используют кэш клавиатуры.</p><pre class="brush: objc noskimlinks noskimwords">textField.isSecureTextEntry = true</pre><p>Журналы отладки сохраняются в файле и могут быть вскрыты. Даже когда вы кодируете и отлаживаете свое приложение, остерегайтесь записать на консоль личные данные, как пароли и ключи. Вы можете забыть удалить эту информацию из журналов перед отправкой кода в магазин приложений! В процессе отладки более безопасно использовать паузу для просмотра чувствительных переменных. <br></p><p>Сетевые подключения также могут кэшироваться для хранения. Дополнительную информацию об удалении и отключении сетевого кэша можно найти в статье <span>Securing Communications on iOS</span>.</p><h2>Уничтожение данных</h2><p>Возможно, вы знаете, что при удалении файла на компьютере часто сам файл не удаляется; удаляется только ссылка на файл. Чтобы удалить файл, вы можете перезаписать его со случайными данными. </p><p>Переход на твердотельные диски затруднил гарантию уничтожения данных, а лучший способ безопасного удаления неизвестен. Однако этот урок не был бы полным без примера того, как стереть данные из хранилища. Из-за некоторых споров вокруг Swift и потому, что мы надеемся гарантировать, что каждый байт файла фактически перезаписывается, мы реализуем эту функцию в C. </p><p>Реализация, приведенная ниже, может находиться внутри .c file. Чтобы использовать эту функцию в Swift, вам нужно добавить определение функции или файл, который содержит функцию, в свой header. Затем вы можете вызвать эту функцию прямо перед тем местом, где вы используете методы <code class="inline">FileManager</code> <code class="inline">removeFile</code>. Возможно, вы захотите использовать лучшие методы, описанные в этом и последующих уроках по обновлению приложения. Вы можете затем стереть предыдущие незащищённые данные. <br></p><pre class="brush: c noskimlinks noskimwords">#import &lt;string.h&gt;#import &lt;sys/stat.h&gt;#import &lt;unistd.h&gt;#import &lt;errno.h&gt;#import &lt;fcntl.h&gt;#import &lt;stdio.h&gt;#define MY_MIN(a, b) (((a) &lt; (b)) ? (a) : (b))int SecureWipeFile(const char *filePath){    int lastStatus = -1;    for (int pass = 1; pass &lt; 4; pass++)    {        //setup local vars        int fileHandleInt = open(filePath, O_RDWR);        struct stat stats;        unsigned char charBuffer[1024];                //if can open file        if (fileHandleInt &gt;= 0)        {            //get file descriptors            int result = fstat(fileHandleInt, &amp;stats);            if (result == 0)            {                switch (pass)                {                        //DOD 5220.22-M implementation states that we write over with three passes first with 10101010, 01010101 and then the third with random data                    case 1:                        //write over with 10101010                        memset(charBuffer, 0x55, sizeof(charBuffer));                        break;                    case 2:                        //write over with 01010101                        memset(charBuffer, 0xAA, sizeof(charBuffer));                        break;                    case 3:                        //write over with arc4random                        for (unsigned long i = 0; i &lt; sizeof(charBuffer); ++i)                        {                            charBuffer[i] = arc4random() % 255;                        }                        break;                                            default:                        //at least write over with random data                        for (unsigned long i = 0; i &lt; sizeof(charBuffer); ++i)                        {                            charBuffer[i] = arc4random() % 255;                        }                        break;                }                                //get file size in bytes                off_t fileSizeInBytes = stats.st_size;                                //rewrite every byte of the file                ssize_t numberOfBytesWritten;                for ( ; fileSizeInBytes; fileSizeInBytes -= numberOfBytesWritten)                {                    //write bytes from the buffer into the file                    numberOfBytesWritten = write(fileHandleInt, charBuffer, MY_MIN((size_t)fileSizeInBytes, sizeof(charBuffer)));                }                                //close the file                lastStatus = close(fileHandleInt);            }        }    }    return lastStatus;}</pre><h2>Заключение</h2><p>В этой статье вы узнали о настройке разрешений для данных, к которым имеет доступ ваше приложение, а также о том, как обеспечить защиту и целостность основных файлов. Ещё мы рассмотрели некоторые возможности утечки данных из вашего приложения. Пользователи доверяют вам защиту своих данных. Следуя этим рекомендациям, вы сможете вернуть им уверенность.</p><p>Пока что ознакомьтесь с некоторыми другими нашими статьями о разработке приложений для iOS!</p><ul class="roundup-block__contents posts--half-width roundup-block--list"><li class="roundup-block__content"><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1638/posts/28529/preview_image/tutorialImage.png" alt="Безопасность данных iOS в покое: защита данных  ..." title="Безопасность данных iOS в покое: защита данных  ..." width="50" height="50"><div class="roundup-block__primary-category topic-code">iOS SDK</div> <div class="roundup-block__content-title">Securing Communications on iOS</div> <div class="roundup-block__author">Collin Stuart</div></span></li> <li class="roundup-block__content"><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/769/posts/28154/preview_image/cloud%20services%20-%20mobile.jpg" alt="Безопасность данных iOS в покое: защита данных  ..." title="Безопасность данных iOS в покое: защита данных  ..." width="50" height="50"><div class="roundup-block__primary-category topic-code">Mobile Development</div> <div class="roundup-block__content-title">Back-End as a Service for Mobile Apps</div> <div class="roundup-block__author">Bala Durage Sandamal Siripathi</div></span></li> <li class="roundup-block__content"><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1637/posts/28474/preview_image/Preview%20image.jpeg" alt="Безопасность данных iOS в покое: защита данных  ..." title="Безопасность данных iOS в покое: защита данных  ..." width="50" height="50"><div class="roundup-block__primary-category topic-code">iOS SDK</div> <div class="roundup-block__content-title">The Right Way to Share State Between Swift View Controllers</div> <div class="roundup-block__author">Matteo Manferdini</div></span></li> <li class="roundup-block__content"><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/41/posts/23138/preview_image/preview_image@2x.jpg" alt="Безопасность данных iOS в покое: защита данных  ..." title="Безопасность данных iOS в покое: защита данных  ..." width="50" height="50"><div class="roundup-block__primary-category topic-code">Swift</div> <div class="roundup-block__content-title">Swift From Scratch: Closures</div> <div class="roundup-block__author">Bart Jacobs</div></span></li> </ul><br>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824976-bezopasnost-dannyh-ios-v-pokoe-zaschita-dannyh-" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="iOS SDK" href="https://norma-studio.github.io/article/220824976-bezopasnost-dannyh-ios-v-pokoe-zaschita-dannyh-" class="tm-article-body__tags-item-link">iOS SDK</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
39518</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
696</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
