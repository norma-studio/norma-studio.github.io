
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Манипулирование- HTML5 canvas с использованием Konva: часть 3, сложные формы и спрайты... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Манипулирование- HTML5 canvas с использованием Konva: часть 3, сложные формы и спрайты... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Манипулирование- HTML5 canvas с использованием Konva: часть 3, сложные формы и спрайты... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Манипулирование- HTML5 canvas с использованием Konva: часть 3, сложные формы и спрайты... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Во втором уроке этого курса вы научились рисовать основные фигуры с помощью Konva. Так или иначе вы можете объединять основные фигуры, чтобы создавать звезды, кольца, стрелки, часы или домик. Konva также позволяет создавать некоторые основные сложные фигуры, используя встроенные функции, предоставляемые библиотекой. ...">
<meta property="og:description" content="Во втором уроке этого курса вы научились рисовать основные фигуры с помощью Konva. Так или иначе вы можете объединять основные фигуры, чтобы создавать звезды, кольца, стрелки, часы или домик. Konva также позволяет создавать некоторые основные сложные фигуры, используя встроенные функции, предоставляемые библиотекой. ...">
<meta name="twitter:description" content="Во втором уроке этого курса вы научились рисовать основные фигуры с помощью Konva. Так или иначе вы можете объединять основные фигуры, чтобы создавать звезды, кольца, стрелки, часы или домик. Konva также позволяет создавать некоторые основные сложные фигуры, используя встроенные функции, предоставляемые библиотекой. ...">
<meta property="aiturec:description" content="Во втором уроке этого курса вы научились рисовать основные фигуры с помощью Konva. Так или иначе вы можете объединять основные фигуры, чтобы создавать звезды, кольца, стрелки, часы или домик. Konva также позволяет создавать некоторые основные сложные фигуры, используя встроенные функции, предоставляемые библиотекой. ...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/1251/profiles/19759/profileImage/monty-shokeen-tutsplus.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/1251/profiles/19759/profileImage/monty-shokeen-tutsplus.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/1251/profiles/19759/profileImage/monty-shokeen-tutsplus.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/1251/profiles/19759/profileImage/monty-shokeen-tutsplus.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/1251/profiles/19759/profileImage/monty-shokeen-tutsplus.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824847-manipulirovanie-html5-canvas-s-ispolzovaniem-konva-chast-3-slozhnye-formy-i-sprajty.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824847-manipulirovanie-html5-canvas-s-ispolzovaniem-konva-chast-3-slozhnye-formy-i-sprajty.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824847-manipulirovanie-html5-canvas-s-ispolzovaniem-konva-chast-3-slozhnye-formy-i-sprajty.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824847-manipulirovanie-html5-canvas-s-ispolzovaniem-konva-chast-3-slozhnye-formy-i-sprajty.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824847-manipulirovanie-html5-canvas-s-ispolzovaniem-konva-chast-3-slozhnye-formy-i-sprajty.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824847-manipulirovanie-html5-canvas-s-ispolzovaniem-konva-chast-3-slozhnye-formy-i-sprajty.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824847-manipulirovanie-html5-canvas-s-ispolzovaniem-konva-chast-3-slozhnye-formy-i-sprajty.html" title="Манипулирование- HTML5 canvas с использованием Konva: часть 3, сложные формы и спрайты... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Манипулирование- HTML5 canvas с использованием Konva: часть 3, сложные формы и спрайты... | envatomarket.ru | norma-studio.github.io" title="Манипулирование- HTML5 canvas с использованием Konva: часть 3, сложные формы и спрайты... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/64535356345.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824847-manipulirovanie-html5-canvas-s-ispolzovaniem-konva-chast-3-slozhnye-formy-i-sprajty.html" class="tm-user-info__username" title="
В. Чендылов" aria-label="
В. Чендылов">
В. Чендылов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Манипулирование- HTML5 canvas с использованием Konva: часть 3, сложные формы и спрайты...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824847-manipulirovanie-html5-canvas-s-ispolzovaniem-konva-chast-3-slozhnye-formy-i-sprajty" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="JavaScript" href="https://norma-studio.github.io/article/220824847-manipulirovanie-html5-canvas-s-ispolzovaniem-konva-chast-3-slozhnye-formy-i-sprajty" class="tm-article-snippet__hubs-item-link"><span>JavaScript</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824847-manipulirovanie-html5-canvas-s-ispolzovaniem-konva-chast-3-slozhnye-formy-i-sprajty.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/1251/profiles/19759/profileImage/monty-shokeen-tutsplus.jpg">
    <meta itemprop="headline name" content="Манипулирование- HTML5 canvas с использованием Konva: часть 3, сложные формы и спрайты... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Во втором уроке этого курса вы научились рисовать основные фигуры с помощью Konva. Так или иначе вы можете объединять основные фигуры, чтобы создавать звезды, кольца, стрелки, часы или домик. Konva также позволяет создавать некоторые основные сложные фигуры, используя встроенные функции, предоставляемые библиотекой. ...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Во втором уроке этого курса вы научились рисовать основные фигуры с помощью Konva. Так или иначе вы можете объединять основные фигуры, чтобы создавать звезды, кольца, стрелки, часы или домик. Konva также позволяет создавать некоторые основные сложные фигуры, используя встроенные функции, предоставляемые библиотекой. ...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Во втором уроке этого курса вы научились рисовать <span>основные фигуры с помощью Konva</span>. Так или иначе вы можете объединять основные фигуры, чтобы создавать звезды, кольца, стрелки, часы или домик. Konva также позволяет создавать некоторые основные сложные фигуры, используя встроенные функции, предоставляемые библиотекой. </p><p>В этом уроке вы узнаете, как создавать звезды и кольца в Konva. После этого мы обсудим, как писать текст с помощью Konva и как писать его по определенному пути. Вы также узнаете, как рисовать изображения и спрайты на холсте (canvas) с помощью Konva.</p><h2>Рисование звезд и колец</h2><p>По сравнению со многими другими сложными фигурами, которые вы можете нарисовать на холсте (canvas), форма звезды является одной из наиболее распространенных. При правильном наборе значений вы также можете превращать заостренные звезды в простые формы, похожие на значки. Konva позволяет рисовать звезды с помощью объекта <code class="inline">Konva.Star()</code>.</p><p>Вы можете указать количество вершин, которые звезда должна иметь, используя свойство <code class="inline">numPoints</code>. Вы можете контролировать размер этих вершин, используя свойства <code class="inline">innerRadius</code> и <code class="inline">outerRadius</code>. Большая разница в значении этих свойств сделает звезды более острыми. Установка внешнего радиуса, равного внутреннему радиусу, создаст правильный многоугольник с числом сторон, вдвое большим, чем значение <code class="inline">numPoints</code>. Изменение значений <code class="inline">numPoints</code>, <code class="inline">innerRadius</code> и <code class="inline">externalRadius</code> может привести к некоторым интересным формам.</p><pre class="brush: javascript noskimlinks noskimwords">var canvasWidth = 600;var canvasHeight = 400;var stage = new Konva.Stage({  container: "example",  width: canvasWidth,  height: canvasHeight});var layerA = new Konva.Layer();var starA = new Konva.Star({  x: 70,  y: 80,  numPoints: 4,  innerRadius: 10,  outerRadius: 50,  stroke: "black",  fill: "rgba(200,0,200, 1)",});var starB = new Konva.Star({  x: 200,  y: 100,  numPoints: 8,  innerRadius: 10,  outerRadius: 50,  stroke: "black",  fill: "rgba(0, 0, 200, 1)",});var starC = new Konva.Star({  x: 475,  y: 175,  numPoints: 20,  innerRadius: 90,  outerRadius: 100,  stroke: "orange",  fill: "yellow",});var starD = new Konva.Star({  x: 325,  y: 75,  numPoints: 5,  innerRadius: 20,  outerRadius: 40,  stroke: "black",  fill: "lightgreen",});var starE = new Konva.Star({  x: 100,  y: 250,  numPoints: 25,  innerRadius: 25,  outerRadius: 80,  stroke: "black",  fill: "white",});var starF = new Konva.Star({  x: 300,  y: 275,  numPoints: 40,  innerRadius: 5,  outerRadius: 80,  stroke: "black",  fill: "black",});layerA.add(starA, starB, starC, starD, starE, starF);stage.add(layerA);</pre><p>Как обычно, вы можете вращать и масштабировать фигуры звезд, которые вы создаете, используя свойства <code class="inline">rotation</code>, <code class="inline">scale</code>, <code class="inline">scaleX</code> и <code class="inline">scaleY</code>. Аналогично, вы можете управлять прозрачностью звезды, используя свойство <code class="inline">opacity</code>, и показывать или скрывать ее с помощью свойства <code class="inline">visible</code>.</p><p></p><p>Кольца в Konva состоят из большего сплошного круга и меньшего полого круга, расположенного над ним. Радиус внутреннего круга задается с помощью свойства <code class="inline">innerRadius</code>, а радиус внешнего круга задается с помощью свойства <code class="inline">externalRadius</code>. Свойства <code class="inline">x</code> и <code class="inline">y</code> управляют положением центра звезды.</p><p>Вы можете масштабировать и поворачивать кольца, которые вы создаете, используя свойства <code class="inline">scaleX</code>, <code class="inline">scaleY</code>, <code class="inline">scale</code> и <code class="inline">rotation</code>. Однако, имейте в виду, что вращение не будет иметь никакого эффекта, если вы не масштабируете кольцо с разными величинами в направлениях x и y.</p><pre class="brush: javascript noskimlinks noskimwords">var canvasWidth = 600;var canvasHeight = 400;var stage = new Konva.Stage({  container: "example",  width: canvasWidth,  height: canvasHeight});var layerA = new Konva.Layer();var ringA = new Konva.Ring({  x: 125,  y: 100,  innerRadius: 10,  outerRadius: 50,  stroke: "black",  fill: "rgba(200,0,200, 1)",});var ringB = new Konva.Ring({  x: 200,  y: 100,  innerRadius: 10,  outerRadius: 50,  stroke: "black",  fill: "rgba(0, 0, 200, 0.5)",});var ringC = new Konva.Ring({  x: 475,  y: 175,  innerRadius: 90,  outerRadius: 100,  stroke: "orange",  fill: "yellow",});var ringD = new Konva.Ring({  x: 325,  y: 100,  innerRadius: 20,  outerRadius: 40,  scaleY: 2,  scaleX: 0.3,  rotation: 45,  stroke: "black",  fill: "lightgreen",});var starA = new Konva.Star({  x: 200,  y: 275,  numPoints: 20,  innerRadius: 50,  outerRadius: 115,  stroke: "black",  fill: "black",});var ringE = new Konva.Ring({  x: 200,  y: 275,  innerRadius: 10,  outerRadius: 90,  stroke: "black",  fill: "red",});var starB = new Konva.Star({  x: 200,  y: 275,  numPoints: 10,  innerRadius: 50,  outerRadius: 80,  stroke: "black",  fill: "white",});var starC = new Konva.Star({  x: 200,  y: 275,  numPoints: 10,  innerRadius: 25,  outerRadius: 50,  stroke: "black",  fill: "orange",});var ringF = new Konva.Ring({  x: 200,  y: 275,  innerRadius: 10,  outerRadius: 20,  stroke: "black",  fill: "white",});layerA.add(ringA, ringB, ringC, ringD, starA, ringE, starB, starC, ringF);stage.add(layerA);</pre><p>В следующем примере я наложил несколько звездных и кольцевых фигур вместе, чтобы создать хороший узор. Три звезды и два кольца в узоре являются концентрическими. Имейте в виду, что всякий раз, когда вы пытаетесь создать что-то подобное, всегда сначала рисуйте самую большую форму. Если бы я добавил <code class="inline">starA</code> в слой (layer) позже, она бы накрыла все меньшие кольца и звезды, скрыв их от зрителей.</p><p></p><h2>Текст и направление текста в Konva</h2><p>Вы можете писать текст на холсте (canvas) с помощью объекта <code class="inline">Konva.Text()</code>. При создании текстового объекта вы можете указать значение для семейства шрифтов, размера шрифта, стиля шрифта и варианта шрифта, используя свойства <code class="inline">fontFamily</code>, <code class="inline">fontSize</code>, <code class="inline">fontStyle</code> и <code class="inline">fontVariant</code>. Семейство шрифтов по умолчанию - Arial, а размер шрифта по умолчанию - 12. Вы можете установить свойство <code class="inline">fontStyle</code> в normal, bold или italic. Аналогично, <code class="inline">fontVariant</code> может быть установлен как normal, так и smallcaps. </p><p>Текст, который вы хотите записать, можно указать с помощью свойства <code class="inline">text</code>. Если в многострочном комментарии недостаточно расстояния между строками, вы можете увеличить его с помощью свойства <code class="inline">lineHeight</code>.</p><p>Верхняя левая точка, из которой Konva должна начать писать текст, задается с помощью свойств <code class="inline">x</code> и <code class="inline">y</code>. Вы можете ограничить ширину текста, используя свойство width. Любой текст, который вы пишете, по умолчанию будет выровнен по левому краю. Вы можете выровнять его по правому краю или по центру, используя свойство <code class="inline">align</code>.</p><pre class="brush: javascript noskimlinks noskimwords">var canvasWidth = 600;var canvasHeight = 400;var stage = new Konva.Stage({  container: "example",  width: canvasWidth,  height: canvasHeight});var layerA = new Konva.Layer();var textA = new Konva.Text({  y: 25,  width: canvasWidth,  align: "center",  text: "QUOTE OF THE DAY",  fontSize: 50,  fontFamily: "Lato"});var textB = new Konva.Text({  x: canvasWidth/10,  y: 175,  width: canvasWidth*8/10,  align: "center",  lineHeight: 1.4,  text: "You"ve gotta dance like there"s nobody watching,\n Love like you"ll never be hurt,\n Sing like there"s nobody listening,\n And live like it"s heaven on earth.",  fontSize: 25,  fontFamily: "Lato"});var rectA = new Konva.Rect({  x: canvasWidth/10 - 10,  y: 140,  width: canvasWidth*8/10 + 20,  height: 240,  stroke: "black",  fill: "brown"});var rectB = new Konva.Rect({  x: canvasWidth/10,  y: 150,  width: canvasWidth*8/10,  height: 220,  stroke: "black",  fill: "lightblue"});var starA = new Konva.Star({  x: canvasWidth/10,  y: 150,  innerRadius: 40,  outerRadius: 30,  numPoints: 10,  stroke: "black",  fill: "orange"});layerA.add(textA, rectA, starA, rectB, textB);stage.add(layerA);</pre><p>В приведенном выше примере вы должны заметить, что я добавил <code class="inline">textB</code> в слой после добавления всех других элементов. Таким образом, мы можем убедиться, что цитата остается поверх всех других фигур.</p><p></p><p>Текст, который вы пишете на холсте, не обязан быть прямолинейным. Вы можете указать путь тексту, используя свойство <code class="inline">data</code>. Путь задается в виде строки SVG и может включать команды для следования по линиям, кривым и дугам. </p><p>Важно помнить, что текст, который вы хотите написать по определенному пути, должен быть создан с помощью объекта <code class="inline">Konva.TextPath()</code>. Вот пример, который задает путь для текста в виде кривой Безье.</p><pre class="brush: javascript noskimlinks noskimwords">var canvasWidth = 600;var canvasHeight = 400;var stage = new Konva.Stage({  container: "example",  width: canvasWidth,  height: canvasHeight});var layerA = new Konva.Layer();var textA = new Konva.TextPath({  y: 25,  align: "center",  data: "M100,300 C150,100 200,50 500 60",  text: "THIS TEXT GOES ALONG A PATH",  fontSize: 35,  fontFamily: "Lato",  fill: "orange"});var textB = new Konva.TextPath({  y: 28,  align: "center",  data: "M100,320 C200,200 400,400 500 80",  text: "THIS TEXT GOES ALONG ANOTHER PATH",  fontSize: 25,  fontFamily: "Lato",  fill: "green"});layerA.add(textA, textB);stage.add(layerA);</pre><p></p><h2>Рисование изображений и спрайтов с помощью Konva</h2><p>Теперь у вас есть возможность создавать различные фигуры, используя методы, которые мы обсуждали в этом и предыдущем уроке, но иногда имеет смысл непосредственно использовать изображение при попытке нарисовать графику на холсте. Konva позволяет рисовать изображения с помощью объекта <code class="inline">Konva.Image()</code>. </p><p>Положение верхнего левого угла изображения определяется значением свойств <code class="inline">x</code> и <code class="inline">y</code>. Аналогично, его ширина и высота задаются с помощью свойств <code class="inline">width</code> и <code class="inline">height</code>. Значения свойств <code class="inline">width</code> и <code class="inline">height</code> не обязательно должны быть равны фактическим размерам изображения. Можно также масштабировать или поворачивать изображение с помощью свойств <code class="inline">rotation</code>, <code class="inline">scale</code>, <code class="inline">scaleX</code> и <code class="inline">scaleY</code>.</p><pre class="brush: javascript noskimlinks noskimwords">var canvasWidth = 600;var canvasHeight = 400;var stage = new Konva.Stage({  container: "example",  width: canvasWidth,  height: canvasHeight});var layerA = new Konva.Layer();var theImage = new Image();theImage.src = "path/to/the/image.jpg";theImage.onload = function() {  var field = new Konva.Image({    x: 35,    y: 115,    image: theImage,    width: 500,    height: 250,    rotation: -10,    stroke: "black",    strokeWidth: 15  });  layerA.add(field);  stage.add(layerA);};</pre><p>Стоит отметить, что в приведенном выше коде я создал экземпляр объекта <code class="inline">Konva.Image()</code> после того, как изображение уже загрузилось. Попытка создать экземпляр объекта <code class="inline">Konva.Image()</code> перед загрузкой изображения приведет к ошибке. <span>Изображение </span> было взято из Pixabay.</p><p></p><p>Konva также позволяет создавать спрайты на холсте с помощью объекта <code class="inline">Konva.Sprite()</code>. Единственное различие заключается в том, что на этот раз вам придется использовать ключи <code class="inline">animation</code> и <code class="inline">animations</code> в дополнение к ключевому слову изображения, который мы использовали ранее, при визуализации изображения.</p><p>Ключ <code class="inline">animation</code> принимает строку, которая указывает <code class="inline">id</code> анимации для воспроизведения. Ключ <code class="inline">animations</code> принимает объект, который сохраняет карту анимации для спрайта в качестве значения. Вы можете контролировать скорость, с которой должна воспроизводиться анимация спрайтов с помощью свойства <code class="inline">frameRate</code>.</p><pre class="brush: javascript noskimlinks noskimwords">var canvasWidth = 600;var canvasHeight = 400;var stage = new Konva.Stage({  container: "example",  width: canvasWidth,  height: canvasHeight});var layerA = new Konva.Layer();var theSprite = new Image();theSprite.src =  "path/to/hero_spritesheet.png";var animations = {  standing: [0, 0, 80, 94],  walking: [0, 94, 80, 94,           80, 94, 80, 94,           160, 94,  80, 94,           240, 94, 80, 94,           320, 94, 80, 94,           400, 94, 80, 94],  jumping: [0, 282, 80, 94,           80, 282, 80, 94,           160, 282, 80, 94]};theSprite.onload = function() {  var heroA = new Konva.Sprite({    x: 50,    y: 50,    image: theSprite,    animation: "standing",    animations: animations,    frameRate: 6,    frameIndex: 0  });    var heroB = new Konva.Sprite({    x: 50,    y: 150,    image: theSprite,    animation: "walking",    animations: animations,    frameRate: 6,    frameIndex: 0  });    var heroC = new Konva.Sprite({    x: 50,    y: 250,    image: theSprite,    animation: "walking",    animations: animations,    frameRate: 60,    frameIndex: 0  });    var heroD = new Konva.Sprite({    x: 275,    y: 150,    scale: 2,    image: theSprite,    animation: "jumping",    animations: animations,    frameRate: 2,    frameIndex: 0  });  layerA.add(heroA, heroB, heroC, heroD);  stage.add(layerA);    heroA.start();  heroB.start();  heroC.start();  heroD.start();};</pre><p>Ширина и высота нашего героя-спрайта составляют 80px и 94px соответственно. Я использовал эти значения, чтобы указать Konva положение спрайта, которое должно отображаться при воспроизведении определенной последовательности анимации. Каждой последовательности анимации присваивается <code class="inline">id</code>, чтобы определить, что делает герой. Этот <code class="inline">id</code> используется позже, когда вы хотите указать Konva, какую анимацию она должна проиграть. Как и в предыдущем примере, я создал экземпляр героя после загрузки изображения, чтобы избежать ошибок. </p><p><span>Спрайт героя</span>, который мы используем в демонстрации, был создан <span>tokka</span>. Я также использовал то же изображение в уроке <span>Crafty Beyond the Basics: Sprites</span>, чтобы создать анимацию спрайтов. В учебниках этого курса показано, как создать простую <span>2D-игру с помощью Crafty</span>.</p><p>Возвращаемся к Konva, следующий пример показывает идущего и прыгающего героя. У героя внизу есть более высокое значение <code class="inline">frameRate</code>, из-за чего он выглядит так, как будто бежит на сверхчеловеческой скорости.</p><p></p><h2>Заключительные мысли</h2><p>После завершения второго и третьего уроков вы сможете самостоятельно создавать множество фигур, узоров и дизайнов с помощью Konva. В последнем разделе также показано, как рисовать изображения и спрайты на холсте. Это должно покрыть все ваши потребности, связанные с этим.</p><p>Если у вас есть какие-либо вопросы, связанные с этим учебником, я был бы рад помочь. Следующий урок научит вас заполнять ваши фигуры градиентами и применять тени ко всему, что вы рисуете на холсте.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824847-manipulirovanie-html5-canvas-s-ispolzovaniem-konva-chast-3-slozhnye-formy-i-sprajty" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="JavaScript" href="https://norma-studio.github.io/article/220824847-manipulirovanie-html5-canvas-s-ispolzovaniem-konva-chast-3-slozhnye-formy-i-sprajty" class="tm-article-body__tags-item-link">JavaScript</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
37112</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
417</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
