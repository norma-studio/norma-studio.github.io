
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Создание вариантов стиля для блоков WordPress Gutenberg: часть 2... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="В предыдущем посте мы узнали все о вариациях стилей блоков и о том, как они используются в новом редакторе WordPress 5.0 для простого переключения между предопределенными стилями....">
<meta property="og:description" content="В предыдущем посте мы узнали все о вариациях стилей блоков и о том, как они используются в новом редакторе WordPress 5.0 для простого переключения между предопределенными стилями....">
<meta name="twitter:description" content="В предыдущем посте мы узнали все о вариациях стилей блоков и о том, как они используются в новом редакторе WordPress 5.0 для простого переключения между предопределенными стилями....">
<meta property="aiturec:description" content="В предыдущем посте мы узнали все о вариациях стилей блоков и о том, как они используются в новом редакторе WordPress 5.0 для простого переключения между предопределенными стилями....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/32254/image/2-1.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/32254/image/2-1.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/32254/image/2-1.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/32254/image/2-1.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/32254/image/2-1.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824710-sozdanie-variantov-stilya-dlya-blokov-wordpress-gutenberg-chast-2.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824710-sozdanie-variantov-stilya-dlya-blokov-wordpress-gutenberg-chast-2.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824710-sozdanie-variantov-stilya-dlya-blokov-wordpress-gutenberg-chast-2.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824710-sozdanie-variantov-stilya-dlya-blokov-wordpress-gutenberg-chast-2.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824710-sozdanie-variantov-stilya-dlya-blokov-wordpress-gutenberg-chast-2.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824710-sozdanie-variantov-stilya-dlya-blokov-wordpress-gutenberg-chast-2.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824710-sozdanie-variantov-stilya-dlya-blokov-wordpress-gutenberg-chast-2.html" title="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2... | envatomarket.ru | norma-studio.github.io" title="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/645343435.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824710-sozdanie-variantov-stilya-dlya-blokov-wordpress-gutenberg-chast-2.html" class="tm-user-info__username" title="
Н. Аяцков" aria-label="
Н. Аяцков">
Н. Аяцков</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Создание вариантов стиля для блоков WordPress Gutenberg: часть 2...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824710-sozdanie-variantov-stilya-dlya-blokov-wordpress-gutenberg-chast-2" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="WordPress" href="https://norma-studio.github.io/article/220824710-sozdanie-variantov-stilya-dlya-blokov-wordpress-gutenberg-chast-2" class="tm-article-snippet__hubs-item-link"><span>WordPress</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824710-sozdanie-variantov-stilya-dlya-blokov-wordpress-gutenberg-chast-2.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/32254/image/2-1.jpg">
    <meta itemprop="headline name" content="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="В предыдущем посте мы узнали все о вариациях стилей блоков и о том, как они используются в новом редакторе WordPress 5.0 для простого переключения между предопределенными стилями....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">В предыдущем посте мы узнали все о вариациях стилей блоков и о том, как они используются в новом редакторе WordPress 5.0 для простого переключения между предопределенными стилями....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>В предыдущем посте мы узнали <span>все о вариациях стилей блоков и о том, как они используются в новом редакторе WordPress 5.0</span> для простого переключения между предопределенными стилями.</p><p>В этом посте мы пойдем немного дальше, предоставив больше примеров, чтобы дать вам прочную основу для реализации вариаций стиля блока в ваших собственных проектах. В частности, мы создадим наш собственный блок с нуля, чтобы продемонстрировать, как добавить несколько вариантов стиля непосредственно в само определение блока. Я также покажу вам, как установить, какой стиль блока используется, поскольку по умолчанию также рассматривается.<br></p><p>Затем мы рассмотрим расширение нашего блока путем добавления дополнительных вариаций стиля блока (для краткости BSV) через отдельный плагин. Обычно вы хотели бы сделать это, если вам нужно расширить стили блока, но у вас нет доступа к исходному коду блока.<br></p><p>Тот же подход будет использоваться снова, но на этот раз через дочернюю тему. Возможно, вы захотите сделать это, чтобы предоставить дополнительные вариации стилей для основных блоков, чтобы они соответствовали вашим собственным стилям темы.<br></p><p>Так же важно, как и регистрация новых стилей, так же, как и их не регистрировать. И есть специальная функция, которую мы будем использовать для этого.<br></p><p>Весь код для этого руководства доступен для загрузки нашего репозитория GitHub справа, поэтому вам не нужно вводить код вручную, если вы просто хотите следовать.</p><h2>Регистрация BSV внутри блока<br></h2><p>Если у вас есть доступ к исходному коду блока, вы можете управлять вариациями стиля блока непосредственно внутри <code class="inline">registerBlockType ()</code>. Давайте внимательнее посмотрим.<br></p><p>Во-первых, нам нужно раскрутить новый блок. На самом деле не имеет значения, что делает блок, поскольку нам просто нужно что-то добавить, чтобы добавить наши собственные вариации стиля блока. Вероятно, самый простой способ сделать это - использовать утилиту <code class="inline">create-guten-block</code>, которая создает новый плагин и добавляет образец блока, готовый для настройки. И делает это все из одной команды терминала!<br></p><p>Если вы не пользовались этой удобной утилитой ранее, вы можете посмотреть <span>репозиторий проекта</span> для получения дополнительной информации. Кроме того, вот <span>специальное учебное пособие</span>, чтобы научить вас быстро, если это необходимо.<br></p><p>В Вашем местном WordPress папка плагина откройте окно командной строки и войдите:</p><pre class="brush: bash noskimlinks noskimwords">npx create-guten-block bsv-plugin</pre><p>Я использовал <code class="inline">bsv-плагин</code> здесь для названия, но вы можете использовать все что угодно. Через пару минут после завершения установки введите:</p><pre class="brush: bash noskimlinks noskimwords">cd bsv-pluginnpm start</pre><p>Теперь мы можем отредактировать исходный код нашего вновь созданного блока, и <code class="inline">create-guten-block</code> автоматически скомпилирует для нас исходный код после каждого изменения. Ницца.</p><p>Идите дальше и активируйте плагин внутри администратора WordPress и добавьте экземпляр вашего нового блока в редактор, создав новую страницу или отредактировав существующую.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/32254/image/2-1.jpg" alt="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2..." title="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2..." width="50" height="50"></figure><h4>Удалить стили только для редактора</h4><p>Прежде чем мы пойдем дальше, нам просто нужно изменить способ, которым CSS ставится в очередь по умолчанию.<br></p><p>Пользовательский блок <code class="inline">create-guten-block</code>, созданный для нас, включает две таблицы стилей. Один поставлен в очередь в редакторе, а другой поставлен в очередь в редакторе <em>и</em> интерфейсе. Для этого урока нам не нужны стили только для редактора, поэтому в. <strong>\ Bsv-plugin \ src \ init.php</strong> закомментируйте или удалите вызов <code class="inline">wp_enqueue_style ()</code> в <code class="inline">bsv_plugin_cgb_editor_assets ()</code>.<br></p><p>Оставаясь в <strong>init.php</strong> на мгновение, мы также должны закомментировать массив зависимостей для <code class="inline">wp_enqueue_style ()</code> в <code class="inline">bsv_plugin_cgb_block_assets ()</code>, поскольку по какой-то причине это в настоящее время препятствует правильному набору стилей в должном порядке. Я использую <code class="inline">create-guten-block</code> v1.11.0 в этом руководстве, поэтому у вас может возникнуть или не возникнуть одна и та же проблема в зависимости от используемой версии.<br></p><p>Функция <code class="inline">bsv_plugin_cgb_block_assets ()</code> теперь должна выглядеть так:</p><pre class="brush: php noskimlinks noskimwords">function bsv_plugin_cgb_block_assets() {    // Styles.    wp_enqueue_style(        "bsv_plugin-cgb-style-css", // Handle.        plugins_url( "dist/blocks.style.build.css", dirname( __FILE__ ) ) // Block style CSS.        //array( "wp-blocks" ) // Dependency to include the CSS after it.        // filemtime( plugin_dir_path( __DIR__ ) . "dist/blocks.style.build.css" ) // Version: filemtime — Gets file modification time.    );} // End function bsv_plugin_cgb_block_assets().</pre><p>Теперь, когда вы загрузите страницу, вы увидите стили блоков, которые применяются в редакторе и во внешнем интерфейсе, что мы и хотим.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/32254/image/2-2.jpg" alt="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2..." title="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2..." width="50" height="50"></figure><h4>Регистрация блочных вариаций стиля</h4><p>Мы все настроены сейчас, чтобы добавить наш собственный CSS, который мы сделаем коротышкой. Во-первых, нам нужно зарегистрировать наши вариации стиля блока.</p><p>Откройте файл. <strong>\ Bsv-plugin \ src \ block \ block.js</strong> и добавьте следующее в объект конфигурации функций <code class="inline">registerBlockType</code> (например, прямо под свойством <code class="inline">ключевых слов</code> здесь будет работать).</p><pre class="brush: javascript noskimlinks noskimwords">styles: [    {        name: "style1",        label: __("Style 1"),        isDefault: true    },    {        name: "style2",        label: __("Style 2")    },    {        name: "style3",        label: __("Style 3")    }],</pre><p>Это регистрирует три новых варианта стиля для нашего пользовательского блока. Обратите внимание, что для варианта стиля блока с именем <code class="inline">style1</code> свойство <code class="inline">isDefault</code> имеет значение <code class="inline">true</code>. Это просто выбирает вариант стиля блока <strong>Style 1</strong>, когда вы открываете параметры блока в редакторе. На самом деле он не устанавливает классы CSS для блока, как вы могли подумать.</p><p>Когда я впервые начал работать с вариациями блочного стиля, это стало для меня камнем преткновения, и это стало источником путаницы. Надеемся, что в будущем свойство <code class="inline">isDefault</code> также вызовет добавление класса CSS в оболочку блока, которая, на мой взгляд, более интуитивна.</p><p>Обновите страницу редактора и откройте параметры варианта стиля, щелкнув значок в левом верхнем углу блока, чтобы увидеть три варианта стиля блока, которые мы только что определили.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/32254/image/2-3.jpg" alt="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2..." title="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2..." width="50" height="50"></figure><p>Обратите внимание, как по умолчанию выбран вариант стиля блока <strong>Style 1</strong>, который мы указали в свойстве <code class="inline">styles</code> выше. Выбор любого из трех вариантов стиля блока приводит к добавлению различных классов CSS в оболочку блока. Например, выбор <strong>Style 2</strong> добавляет класс <code class="inline">is-style-style2</code>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/32254/image/2-4.jpg" alt="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2..." title="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2..." width="50" height="50"></figure><p>В настоящее время ничего не происходит при выборе каждого варианта стиля блока, поэтому давайте добавим несколько основных стилей, чтобы это исправить. В <strong>. \ bsv-plugin \ src \ block \ style.scss</strong> добавьте следующее после существующих стилей:</p><pre class="brush: css noskimlinks noskimwords">.wp-block-cgb-block-bsv-plugin.is-style-style2 {    background: pink;}.wp-block-cgb-block-bsv-plugin.is-style-style3 {    background: purple;    color: white;}</pre><p>Здесь добавляются только пользовательские стили для вариаций стилей блоков <strong>Style 2</strong> и <strong>Style 3</strong>, так что стили блоков по умолчанию применяются по-прежнему, даже если ни один вариант стиля блока не был специально выбран.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/32254/image/2-5.jpg" alt="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2..." title="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2..." width="50" height="50"></figure><p>Как вы можете видеть, наши вариации стилей блоков теперь доступны с примененными стилями. Мне очень нравится, как вы можете видеть предварительный просмотр каждого варианта стиля при наведении на него, и при этом не нужно выбирать его сначала!<br></p><h2>Регистрация BSV через плагин<br></h2><p>Если вы хотите добавить вариации стиля в блок, к которому у вас <em>нет доступа</em> к исходному коду, вы можете использовать <code class="inline">registerBlockStyle ()</code>. Эта функция позволяет вам определять дополнительные вариации стиля для основных блоков и сторонних блоков вне <code class="inline">registerBlockType ()</code>.</p><p>Давайте проверим это, добавив пару наших собственных вариаций стиля в основной блок кнопок. Этот блок поставляется с тремя уже определенными вариациями стиля: <strong>закругленный</strong>, <strong>контурный</strong> и <strong>квадратный</strong>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/32254/image/2-6.jpg" alt="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2..." title="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2..." width="50" height="50"></figure><p>Мы добавим еще два наших собственных стиля: <strong>Pill Shaped</strong> и <strong>Uppercase</strong>.</p><p>Прежде чем мы сделаем это, нам нужен плагин для хранения нашего пользовательского кода. Я не буду подробно останавливаться на этом, так как основное внимание в этом руководстве уделяется вариациям блочного стиля, а не разработке плагинов. Если после этого у вас возникнут какие-либо проблемы, вы можете просто загрузить готовый плагин по ссылке <strong>GitHub</strong> справа.<br></p><p>Создайте новую папку <strong>bsv</strong> в вашей локальной папке WordPress<strong>. \ wp-content \ plugins</strong> и добавьте три файла:<br></p><ul><li><strong>bsv .php</strong></li> <li><strong>bsv.js </strong></li> <li><strong>bsv.css </strong></li> </ul><p>В <strong>bsv.php</strong> добавьте следующий код:</p><pre class="brush: php noskimlinks noskimwords">&lt;?php/*Plugin Name: Block Style VariationsVersion: 0.1Description: Demonstrates how to add block style variations to an existing block.Author: David GwyerAuthor URI: https://www.wpgoplugins.com*/// editor scriptsfunction bsv_editor($hook) {    wp_enqueue_script( "bsv_js", plugins_url( "bsv.js", __FILE__ ) );}add_action("enqueue_block_editor_assets", "bsv_editor");// frontend and editor scriptsfunction bsv_frontend_editor($hook) {    wp_enqueue_style( "bsv_css", plugins_url( "bsv.css", __FILE__ ) );}add_action("enqueue_block_assets", "bsv_frontend_editor");</pre><p>В <strong>bsv.js</strong> добавьте внешний код:</p><pre class="brush: javascript noskimlinks noskimwords">jQuery(document).ready(function($) {  wp.blocks.registerBlockStyle("core/button", {    name: "upper-case",    label: "Upper Case"  });  wp.blocks.registerBlockStyle("core/button", {    name: "pill",    label: "Pill Shaped"  });});</pre><p>И в <strong>bsv.css</strong> добавьте сами стили:</p><pre class="brush: css noskimlinks noskimwords">.wp-block-button.is-style-upper-case {  text-transform: uppercase;}.wp-block-button.is-style-pill .wp-block-button__link {  border-radius: 30px !important;}</pre><p>Активируйте плагин и вставьте новый экземпляр блока кнопок в редактор. Теперь вы должны увидеть две новые вариации стиля блока!</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/32254/image/2-7.jpg" alt="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2..." title="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2..." width="50" height="50"></figure><h3>Понимание кода плагина BSV</h3><p>Давайте рассмотрим, что мы только что сделали. В <strong>bsv.php</strong> файл JavaScript был поставлен в очередь через  <code class="inline">enqueue_block_editor_assets</code>, поэтому он загружается только в редакторе администратора. Однако мы хотим, чтобы CSS загружался в редакторе <em>и </em>интерфейсе, поэтому для этого мы используем <code class="inline">enqueue_block_assets</code>.</p><p>Стили довольно понятны, но обратите внимание, как мы нацелены на экземпляры блоков с помощью определенных классов вариаций стиля блока. Это дает нам простой способ выделить наш CSS для различных вариаций стиля блока.<br></p><p>Здесь важно обратить внимание на два вызова <code class="inline">registerBlockStyle ()</code>. Эта функция находится в глобальном объекте <code class="inline">wp.blocks</code>, поэтому нам нужно явно включить префикс везде, где используется эта функция.<br></p><p><code class="inline">registerBlockStyle ()</code> принимает два аргумента. Первый - это имя блока, к которому вы хотите добавить вариацию стиля, а второй - объект конфигурации. Это точно такой же объект, с которым мы сталкивались ранее, когда добавляли вариации стиля блока непосредственно в определение блока через свойство <code class="inline">styles</code>.<br></p><p>Здесь следует отметить одну вещь: если вы добавите <code class="inline">isDefault: true</code> для варианта стиля блока с помощью <code class="inline">registerBlockStyle ()</code>, он будет игнорироваться, если вариант стиля по умолчанию уже установлен. Просто что-то, на что нужно обратить внимание, если (как и я) вы ожидаете, что оно переопределит изменение стиля по умолчанию.<br></p><p>Согласно документации, вы также можете отменить регистрацию варианта стиля блока с помощью <code class="inline">unregisterBlockStyle ()</code>. Использование очень похоже на <code class="inline">registerBlockStyle ()</code>, но вам нужно только указать имя блока и имя варианта стиля.<br></p><p>Так, например, чтобы отменить регистрацию <strong>варианта</strong> стиля Outline в блоке кнопок, вы можете использовать:</p><pre class="brush: javascript noskimlinks noskimwords">wp.blocks.unregisterBlockStyle("core/button", "outline");</pre><p>Тем не менее, сейчас, похоже, есть проблема с этим. Это работает, если вы вводите вышеуказанную строку кода в окне консоли, но не всегда работает, когда используется из плагина. Надеемся, что <span>эти проблемы</span> будут решены в ближайшее время.</p><h2>Регистрация BSV через тему<br></h2><p>В нашем последнем примере давайте добавим еще один вариант стиля в основной блок кнопок, чтобы добавить опцию для рендеринга кнопок с градиентным цветом фона, а не просто с плоским цветом.<br></p><p>На этот раз мы реализуем этот новый вариант стиля с помощью дочерней темы, так как я думаю, что это будет обычным вариантом использования альтернативных стилей для блоков, которые соответствуют вашей собственной теме. (Тема также включена в загружаемый файл для этого урока, если вы не хотите создавать ее вручную.)<br></p><p>Я использую <strong>Twenty Nineteen</strong> в качестве родительской темы, так как она включена в WordPress 5.0, но вы можете использовать ее для любой родительской темы.<br></p><p>Создайте новую папку, состоящую из <code class="inline">двадцати девяти дочерних элементов</code>, в вашей локальной папке WordPress<strong>. \ wp-content \ themes</strong> и добавьте четыре файла:<br></p><ul><li><strong>style.css </strong></li> <li><strong>functions.php </strong></li> <li><strong>tnc_bsv.js</strong></li> <li><strong>tnc_bsv.css</strong></li> </ul><p>Мы не будем добавлять какие-либо конкретные стили дочерних тем в <strong>style.css</strong>, но нам нужно включить их, чтобы тема распознавалась WordPress.<br></p><p>В <strong>style.css</strong> добавьте:</p><pre class="brush: css noskimlinks noskimwords">/* Theme Name:   Twenty Nineteen Child Author:       David Gwyer Author URI:   https://wpgoplugins.com/ Template:     twentynineteen Version:      0.1 License:      GNU General Public License v2 or later License URI:  https://www.gnu.org/licenses/gpl-2.0.html*/</pre><p>Файлы JavaScript и CSS ставятся в очередь с помощью <strong>functions.php</strong>, поэтому добавьте в этот файл следующий код:</p><pre class="brush: php noskimlinks noskimwords">&lt;?php// tnc = twenty nineteen child// Include parent theme stylesfunction tnc_enqueue_parent_theme_styles() {    wp_enqueue_style( "parent-theme-styles", get_template_directory_uri() . "/style.css" );}add_action( "wp_enqueue_scripts", "tnc_enqueue_parent_theme_styles" );function tnc_add_styles() {    wp_enqueue_style( "tnc-bsv-css", get_stylesheet_directory_uri() . "/tnc_bsv.css" );}add_action("enqueue_block_assets", "tnc_add_styles");function tnc_add_scripts() {    wp_enqueue_script(        "tnc-bsv-js",        get_stylesheet_directory_uri() . "/tnc_bsv.js"    );}add_action( "enqueue_block_editor_assets", "tnc_add_scripts" );</pre><p>В <strong>tnc_bsv.js</strong> добавьте код для регистрации нашего варианта стиля блока:</p><pre class="brush: javascript noskimlinks noskimwords">jQuery(document).ready(function($) {  wp.blocks.registerBlockStyle("core/button", {    name: "gradient",    label: "Gradient"  });});</pre><p>Наконец, CSS для нашего варианта стиля блока добавлен в <strong>tnc_bsv.css</strong>:</p><pre class="brush: css noskimlinks noskimwords">.wp-block-button.is-style-gradient .wp-block-button__link {  background: linear-gradient(    to bottom,    #6db3f2 0%,    #54a3ee 50%,    #3690f0 51%,    #1e69de 100%  ) !important;}.wp-block-button.is-style-gradient .wp-block-button__link:hover {  opacity: 0.9;  cursor: pointer;}</pre><p>Код почти такой же, как и плагин, который мы создали в последнем примере, чтобы добавить два новых варианта стиля блока. Все, что мы делаем здесь, это добавляем еще один, но на этот раз через дочернюю тему.<br></p><p>Активируйте тему, а затем добавьте блок кнопок в редактор, чтобы увидеть наше новое творение.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1527/posts/32254/image/2-8.jpg" alt="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2..." title="Создание вариантов стиля для блоков WordPress Gutenberg: часть 2..." width="50" height="50"></figure><p>Возможно, вы заметили, что я обернул код JavaScript внутри оператора jQuery:</p><pre class="brush: javascript noskimlinks noskimwords">jQuery(document).ready(function($) {    // ...});</pre><p>Это на самом деле не является строго необходимым. Казалось, что во время тестирования код работал без оболочки jQuery. Тем не менее, пока нет никаких <span>официальных указаний</span> о том, как добавить код JavaScript, который взаимодействует с новым API редактора. В то же время, возможно, было бы целесообразно продолжать использовать описанный выше метод-обертку jQuery, но выбор за вами.</p><h2>Скачать код </h2><p>Как уже упоминалось, код доступен для скачивания через ссылку <strong>GitHub</strong> в правой части страницы.</p><p>Этот репозиторий содержит тему и два плагина, которые мы разработали в этом уроке. Когда вы загрузите содержимое, вы увидите три папки. Добавьте папку <strong>twentynineteen-child</strong> в папку с темой <strong>.\ wp-content \ themes</strong> и две другие папки с плагинами в папку с плагинами <strong>.\ wp-content \ plugins</strong>.</p><p>Активируйте оба плагина и тему, чтобы сделать вариации стиля блока доступными в новом редакторе WordPress.</p><h2>Заключение </h2><p>Спасибо, что присоединились ко мне в этом уроке! Я надеюсь, что теперь у вас есть представление о вариациях блочного стиля. Дайте мне знать в комментариях, какие идеи вы могли бы использовать для своих собственных проектов.</p><p>Я уверен, что это будет широко используемая функция нового редактора как разработчиками плагинов, так и разработчиками тем. В частности, для разработчиков тем это дает вам широкие возможности для настройки стилей блоков в соответствии со стилями вашей темы.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824710-sozdanie-variantov-stilya-dlya-blokov-wordpress-gutenberg-chast-2" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="WordPress" href="https://norma-studio.github.io/article/220824710-sozdanie-variantov-stilya-dlya-blokov-wordpress-gutenberg-chast-2" class="tm-article-body__tags-item-link">WordPress</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
42776</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
409</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
