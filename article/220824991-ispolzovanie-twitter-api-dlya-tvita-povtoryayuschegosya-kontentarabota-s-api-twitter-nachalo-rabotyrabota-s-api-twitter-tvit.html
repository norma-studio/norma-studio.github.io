
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="С возвращением к нашему обзору API Twitter. Если вы используете Twitter, вы можете встретить знакомого, делящегося твитами с бота-@infinite_scream (см. Выше). Я знаю, что это в основном бот, потому что он делает твиты с десятиминутными интервалами. Но он изменяет длину строки своих виртуальных криков, чтобы не быть заблокированным печально известны...">
<meta property="og:description" content="С возвращением к нашему обзору API Twitter. Если вы используете Twitter, вы можете встретить знакомого, делящегося твитами с бота-@infinite_scream (см. Выше). Я знаю, что это в основном бот, потому что он делает твиты с десятиминутными интервалами. Но он изменяет длину строки своих виртуальных криков, чтобы не быть заблокированным печально известны...">
<meta name="twitter:description" content="С возвращением к нашему обзору API Twitter. Если вы используете Twitter, вы можете встретить знакомого, делящегося твитами с бота-@infinite_scream (см. Выше). Я знаю, что это в основном бот, потому что он делает твиты с десятиминутными интервалами. Но он изменяет длину строки своих виртуальных криков, чтобы не быть заблокированным печально известны...">
<meta property="aiturec:description" content="С возвращением к нашему обзору API Twitter. Если вы используете Twitter, вы можете встретить знакомого, делящегося твитами с бота-@infinite_scream (см. Выше). Я знаю, что это в основном бот, потому что он делает твиты с десятиминутными интервалами. Но он изменяет длину строки своих виртуальных криков, чтобы не быть заблокированным печально известны...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/28096/final_image/featured.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/28096/final_image/featured.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/28096/final_image/featured.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/28096/final_image/featured.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/28096/final_image/featured.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824991-ispolzovanie-twitter-api-dlya-tvita-povtoryayuschegosya-kontentarabota-s-api-twitter-nachalo-rabotyrabota-s-api-twitter-tvit.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824991-ispolzovanie-twitter-api-dlya-tvita-povtoryayuschegosya-kontentarabota-s-api-twitter-nachalo-rabotyrabota-s-api-twitter-tvit.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824991-ispolzovanie-twitter-api-dlya-tvita-povtoryayuschegosya-kontentarabota-s-api-twitter-nachalo-rabotyrabota-s-api-twitter-tvit.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824991-ispolzovanie-twitter-api-dlya-tvita-povtoryayuschegosya-kontentarabota-s-api-twitter-nachalo-rabotyrabota-s-api-twitter-tvit.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824991-ispolzovanie-twitter-api-dlya-tvita-povtoryayuschegosya-kontentarabota-s-api-twitter-nachalo-rabotyrabota-s-api-twitter-tvit.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824991-ispolzovanie-twitter-api-dlya-tvita-povtoryayuschegosya-kontentarabota-s-api-twitter-nachalo-rabotyrabota-s-api-twitter-tvit.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824991-ispolzovanie-twitter-api-dlya-tvita-povtoryayuschegosya-kontentarabota-s-api-twitter-nachalo-rabotyrabota-s-api-twitter-tvit.html" title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит... | envatomarket.ru | norma-studio.github.io" title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/45343254534.jpg" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824991-ispolzovanie-twitter-api-dlya-tvita-povtoryayuschegosya-kontentarabota-s-api-twitter-nachalo-rabotyrabota-s-api-twitter-tvit.html" class="tm-user-info__username" title="
С. Баранов" aria-label="
С. Баранов">
С. Баранов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824991-ispolzovanie-twitter-api-dlya-tvita-povtoryayuschegosya-kontentarabota-s-api-twitter-nachalo-rabotyrabota-s-api-twitter-tvit" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Twitter" href="https://norma-studio.github.io/article/220824991-ispolzovanie-twitter-api-dlya-tvita-povtoryayuschegosya-kontentarabota-s-api-twitter-nachalo-rabotyrabota-s-api-twitter-tvit" class="tm-article-snippet__hubs-item-link"><span>Twitter</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824991-ispolzovanie-twitter-api-dlya-tvita-povtoryayuschegosya-kontentarabota-s-api-twitter-nachalo-rabotyrabota-s-api-twitter-tvit.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/28096/final_image/featured.jpg">
    <meta itemprop="headline name" content="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="С возвращением к нашему обзору API Twitter. Если вы используете Twitter, вы можете встретить знакомого, делящегося твитами с бота-@infinite_scream (см. Выше). Я знаю, что это в основном бот, потому что он делает твиты с десятиминутными интервалами. Но он изменяет длину строки своих виртуальных криков, чтобы не быть заблокированным печально известны...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">С возвращением к нашему обзору API Twitter. Если вы используете Twitter, вы можете встретить знакомого, делящегося твитами с бота-@infinite_scream (см. Выше). Я знаю, что это в основном бот, потому что он делает твиты с десятиминутными интервалами. Но он изменяет длину строки своих виртуальных криков, чтобы не быть заблокированным печально известны...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>С возвращением к нашему обзору <span>API Twitter</span>. Если вы используете Twitter, вы можете встретить знакомого, делящегося твитами с бота <span>@infinite_scream</span> (см. Выше). Я знаю, что это в основном бот, потому что он делает твиты с десятиминутными интервалами. Но он изменяет длину строки своих виртуальных криков, чтобы не быть заблокированным печально известными <em>недокументированными</em> ограничениями API Twitter. Если вы слишком часто делаете твиты или повторяете один и тот же контент, то вы вскоре обнаружите, что ваши боты безнадежно заблокированы.</p><p>Недавно мой друг онлайн попросил меня помочь им написать код для бота, который мог бы повторять контент, но при этом использовал некоторое интеллектуальное изменение контента. В сегодняшнем учебнике я напишу о том, как это сделать с помощью API Twitter.</p><p>В сегодняшнем учебном пособии я расскажу, как создать бота, который делает:<br></p><ul><li>Случайный интервал для твитов</li> <li>Случайный выбор текста статуса</li> <li>Случайный выбор хэштегов</li> <li>Случайное включение URL-адресов</li> <li>Избегайте блокировки в Twitter</li> </ul><p>Тем не менее, если вы хотите использовать Twitter API бота для эффективного продвижения своего продукта или услуги, не раздражая при этом своих последователей, вам необходимо написать код, который грамотно изменяет тему, содержание и частоту ваших твитов в определенном порядке. Я напишу об этом в будущих эпизодах. </p><p>Если у вас есть вопросы или идеи, оставляйте их в комментариях ниже. Если вы хотите увидеть некоторые из моих других уроков Envato Tuts +, посетите<span> мою страницу инструктора</span>, особенно мою <span>стартовую серию</span>. Давайте начнем.</p><h2>Начинаем</h2><p>Для бота в первом эпизоде, я стараюсь генерировать забавные твиты на регулярной основе, стараясь при этом не разгневать великого Бога Твиттера ограничивающего доступ.</p><p>Твитовый контент очень прост и может быть случайным образом создан путем комбинирования ранее написанного текста, хэштегов и URL-адресов.</p><p>Бот работает в Yii, популярном фреймворке на основе PHP. Я постараюсь сохранить руководство ниже довольно простым для разработчиков на чистим PHP. Тем не менее, я призываю вас использовать фреймворки. Вы можете узнать больше в <span>моей серии Yii</span>.</p><h2>Создание бота</h2><h3>Регистрация приложения Twitter</h3><p>В принципе, первое, что я сделал, это зарегистрировал свое приложение, чтобы получить мои ключи Twitter:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/28096/image/app%20reg%20result_clean.jpg" alt="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." width="50" height="50"></figure><p>Если вы не знакомы с созданием приложения и авторизацией доступа к API с помощью Twitter, ознакомьтесь с некоторыми из наших предыдущих уроков:</p><ul class="roundup-block__contents posts--half-width roundup-block--card"><li class="roundup-block__content posts__post"><article><header><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/317/posts/22192/preview_image/preview-a-2.jpg" alt="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." width="50" height="50"></span><span></span></header><div class="posts__post-teaser">Изучите API Twitter в PHP с помощью автономного приложения Yii с открытым исходным кодом под названием Birdcage.</div> <footer class="posts__post-details"><div class="posts__post-teaser-overlay"></div> <div class="posts__post-publication-meta"> <img sizes="76px" class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/317/profiles/18786/profileImage/jeff_reifman-400x.jpg" alt="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." width="50" height="50"><div class="posts__post-details__info"> <address class="posts__post-author"><span>Джеф Рейфман</span></address> <time class="posts__post-publication-date" datetime="2014-11-03 16:00:32 UTC">03 ноября 2014 г.</time></div> </div> <div class="posts__post-primary-category topic-code"><span>API Twitter</span></div></footer></article></li> <li class="roundup-block__content posts__post"><article><header><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/317/posts/22459/preview_image/preview.jpg" alt="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." width="50" height="50"></span><span></span></header><div class="posts__post-teaser">Некоторые идеи не помешаются в 140 символов. Отправьте свои мысли в пронумерованные последовательности твитов с помощью API Twitter. В этом уроке мы рассмотрим ...</div> <footer class="posts__post-details"><div class="posts__post-teaser-overlay"></div> <div class="posts__post-publication-meta"> <img sizes="76px" class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/317/profiles/18786/profileImage/jeff_reifman-400x.jpg" alt="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." width="50" height="50"><div class="posts__post-details__info"> <address class="posts__post-author"><span>Джеф Рейфман</span></address> <time class="posts__post-publication-date" datetime="2015-01-07 12:00:00 UTC">07 января 2015 г.</time></div> </div> <div class="posts__post-primary-category topic-code"><span>API Twitter</span></div></footer></article></li> <li class="roundup-block__content posts__post"><article><header><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/317/posts/23512/preview_image/preview.jpg" alt="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." width="50" height="50"></span><span></span></header><div class="posts__post-teaser">Чтобы упростить работу с новыми пользователями, мы разрешим им зарегистрироваться в своих аккаунтах Google, Facebook и Twitter и позволим существующим пользователям подключать эти службы ...</div> <footer class="posts__post-details"><div class="posts__post-teaser-overlay"></div> <div class="posts__post-publication-meta"> <img sizes="76px" class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/317/profiles/18786/profileImage/jeff_reifman-400x.jpg" alt="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." width="50" height="50"><div class="posts__post-details__info"> <address class="posts__post-author"><span>Джеф Рейфман</span></address> <time class="posts__post-publication-date" datetime="2016-09-19 12:00:59 UTC">19 сентября 2016 г.</time></div> </div> <div class="posts__post-primary-category topic-code"><span>Yii</span></div></footer></article></li> </ul><h3>Авторский контент для набора твитов</h3><p>Я хотел создать систему, где мой друг (или любой подтвержденный автор) мог бы писать вариации твитов и размещать их в базе данных для постоянного использования. Во-первых, я создал миграцию базы данных, чтобы создать таблицу для них.</p><p>Все мои таблицы для этого проекта имеют префикс <code class="inline">norm_</code>. Вот таблица твитов или <code class="inline">norm_tweet</code>:</p><pre class="brush: php noskimlinks noskimwords">&lt;?php  use yii\db\Schema;  use yii\db\Migration;  class m170120_211944_create_table_norm_tweet extends Migration  {    public function up()    {        $tableOptions = null;        if ($this-&gt;db-&gt;driverName === "mysql") {            $tableOptions = "CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE=InnoDB";        }        $this-&gt;createTable("{{%norm_tweet}}", [            "id" =&gt; Schema::TYPE_PK,            "tweet" =&gt; Schema::TYPE_TEXT." NOT NULL",            "media_id" =&gt; Schema::TYPE_STRING." NOT NULL",        ], $tableOptions);    }    public function down()    {      $this-&gt;dropTable("{{%norm_tweet}}");    }  }</pre><p>Затем я использовал систему генерации кода Yii"s Gii, чтобы создать модель и CRUD-файлы. Вот модель:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/28096/image/gii_norm_tweet_model.jpg" alt="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." width="50" height="50"></figure><p>А вот генерация CRUD:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/28096/image/crud%20gen%20normtweet.jpg" alt="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." width="50" height="50"></figure><p>Таким образом, весь этот код автоматически предоставляет представление сетки ниже и возможности редактирования.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/28096/image/norm%20tweet%20index.jpg" alt="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." width="50" height="50"></figure><p>На данный момент я не использую Media ID, который предназначен для изображений, загружаемых для использования в твитах. Скорее всего, я расскажу об этом в следующем эпизоде.</p><p>Довольно просто, не так ли? <br></p><h3>Добавление хэштегов</h3><p>Затем я повторяю этот процесс и для других моделей. Вот миграция <code class="inline">norm_hash</code> для хэштегов:</p><pre class="brush: php noskimlinks noskimwords">&lt;?php  use yii\db\Schema;  use yii\db\Migration;  class m170120_212009_create_table_norm_hash extends Migration  {    public function up()    {        $tableOptions = null;        if ($this-&gt;db-&gt;driverName === "mysql") {            $tableOptions = "CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE=InnoDB";        }        $this-&gt;createTable("{{%norm_hash}}", [            "id" =&gt; Schema::TYPE_PK,            "tag" =&gt; Schema::TYPE_STRING." NOT NULL",                    ], $tableOptions);    }    public function down()    {      $this-&gt;dropTable("{{%norm_hash}}");    }  }</pre><p>Идея состоит в случайном включении выбранного тэга (или двух) в твиты, чтобы показать, что бот является человеком, изменяющим его твиты. </p><p>Вот Hashtag UX:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/28096/image/norm%20hash%20index.jpg" alt="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." width="50" height="50"></figure><p>Я не буду повторять шаги Yii Gii, но я повторяю их также для <code class="inline">norm_hash</code> и <code class="inline">norm_url</code>.</p><h3>Добавление различных URL-адресов</h3><p>Вот миграция базы данных для добавления URL-адресов:</p><pre class="brush: php noskimlinks noskimwords">&lt;?php  use yii\db\Schema;  use yii\db\Migration;  class m170120_211955_create_table_norm_url extends Migration  {    public function up()    {        $tableOptions = null;        if ($this-&gt;db-&gt;driverName === "mysql") {            $tableOptions = "CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE=InnoDB";        }        $this-&gt;createTable("{{%norm_url}}", [            "id" =&gt; Schema::TYPE_PK,            "url" =&gt; Schema::TYPE_STRING." NOT NULL",            "last_used" =&gt; Schema::TYPE_INTEGER . " NOT NULL",            "created_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",            "updated_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",        ], $tableOptions);    }    public function down()    {      $this-&gt;dropTable("{{%norm_url}}");    }  }</pre><p>Мастер-бот может добавлять URL-адреса в разное время. Вероятно, лучше для этого бота не использовать старые URL-адреса или повторять их. <code class="inline">last_used</code> и <code class="inline">created_at</code> временные метки Unix позволяют алгоритму твитинга, описанному ниже, решить, когда использовать URL-адреса.</p><p>Вот UX страница для URL:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/28096/image/norm%20urls%20index.jpg" alt="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." width="50" height="50"></figure><p>Теперь, давайте посмотрим на забавный алгоритм, чтобы объединить все эти таблицы в интересные твиты, которые не будут раздражать <em>Бога Твиттера</em>.</p><h3>Рандомизация содержимого бот-твитов</h3><p>Приятно иметь бота, который постит разнообразный контент, но разнообразие также помогает предотвратить его блокировку с помощью Twitter. </p><p>Здесь вы можете увидеть <span>лимиты Twitter</span>, но некоторые правила для повторяющегося контента, похоже, не документированы:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/28096/image/ratecharts.jpg" alt="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." width="50" height="50"></figure><p>Я узнал это от своего друга, так как им нужен алгоритм для построения твитов из базы данных твитов, хэштегов и URL-адресов.</p><p>Вот алгоритм построения, на котором мы остановились; Его легко настроить. Я опишу его по частям.</p><p><em>По моему мнению, нижеприведенный алгоритм имеет малое применение хэштегов и URL-адресов, и если вы хотите более устойчивое разнообразие контента, измените его по своему вкусу.</em></p><p>Во-первых, мы используем <code class="inline">yii\db\Expression;</code> Для правильного выбора случайного одиночного текста из таблицы:</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpnamespace frontend\models;use Yii;use yii\db\Expression;...public static function build() {  // pick a random tweet message (any one of them)  $txt = NormTweet::find()  -&gt;orderBy(new Expression("rand()"))  -&gt;one();</pre><p>Затем мы решаем, использовать хэштег (в настоящее время 1 из 5 или 20% времени) и сколько раз использовать (в настоящее время зафиксировано только одно):</p><pre class="brush: php noskimlinks noskimwords">// decide whether to use a hashtag// pick a random # between 0 and 4$useHash = rand(0,4);// if rand# is not 0 but instead 1,2,3 or 4, include hashtag(s)// for less freq use of hash tags, we can change this &gt; 2 or &gt;3if ($useHash&gt;3) {  // so we"re now going to decide which and how many hash tags to  // Creator decided to only use one hashtag for right now    $numHash = 1; // rand(1,3);    // select this rand# $numHash randomly from our list    $hash = NormHash::find()    -&gt;orderBy(new Expression("rand()"))    -&gt;one();} else {  // don"t use any hashtags  $hash=false;}</pre><p>Затем мы решаем, доступен ли URL для использования. URL-адреса должны быть ни старше недели, и их можно использовать только один раз каждые 72 часа (3 дня). Поэтому любой новый URL-адрес может быть доступен только один, два или три раза до истечения срока действия.</p><pre class="brush: php noskimlinks noskimwords">// only use a url if it"s less than a week old  $url_weekago = time()-7*24*3600;  $url_3daysago = time()-3*24*3600;  // only use a url if it"s not been posted in the last 72 hrs  $url= NormUrl::find()    -&gt;where("created_at&gt;".$url_weekago)    -&gt;andWhere("last_used&lt;".$url_3daysago) // handles unused zero case    -&gt;orderBy(["id" =&gt; SORT_DESC])-&gt;one();</pre><p>Наконец, мы строим твит на основе выбранных данных (доступные URL добавляются только один раз в четыре или 25%):</p><pre class="brush: php noskimlinks noskimwords">$content = $txt-&gt;tweet;  if ($hash!==false) {    $content.=" #".$hash-&gt;tag;  }  // only add URL 1/4 of the time  if (!is_null($url) &amp;&amp; rand(1,4) ==1) {    $content.=" ".$url-&gt;url;    $url-&gt;last_used = time();    $url-&gt;update();  }  return $content;</pre><h3>Выбор времени для постинга</h3><p>Yii позволяет вам вызывать консольные контроллеры из cron. Поэтому я добавляю вызов своего /console/DaemonController.php в crontab.</p><p><code class="inline">$ sudo crontab -l</code><br></p><p>Вот как планируются мои задачи:</p><pre class="brush: php noskimlinks noskimwords"># m h  dom mon dow   command*/3 * * * * /var/www/bot/yii daemon/frequent*/15 * * * * /var/www/bot/yii daemon/quarter0 * * * * /var/www/bot/yii daemon/hourly15 1 * * * /var/www/bot/yii daemon/overnight15 3 * * 5 /var/www/bot/yii daemon/weekly</pre><p>Каждый час запрашивается <code class="inline">daemon/hourly</code> в /console/DaemonController.php. Наше приложение бота решает только, делать твит или нет, раз в четыре часа.</p><p>Во-первых, вы видите, что у меня есть таблица <code class="inline">NormLog</code>, которую я не описывал выше, но которая отслеживает все результаты, а так же когда были сделаны твиты. Поэтому мой друг не хотел делать твиты больше одного раза в день. </p><pre class="brush: php noskimlinks noskimwords">public function actionHourly() {  // every hour  $current_hour = date("G");  if ($current_hour%4) {    // every four hours    echo "Review tweeting plan...";    $dayAgo = time()-24*3600;    $nl= \frontend\models\NormLog::find()      -&gt;orderBy(["id" =&gt; SORT_DESC])      -&gt;one();    echo "created_at: ".$nl-&gt;id." ".$nl-&gt;created_at."...";    echo "dayago: ".$dayAgo."...";    if ($nl-&gt;created_at&lt;$dayAgo) {      // okay to maybe tweet    ...</pre><p>Мы не хотели, чтобы последователей нашего бота раздражали постоянные твиты.</p><p>Затем мы выбираем число, в основном шесть раз в день (каждые четыре часа), и делаем твит, если число равно 6 (или один шанс из 12).</p><pre class="brush: php noskimlinks noskimwords">  // every four hours, if 6 is picked from 1-12, we tweet      // 1 in 12 chance 12x in two days      $r = rand(1,12);      if ($r==6) {        \frontend\models\NormTweet::deliver();        echo "tweet, 6 was picked...";      } else {        echo "do not tweet, 1 in 12 # not picked...";      }    } else {      // never tweet twice in 24 hrs      echo "do not tweet, not yet 24 hrs...";    }    echo "..made it to end...!";  }      if ($current_hour%6) {      // every six hours    }    }</pre><h3>Передача твита в API Twitter</h3><p>Вот метод <code class="inline">NormTweet::deliver()</code>, который вызывается демоном для публикации твита:</p><pre class="brush: php noskimlinks noskimwords">public static function deliver(){    // post an update    // construct    $content = NormTweet::build();    // tweet it using params for norm acct    $connection = new TwitterOAuth(        Yii::$app-&gt;params["norm"]["consumer_key"],        Yii::$app-&gt;params["norm"]["consumer_secret"],        Yii::$app-&gt;params["norm"]["access_token"],        Yii::$app-&gt;params["norm"]["access_token_secret"]);    $postit = $connection-&gt;post("statuses/update",        ["status" =&gt; $content]);            // save it in the log    $nl = new NormLog();    $nl-&gt;tweet = $content;    $nl-&gt;save();  }}</pre><p>Ключи приложения Twitter для учетной записи хранятся в файле /bot/frontend/config/params-local.php, настроенном из файла bot.ini, который я использую:</p><pre class="brush: php noskimlinks noskimwords">$ more params-local.php &lt;?phpreturn ["norm" =&gt; [     "consumer_key" =&gt; $config["norm_consumer_key"],     "consumer_secret" =&gt; $config["norm_consumer_secret"],     "access_token" =&gt; $config["norm_access_token"],     "access_token_secret" =&gt; $config["norm_access_token_secret"],     "user_id" =&gt; $config["norm_user_id"],   ],];</pre><p>Боты не простые, но они <em>веселые</em>!</p><h2>Изучение результатов</h2><p>Вот результаты нашего бота:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/28096/image/tmc.jpg" alt="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." width="50" height="50"></figure><p><em>Просто шучу</em>! Это одна из богинь-редакторов, <span>Том Макфарлин</span>. AI-скрипты пока не способны заменить его «идеи», но Envato Tuts + нанял меня для работы над этим. </p><p>Вот настоящий бот, призванный напомнить моему другу и его последователям, что новая политика Америки не совсем нормальная. Я думаю, что вы наверняка согласитесь с этим.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/28096/image/normtweets.jpg" alt="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." title="Использование Twitter API для твита повторяющегося контентаРабота с API Twitter: начало работыРабота с API Twitter: Твит..." width="50" height="50"></figure><p>Надеюсь, вам понравился этот эпизод.</p><h2>Что дальше?<br></h2><p>Затем я создам платформу, более ориентированную на маркетинг, которая поможет вам использовать API Twitter для продвижения вашего стартапа, сервисов и бизнеса и при этом не быть помеченным как бот и заблокированным.</p><p>Если у вас есть какие-либо вопросы или предложения по этому учебнику, оставляйте их в комментариях. Если вы хотите увидеть мои будущие уроки Envato Tuts + и другие серии, пожалуйста, <span>посетите мою страницу инструктора</span> или ищите меня в твиттере <span>@reifman</span>. </p><h2>Ссылки по теме</h2><ul><li><span>Как программировать с Yii2 (Envato Tuts +)</span></li> <li><span>Yii2 Developer Exchange</span></li> <li> <span>Документация для разработчиков в Twitter</span><br></li> <li><span>Электронная библиотека PHP OAuth</span></li> </ul>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824991-ispolzovanie-twitter-api-dlya-tvita-povtoryayuschegosya-kontentarabota-s-api-twitter-nachalo-rabotyrabota-s-api-twitter-tvit" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Twitter" href="https://norma-studio.github.io/article/220824991-ispolzovanie-twitter-api-dlya-tvita-povtoryayuschegosya-kontentarabota-s-api-twitter-nachalo-rabotyrabota-s-api-twitter-tvit" class="tm-article-body__tags-item-link">Twitter</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
37701</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
718</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
