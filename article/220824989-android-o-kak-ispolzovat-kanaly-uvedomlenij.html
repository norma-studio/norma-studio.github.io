
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Android O: Как использовать каналы уведомлений
... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Android O: Как использовать каналы уведомлений
... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Android O: Как использовать каналы уведомлений
... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Android O: Как использовать каналы уведомлений
... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Google запустил первый предварительный просмотр-следующей версии Android-для разработчиков, в настоящее время под кодовым названием Android O (возможно, Oreo?). Были выпущены некоторые интересные функции и одна из них —-Notification Channels (каналы уведомлений). В этом уроке мы рассмотрим этот функционал и создадим простое приложение, демонстрирую...">
<meta property="og:description" content="Google запустил первый предварительный просмотр-следующей версии Android-для разработчиков, в настоящее время под кодовым названием Android O (возможно, Oreo?). Были выпущены некоторые интересные функции и одна из них —-Notification Channels (каналы уведомлений). В этом уроке мы рассмотрим этот функционал и создадим простое приложение, демонстрирую...">
<meta name="twitter:description" content="Google запустил первый предварительный просмотр-следующей версии Android-для разработчиков, в настоящее время под кодовым названием Android O (возможно, Oreo?). Были выпущены некоторые интересные функции и одна из них —-Notification Channels (каналы уведомлений). В этом уроке мы рассмотрим этот функционал и создадим простое приложение, демонстрирую...">
<meta property="aiturec:description" content="Google запустил первый предварительный просмотр-следующей версии Android-для разработчиков, в настоящее время под кодовым названием Android O (возможно, Oreo?). Были выпущены некоторые интересные функции и одна из них —-Notification Channels (каналы уведомлений). В этом уроке мы рассмотрим этот функционал и создадим простое приложение, демонстрирую...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1499/posts/28616/final_image/b66.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1499/posts/28616/final_image/b66.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1499/posts/28616/final_image/b66.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1499/posts/28616/final_image/b66.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1499/posts/28616/final_image/b66.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824989-android-o-kak-ispolzovat-kanaly-uvedomlenij.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824989-android-o-kak-ispolzovat-kanaly-uvedomlenij.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824989-android-o-kak-ispolzovat-kanaly-uvedomlenij.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824989-android-o-kak-ispolzovat-kanaly-uvedomlenij.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824989-android-o-kak-ispolzovat-kanaly-uvedomlenij.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824989-android-o-kak-ispolzovat-kanaly-uvedomlenij.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824989-android-o-kak-ispolzovat-kanaly-uvedomlenij.html" title="Android O: Как использовать каналы уведомлений
... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Android O: Как использовать каналы уведомлений
... | envatomarket.ru | norma-studio.github.io" title="Android O: Как использовать каналы уведомлений
... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/653463654.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824989-android-o-kak-ispolzovat-kanaly-uvedomlenij.html" class="tm-user-info__username" title="
С. Салин" aria-label="
С. Салин">
С. Салин</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Android O: Как использовать каналы уведомлений
...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824989-android-o-kak-ispolzovat-kanaly-uvedomlenij" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Android SDK" href="https://norma-studio.github.io/article/220824989-android-o-kak-ispolzovat-kanaly-uvedomlenij" class="tm-article-snippet__hubs-item-link"><span>Android SDK</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824989-android-o-kak-ispolzovat-kanaly-uvedomlenij.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1499/posts/28616/final_image/b66.jpg">
    <meta itemprop="headline name" content="Android O: Как использовать каналы уведомлений
... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Google запустил первый предварительный просмотр-следующей версии Android-для разработчиков, в настоящее время под кодовым названием Android O (возможно, Oreo?). Были выпущены некоторые интересные функции и одна из них —-Notification Channels (каналы уведомлений). В этом уроке мы рассмотрим этот функционал и создадим простое приложение, демонстрирую...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Google запустил первый предварительный просмотр-следующей версии Android-для разработчиков, в настоящее время под кодовым названием Android O (возможно, Oreo?). Были выпущены некоторые интересные функции и одна из них —-Notification Channels (каналы уведомлений). В этом уроке мы рассмотрим этот функционал и создадим простое приложение, демонстрирую...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Google запустил первый предварительный просмотр следующей версии Android для разработчиков, в настоящее время под кодовым названием <span>Android O</span> (возможно, Oreo?). Были выпущены некоторые интересные функции и одна из них — <strong>Notification Channels</strong> (каналы уведомлений). В этом уроке мы рассмотрим этот функционал и создадим простое приложение, демонстрирующее эту функциональность. <br></p><h2>Что такое каналы уведомлений?</h2><p>Каналы уведомлений, позволяют нам разработчикам приложений группировать наши уведомления в группы — каналы — позволяя пользователям изменять настройки уведомлений для всего канала разом. Например, для каждого канала, пользователи могут полностью блокировать все уведомления, изменять уровни важности или включать, чтобы показывались значки уведомления. </p><p>Мы собираемся изучить эту функцию при построении простого приложения названного «TutsplusAlerts», в котором будут два канала уведомления: Android и iOS. Пользователь получит уведомление от одного из этих каналов, как только новая статься будет опубликована.</p><h2> <span class="sectionnum">1.</span> Настройка Android O SDK</h2><p>Чтобы начать использовать Android O API так, как тут описано, вам потребуется последная <span>Android Studio 2.4 Canary</span>. </p><p>Запустите Android Studio 2.4 и откройте SDK Manager, через <strong>Tools &gt; Android &gt; SDK Manager</strong>.</p><p>Затем во вкладке <strong>SDK Platforms</strong>, отметьте Show Package Details. Ниже <strong>Android O Preview</strong>, отметьте следующее: <strong>Android SDK Platform O</strong> и <strong>Google APIs Intel x86 Atom System Image </strong>(требуется только для эмулятора).</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1499/posts/28616/image/t2.jpg" alt="Android O: Как использовать каналы уведомлений..." title="Android O: Как использовать каналы уведомлений..." width="50" height="50"></figure><p>Затем переключитесь на вкладку <strong>SDK Tools</strong> и выберите следующее: </p><ul><li> <strong>Android SDK Build-Tools 26.0.0</strong> (rc1 или выше)</li> <li> <strong>Android SDK Platform-Tools 26.0.0</strong> (rc1 или выше)</li> <li><strong>Android Emulator 26.0.0</strong></li> <li><strong>Support Repository</strong></li> </ul><p>Нажмите кнопку <strong>OK</strong>, чтобы загрузить все эти компоненты.</p><h2> <span class="sectionnum">2.</span> Создание проекта Android Studio</h2><p>В Android Studio, создайте новый проект с названием <strong>TutsplusAlerts</strong> с пустой активити <code class="inline">MainActivity</code>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1499/posts/28616/image/t4.JPG" alt="Android O: Как использовать каналы уведомлений..." title="Android O: Как использовать каналы уведомлений..." width="50" height="50"></figure><h2> <span class="sectionnum">3.</span> Обновление build.gradle</h2><p>Перейдите к файлу модуля вашего приложения <strong>build.gradle</strong> и обновите версии <code class="inline">compileSdkVersion</code>, <code class="inline">buildToolsVersion</code> и <code class="inline">targetSdkVersion</code>, и наконец Support Library.<br></p><pre class="brush: groovy noskimlinks noskimwords">android {    compileSdkVersion "android-O"    buildToolsVersion "26.0.0-rc1"    defaultConfig {        applicationId "com.chikeandroid.tutsplusalerts"        minSdkVersion "O"        targetSdkVersion "O"        versionCode 1        versionName "1.0"        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"  }  ...}dependencies {    ...    compile "com.android.support:appcompat-v7:26.0.0-alpha1"    ...}</pre><p>Не забудьте синхронизировать ваш проект, после сделанных изменений.<br></p><h2> <span class="sectionnum">4.</span> Создание каналов уведомлений</h2><p>Создайте новый класс, дополняющий <span><code class="inline">ContextWrapper</code></span> и назовите его <code class="inline">NotificationUtils</code>.</p><pre class="brush: java noskimlinks noskimwords">import android.app.Notification;import android.app.NotificationChannel;import android.app.NotificationManager;import android.content.Context;import android.content.ContextWrapper;import android.graphics.Color;public class NotificationUtils extends ContextWrapper {    private NotificationManager mManager;    public static final String ANDROID_CHANNEL_ID = "com.chikeandroid.tutsplustalerts.ANDROID";    public static final String IOS_CHANNEL_ID = "com.chikeandroid.tutsplustalerts.IOS";    public static final String ANDROID_CHANNEL_NAME = "ANDROID CHANNEL";    public static final String IOS_CHANNEL_NAME = "IOS CHANNEL";    public NotificationUtils(Context base) {        super(base);        createChannels();    }    public void createChannels() {        // create android channel        NotificationChannel androidChannel = new NotificationChannel(ANDROID_CHANNEL_ID,                ANDROID_CHANNEL_NAME, NotificationManager.IMPORTANCE_DEFAULT);        // Sets whether notifications posted to this channel should display notification lights        androidChannel.enableLights(true);        // Sets whether notification posted to this channel should vibrate.        androidChannel.enableVibration(true);        // Sets the notification light color for notifications posted to this channel        androidChannel.setLightColor(Color.GREEN);        // Sets whether notifications posted to this channel appear on the lockscreen or not        androidChannel.setLockscreenVisibility(Notification.VISIBILITY_PRIVATE);        getManager().createNotificationChannel(androidChannel);        // create ios channel        NotificationChannel iosChannel = new NotificationChannel(IOS_CHANNEL_ID,                IOS_CHANNEL_NAME, NotificationManager.IMPORTANCE_HIGH);        iosChannel.enableLights(true);        iosChannel.enableVibration(true);        iosChannel.setLightColor(Color.GRAY);        iosChannel.setLockscreenVisibility(Notification.VISIBILITY_PUBLIC);        getManager().createNotificationChannel(iosChannel);    }    private NotificationManager getManager() {        if (mManager == null) {            mManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);        }        return mManager;    }}</pre><p>В коде выше, мы создали два экземпляра <span><code class="inline">NotificationChannel</code></span>, передав в его конструктор id (который должен быть уникальным для вашего пакета), название канала, а также уровень важности. Для каждого канала уведомлений, мы применили такие данные, как звук, свет, вибрация и само уведомление, для отображение на заблокированном экране. Наконец, мы получили <span><code class="inline">NotificationManager</code></span> из системы, а затем зарегистрировали канал, вызвав метод <span><code class="inline">createNotificationChannel()</code></span>, передав канал, который мы создали. <br></p><p>С помощью <span><code class="inline">createNotificationChannels()</code></span>, мы можем создавать сразу несколько каналов уведомлений, передавая Java-список экземпляров <code class="inline">NotificationChannel</code>. С помощью <span><code class="inline">getNotificationChannels()</code></span> вы можете получить все каналы уведомлений для приложения, а с помощью <span><code class="inline">getNotificationChannel()</code></span> получить определённые каналы, передавая в качестве аргумента, только id нужного канала.<br></p><h3>Уровни важности<br></h3><p>Начиная с Android O, уровни очерёдности больше не работают для конкретных уведомлений. Вместо этого, вы задаете уровень важности, при создании канала уведомлений — от <code class="inline">NotificationManager.IMPORTANCE_NONE</code> до <code class="inline">NotificationManager.IMPORTANCE_HIGH</code>. Мы настроим канал Android на <span><code class="inline">IMPORTANCE_DEFAULT</code></span>, а канал iOS будет <span><code class="inline">IMPORTANCE_HIGH</code></span>. </p><p>Полный список доступных вариантов важности:</p><ul><li> <code class="inline">IMPORTANCE_MAX</code>: не используется</li> <li> <span><code class="inline">IMPORTANCE_HIGH</code></span>: показывается везде, производит шум и визуально заметен<br></li> <li> <span><code class="inline">IMPORTANCE_DEFAULT</code></span>: показывается везде, производит шум, но визуально не заметен<br></li> <li> <code class="inline">IMPORTANCE_LOW</code>: показывается везде, но визуально не заметен</li> <li> <code class="inline">IMPORTANCE_MIN</code>: отображается незаметно</li> <li> <code class="inline">IMPORTANCE_NONE</code>: уведомление без важности; не отображается даже незаметно</li> </ul><p>Всем уведомлениям канала, будет задан одинаковый уровень влажности. <br></p><h2> <span class="sectionnum">5.</span> Создание уведомлений и отправка его по каналам</h2><p>Мы создадим два <span>Уведомления</span> для каждого из наших каналов в классе <code class="inline">NotificationUtils</code>, который мы создали. В конструкторе <code class="inline">Notification.Builder</code> (Android API 25), мы указали, какое уведомление должно быть отправлено в канал, где мы передали id канала, в качестве второго аргумента. </p><pre class="brush: java noskimlinks noskimwords">// ...public Notification.Builder getAndroidChannelNotification(String title, String body) {    return new Notification.Builder(getApplicationContext(), ANDROID_CHANNEL_ID)            .setContentTitle(title)            .setContentText(body)            .setSmallIcon(android.R.drawable.stat_notify_more)            .setAutoCancel(true);}public Notification.Builder getIosChannelNotification(String title, String body) {    return new Notification.Builder(getApplicationContext(), IOS_CHANNEL_ID)            .setContentTitle(title)            .setContentText(body)            .setSmallIcon(android.R.drawable.stat_notify_more)            .setAutoCancel(true);}//...</pre><p>Имейте в виду, что в <code class="inline">Notification.Builder()</code> также есть метод установки идентификатора канала уведомлений, называемый <code class="inline">setChannel(String channelId)</code>, поэтому вы можете выбрать установку идентификатора канала уведомления либо в конструкторе, либо с помощью метода для его установки.</p><h2> <span class="sectionnum">6.</span> Создаем маркет XML</h2><p>Теперь, когда у нас есть настройка для создания и отправки по каналам уведомлений, давайте создадим XML-макета интерфейса для размещения сообщения в нашем файле <strong>activity_main.xml</strong>. </p><pre class="brush: xml noskimlinks noskimwords">&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;LinearLayout        xmlns:android="http://schemas.android.com/apk/res/android"        xmlns:app="http://schemas.android.com/apk/res-auto"        xmlns:tools="http://schemas.android.com/tools"        android:id="@+id/activity_main"        android:layout_width="match_parent"        android:layout_height="match_parent"        android:orientation="vertical"        android:layout_margin="16dp"        tools:context="com.chikeandroid.tutsplusalerts.MainActivity"&gt;    &lt;LinearLayout            android:layout_width="match_parent"            android:layout_height="wrap_content"            android:orientation="vertical"&gt;        &lt;TextView                android:layout_width="wrap_content"                android:layout_height="wrap_content"                android:text="Tuts+ Android Channel"                android:layout_gravity="center_horizontal"                android:textAppearance="@style/TextAppearance.AppCompat.Title"/&gt;        &lt;EditText                android:id="@+id/et_android_title"                android:layout_width="match_parent"                android:layout_height="wrap_content"                android:hint="Title"/&gt;        &lt;EditText                android:id="@+id/et_android_author"                android:layout_width="match_parent"                android:layout_height="wrap_content"                android:hint="Author"/&gt;                &lt;Button                android:id="@+id/btn_send_android"                android:layout_width="match_parent"                android:layout_height="wrap_content"                android:text="Send"/&gt;    &lt;/LinearLayout&gt;    &lt;LinearLayout            android:layout_width="match_parent"            android:layout_height="wrap_content"            android:orientation="vertical"            android:layout_marginTop="20dp"&gt;        &lt;TextView                android:layout_width="wrap_content"                android:layout_height="wrap_content"                android:text="Tuts+ IOS Channel"                android:layout_gravity="center_horizontal"                android:textAppearance="@style/TextAppearance.AppCompat.Title"/&gt;        &lt;EditText                android:id="@+id/et_ios_title"                android:layout_width="match_parent"                android:layout_height="wrap_content"                android:hint="Title"                /&gt;        &lt;EditText                android:id="@+id/et_ios_author"                android:layout_width="match_parent"                android:layout_height="wrap_content"                android:hint="Author"/&gt;        &lt;Button                android:id="@+id/btn_send_ios"                android:layout_width="match_parent"                android:layout_height="wrap_content"                android:text="Send"/&gt;    &lt;/LinearLayout&gt;    &lt;/LinearLayout&gt;</pre><h2> <span class="sectionnum">7.</span> Отправка уведомлений по каналам</h2><h3>Отправка в канал Android</h3><p>В этом разделе, мы отредактирую нашу <code class="inline">MainActivity</code> так, чтобы сможем получать заголовок и автора из компонентов <code class="inline">EditText</code>, а затем отправлять в канал Android. Мы получим <code class="inline">Notification.Builder</code> для канала Android, который мы создали в нашем <code class="inline">NotificationUtils</code>, а затем уведомим (метод notify) <code class="inline">NotificationManager</code>.</p><pre class="brush: java noskimlinks noskimwords">import android.app.Notification;import android.os.Bundle;import android.support.v7.app.AppCompatActivity;import android.text.TextUtils;import android.view.View;import android.widget.Button;import android.widget.EditText;public class MainActivity extends AppCompatActivity {    private NotificationUtils mNotificationUtils;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        mNotificationUtils = new NotificationUtils(this);        final EditText editTextTitleAndroid = (EditText) findViewById(R.id.et_android_title);        final EditText editTextAuthorAndroid = (EditText) findViewById(R.id.et_android_author);        Button buttonAndroid = (Button) findViewById(R.id.btn_send_android);        buttonAndroid.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                String title = editTextTitleAndroid.getText().toString();                String author = editTextAuthorAndroid.getText().toString();                if(!TextUtils.isEmpty(title) &amp;&amp; !TextUtils.isEmpty(author)) {                    Notification.Builder nb = mNotificationUtils.                            getAndroidChannelNotification(title, "By " + author);                    mNotificationUtils.getManager().notify(101, nb.build());                }            }        });    }}</pre><p>На этом этапе, запустите приложение, укажите заголовок и автора, а затем нажмите кнопку отправки, чтобы немедленно получить уведомление.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1499/posts/28616/image/h666.jpg" alt="Android O: Как использовать каналы уведомлений..." title="Android O: Как использовать каналы уведомлений..." width="50" height="50"></figure><h3>Отправка в канал iOS</h3><p>Теперь мы отправим сообщение на канал iOS. Мы получаем <code class="inline">Notification.Builder</code> для канала iOS, который мы создали в нашем <code class="inline">NotificationUtils</code>, а затем вызываем метод <code class="inline">notify()</code> в <code class="inline">NotificationManager</code>.</p><pre class="brush: java noskimlinks noskimwords">@Overrideprotected void onCreate(Bundle savedInstanceState) {       // ...        final EditText editTextTitleIos = (EditText) findViewById(R.id.et_ios_title);    final EditText editTextAuthorIos = (EditText) findViewById(R.id.et_ios_author);    Button buttonIos = (Button) findViewById(R.id.btn_send_ios);    buttonIos.setOnClickListener(new View.OnClickListener() {        @Override        public void onClick(View view) {            String title = editTextTitleIos.getText().toString();            String author = editTextAuthorIos.getText().toString();            if(!TextUtils.isEmpty(title) &amp;&amp; !TextUtils.isEmpty(author)) {                Notification.Builder nb = mNotificationUtils                        .getIosChannelNotification(title, "By " + author);                mNotificationUtils.getManager().notify(102, nb.build());            }        }    });}</pre><p>Снова запустите приложение, укажите заголовок и автора, а затем нажмите кнопку отправки, чтобы немедленно получить уведомление.<br></p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1499/posts/28616/image/m09.jpg" alt="Android O: Как использовать каналы уведомлений..." title="Android O: Как использовать каналы уведомлений..." width="50" height="50"></figure><h2> <span class="sectionnum">8.</span> Настройки каналов уведомления</h2><p>На момент написания, вы не можете программно изменить параметры настроек определённого канала уведомлений. Только пользователь может перейти на экран настроек уведомлений для этого приложения, в системных настройках устройства. Поэтому, у пользователя есть доступ к настройкам уведомления предложения, чтобы изменить в такие параметры, как вибрация, звук и т.д. Пользователь может перейти к настройкам уведомления приложения, одним из следующих способов:</p><ul><li>Долгим нажатием на уведомление (левое изображения снизу)</li> <li> <strong>Настройки</strong> &gt; <strong>Приложения и уведомления</strong> &gt; <strong>Уведомления</strong> &gt; затем выбрать приложение (правое изображение снизу) </li> </ul><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1499/posts/28616/image/t45.jpg" alt="Android O: Как использовать каналы уведомлений..." title="Android O: Как использовать каналы уведомлений..." width="50" height="50"></figure><p>Также, вы можете отправить пользователя настройки канала уведомления, прямо из вашего приложения. Давайте посмотрим, как это можно сделать для канала Android. Рекомендуется сделать это в настройках вашего приложения, чтобы облегчить пользователю доступ к этим параметрам уведомлений.</p><h3>Редактируем XML макет</h3><p>Добавьте другую кнопку, которая будет отправлять пользователя в настройки канала уведомления.</p><pre class="brush: xml noskimlinks noskimwords">&lt;!--...--&gt;&lt;Button    android:id="@+id/btn_android_notif_settings"    android:layout_width="match_parent"    android:layout_height="wrap_content"    android:text="Notification Settings"/&gt;&lt;!--...--&gt;</pre><h3>Кодим Intent</h3><p>Здесь мы создаём intent и передаем ему действие «<span>Настройки</span>» — <code class="inline">ACTION_CHANNEL_NOTIFICATION_SETTINGS</code> (API 25), а затем добавим дополнительные значения: имя пакета приложения и идентификатор (id) канала. Наконец, мы начинаем работу настройки Активити с intent. </p><pre class="brush: java noskimlinks noskimwords">// ...@Overrideprotected void onCreate(Bundle savedInstanceState) {    //...    Button buttonAndroidNotifSettings = (Button) findViewById(R.id.btn_android_notif_settings);    buttonAndroidNotifSettings.setOnClickListener(new View.OnClickListener() {            @Override        public void onClick(View view) {            Intent i = new Intent(Settings.ACTION_CHANNEL_NOTIFICATION_SETTINGS);            i.putExtra(Settings.EXTRA_APP_PACKAGE, getPackageName());            i.putExtra(Settings.EXTRA_CHANNEL_ID, NotificationUtils.ANDROID_CHANNEL_ID);            startActivity(i);        }    });}//...</pre><p>Запустите приложение и нажмите по настройкам уведомления для канала Android.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1499/posts/28616/image/G6.jpg" alt="Android O: Как использовать каналы уведомлений..." title="Android O: Как использовать каналы уведомлений..." width="50" height="50"></figure><p>В настройках канала уведомления, пользователи могут редактировать такие настройки канала, как включение вибрации, смена важности или отображение значка (если поддерживается). </p><p>Если вы хотите предоставить пользователям основные настройки уведомления для вашего приложения, вы можете сделать это с помощью <code class="inline">Intent</code>:</p><pre class="brush: java noskimlinks noskimwords">Intent i = new Intent(Settings.ACTION_APP_NOTIFICATION_SETTINGS);i.putExtra(Settings.EXTRA_APP_PACKAGE, getPackageName());startActivity(i);</pre><h2> <span class="sectionnum">9.</span> Создание групп уведомлений</h2><p>Также, мы можем копировать каналы уведомлений в группы, тогда ими можно будет управлять совместно. Это полезно для приложений, которые поддерживает несколько учётных записей пользователей. Те же каналы уведомлений доступны для отдельных учетных записей. Например, приложение социальной сети может иметь поддержку как личного, так и бизнес аккаунтов. Код ниже показывает, как создать группу канала уведомлений.</p><pre class="brush: java noskimlinks noskimwords">String groupId = "group_id_101";CharSequence groupName = "Channel Name";NotificationManager mNotificationManager =        (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);mNotificationManager.createNotificationChannelGroup(new NotificationChannelGroup(groupId, groupName));</pre><p>Мы использовали метод <code class="inline">NotificationManagercreate</code> <span><code class="inline">NotificationChannelGroup()</code></span>, передав ему экземпляр <span><code class="inline">NotificationChannelGroup</code></span>, которому нужны id и название группы, для создания экземпляра. </p><p>После этого, нам нужно объединить каналы уведомлений в группу, используя метод <span><code class="inline">NotificationChannel.setGroup()</code></span> и передав в него id группы. Если вы хотите создать несколько групп уведомлений за раз, используете <span><code class="inline">createNotificationChannelGroups()</code></span>, передав ему Java-список экземпляров <span><code class="inline">NotificationChannelGroup</code></span>.</p><h2> <span class="sectionnum">10.</span> Удаляем канал уведомления</h2><p>Если канал уведомления больше не нужен, его можно запросто удалить. Просто используйте метод управления уведомлением <span><code class="inline">deleteNotificationChannel()</code></span> и передайте ему id канала. </p><pre class="brush: java noskimlinks noskimwords">NotificationManager mNotificationManager =        (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);mNotificationManager.deleteNotificationChannel(IOS_CHANNEL_ID);</pre><p>Однако имейте в виду, что удаленные каналы остаются видимыми в настройках уведомлений, чтобы предотвратить спам. <br></p><h2>Заключение</h2><p>В этом уроке вы узнали том, что такое Notification Channels (каналы уведомлений) и как создать такой для Android O, а также о том, как отправить уведомление на канал, как получить доступ к настройкам канала уведомления, как копировать каналы уведомлений и как удалить канал уведомлений. </p><p>Чтобы узнать больше о каналах уведомлений — Notification Channels, обратитесь к <span>официальной документации</span>. В это время, посмотрите некоторые из наших других курсов и уроков по разработки для Android!</p><ul class="roundup-block__contents posts--half-width roundup-block--list"><li class="roundup-block__content"><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/369/posts/28609/preview_image/android-o-ui-updates.jpg" alt="Android O: Как использовать каналы уведомлений..." title="Android O: Как использовать каналы уведомлений..." width="50" height="50"><div class="roundup-block__primary-category topic-code">Android SDK</div> <div class="roundup-block__content-title">Создание авторазмерного текста с Android O</div> <div class="roundup-block__author">Джессика Торнсби</div></span></li> <li class="roundup-block__content"><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1499/posts/28207/preview_image/hy.jpg" alt="Android O: Как использовать каналы уведомлений..." title="Android O: Как использовать каналы уведомлений..." width="50" height="50"><div class="roundup-block__primary-category topic-code">Android SDK</div> <div class="roundup-block__content-title">Создаем приложение для Android — Галерея изображений с Glide</div> <div class="roundup-block__author">Чике Мгбемена </div></span></li> <li class="roundup-block__content"><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1499/posts/28168/preview_image/android-designing-a-great-user-experience.jpg" alt="Android O: Как использовать каналы уведомлений..." title="Android O: Как использовать каналы уведомлений..." width="50" height="50"><div class="roundup-block__primary-category topic-code">Android SDK</div> <div class="roundup-block__content-title">Как совершать звонки и использовать SMS в Android приложениях</div> <div class="roundup-block__author">Чике Мгбемена </div></span></li> <li class="roundup-block__content"><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/769/posts/28345/preview_image/Getting-Started-RxJava-2.0-for-Android.jpg" alt="Android O: Как использовать каналы уведомлений..." title="Android O: Как использовать каналы уведомлений..." width="50" height="50"><div class="roundup-block__primary-category topic-code">Android SDK</div> <div class="roundup-block__content-title">Get Started With RxJava 2 for Android</div> <div class="roundup-block__author">Jessica Thornsby</div></span></li> </ul><br>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824989-android-o-kak-ispolzovat-kanaly-uvedomlenij" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Android SDK" href="https://norma-studio.github.io/article/220824989-android-o-kak-ispolzovat-kanaly-uvedomlenij" class="tm-article-body__tags-item-link">Android SDK</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
34429</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
337</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
