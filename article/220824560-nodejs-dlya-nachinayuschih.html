
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Node.js для начинающих... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Node.js для начинающих... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Node.js для начинающих... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Node.js для начинающих... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Программирование, управляемое событиями, может показаться немного ошеломляющим для начинающих, что весьма затрудняет работу с Node.js. Но не позволяйте этому оттолкнуть вас; в этой статье я расскажу вам некоторые основы Node.js и объясню, почему он стал настолько популярным....">
<meta property="og:description" content="Программирование, управляемое событиями, может показаться немного ошеломляющим для начинающих, что весьма затрудняет работу с Node.js. Но не позволяйте этому оттолкнуть вас; в этой статье я расскажу вам некоторые основы Node.js и объясню, почему он стал настолько популярным....">
<meta name="twitter:description" content="Программирование, управляемое событиями, может показаться немного ошеломляющим для начинающих, что весьма затрудняет работу с Node.js. Но не позволяйте этому оттолкнуть вас; в этой статье я расскажу вам некоторые основы Node.js и объясню, почему он стал настолько популярным....">
<meta property="aiturec:description" content="Программирование, управляемое событиями, может показаться немного ошеломляющим для начинающих, что весьма затрудняет работу с Node.js. Но не позволяйте этому оттолкнуть вас; в этой статье я расскажу вам некоторые основы Node.js и объясню, почему он стал настолько популярным....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/8/profiles/18564/profileImage/defaultavatar.png">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/8/profiles/18564/profileImage/defaultavatar.png">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/8/profiles/18564/profileImage/defaultavatar.png">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/8/profiles/18564/profileImage/defaultavatar.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/8/profiles/18564/profileImage/defaultavatar.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824560-nodejs-dlya-nachinayuschih.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824560-nodejs-dlya-nachinayuschih.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824560-nodejs-dlya-nachinayuschih.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824560-nodejs-dlya-nachinayuschih.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824560-nodejs-dlya-nachinayuschih.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824560-nodejs-dlya-nachinayuschih.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824560-nodejs-dlya-nachinayuschih.html" title="Node.js для начинающих... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Node.js для начинающих... | envatomarket.ru | norma-studio.github.io" title="Node.js для начинающих... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/ded38a8520cf75a955c11fc92a1a403e.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824560-nodejs-dlya-nachinayuschih.html" class="tm-user-info__username" title="
В. Самсонов" aria-label="
В. Самсонов">
В. Самсонов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Node.js для начинающих...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824560-nodejs-dlya-nachinayuschih" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article/220824560-nodejs-dlya-nachinayuschih" class="tm-article-snippet__hubs-item-link"><span>Web Development</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824560-nodejs-dlya-nachinayuschih.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/8/profiles/18564/profileImage/defaultavatar.png">
    <meta itemprop="headline name" content="Node.js для начинающих... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Программирование, управляемое событиями, может показаться немного ошеломляющим для начинающих, что весьма затрудняет работу с Node.js. Но не позволяйте этому оттолкнуть вас; в этой статье я расскажу вам некоторые основы Node.js и объясню, почему он стал настолько популярным....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Программирование, управляемое событиями, может показаться немного ошеломляющим для начинающих, что весьма затрудняет работу с Node.js. Но не позволяйте этому оттолкнуть вас; в этой статье я расскажу вам некоторые основы Node.js и объясню, почему он стал настолько популярным....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Программирование, управляемое событиями, может показаться немного ошеломляющим для начинающих, что весьма затрудняет работу с Node.js. Но не позволяйте этому оттолкнуть вас; в этой статье я расскажу вам некоторые основы Node.js и объясню, почему он стал настолько популярным.</p> <h2>Введение</h2> <p>Чтобы начать использовать Node.js, вы должны сначала понять различия между Node.js и традиционными средами сценариев на стороне сервера (например: PHP, Python, Ruby и т.д.).</p> <h3>Асинхронное программирование</h3> <blockquote> <p>Node.js использует модульную архитектуру для упрощения создания сложных приложений.</p> </blockquote> <p>Скорее всего, вы знакомы с асинхронным программированием; это, в конце концов, «А» в Ajax. Каждая функция в Node.js является асинхронной. Следовательно, все, что обычно блокирует поток, вместо этого выполняется в фоновом режиме. Это самое важное, что нужно помнить о Node.js. Например, если вы читаете файл в файловой системе, вы должны указать функцию обратного вызова, которая выполняется, когда операция чтения будет завершена.</p> <h3>Вы делаете все!</h3> <p>Node.js - это только среда - это значит, что вам нужно все делать самостоятельно. По умолчанию нет HTTP-сервера или любого другого сервера. Это может быть слишком сложных для новых пользователей, но выигрыш - высокоэффективное веб-приложение. Один скрипт обрабатывает всю связь с клиентами. Это значительно сокращает количество ресурсов, используемых приложением. Например, вот код для простого приложения Node.js:</p> <pre class="brush: noskimlinks noskimwords">var i, a, b, c, max;max = 1000000000;var d = Date.now();for (i = 0; i &lt; max; i++) {    a = 1234 + 5678 + i;    b = 1234 * 5678 + i;    c = 1234 / 2 + i;}console.log(Date.now() - d);</pre> <p>И вот эквивалент, написанный на PHP:</p> <pre class="brush: php noskimlinks noskimwords">$a = null;$b = null;$c = null;$i = null;$max = 1000000000;$start = microtime(true);for ($i = 0; $i &lt; $max; $i++) {    $a = 1234 + 5678 + $i;    $b = 1234 * 5678 + $i;    $c = 1234 / 2 + $i;}var_dump(microtime(true) - $start);</pre> <p>Теперь давайте посмотрим на эти числа. В следующей таблице перечислено время ответа в миллисекундах для этих двух простых приложений:</p> <table><tbody><tr><td><strong>Количество итераций</strong></td> <td><strong>Node.js</strong></td> <td><strong>PHP</strong></td> </tr><tr><td>100</td> <td>2,00</td> <td>0,14</td> </tr><tr><td>10"000</td> <td>3,00</td> <td>10,53</td> </tr><tr><td>1"000"000</td> <td>15.00</td> <td>1119,24</td> </tr><tr><td>10"000"000</td> <td>143,00</td> <td>10621,46</td> </tr><tr><td>1"000"000"000</td> <td>11118,00</td> <td>1036272,19</td> </tr></tbody></table><p>Я выполнил два приложения из командной строки, чтобы сервер не задерживал выполнение приложений. Я провел каждый тест десять раз и усреднил результаты. PHP заметно быстрее с меньшим количеством итераций, но это преимущество быстро растворяется по мере увеличения количества итераций. Когда все сказано и сделано, PHP на 93% медленнее, чем Node.js!</p> <p>Node.js работает быстро, но вам нужно изучить несколько вещей, чтобы правильно его использовать.</p> <h2>Модули</h2> <p>Node.js использует модульную архитектуру для упрощения создания сложных приложений. Модули сродни библиотекам в C или юнитам в Паскале. Каждый модуль содержит набор функций, связанных с «объектом» модуля. Например, <i>http </i>модуль содержит функции, специфичные для HTTP. Node.js предоставляет несколько основных модулей из коробки, чтобы помочь вам получить доступ к файлам в файловой системе, создать HTTP и TCP / UDP-серверы и выполнять другие полезные функции. </p> <p>Включить модуль легко; просто вызовите функцию <code>require()</code>, например:</p> <pre class="brush: noskimlinks noskimwords">var http = require("http");</pre> <blockquote> <p>Node.js - это только среда; вы должны делать все сами.</p> </blockquote> <p>Функция <code>require()</code> возвращает ссылку на указанный модуль. В случае этого кода ссылка на <i>http </i>модуль сохранится в переменной <code>http</code>.</p> <p>В приведенном выше коде мы передали имя модуля функции <code>require()</code>. Это заставляет Node искать папку <em>node_modules</em> в каталоге нашего приложения и искать модуль <em>http</em> в этой папке. Если Node не находит папку <em>node_modules</em> (или модуль <em>http</em> внутри нее), он затем просматривает глобальный кеш модуля. Вы также можете указать фактический файл, передав относительный или абсолютный путь, например:</p> <pre class="brush: noskimlinks noskimwords">var myModule = require("./myModule.js");</pre> <p>Модули представляют собой инкапсулированные фрагменты кода. Код внутри модуля в основном приватный - это означает, что функции и переменные, определенные внутри них, доступны только изнутри модуля. Вы можете, однако, выставить функции и/или переменные, которые будут использоваться вне модуля. Для этого используйте объект <code>exports</code> и заполните его свойства и методы с помощью фрагментов кода, которые вы хотите открыть. Рассмотрим следующий пример:</p> <pre class="brush: noskimlinks noskimwords">var PI = Math.PI;exports.area = function (r) {  return PI * r * r;};exports.circumference = function (r) {  return 2 * PI * r;};</pre> <p>Этот код создает переменную <code>PI</code>, доступ к которой может получить только код, содержащийся в модуле; он недоступен вне модуля. Затем в объекте <code>exports</code> создаются две функции. Эти функции доступны вне модуля, потому что они определены для объекта экспорта. В результате PI полностью защищен от внешних помех. Поэтому вы можете быть уверены, что область () и окружность () всегда будут вести себя так, как должны (пока значение будет задано для параметра r).</p> <h2>Глобальная область видимости</h2> <p>Node - это среда JavaScript, работающая на движке Google"s V8 JavaScript. Таким образом, мы должны следовать рекомендациям, которые мы используем при разработке на клиентской стороне. Например, мы должны избегать добавления чего-либо в глобальную область видимости. Это, однако, не всегда возможно. Глобальная область в Node это <code>GLOBAL</code> (в отличие от <code>window</code> в браузере), и вы можете легко создать глобальную переменную или функцию, опуская ключевое слово <code>var</code>, например:</p> <pre class="brush: noskimlinks noskimwords">globalVariable = 1;globalFunction = function () { ... };</pre> <p>Еще раз, по возможности, следует избегать глобальной области видимости. Поэтому будьте осторожны и не забывайте использовать <code>var</code> при объявлении переменной.</p> <h2>Установка</h2> <p>Естественно, нам нужно установить Node, прежде чем мы сможем написать и выполнить приложение. Установка выполняется довольно просто, если вы используете Windows или OS X; сайт <span>nodejs.org</span> предлагает инсталляторы для этих операционных систем. Для Linux используйте любой менеджер пакетов. Откройте терминал и введите:</p> <pre class="brush: noskimlinks noskimwords">sudo apt-get updatesudo apt-get install node</pre> <p>или:</p> <pre class="brush: noskimlinks noskimwords">sudo aptitude updatesudo aptitude install node</pre> <p>Node.js находится в sid-репозиториях; вам может потребоваться добавить их в список источников:</p> <pre class="brush: noskimlinks noskimwords">sudo echo deb http://ftp.us.debian.org/debian/ sid main &gt; /etc/apt/sources.list.d/sid.list</pre> <p>Но имейте в виду, что установка пакетов sid на более старых системах может привести к повреждению вашей системы. Будьте осторожны и удалите <code>/etc/apt/sources.list.d/sid.list </code>после завершения установки Node.</p> <h2>Установка новых модулей</h2> <p>У Node.js есть менеджер пакетов, называемый Node Package Manager (NPM). Он автоматически устанавливается с помощью Node.js, и затем вы используете NPM для установки новых модулей. Чтобы установить модуль, откройте терминал/командную строку, перейдите в нужную папку и выполните следующую команду:</p> <pre class="brush: noskimlinks noskimwords">npm install module_name</pre> <p>Неважно, какая у вас ОС; указанная выше команда установит модуль, который вы укажете вместо <em>module_name</em>.</p> <h2>Приложение Hello World</h2> <p>Естественно, наш первый скрипт Node.js напечатает текст «<code>Hello World!</code>» на консоль. Создайте файл <em>hello.js</em> и введите следующий код:</p> <pre class="brush: noskimlinks noskimwords">console.log("Hello World!");</pre> <p>Теперь давайте выполним сценарий. Откройте терминал/командную строку, перейдите к папке, содержащей <em>hello.js</em>, и выполните следующую команду:</p> <pre class="brush: noskimlinks noskimwords">node hello.js</pre> <p>Вы должны увидеть как  <code>"Hello World!"</code> отображается в консоли.</p> <h2>HTTP-сервер</h2> <p>Перейдем к более продвинутому приложению; но оно не такое уж сложное, как вы думаете. Давайте начнем со следующего кода. Прочитайте комментарии, а затем объяснение ниже:</p> <pre class="brush: noskimlinks noskimwords">// Include http module.var http = require("http");// Create the server. Function passed as parameter is called on every request made.// request variable holds all request parameters// response variable allows you to do anything with response sent to the client.http.createServer(function (request, response) {  // Attach listener on end event.// This event is called when client sent all data and is waiting for response.request.on("end", function () {// Write headers to the response.// 200 is HTTP status code (this one means success)// Second parameter holds header fields in object// We are sending plain text, so Content-Type should be text/plainresponse.writeHead(200, {"Content-Type": "text/plain"});// Send data and end response.response.end("Hello HTTP!");});// Listen on the 8080 port.}).listen(8080);</pre> <p>Этот код очень прост. Вы можете отправить больше данных клиенту, используя <code>response.write()</code> , но вы должны вызвать его перед вызовом <code>response.end()</code>. Сохраните этот код как <em>http.js</em> и введите его в консоль:</p> <pre class="brush: noskimlinks noskimwords">node http.js</pre> <p>Откройте браузер и перейдите по адресу <code>http://localhost:8080</code>. Вы должны увидеть текст «Hello HTTP!».</p> <h2>Обработка URL-параметров</h2> <p>Как я упоминал ранее, в Node мы должны делать все сами, включая парсинг аргументов запроса. Это, однако, довольно просто. Взгляните на следующий код:</p> <pre class="brush: noskimlinks noskimwords">// Include http module, var http = require("http"), // And url module, which is very helpful in parsing request parameters. url = require("url"); // Create the server. http.createServer(function (request, response) { // Attach listener on end event. request.on("end", function () { // Parse the request for arguments and store them in _get variable. // This function parses the url from request and returns object representation. var _get = url.parse(request.url, true).query; // Write headers to the response. response.writeHead(200, { "Content-Type": "text/plain" }); // Send data and end response. response.end("Here is your data: " + _get["data"]); }); // Listen on the 8080 port. }).listen(8080);</pre> <p>Этот код использует метод <code>parse()</code> модуля <em>url</em>, основного модуля Node.js, для преобразования URL-адреса запроса в объект. Возвращаемый объект имеет свойство <code>query</code>, которое извлекает параметры URL. Сохраните этот файл как <em>get.js</em> и выполните его с помощью следующей команды:</p> <pre class="brush: noskimlinks noskimwords">node get.js</pre> <p>Затем перейдите по адресу <code>http://localhost:8080/?Data=put_some_text_here</code> в вашем браузере. Естественно, изменение значения параметра <code>data</code> не нарушит сценарий.</p> <h2>Чтение и запись файлов</h2> <p>Для управления файлами в Node мы используем модуль <em>fs</em> (основной модуль). Мы читаем и записываем файлы, используя методы <code>fs.readFile()</code> и <code>fs.writeFile()</code>, соответственно. Я объясню аргументы после следующего кода:</p> <pre class="brush: noskimlinks noskimwords">// Include http module,var http = require("http"),// And mysql module you"ve just installed.fs = require("fs");// Create the http server.http.createServer(function (request, response) {// Attach listener on end event.request.on("end", function () {// Read the file.fs.readFile("test.txt", "utf-8", function (error, data) {// Write headers.response.writeHead(200, {"Content-Type": "text/plain"});// Increment the number obtained from file.data = parseInt(data) + 1;// Write incremented number to file.fs.writeFile("test.txt", data);// End response with some nice message.response.end("This page was refreshed " + data + " times!");});});// Listen on the 8080 port.}).listen(8080);</pre> <blockquote> <p>У Node.js есть менеджер пакетов, называемый Node Package Manager (NPM). Он автоматически устанавливается с помощью Node.js</p> </blockquote> <p>Сохраните это как <em>files.j</em>s. Перед запуском этого сценария создайте файл с именем <em>test.txt</em> в том же каталоге, что и <em>files.js</em>.</p> <p>Этот код демонстрирует методы <code>fs.readFile()</code> и <code>fs.writeFile()</code>. Каждый раз, когда сервер получает запрос, скрипт считывает число из файла, увеличивает это число и записывает его в файл. Метод <code>fs.readFile()</code> принимает три аргумента: имя файла для чтения, ожидаемую кодировку и функцию обратного вызова.</p> <p>Запись в файл, по крайней мере в этом случае, намного проще. Нам не нужно ждать каких-либо результатов, хотя вы будете проверять наличие ошибок в реальном приложении. Метод <code>fs.writeFile()</code> принимает имя файла и данные в качестве аргументов. Он также принимает третий и четвертый аргументы (оба являются необязательными), чтобы указать кодировку и функцию обратного вызова соответственно.</p> <p>Теперь давайте запустим этот скрипт со следующей командой:</p> <pre class="brush: noskimlinks noskimwords">node files.js</pre> <p>Откройте его в браузере (<code>http://localhost:8080</code>) и обновите его несколько раз. Теперь вы можете подумать, что в коде есть ошибка, потому что кажется, что число увеличивается на два. Это не ошибка. Каждый раз, когда вы запрашиваете этот URL-адрес, на сервер отправляются два запроса. Первый запрос автоматически создается браузером, который запрашивает <em>favicon.ico</em>, и, конечно, второй запрос для URL (<code>http://localhost:8080</code>).</p> <p>Хотя это поведение технически не является ошибкой, но мы такого не хотим. Мы можем легко это исправить, проверив URL-адрес запроса. Вот поправленный код:</p> <pre class="brush: noskimlinks noskimwords">// Include http module,var http = require("http"),// And mysql module you"ve just installed.fs = require("fs");// Create the http server.http.createServer(function (request, response) {// Attach listener on end event.request.on("end", function () {// Check if user requests /if (request.url == "/") {// Read the file.fs.readFile("test.txt", "utf-8", function (error, data) {// Write headers.response.writeHead(200, {"Content-Type": "text/plain"});// Increment the number obtained from file.data = parseInt(data) + 1;// Write incremented number to file.fs.writeFile("test.txt", data);// End response with some nice message.response.end("This page was refreshed " + data + " times!");});} else {// Indicate that requested file was not found.response.writeHead(404);// And end request without sending any data.response.end();}});// Listen on the 8080 port.}).listen(8080);</pre> <p>Попробуйте теперь; этот код должен работать должным образом.</p> <h2>Доступ к базам данных MySQL</h2> <p>Большинство традиционных серверных технологий имеют встроенные средства подключения к базе данных и выполнения запросов к ней. Для Node.js вам необходимо установить библиотеку. Для этого урока я выбрал стабильный и простой в использовании модуль <em>node-mysql</em>. Полное имя этого модуля - <i>mysql@2.0.0-alpha2</i> (все после @ - номер версии). Откройте консоль, перейдите в каталог, в котором вы сохранили свои скрипты, и выполните следующую команду:</p> <pre class="brush: noskimlinks noskimwords">npm install mysql@2.0.0-alpha2</pre> <p>Она загружает и устанавливает модуль, а также создает папку <em>node_modules</em> в текущем каталоге. Теперь давайте посмотрим, как мы можем использовать его в нашем коде; см. следующий пример:</p> <pre class="brush: noskimlinks noskimwords">// Include http module, var http = require("http"), // And mysql module you"ve just installed. mysql = require("mysql");  // Create the connection. // Data is default to new mysql installation and should be changed according to your configuration. var connection = mysql.createConnection({ user: "root", password: "", database: "db_name"}); // Create the http server. http.createServer(function (request, response) { // Attach listener on end event. request.on("end", function () { // Query the database. connection.query("SELECT * FROM your_table;", function (error, rows, fields) { response.writeHead(200, { "Content-Type": "x-application/json" }); // Send data as JSON string. // Rows variable holds the result of the query. response.end(JSON.stringify(rows)); }); }); // Listen on the 8080 port. }).listen(8080);</pre> <p>Делать запрос к базе данных с помощью этой библиотеки легко; просто введите строку запроса и функцию обратного вызова. В реальном приложении вы должны проверить наличие ошибок (параметр <code>error</code> не будет <code>undefined</code> при возникновении ошибок) и отправить коды ответов в зависимости от успеха или ошибки запроса. Также обратите внимание, что мы установили<code> Content-Type</code> в <code>x-application/json</code>, который является допустимым типом MIME для JSON. Параметр <code>rows</code> содержит результат запроса, и мы просто преобразуем данные из <code>rows</code> в структуру JSON, используя метод <code>JSON.stringify()</code> .</p> <p>Сохраните этот файл как<em> mysql.js </em>и выполните его (если у вас установлен MySQL):</p> <pre class="brush: noskimlinks noskimwords">node mysql.js</pre> <p>Откройте адрес <code>http://localhost:8080</code> в своем браузере, и вам будет предложено загрузить файл в формате JSON.</p> <h2>Заключение</h2> <blockquote> <p>Каждая функция в Node.js является асинхронной.</p> </blockquote> <p>Node.js требует дополнительной работы, но выигрыш в быстром и надежном приложении стоит того. Если вы не хотите делать все на самом низком уровне, вы всегда можете выбрать фреймворк, как например <span>Express</span>, чтобы упростить разработку приложений.</p> <p>Node.js - это многообещающая технология и отличный выбор для приложения с высокой нагрузкой. Это подтверждают корпорации, такие как Microsoft, eBay и Yahoo. Если вы не уверены в размещении своего сайта/приложения, вы всегда можете использовать дешевое решение VPS или различные облачные сервисы, такие как Microsoft Azure и Amazon EC2. Оба эти сервиса обеспечивают масштабируемую среду по разумной цене.</p> <p>Не забудьте оставить комментарий, если у вас есть вопросы!</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824560-nodejs-dlya-nachinayuschih" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article/220824560-nodejs-dlya-nachinayuschih" class="tm-article-body__tags-item-link">Web Development</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
30975</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
320</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
