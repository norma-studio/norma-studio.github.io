
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Если вы имели или управляли веб-сайтом, то знаете, как важен качественный хостинг и хороший сервер. Сложно ориентироваться в огромном количестве компаний, предлагающих хостинг. Это пособие для среднего уровня поможет вам с этим разобраться....">
<meta property="og:description" content="Если вы имели или управляли веб-сайтом, то знаете, как важен качественный хостинг и хороший сервер. Сложно ориентироваться в огромном количестве компаний, предлагающих хостинг. Это пособие для среднего уровня поможет вам с этим разобраться....">
<meta name="twitter:description" content="Если вы имели или управляли веб-сайтом, то знаете, как важен качественный хостинг и хороший сервер. Сложно ориентироваться в огромном количестве компаний, предлагающих хостинг. Это пособие для среднего уровня поможет вам с этим разобраться....">
<meta property="aiturec:description" content="Если вы имели или управляли веб-сайтом, то знаете, как важен качественный хостинг и хороший сервер. Сложно ориентироваться в огромном количестве компаний, предлагающих хостинг. Это пособие для среднего уровня поможет вам с этим разобраться....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=555/uploads/users/1503/posts/32249/image/8.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=555/uploads/users/1503/posts/32249/image/8.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=555/uploads/users/1503/posts/32249/image/8.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=555/uploads/users/1503/posts/32249/image/8.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=555/uploads/users/1503/posts/32249/image/8.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824096-kak-ustanovit-nastroit-i-obezopasit-server-svoego-veb-sajta-s-samogo-nachala.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824096-kak-ustanovit-nastroit-i-obezopasit-server-svoego-veb-sajta-s-samogo-nachala.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824096-kak-ustanovit-nastroit-i-obezopasit-server-svoego-veb-sajta-s-samogo-nachala.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824096-kak-ustanovit-nastroit-i-obezopasit-server-svoego-veb-sajta-s-samogo-nachala.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824096-kak-ustanovit-nastroit-i-obezopasit-server-svoego-veb-sajta-s-samogo-nachala.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824096-kak-ustanovit-nastroit-i-obezopasit-server-svoego-veb-sajta-s-samogo-nachala.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824096-kak-ustanovit-nastroit-i-obezopasit-server-svoego-veb-sajta-s-samogo-nachala.html" title="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала... | envatomarket.ru | norma-studio.github.io" title="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/ded38a8520cf75a955c11fc92a1a403e.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824096-kak-ustanovit-nastroit-i-obezopasit-server-svoego-veb-sajta-s-samogo-nachala.html" class="tm-user-info__username" title="
В. Самсонов" aria-label="
В. Самсонов">
В. Самсонов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Web Design" href="https://norma-studio.github.io/article/220824096-kak-ustanovit-nastroit-i-obezopasit-server-svoego-veb-sajta-s-samogo-nachala" class="tm-article-snippet__hubs-item-link"><span>Web Design</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Apache" href="https://norma-studio.github.io/article/220824096-kak-ustanovit-nastroit-i-obezopasit-server-svoego-veb-sajta-s-samogo-nachala" class="tm-article-snippet__hubs-item-link"><span>Apache</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824096-kak-ustanovit-nastroit-i-obezopasit-server-svoego-veb-sajta-s-samogo-nachala.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=555/uploads/users/1503/posts/32249/image/8.jpg">
    <meta itemprop="headline name" content="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Если вы имели или управляли веб-сайтом, то знаете, как важен качественный хостинг и хороший сервер. Сложно ориентироваться в огромном количестве компаний, предлагающих хостинг. Это пособие для среднего уровня поможет вам с этим разобраться....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Если вы имели или управляли веб-сайтом, то знаете, как важен качественный хостинг и хороший сервер. Сложно ориентироваться в огромном количестве компаний, предлагающих хостинг. Это пособие для среднего уровня поможет вам с этим разобраться....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Если вы имели или управляли веб-сайтом, то знаете, как важен качественный хостинг и хороший сервер. Сложно ориентироваться в огромном количестве компаний, предлагающих хостинг. Это пособие для среднего уровня поможет вам с этим разобраться.</p><h2>Для кого оно предназначено?</h2><p>Если вы не разработчик, не автор Themeforest и у вас только базовые знания по управлению серверами, этот пост не для вас. Я рекомендую вам найти простое, готовое к установке профессиональное решение.<br></p><p>Однако, если для вам требуется больше ресурсов, чем для обычного веб-сайта WordPress, можно рассмотреть вариант перехода с хостинга на VPS или выделенный сервер. Не бойтесь, что придётся платить $5,000 в месяц, цены намного ниже, а положительный эффект значительно выше.  </p><h3>Когда стоит задуматься об обновлении хостинга?</h3> <p>Как определить момент, что ваш хостинг становится тесным? Однозначного решения не существует. Но вы можете определиться, ответив на следующие вопросы:</p> <ul><li>У вашего сайта большой трафик?</li> <li>Требуется больше надёжности и безопасности?</li> <li>Нужен контроль с доступом к корневому серверу?</li> <li>Вы разберётесь с сервером без посторонней помощи? Существенным недостатком будет отсутствие поддержки и вам придётся многое делать самостоятельно: устанавливать софт для веб-серверов и базы данных, обновлять и настраивать все приложения и (в основном) на Linux через интерфейс командной строки.</li> </ul><h3>Что выбрать?</h3><p>Предположим, вам требуется нечто большее, чем просто Shared Hosting, но что выбрать? VPS или выделенный сервер?</p> <ul><li> <b>VPS (Virtual Private Server)</b> позволяет получить гибкости, сколько вам нужно, хотя "виртуально" вы всё равно будете делить сервер с другими. Это уже лучше, чем привязанный хостинг, но не самый оптимальный вариант.</li> <li> <b>Dedicated server</b> (выделенный сервер) похож на VPS, но вам не придётся ни с кем делиться ресурсами и весь компьютер будет обслуживать исключительно ваш веб-сайт.</li> </ul><p>Процесс установки и настройки практически одинаков как для VPS, так и для выделенного сервера.</p><h3>Вопросы, которые мы рассмотрим</h3> <p>Давайте перейдём к статье. Краткое содержание:</p> <ul><li>Подготовка</li> <li>Установка</li> <li>Доступ к серверу</li> <li>Установка Apache с Let Encrypt (SSL HTTPS), PHP7 и сервером MySQL</li> <li>Обновление PHP</li> <li>Установка phpMyadmin и его защита</li> <li>Оживление сайта</li> <li>Обновление ОС</li> <li>Восстановление SSL</li> <li>Поиск проблемы</li> <li>Заключение</li> </ul><h2>Подготовка</h2> <p>Поскольку эта статья посвящена установке и настройке уже существующего VPS/выделенного сервера, у вас имеется сервер по умолчанию. Не называя конкретных поставщиков, мой личный выбор - ovh.ie, но вы можете свободно выбирать любого. Единственное, что я рекомендую, это убедиться, что поставщик имеет сильную глобальную инфраструктуру, то есть присутствует как минимум на пяти континентах (извините, Антарктида). Чем более она развита, тем больше выгод вы будете иметь из его ресурсов и цен. </p><p>Большинство поставщиков серверов дают возможность выбора физического присутствия вашего сервера. Это важно, поскольку чем ближе он к нужной стране или региону, тем быстрее будет загружаться и работать ваш сайт. </p><p>Перед покупкой сервера также следует подумать о доставке контента CDN (content delivery network). Если на вашем веб-сайте много файлов, которые вы будете предоставлять на весь мир, CDN требуется для повышения эффективности веб-сайта. Вы всегда можете получить отдельное решение CDN, так что это не должно влиять на выбор сервера.</p> <h2>Установка</h2> <p>После покупки вы получите пустой сервер с операционной системой по умолчанию. Там не будет ни <span>cPanel</span>, ни панели <span>Plesk</span>, а только:</p> <ul><li>VPS’s IPv4 адрес</li> <li>VPS’s IPv6 адрес</li> <li>VPS имя</li> <li>Логин/пароль</li> </ul><p>Ни ссылки, ни панели администратора: ничего! Сначала  проверим, какая операционная система установлена по умолчанию, смотрите на панели управления пользователя провайдера (а не на панели управления вашего сервера). Вероятно, это будет одна из:</p> <ul><li>Arch Linux (64 bits)</li> <li><b>Centos 6 (64 bits)</b></li> <li><b>Centos 7 (64 bits)</b></li> <li><b>Cpanel on CentOS 6 (64 bits)</b></li> <li><b>Debian 7 (Wheezy) (64 bits)</b></li> <li><b>Debian 8 (Jessie) (64 bits)<br>Debian 9 (Stretch) (64 bits)</b></li> <li>Docker on Ubuntu 14.04 Server</li> <li>Docker on Ubuntu 16.04 Server</li> <li>Drupal (64 bits)</li> <li>Fedora 26 (64 bits)</li> <li>Joomla! (64 bits)</li> <li>Kubuntu 14.04 Desktop</li> <li>LAMP 1.0 (64 bits)</li> <li>OpenVPN on Debian 8</li> <li><b>Parallels Plesk 12 on Centos 6<br>Parallels Plesk 12 on Ubuntu 14.04</b></li> <li>Plesk on Debian 8 (64 bits)</li> <li>Prestashop (64 bits)</li> <li><b>Ubuntu 14.04 Server</b></li> <li><b>Ubuntu 16.04 Server<br>Ubuntu 18.04 Server</b></li> <li>VestaCP on Debian 8</li> <li>Virtualmin on Debian 8</li> <li><b>Wordpress (64 bits)</b></li> </ul><p>Да! Какой список операционных систем. Я лично пробовал выделенные жирным шрифтом. В общем, процесс настройки и инструкции одинаковы для всех, хотя могут быть некоторые синтаксические различия для команд ОС. Мой личный выбор - Ubuntu 16.04 или Ubuntu 18.04, поэтому я продемонстрирую весь процесс для них.</p> <p>Если у вас по умолчанию стоит другая ОС, я рекомендую  Ubuntu 16.04. Это делается из панели администратора провайдера VPS/сервера, выбрав нужную ОС из списка. Процедура займёт не более десяти минут, затем вам будет предоставлена информация о доступе к серверу.</p> <p>Вы можете спросить, почему я рекомендую установить Ubuntu 16.04, если вышла версия 18.04. Для этого есть две основные причины:</p> <ul><li>Однажды вам потребуется обновить ОС и я хочу показать, как это делается, даже с существующими веб-сайтами.</li> <li>Если по какой-то причине вы не сможете обновить ОС, я покажу, как обновить свой PHP до последней доступной версии в Ubuntu 16.04.</li> </ul><h2>Доступ к серверу</h2> <p>Итак, как получить доступ к своему серверу? Это зависит от ОС и её версии.</p> <p>В Windows 10, начиная с 2015 года, вы можете <span>подключаться к серверу Secure Shell</span> (SSH) без установки дополнительного программного обеспечения.</p> <p>Для всех версий Windows есть очень простой инструмент: <span>PuTTY</span>. PuTTY - это клиент SSH и telnet. PuTTY программное обеспечение с открытым исходным кодом, разработанное и поддерживаемое группой добровольцев.</p> <p>Для работы на Mac OS есть несколько вариантов:</p> <ul><li>Использование встроенного SSH-клиента в Mac OS.</li> <li>Запуск SSH из командной строки терминала.</li> <li> <span>Cyberduck</span> на Mac - это солидный, хорошо известный SSH-клиент, довольно популярный.</li> </ul><p>Я использую Windows 10 и мой личный выбор - PuTTY. Итак, откройте ваш SSH-клиент.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=555/uploads/users/1503/posts/32249/image/8.jpg" alt="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала..." title="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала..." width="50" height="50"></figure><p>Как видите, нам нужно ввести имя нашего хоста или IP-адрес (убедитесь, что тип соединения SSH). После установки ОС вы получите по электронной почте необходимую информацию для доступа к вашему серверу:</p> <ul><li>VPS’s IPv4 адрес</li> <li>VPS’s IPv6 адрес</li> <li>VPS имя</li> <li>Логин/пароль</li> </ul><p>Скопируйте полученное имя VPS, вставьте его в поле <strong>Host name</strong> и нажмите <strong>Open</strong>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/uploads/users/1503/posts/32249/image/9.jpg" class="lazy07" alt="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала..." title="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала..." width="50" height="50"></figure><p>Откроется чёрное модальное окно с приглашением “Login as:”. Введите своё имя пользователя и нажмите <strong>Enter.</strong></p> <p>Вам будет предложено ввести пароль (при вводе пароля вы не увидите сам процесс набора по соображениям безопасности), затем нажмите <strong>Enter.</strong></p> <p>Если вы всё сделали правильно, после входа в систему вы увидите экран:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=618/uploads/users/1503/posts/32249/image/10.jpg" alt="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала..." title="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала..." width="50" height="50"></figure><p>Эта статья не о работе в Linux со всеми его командами, поэтому я не буду объяснять каждую из тех, что мы здесь используем. Вот <span>список общих команд Linux</span>, которые вы можете изучить позже. Следуя изложенным здесь инструкциям, выполните следующие задачи: установка, настройка, защита и обновление выделенного сервера.</p> <h2>Установите Apache с Let Encrypt (SSL HTTPS), PHP7 и MySQL сервер.</h2> <p>Введите <code class="inline">clear</code> и нажмите Enter. Это очистит экран. Чтобы проверить версию ОС, введите <code class="inline">lsb_release –a</code> и нажмите <strong>Enter.</strong> После выполнения всех шагов по установке, вы увидите, что у вас установлена версия Ubuntu 16.04</p><pre class="brush: bash noskimlinks noskimwords">Distributor ID: UbuntuDescription:    Ubuntu 16.04.1 LTSRelease:        16.04Codename:       bionic</pre> <p>Сейчас у нас есть два варианта: продолжить с существующей ОС или обновить её до самой последней версии. Пока продолжим с установленной версией.</p> <p>Теперь мы установим сервер Apache с PHP7 и MySQL, но сначала давайте обновим текущую систему (а не версию ОС).</p> <p>Наберите <code class="inline">sudo apt-get update</code> и нажмите <strong>Enter.</strong> </p><p>Затем <code class="inline">sudo apt-get upgrade</code> и <strong>Enter.</strong></p> <p>По требованию подтвердить использование дополнительного дискового пространства для обновлений нажмите <strong>Y</strong> и <strong>Enter.</strong></p> <p>Для выполнения действия с файлом конфигурации выберите действие по умолчанию и продолжите. Введите <code class="inline">sudo apt-get install apache2 mysql-server php</code> и нажмите <strong>Enter</strong>. Наконец, ещё раз подтвердите использование дискового пространства с помощью <strong>Y</strong> и <strong>Enter.</strong></p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=620/uploads/users/1503/posts/32249/image/11.jpg" alt="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала..." title="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала..." width="50" height="50"></figure><p>Введите пароль пользователя MySQL (убедитесь, что он достаточно надёжен) и повторите его на следующем шаге. Когда процесс завершится, вы станете счастливым обладателем свежего сервера Apache + сервера Mysql и версии PHP 7.</p> <p>Если у вас уже есть домен вашего сервера, перейдите в свой домен. Если нет, введите в окне браузера свой VPS IPv4-адрес и увидите нечто похожее:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1503/posts/32249/image/1.jpg" alt="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала..." title="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала..." width="50" height="50"></figure><h3>SSL</h3><p>Посмотрите на поле адреса в окне браузера. Вы заметите, что ваш сайт использует протокол http, а не https. Нам нужно установить и активировать сертификат SSL, поэтому давайте воспользуемся бесплатным, автоматическим и открытым центром сертификации <span>Let’s Encrypt</span> Мы возьмем его из репозитория по адресу <span>https://github.com/letsencrypt</span>, но сначала установим приложение Git.</p> <p>Снова откройте клиент командной строки, введите <code class="inline">sudo apt-get install git</code> и нажмите<strong> Enter.</strong></p> <p>Введите <code class="inline">git clone https://github.com/letsencrypt/letsencrypt</code>. С установленным Letsencrypt перейдём к папке <code class="inline">letsencrypt, набрав cd letsencrypt /</code> и нажмём <strong>Enter.</strong></p> <p>Затем введите <code class="inline">./letsencrypt-auto</code>. До окончания процесса может пройти несколько минут, пока не появится диалоговое окно с текстом:</p><pre class="brush: bash noskimlinks noskimwords">No names were found in your configuration files. Please enter in your domain name(s) (comma and/or space separate)</pre> <p>Здесь я замечу: если вы используете местозаполнитель домена VPS, то есть ваше имя хоста или IPv4-адрес, у вас могут возникнуть проблемы с letsencrypt. Вы можете увидеть:</p><pre class="brush: bash noskimlinks noskimwords">An unexpected error occurred: There were too many requests of a given type :: Error finalizing order :: too many certificates already issued for: yourserver provider: see https://letsencrypt.org/docs/rate-limits/</pre> <p class="wysiwyg-text-align-center">Чтобы решить эту проблему, введите ваши окончательные домены.<br></p> <p>Предполагая, что проблема решена, введите свой адрес электронной почты, а затем согласитесь с условиями letsencrypt.</p> <p>В новом диалоговом окне вам будет предложено выбрать, является доступ https обязательным или необязательным (могут ли пользователи по-прежнему получать доступ к вашим ссылкам с помощью http или все ссылки должны быть перенаправлены на https). Я настоятельно рекомендую выбрать второй вариант. Если всё было сделано правильно, вы увидите новое диалоговое окно с сообщением об успехе. Нажмите <strong>Enter</strong> и перезапустите сервер Apache, набрав <code class="inline">sudo systemctl restart apache2</code>. Перейдя на свою страницу, вы увидите, что https активен:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=497/uploads/users/1503/posts/32249/image/12.jpg" alt="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала..." title="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала..." width="50" height="50"></figure><p>Позже я покажу вам, как продлить свой сертификат, потому что сертификат letsencrypt по умолчанию действителен всего 90 дней.</p> <h2>Обновить PHP</h2> <p>В соответствии с минимальными <span>требованиями WordPress</span>, сегодня нам нужна версия PHP 7.2. Если вы проверите версию PHP в Ubuntu 16.04, то увидите, что это 7.0, 7.0.30 или 7.1. Для запуска проверки введите в SSH-клиент: <code class="inline">php -v</code></p> <p>Перед обновлением нашего PHP нам нужно проверить установленные модули PHP. Для этого введите: <code class="inline">sudo dpkg --get-selections | grep -v deinstall | grep php</code></p> <p>Сделайте скриншот или сохраните содержимое в текстовом файле: вам нужно будет снова установить эти модули после обновления до PHP 7.2.</p> <p>Далее нам нужно обновить список пакетов. Выполните следующие команды для обновления и установки PHP 7.2 на вашем сервере:</p><pre class="brush: bash noskimlinks noskimwords">apt-get updateapt-get install python-software-propertiesLC_ALL=C.UTF-8 add-apt-repository ppa:ondrej/phpapt-get updateapt-get install php7.2</pre> <p>Запустите проверку ещё раз, чтобы убедиться, что вы правильно установили PHP 7.2.</p> <p>После этого нам нужно отключить старую версию и указать Apache использовать PHP 7.2. Наберите:</p><pre class="brush: bash noskimlinks noskimwords">a2dismod php7.0a2enmod php7.2service apache2 restart</pre> <p>Теперь PHP 7.2 активно на вашем сайте. Осталось только установить все модули, которые мы проверяли перед обновлением. Проверьте список, который вы сохранили ранее и введите с соответствующими исправлениями:</p><pre class="brush: bash noskimlinks noskimwords">apt-get install libapache2-mod-php7.2 php7.2-cgi php7.2-cli php7.2-common php7.2-curl php7.2-gd php7.2-imap php7.2-intl php7.2-json php7.2-ldap php7.2-mbstring php7.2-mysql php7.2-opcache php7.2-pspell php7.2-readline php7.2-soap php7.2-xml</pre> <p class="wysiwyg-text-align-center">Перезапустите сервер apache <code class="inline">sudo systemctl restart apache2</code></p> <h2>Установка phpMyAdmin и его защита</h2> <p>Отлично! Теперь вы можете спросить: где разместить сайт и как создать базу данных? Давайте начнем с установки и обеспечения безопасности приложения phpMyadmin для лучшего управления базой данных.</p> <p><strong>Примечание:</strong> если вы делаете это, не выполнив все предыдущие шаги, сначала обновите систему: <code class="inline">sudo apt-get update</code></p> <ul><li>Для установки phpMyAdmin наберите: <code class="inline">apt-get install phpmyadmin php-mbstring php-gettext</code>. </li> <li>В качестве сервера выберите <strong>apache2</strong>.  </li> <li>Выберите<strong> yes</strong> на просьбу использовать dbconfig-common.</li> <li>Установите пароль приложения mysql для phpMyAdmin.</li> </ul><p>Теперь, если у вас PHP 7.0, а не 7.2, включите расширения PHP mcrypt и mbstring (если у вас PHP 7.2, mcrypt больше не нужен).</p> <p class="wysiwyg-text-align-center"><code class="inline">sudo phpenmod mcrypt</code></p> <p class="wysiwyg-text-align-center"><code class="inline">sudo phpenmod mbstring</code></p> <p>Перезапустите сервер apache: <code class="inline">sudo systemctl restart apache2</code></p> <p>Теперь у вас есть доступ к веб-интерфейсу по имени домена или IP-адресу вашего сервера по / phpmyadmin.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=471/uploads/users/1503/posts/32249/image/4.jpg" alt="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала..." title="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала..." width="50" height="50"></figure><h3>Защита phpMyAdmin</h3><p>Любой теперь может ввести адрес phpmyadmin и попасть сюда, поэтому нам нужно его защитить. Как? Выставляя шлюз перед всем приложением. Мы сделаем это с помощью встроенных в Apache функций аутентификации и авторизации .htaccess.</p> <p>Сначала нам нужно разрешить переопределение файлов .htaccess, поэтому введите: <code class="inline">nano /etc/apache2/conf-available/phpmyadmin.conf</code></p> <p>Поместите курсор сразу после DirectoryIndex index.php следующим образом, добавив <code class="inline">Allowoverride All</code>:</p><pre class="brush: bash noskimlinks noskimwords">DirectoryIndex index.phpAllowoverride All</pre> <p>Нажмите <strong>CTRL + X</strong>, нажмите <strong>Y</strong>, затем <strong>Enter</strong>.</p> <p>Перезапустите сервер apache: <code class="inline">sudo systemctl restart apache2</code></p> <p>Теперь создайте файл .htaccess, набрав: <code class="inline">sudo nano /usr/share/phpmyadmin/.htaccess</code></p> <p>Введите следующую информацию:</p><pre class="brush: bash noskimlinks noskimwords">AuthType BasicAuthName "Restricted Files"AuthUserFile /etc/phpmyadmin/.htpasswdRequire valid-user</pre> <p>Нажмите <strong>CTRL + X</strong>, нажмите <strong>Y</strong>, затем <strong>Enter</strong>.</p> <p>Создайте файл .htpasswd для аутентификации</p> <p class="wysiwyg-text-align-center"><code class="inline">sudo apt-get install apache2-utils</code></p> <p class="wysiwyg-text-align-center"><code class="inline">htpasswd -c /etc/phpmyadmin/.htpasswd root</code></p> <p>Установите пароль и перезапустите сервер apache: <code class="inline">sudo systemctl restart apache2</code></p> <p>Теперь, если вы попытаетесь получить доступ к phpmyadmin, вы увидите окно для логина и пароля:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/1503/posts/32249/image/3.jpg" alt="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала..." title="Как установить, настроить и обезопасить сервер своего веб-сайта с самого начала..." width="50" height="50"></figure><p>Как только вы введете логин и пароль (помните, что это не для MySQL), вы будете перенаправлены на обычную страницу входа phpMyAdmin. Введите имя пользователя и пароль MySQL и получите доступ ко всем своим базам данных.</p> <h2>Оживление сайта</h2> <p>Самое время разместить ваш сайт на сервере. С приложением phpMyAdmin вы можете создавать или импортировать свою базу данных через обычный браузер. Но для размещения файлов вашего сайта на сервере вам понадобится FTP-клиент, так как нам не доступен веб-менеджер файлов. </p><p>Выберите любой FTP-клиент, я предпочитаю <span>Filezilla</span>. Используя доступ пользователя root к серверу, который вы получили в самом начале установки сервера, подключитесь к вашему серверу по FTP, используя протокол SFTP. </p><p>После входа вы будете перенаправлены в корневую папку. Здесь у вас нет ограничений по области, поэтому вы можете её покинуть и попасть в корень файловой системы сервера. Перейдите к var/www/html; это общая папка, куда вы должны загрузить все файлы вашего сайта. Чтобы ускорить процесс, вы можете загрузить один заархивированный файл и распаковать его с помощью команды SSH. Для этого давайте установим приложение unzip, набрав в нашем SSH-клиенте: <code class="inline">apt-get install unzip</code>. После этого введите команду <code class="inline">unzip archive.zip</code>, где «archive» - точное имя вашего файла.</p> <p>Теперь файлы вашего сайта будут распакованы.</p> <h2>Обновите ОС</h2> <p>Я специально не обновлял ОС до размещения сайта на сервере, чтобы показать, как обновить ОС без потери данных. Конечно, всё может пойти не так, поэтому перед обновлением ОС сделаем резервную копию нашего сайта. Сначала сделаем резервную копию базы данных с помощью phpMyadmin и резервную копию всех файлов сайта. Самый простой способ - создать архив файлов и загрузить его по FTP.</p> <p>Для архивации сайта установим приложение zip, набрав: <code class="inline">apt-get install zip</code></p> <p>После этого выполним команду: <code class="inline">zip -r myarchive.zip myfolder</code>, где «myfolder» - точное имя папки сайта.</p> <p>Загрузите ваш zip-файл и файл базы данных - теперь мы готовы обновить ОС. Потребуется около двадцати минут. Если ваш сайт работает, и у вас есть посетители, обновите ОС в удобное время.</p> <p>Для обновления ОС введите следующее:</p><pre class="brush: bash noskimlinks noskimwords">sudo apt update &amp;&amp; sudo apt dist-upgradesudo apt install update-manager-coredo-release-upgrade</pre> <p class="wysiwyg-text-align-center">Всё. После завершения обновления вы можете проверить версию своей ОС, набрав: <code class="inline">lsb_release –a</code></p> <h2>Обновление SSL</h2> <p>Как я упоминал, срок действия сертификата letsencrypt равен 90 дней, поэтому по истечении этого периода вам нужно будет его обновить. Для этого откройте ваш SSH-клиент, войдите в систему и перейдите на: <code class="inline">cd root / letsencrypt</code></p> <ul><li>Остановите сервер apache: <code class="inline">sudo systemctl stop apache2.service</code> </li> <li>И наберите <code class="inline">./letsencrypt-auto certonly</code> </li> <li>Выберите 2</li> <li>Введите имя вашего домена</li> <li>Перезапустите сервер apache: <code class="inline">sudo systemctl restart apache2</code> </li> </ul><h2>Поиск проблемы</h2> <p>Установка и настройка сервера - это сложная задача - всё может случиться и вам придётся потратить время и терпение на решение проблем. По моему опыту хочу обратить ваше внимание:</p> <p>Ограничения для пользователя root. Когда я впервые установил веб-сайт на свой сервер, мне сообщили, что WordPress не может создать файл wp-config.php и изображения не могут отображаться. Моей первой мыслью было изменить права доступа к папке/файлам. Это было неправильно, проблема на самом деле исходит от пользователя root. Вам нужно будет сменить владельца папки html (вашей общей папки). Для этого откройте SSH-клиент, войдите в систему и введите: <code class="inline">sudo chown -R www-data html</code></p> <p>Вторая проблема, на решение которой у меня ушло много времени, заключалась в том, что PHP просто отображался в виде текста. Если вы сталкиваетесь с этим, наберите следующее в клиенте SSH:</p><pre class="brush: bash noskimlinks noskimwords">sudo a2enmod proxy_fcgi setenvifsudo a2enconf php7.0-fpmsudo service apache2 restart</pre> <p>Измените php7.0-fpm на вашу версию.</p> <h2>Заключение</h2> <p>Когда я впервые столкнулся с задачей настройки сервера, у меня не было подобного пособия. Мне приходилось собирать информацию по крупицам, что занимало много времени и было довольно сложно. Я очень надеюсь, что эта статья  вам поможет.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Web Design" href="https://norma-studio.github.io/article/220824096-kak-ustanovit-nastroit-i-obezopasit-server-svoego-veb-sajta-s-samogo-nachala" class="tm-article-body__tags-item-link">Web Design</a></span><span class="tm-article-body__tags-item"><a aria-label="Apache" href="https://norma-studio.github.io/article/220824096-kak-ustanovit-nastroit-i-obezopasit-server-svoego-veb-sajta-s-samogo-nachala" class="tm-article-body__tags-item-link">Apache</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
36752</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
540</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
