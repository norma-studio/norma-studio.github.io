
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Начало работы с Redux: учимся на примере... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Начало работы с Redux: учимся на примере... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Начало работы с Redux: учимся на примере... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Начало работы с Redux: учимся на примере... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Redux помогает вам управлять состоянием, устанавливая состояние на глобальном уровне. В предыдущем уроке мы подробно рассмотрели архитектуру Redux и ее неотъемлемые компоненты, такие как действия, создатели действий, хранилище и редукторы. ...">
<meta property="og:description" content="Redux помогает вам управлять состоянием, устанавливая состояние на глобальном уровне. В предыдущем уроке мы подробно рассмотрели архитектуру Redux и ее неотъемлемые компоненты, такие как действия, создатели действий, хранилище и редукторы. ...">
<meta name="twitter:description" content="Redux помогает вам управлять состоянием, устанавливая состояние на глобальном уровне. В предыдущем уроке мы подробно рассмотрели архитектуру Redux и ее неотъемлемые компоненты, такие как действия, создатели действий, хранилище и редукторы. ...">
<meta property="aiturec:description" content="Redux помогает вам управлять состоянием, устанавливая состояние на глобальном уровне. В предыдущем уроке мы подробно рассмотрели архитектуру Redux и ее неотъемлемые компоненты, такие как действия, создатели действий, хранилище и редукторы. ...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1795/posts/30350/image/GettingStartedWithReduxTutorial-Final-ContactListView.png">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1795/posts/30350/image/GettingStartedWithReduxTutorial-Final-ContactListView.png">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1795/posts/30350/image/GettingStartedWithReduxTutorial-Final-ContactListView.png">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1795/posts/30350/image/GettingStartedWithReduxTutorial-Final-ContactListView.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1795/posts/30350/image/GettingStartedWithReduxTutorial-Final-ContactListView.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824550-nachalo-raboty-s-redux-uchimsya-na-primere.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824550-nachalo-raboty-s-redux-uchimsya-na-primere.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824550-nachalo-raboty-s-redux-uchimsya-na-primere.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824550-nachalo-raboty-s-redux-uchimsya-na-primere.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824550-nachalo-raboty-s-redux-uchimsya-na-primere.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824550-nachalo-raboty-s-redux-uchimsya-na-primere.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824550-nachalo-raboty-s-redux-uchimsya-na-primere.html" title="Начало работы с Redux: учимся на примере... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Начало работы с Redux: учимся на примере... | envatomarket.ru | norma-studio.github.io" title="Начало работы с Redux: учимся на примере... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/54332343.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824550-nachalo-raboty-s-redux-uchimsya-na-primere.html" class="tm-user-info__username" title="
В. Бухтеев" aria-label="
В. Бухтеев">
В. Бухтеев</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Начало работы с Redux: учимся на примере...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824550-nachalo-raboty-s-redux-uchimsya-na-primere" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="React" href="https://norma-studio.github.io/article/220824550-nachalo-raboty-s-redux-uchimsya-na-primere" class="tm-article-snippet__hubs-item-link"><span>React</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824550-nachalo-raboty-s-redux-uchimsya-na-primere.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1795/posts/30350/image/GettingStartedWithReduxTutorial-Final-ContactListView.png">
    <meta itemprop="headline name" content="Начало работы с Redux: учимся на примере... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Redux помогает вам управлять состоянием, устанавливая состояние на глобальном уровне. В предыдущем уроке мы подробно рассмотрели архитектуру Redux и ее неотъемлемые компоненты, такие как действия, создатели действий, хранилище и редукторы. ...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Redux помогает вам управлять состоянием, устанавливая состояние на глобальном уровне. В предыдущем уроке мы подробно рассмотрели архитектуру Redux и ее неотъемлемые компоненты, такие как действия, создатели действий, хранилище и редукторы. ...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p><strong></strong>Redux помогает вам управлять состоянием, устанавливая состояние на глобальном уровне. В предыдущем уроке мы подробно рассмотрели архитектуру Redux и ее неотъемлемые компоненты, такие как действия, создатели действий, хранилище и редукторы. <br></p><p>В этом втором посте из серии мы собираемся укрепить наше понимание Redux и развить то, что мы уже знаем. Мы начнем с создания реалистичного приложения Redux - списка контактов, более сложного, чем базовый счетчик. Это поможет вам лучше понять концепцию <span>единого хранилища и нескольких редукторов, которую я представил в предыдущем уроке</span>. Затем мы поговорим о связывании вашего состояния Redux с приложением React и о рекомендациях, которые следует учитывать при создании проекта с нуля. </p><p>Тем не менее, это нормально, если вы не читали первый пост - вы все равно сможете следить, пока вы знакомы с основами Redux. Код для учебника доступен в репозитории, и вы можете использовать его в качестве отправной точки. </p><h2>Создание списка контактов с помощью Redux</h2><p>Мы собираемся создать базовый список контактов со следующими функциями:</p><ul><li>показать все контакты</li> <li>поиск контактов</li> <li>получить все контакты с сервера</li> <li>добавить новый контакт</li> <li>отправить новые контактные данные на сервер</li> </ul><p>Вот как будет выглядеть наше приложение:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1795/posts/30350/image/GettingStartedWithReduxTutorial-Final-ContactListView.png" alt="Начало работы с Redux: учимся на примере..." title="Начало работы с Redux: учимся на примере..." width="50" height="50"><figcaption>Конечный продукт - Список контактов</figcaption></figure><p><br></p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1795/posts/30350/image/GettingStartedWithReduxTutorial-Final-ContactView.png" alt="Начало работы с Redux: учимся на примере..." title="Начало работы с Redux: учимся на примере..." width="50" height="50"><figcaption>Конечный продукт - Добавить контакт</figcaption></figure><p>Охватить все за один раз сложно. Итак, в этом посте мы сосредоточимся только на части Redux, добавив новый контакт и отобразив новый добавленный контакт. С точки зрения Redux мы будем инициализировать состояние, создавать хранилище, добавлять редукторы и действия и т.д. </p><p>В следующем уроке мы узнаем, как подключить React и Redux и отправлять действия Redux из внешнего интерфейса React. В заключительной части мы переключим наше внимание на выполнение вызовов API с использованием Redux. Это включает в себя выборку контактов с сервера и выполнение запроса к серверу при добавлении новых контактов. Кроме того, мы также создадим функцию панели поиска, которая позволит вам искать все существующие контакты. <br></p><h2><b>Создаем эскиз дерева состояний</b></h2><p>Вы можете скачать <span>демо-приложение Reaction-redux</span> из моего репозитория GitHub. Клонируйте репо и используйте ветку <strong>v1</strong> в качестве отправной точки. Ветвь <strong>v1</strong> очень похожа на шаблон create-react-app. Разница лишь в том, что я добавил несколько пустых каталогов для организации Redux. Вот структура каталогов.</p><pre class="brush: plain noskimlinks noskimwords">.├── package.json├── public├── README.md├── src│ ├── actions│ ├── App.js│ ├── components│ ├── containers│ ├── index.js│ ├── reducers│ └── store└── yarn.lock</pre><p>Кроме того, вы можете создать новый проект с нуля. В любом случае, вам нужно будет установить базовый react и redux, прежде чем вы сможете начать. </p><p>Хорошей идеей будет сначала сделать черновой набросок дерева состояний. На мой взгляд, это сэкономит вам много времени в долгосрочной перспективе. Вот примерный набросок возможного дерева состояний. <br></p><pre class="brush: javascript noskimlinks noskimwords">const initialState = {    contacts: {  contactList: [],newContact: {name: "",surname: "",email: "",address: "",phone: ""},ui: {//All the UI related state here. eg: hide/show modals,            //toggle checkbox etc.}}} </pre><p>Наше хранилище должно иметь два свойства - <code class="inline">contacts</code> ты и <code class="inline">ui</code>. Свойство contacts заботится обо всех состояниях, связанных с контактами, тогда как <code class="inline">ui</code> обрабатывает специфическое для интерфейса состояние. В Redux нет жесткого правила, которое не позволяет вам размещать объект <code class="inline">ui</code> в качестве подсостояния <code class="inline">contacts</code>. Не стесняйтесь организовать свое состояние таким образом, чтобы оно имело смысл для вашего приложения. </p><p>Свойство contacts имеет два вложенных свойства: <code class="inline">contactlist</code> и <code class="inline">newContact</code>. <code class="inline">contactlist</code> представляет собой массив контактов, в то время как <code class="inline">newContact</code> временно сохраняет контактные данные во время заполнения формы контакта. Я собираюсь использовать это как отправную точку для создания нашего замечательного приложения со списком контактов. </p><h2>Как организовать Redux</h2><p>Redux не имеет понятия о том, как вы структурируете свое приложение. Есть несколько популярных шаблонов, и в этом уроке я кратко расскажу о некоторых из них. Но вы должны выбрать один шаблон и придерживаться его, пока не поймете полностью, как все части связаны друг с другом.</p><p>Самым распространенным шаблоном, который вы найдете, является структура файлов и папок в стиле Rails. У вас будет несколько каталогов верхнего уровня, подобных приведенным ниже:</p><ul><li> <strong>components:</strong> место для хранения немых компонентов React. Этим компонентам все равно, используете ли вы Redux или нет.</li> <li> <strong>containers: </strong>каталог для компонентов Smart React, которые отправляют действия в хранилище Redux. Здесь будет происходить связь между redux и react. </li> <li> <strong>actions</strong>: создатели действий перейдут в этот каталог. </li> <li> <strong>reducers</strong>: каждый редуктор получает отдельный файл, и вы разместите всю логику редуктора в этом каталоге.</li> <li> <strong>store</strong>: логика для инициализации состояния и настройки хранилища будет здесь. </li> </ul><p>Изображение ниже демонстрирует, как может выглядеть наше приложение, если мы будем следовать этому шаблону:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=750/uploads/users/1795/posts/30350/image/ReactandReduxTutorial-OrganisingReduxStructure.png" alt="Начало работы с Redux: учимся на примере..." title="Начало работы с Redux: учимся на примере..." width="50" height="50"></figure><p>Стиль Rails должен работать для небольших и средних приложений. Однако, когда ваше приложение развивается, вы можете рассмотреть возможность перехода к подходу в стиле домена или другим популярным альтернативам, которые тесно связаны со стилем домена. Здесь каждая функция будет иметь собственный каталог, и все, что связано с этой функцией (доменом), будет находиться внутри нее. На рисунке ниже сравниваются два подхода: стиль Rails слева и стиль домена справа. </p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=750/uploads/users/1795/posts/30350/image/ReactandReduxTutorial-OrganisingReduxFeatureWise.png" alt="Начало работы с Redux: учимся на примере..." title="Начало работы с Redux: учимся на примере..." width="50" height="50"></figure><p>А пока давайте создадим каталоги для <strong>components</strong>, <strong>containers</strong>, <strong>store</strong>, <strong>reducers</strong> и <strong>action</strong>. Начнем со store. </p><h2>Одно хранилище, несколько редукторов</h2><p>Давайте сначала создадим прототип для <strong>store</strong> и <strong>reducer</strong>. Из нашего предыдущего примера, вот как будет выглядеть наш store: </p><pre class="brush: javascript noskimlinks noskimwords">const store = createStore( reducer, {    contacts: {        contactlist: [],        newContact: { }    },    ui: {        isContactFormHidden: true        }})const reducer = (state, action) =&gt; {switch(action.type) {        case "HANDLE_INPUT_CHANGE":    break;                case "ADD_NEW_CONTACT": break;               case "TOGGLE_CONTACT_FORM":        break;}        return state;}</pre><p>У оператора switch есть три случая, которые соответствуют трем действиям, которые мы будем создавать. Вот краткое объяснение того, для чего предназначены действия. </p><ul><li> <code class="inline">HANDLE_INPUT_CHANGE</code>: Это действие запускается, когда пользователь вводит новые значения в форму контакта.</li> <li> <code class="inline">ADD_NEW_CONTACT</code>: это действие отправляется, когда пользователь отправляет форму.</li> <li> <code class="inline">TOGGLE_CONTACT_FORM</code>: это действие пользовательского интерфейса, которое позволяет показать/скрыть контактную форму. </li> </ul><p>Хотя этот наивный подход работает по мере роста приложения, использование этого метода будет иметь несколько недостатков.</p><ol><li> <strong>Мы используем один редуктор</strong>. Хотя пока что звучит один редуктор, представьте, что вся ваша бизнес-логика под одним очень большим редуктором. </li> <li>Приведенный выше <strong>код не соответствует структуре Redux</strong>, которую мы обсуждали в предыдущем разделе.</li> </ol><p>Чтобы устранить проблему с одним редуктором, в Redux есть метод <span>combReducers</span>, который позволяет создавать несколько редукторов, а затем объединять их в одну редукционную функцию. Функция combReducers улучшает читаемость. Поэтому я собираюсь разделить редуктор на две части: <code class="inline">contactsReducer</code> и <code class="inline">uiReducer</code>. </p><p>В приведенном выше примере <code class="inline">createStore</code> принимает <em>необязательный</em> второй аргумент, который является начальным состоянием. Однако, если мы собираемся разделить редукторы, мы можем переместить весь initialState в новое местоположение файла, скажем, redurs / initialState.js. Затем мы импортируем подмножество initialState в каждый файл редуктора. </p><h4>Расщепление редуктора </h4><p>Давайте реструктурируем наш код, чтобы исправить обе проблемы. Сначала создайте новый файл с именем <strong>store/createStore.js</strong> и добавьте следующий код:</p><pre class="brush: javascript noskimlinks noskimwords">import {createStore} from "redux";  import rootReducer from "../reducers/";  /*Create a function called configureStore */export default function configureStore() {    return createStore(rootReducer);}</pre><p>Затем создайте корневой редуктор в <strong>reducers/index.js</strong> следующим образом:</p><pre class="brush: javascript noskimlinks noskimwords">import { combineReducers } from "redux"import contactsReducer from "./contactsReducer";import uiReducer from "./uiReducer";const rootReducer =combineReducers({        contacts: contactsReducer,    ui: uiReducer,  })export default rootReducer;</pre><p>Наконец, нам нужно создать код для <code class="inline">contactsReducer</code> и <code class="inline">uiReducer</code>.</p><h4>reducers/contactsReducer.js</h4><pre class="brush: javascript noskimlinks noskimwords">import initialState from "./initialState";export default function contactReducer(state = initialState.contacts, action) {    switch(action.type) {                /* Add contacts to the state array */         case "ADD_CONTACT": {return {...state,contactList: [...state.contactList, state.newContact]}}                /* Handle input for the contact form.         The payload (input changes) gets merged with the newContact object        */case "HANDLE_INPUT_CHANGE": {return {...state, newContact: {...state.newContact, ...action.payload }}}default: return state;}}</pre><h4>reducers/uiReducer.js</h4><pre class="brush: javascript noskimlinks noskimwords">import initialState from "./initialState";export default function uiReducer(state = initialState.ui, action) {    switch(action.type) {        /* Show/hide the form  */        case "TOGGLE_CONTACT_FORM": {    return {...state, isContactFormHidden: !state.isContactFormHidden}}default: return state;}}</pre><p>При создании редукторов всегда помните следующее: редуктор должен иметь значение по умолчанию для своего состояния и всегда должен что-то возвращать. Если редуктор не соответствует этой спецификации, вы получите ошибки.<br></p><p>Поскольку мы рассмотрели много кода, давайте посмотрим на изменения, которые мы внесли в наш подход:<br></p><ol><li>Был введен вызов <code class="inline">combineReducers</code>, чтобы связать редукторы.</li> <li>Состояние объекта <code class="inline">ui</code> будет обрабатываться <code class="inline">uiReducer</code>, а состояние контактов - <code class="inline">contactReducer</code>. </li> <li>Для поддержания чистоты редукторов были использованы операторы спреда. Синтаксис из трех точек является частью оператора распространения. Если вас не устраивает такой синтаксис, вам следует рассмотреть возможность использования библиотеки, такой как Immutability.js.</li> <li>Начальное значение больше не указывается в качестве необязательного аргумента для <code class="inline">createStore</code>. Вместо этого мы создали для него отдельный файл с именем <strong>initialState.js</strong>. Мы импортируем <code class="inline">initialState</code> и затем устанавливаем состояние по умолчанию, выполняя <code class="inline">state=initialState.ui</code>. </li> </ol><h4>Инициализация состояния</h4><p>Вот код для файла <strong>reducers/initialState.js</strong>.</p><pre class="brush: javascript noskimlinks noskimwords">const initialState = {    contacts: {        contactList: [],newContact: {name: "",surname: "",email: "",address: "",phone: ""},},ui: {isContactFormHidden: true}}export default initialState;</pre><h2>Действия и создатели действий<br></h2><p>Давайте добавим пару действий и создателей действий для добавления обработки форм, добавления нового контакта и переключения состояния пользовательского интерфейса. Если вы помните, создатели действий - это просто функции, которые возвращают действие. Добавьте следующий код в <strong>action/index.js</strong>.</p><pre class="brush: javascript noskimlinks noskimwords">export const addContact =() =&gt; {    return {    type: "ADD_CONTACT",}}export const handleInputChange = (name, value) =&gt; {return {type: "HANDLE_INPUT_CHANGE",payload: { [name]: value}}}export const toggleContactForm = () =&gt; {return {type: "TOGGLE_CONTACT_FORM",}}</pre><p>Каждое действие должно возвращать свойство типа. Тип подобен ключу, который определяет, какой редуктор вызывается и как обновляется состояние в ответ на это действие. Полезная нагрузка является необязательной, и вы можете назвать ее как угодно. </p><p>В нашем случае мы создали три действия.</p><p><code class="inline">TOGGLE_CONTACT_FORM</code> не нуждается в полезной нагрузке, потому что каждый раз, когда действие запускается, значение <code class="inline">ui.isContactFormHidden</code> переключается. Булевозначные действия не требуют полезной нагрузки. </p><p>Действие <code class="inline">HANDLE_INPUT_CHANGE</code> запускается при изменении значения формы. Так, например, представьте, что пользователь заполняет поле электронной почты. Затем действие получает <code class="inline">"email"</code> и <code class="inline">"bob@example.com"</code> в качестве входных данных, а полезная нагрузка, передаваемая редуктору, представляет собой объект, который выглядит следующим образом:</p><pre class="brush: javascript noskimlinks noskimwords">{email: "bob@example.com"}</pre><p>Редуктор использует эту информацию для обновления соответствующих свойств состояния <code class="inline">newContact</code>. </p><h2>Рассылка действий и подписка на хранилище</h2><p>Следующим логическим шагом является отправка действий. Как только действия отправляются, состояние изменяется в ответ на это. Для отправки действий и получения обновленного дерева состояний Redux предлагает определенные действия хранилища:</p><ul><li> <code class="inline">dispatch(action)</code>: отправляет действие, которое потенциально может вызвать изменение состояния. </li> <li> <code class="inline">getState()</code>: возвращает текущее дерево состояний вашего приложения.</li> <li> <code class="inline">subscriber(listener)</code>: слушатель изменений, который вызывается каждый раз, когда отправляется действие и изменяется некоторая часть дерева состояний. </li> </ul><p>Перейдите в файл <strong>index.js</strong> и импортируйте функцию <code class="inline">configureStore</code> и три действия, которые мы создали ранее:</p><pre class="brush: javascript noskimlinks noskimwords">import React from "react";import {render}from "react-dom";import App from "./App";/* Import Redux store and the actions */import configureStore  from "./store/configureStore";import {toggleContactForm,    handleInputChange} from "./actions";</pre><p>Затем создайте объект <code class="inline">store</code> и добавьте прослушиватель, который регистрирует дерево состояний каждый раз при отправке действия:</p><pre class="brush: javascript noskimlinks noskimwords">const store = configureStore();//Note that subscribe() returns a function for unregistering the listenerconst unsubscribe = store.subscribe(() =&gt;  console.log(store.getState()))</pre><p>Наконец, отправьте несколько действий:</p><pre class="brush: javascript noskimlinks noskimwords">/* returns isContactFormHidden returns false */store.dispatch(toggleContactForm());/* returns isContactFormHidden returns false */store.dispatch(toggleContactForm());/* updates the state of contacts.newContact object */store.dispatch(handleInputChange("email", "manjunath@example.com"))unsubscribe;</pre><p>Если все работает правильно, вы должны увидеть это в консоли разработчика.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1795/posts/30350/image/Getting-Started-With-Redux-Tutorial-Final-Developer-Console.png" alt="Начало работы с Redux: учимся на примере..." title="Начало работы с Redux: учимся на примере..." width="50" height="50"></figure><p>Вот оно! В консоли разработчика вы можете видеть, что хранилище Redux регистрируется, поэтому вы можете видеть, как оно меняется после каждого действия.</p><h2>Заключение</h2><p>Мы создали голое приложение Redux для нашего замечательного приложения со списком контактов. Мы узнали о редукторах, расщеплении редукторов, чтобы сделать структуру нашего приложения более чистой, и о написании действий для изменения хранилища. </p><p>В конце поста мы подписались на хранилище с помощью метода <code class="inline">store.subscribe()</code>. Технически, это не лучший способ добиться цели, если вы собираетесь использовать React с Redux. Существуют более оптимизированные способы подключения внешнего интерфейса реагирования к Redux. Мы рассмотрим их в следующем уроке. </p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824550-nachalo-raboty-s-redux-uchimsya-na-primere" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="React" href="https://norma-studio.github.io/article/220824550-nachalo-raboty-s-redux-uchimsya-na-primere" class="tm-article-body__tags-item-link">React</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
43435</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
505</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
