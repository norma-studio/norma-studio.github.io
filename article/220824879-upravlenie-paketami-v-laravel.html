
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Управление пакетами в Laravel... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Управление пакетами в Laravel... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Управление пакетами в Laravel... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Управление пакетами в Laravel... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="В этой статье мы рассмотрим функцию управления пакетами в рамках Laravel. В ходе статьи мы рассмотрим пример реального приложения, чтобы продемонстрировать цель этой статьи....">
<meta property="og:description" content="В этой статье мы рассмотрим функцию управления пакетами в рамках Laravel. В ходе статьи мы рассмотрим пример реального приложения, чтобы продемонстрировать цель этой статьи....">
<meta name="twitter:description" content="В этой статье мы рассмотрим функцию управления пакетами в рамках Laravel. В ходе статьи мы рассмотрим пример реального приложения, чтобы продемонстрировать цель этой статьи....">
<meta property="aiturec:description" content="В этой статье мы рассмотрим функцию управления пакетами в рамках Laravel. В ходе статьи мы рассмотрим пример реального приложения, чтобы продемонстрировать цель этой статьи....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/413/profiles/18842/profileImage/thumb_140656049277268.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/413/profiles/18842/profileImage/thumb_140656049277268.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/413/profiles/18842/profileImage/thumb_140656049277268.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/413/profiles/18842/profileImage/thumb_140656049277268.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/413/profiles/18842/profileImage/thumb_140656049277268.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824879-upravlenie-paketami-v-laravel.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824879-upravlenie-paketami-v-laravel.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824879-upravlenie-paketami-v-laravel.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824879-upravlenie-paketami-v-laravel.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824879-upravlenie-paketami-v-laravel.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824879-upravlenie-paketami-v-laravel.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824879-upravlenie-paketami-v-laravel.html" title="Управление пакетами в Laravel... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Управление пакетами в Laravel... | envatomarket.ru | norma-studio.github.io" title="Управление пакетами в Laravel... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/645343435.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824879-upravlenie-paketami-v-laravel.html" class="tm-user-info__username" title="
Н. Аяцков" aria-label="
Н. Аяцков">
Н. Аяцков</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Управление пакетами в Laravel...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824879-upravlenie-paketami-v-laravel" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Laravel 5" href="https://norma-studio.github.io/article/220824879-upravlenie-paketami-v-laravel" class="tm-article-snippet__hubs-item-link"><span>Laravel 5</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824879-upravlenie-paketami-v-laravel.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/413/profiles/18842/profileImage/thumb_140656049277268.jpg">
    <meta itemprop="headline name" content="Управление пакетами в Laravel... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="В этой статье мы рассмотрим функцию управления пакетами в рамках Laravel. В ходе статьи мы рассмотрим пример реального приложения, чтобы продемонстрировать цель этой статьи....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">В этой статье мы рассмотрим функцию управления пакетами в рамках Laravel. В ходе статьи мы рассмотрим пример реального приложения, чтобы продемонстрировать цель этой статьи....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>В этой статье мы рассмотрим функцию управления пакетами в рамках Laravel. В ходе статьи мы рассмотрим пример реального приложения, чтобы продемонстрировать цель этой статьи.</p><p>Управление пакетами в Laravel - важная функция, которая позволяет вам объединить функциональность, чтобы ее можно было легко распределить. Кроме того, вы всегда можете публиковать свой пакет в хранилищах, таких как Packagist и GitHub, которые позволяют другим разработчикам извлекать выгоду из вашего пакета.</p><p>Чтобы продемонстрировать концепцию, мы создадим страницу примера в Laravel, которая загружает изображение в облако Amazon S3. Вместо того, чтобы идти с обычным путем, мы разработаем этот функционал как пакет, который можно легко распределить и поддерживать.</p><p>Прежде чем двигаться дальше, я предполагаю, что вы уже знакомы с базой Laravel, поскольку я не буду вдаваться в подробности основных концепций Laravel.</p><p>Кроме того, вам необходимо иметь действительную учетную запись AWS и учетные данные для доступа к API Amazon, чтобы следовать вместе с примером в этой статье. Итак, сперва убедитесь, что вы все это установили.</p><p>Имея все это под рукой мы готовы погрузиться в реальную разработку.</p><h2>Настройка файлов пакетов</h2><p>Давайте быстро рассмотрим список файлов, которые мы будем внедрять на протяжении всего урока.</p><ul><li> <code class="inline">composer.json</code>: Нам нужно добавить сопоставление классов нашего пакета в существующий файл <code class="inline">composer.json</code> в корневом каталоге.</li> <li> <code class="inline">config/app.php</code>: Это существующий файл, который мы будем использовать для добавления записи нашего пользовательского поставщика услуг, чтобы мы могли загружать представления и маршруты с использованием этого файла.</li> <li> <code class="inline">composer.json</code>: Это пакетный файл <code class="inline">composer.json</code>, если вы хотите распространять этот пакет вместе с другими.</li> <li> <code class="inline">packages/envato/aws/src/Providers/AwsServiceProvider.php</code>: обычный файл поставщика услуг Laravel, который будет использоваться для загрузки других компонентов пакета.</li> <li> <code class="inline">packages/envato/aws/src/routes/web.php</code>: загружает пользовательские маршруты нашего пакета.</li> <li> <code class="inline">packages/envato/aws/src/Controllers/AwsController.php</code>: Это файл контроллера, который обрабатывает логику приложения нашего пакета.</li> <li> <code class="inline">packages/envato/aws/src/views/upload.blade.php</code>: файл представления, который обрабатывает логику рендеринга.</li> </ul><p>Не волнуйтесь, если это не имеет особого смысла, поскольку мы подробно обсудим все, когда мы пройдем через это.</p><h2>Настройка предварительных условий</h2><p>Как мы обсуждали ранее, наш пакет реализует use case загрузки файлов в облако Amazon S3. В этом разделе мы рассмотрим предварительные условия, которые необходимо настроить для успешного запуска нашего пакета.</p><p>Как разработчик Laravel, вы должны быть знакомы с Flysystem, которая обеспечивает хороший уровень абстракции для взаимодействия с файловой системой. Он предоставляет простые в использовании драйверы, чтобы вы могли легко взаимодействовать с ним независимо от типа файловой системы, с которой вы имеете дело: либо это локальная файловая система, либо облачная система AWS S3.</p><p>Чтобы включить поддержку облачной файловой системы Amazon S3 с помощью Flysystem, вам необходимо установить соответствующий пакет адаптера.</p><p>Для запуска пакета flysystem-aws-s3-v3 выполните команду композера из корневого каталога проекта.</p><pre class="brush: bash noskimlinks noskimwords">$composer require league/flysystem-aws-s3-v3</pre><p>После успешного выполнения этой команды теперь вы можете использовать Laravel Flysystem для взаимодействия с облачной файловой системой Amazon S3 так же, как вы использовали бы ее для локальной файловой системы.</p><p>Теперь давайте быстро загрузим файл <code class="inline">config/filesystems.php</code>, чтобы увидеть настройки, предоставленные для файловой системы Amazon S3.</p><pre class="brush: plain noskimlinks noskimwords">......"disks" =&gt; [    "local" =&gt; [        "driver" =&gt; "local",        "root" =&gt; storage_path("app"),    ],    "public" =&gt; [        "driver" =&gt; "local",        "root" =&gt; storage_path("app/public"),        "url" =&gt; env("APP_URL")."/storage",        "visibility" =&gt; "public",    ],    "s3" =&gt; [        "driver" =&gt; "s3",        "key" =&gt; env("AWS_KEY"),        "secret" =&gt; env("AWS_SECRET"),        "region" =&gt; env("AWS_REGION"),        "bucket" =&gt; env("AWS_BUCKET"),    ],],......</pre><p>Как вы можете видеть, конфигурация уже установлена для Amazon S3; просто нужно установить соответствующие переменные <code class="inline">ENV</code> в файле <code class="inline">.env</code>.</p><p>Идем дальше и добавляем следующие переменные в ваш <code class="inline">.env</code> файл.</p><pre class="brush: plain noskimlinks noskimwords">AWS_KEY={AWS_KEY_VALUE}AWS_SECRET={AWS_SECRET_VALUE}AWS_REGION={AWS_REGION_VALUE}AWS_BUCKET={AWS_BUCKET_VALUE}AWS_CDN_URL={AWS_CDN_URL_VALUE}</pre><p>Конечно, вам нужно заменить заполнители их фактическими значениями. Теперь вы готовы использовать адаптер Flysystem AWS S3 в своем приложении Laravel.</p><h2>Пройдемся по файлам нашего пакета</h2><p>Чтобы создать свой собственный пакет Laravel, нужно создать соответствующую структуру каталогов, которая отражает соглашения системы Laravel. Я предполагаю, что вы уже используете базовое приложение Laravel; на самом деле, приложение по умолчанию для <em>блога</em> также будет работать.</p><p>Идем дальше и создаем каталог <code class="inline">packages</code> в корне вашего приложения. Учитывая, что вы собираетесь распространять свой пакет вместе другими, предпочтительная структура вашего пакета должна быть <code class="inline">{vendor_name}/{package_name}</code>.</p><p>Следуя этому соглашению, давайте продолжим и создадим каталог <code class="inline">envato/aws</code> в каталоге <code class="inline">packages</code>. Как вы могли догадаться, <code class="inline">envato</code> - это имя поставщика, а <code class="inline">aws</code> означает имя пакета. Наконец, давайте создадим каталог <code class="inline">packages/envato/aws/src</code>, который содержит исходные файлы нашего пакета.</p><p>Теперь нам нужно сообщить Laravel о нашем новом пакете. Вперёд и откройте файл <code class="inline">composer.json</code> в корне вашего приложения Laravel и добавьте запись <code class="inline">"Envato\Aws\": "packages/envato/aws/src"</code> в разделе автозагрузки, как показано ниже.</p><pre class="brush: plain noskimlinks noskimwords">......"autoload": {    "classmap": [        "database"    ],    "psr-4": {        "App\": "app/",        "Envato\Aws\": "packages/envato/aws/src"    }},......</pre><p>Как вы можете видеть, пространство имен <code class="inline">Envato\Aws\</code> отображается в каталог <code class="inline">packages/envato/aws/src</code>. Теперь нам просто нужно запустить команду dump-autoload композера.</p><pre class="brush: bash noskimlinks noskimwords">$composer dump-autoload</pre><p>Теперь вы можете использовать пространство имен <code class="inline">Envato\Aws\</code> в своем приложении, и оно подберет файлы из правильного местоположения!</p><h3>Файл композера в пакете</h3><p>Теперь давайте продолжим и добавим пакетный файл <code class="inline">composer.json</code>, чтобы вы могли распространять свой пакет в репозитории packagist.</p><p>Перейдите в каталог <code class="inline">packages/envato/aws</code> и выполните следующую команду для создания файла <code class="inline">composer.json</code> для вашего пакета.</p><pre class="brush: bash noskimlinks noskimwords">$composer init</pre><p>Вам будут предложены обычные вопросы, поэтому просто пройдите через них, и в итоге получите файл <code class="inline">composer.json</code>.</p><p>По крайней мере, он должен выглядеть примерно так.</p><pre class="brush: plain noskimlinks noskimwords">{    "name": "envato/aws",    "description": "Example of File Upload to AWS S3 Cloud",    "minimum-stability": "dev",    "require": {}}</pre><h3>Маршрут</h3><p>В нашем пакете мы создадим простую страницу, отображающую статус загруженного файла. Поэтому нам нужно создать маршрут, связанный с этой страницей.</p><p>Давайте создадим файл маршрута в <code class="inline">packages/envato/aws/src/routes/web.php</code>.</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpRoute::get("aws/s3/upload", "Envato\Aws\Controllers\AwsController@upload");</pre><p>Требуется ли вообще какое-либо объяснение? Очевидным следующим шагом является создание связанного файла контроллера.</p><h3>Контроллер</h3><p>Давайте создадим файл контроллера в <code class="inline">packages/envato/aws/src/Controllers/AwsController.php</code> со следующим содержимым.</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpnamespace Envato\Aws\Controllers;use App\Http\Controllers\Controller;class AwsController extends Controller{  public function upload(\Illuminate\Contracts\Filesystem\Factory $storage)  {    // load s3 storage    $awsS3Storage = $storage-&gt;disk("s3");        // load local storage    $localStorage = $storage-&gt;disk("local");    // default path of local storage "storage/app"    $sourceFileContents = $localStorage-&gt;get("test.jpg");        // destination filepath in S3 cloud    $destFilePath = "test_new.jpg";        // init vars    $imageUrl = "";    $errorMsg = "";    // upload file to AWS S3    if ($awsS3Storage-&gt;put($destFilePath, $sourceFileContents, "public"))    {      $imageUrl = env("AWS_CDN_URL") . env("AWS_BUCKET") . "/" . $destFilePath;    }    else    {      $errorMsg = "Oops! Something went wrong :(";    }    // call view    return view("aws::upload", ["imageUrl" =&gt; $imageUrl, "errorMsg" =&gt; $errorMsg]);  }}</pre><p>Давайте рассмотрим файл, чтобы понять, для чего предназначен каждый фрагмент кода.</p><p>Мы начинаем, устанавливая пространство имен нашего контроллера в пространство имен <code class="inline">Envato\Aws\Controllers</code>. Напомним, что мы добавили отображение <code class="inline">Envato\Aws</code> в <code class="inline">packages/envato/aws/src</code> в корневой файл <code class="inline">composer.json</code>, чтобы он мог найти наши файлы.</p><p>Затем мы определили метод <code class="inline">upload</code>, который требует синхронизации локальных файлов с облаком Amazon S3. Здесь важно отметить первый аргумент метода upload, который запрашивает зависимость <code class="inline">\Illuminate\Contracts\Filesystem\Factory</code>. Во время исполнения будет подставлен соответствующий контракт Laravel.</p><p>Теперь мы можем использовать экземпляр фабрики файловой системы для создания экземпляров диска по мере необходимости. Экземпляр диска в Laravel - это драйвер, который позволяет вам легко обращаться к базовым файловым системам, таким как локальный диск, облако Amazon S3 и тому подобное.</p><pre class="brush: php noskimlinks noskimwords">// load s3 storage$awsS3Storage = $storage-&gt;disk("s3");    // load local storage$localStorage = $storage-&gt;disk("local");</pre><p>Для простоты мы передадим статический файл изображения, который уже доступен в локальном хранилище Laravel по умолчанию, а путь - <code class="inline">storage /app/test.jpg</code>.</p><p>В качестве первого шага давайте возьмем содержимое исходного файла.</p><pre class="brush: php noskimlinks noskimwords">// default path of local storage "storage/app"$sourceFileContents = $localStorage-&gt;get("test.jpg");</pre><p>Со всем настроенным, как упоминалось, вы должны иметь возможность синхронизировать файл с Amazon S3 с помощью метода put.</p><pre class="brush: php noskimlinks noskimwords">// upload file to AWS S3if ($awsS3Storage-&gt;put($destFilePath, $sourceFileContents, "public")){  $imageUrl = env("AWS_CDN_URL") . env("AWS_BUCKET") . "/" . $destFilePath;}else{  $errorMsg = "Oops! Something went wrong :(";}</pre><p>Убедитесь, что вы правильно настроили переменные среды AWS, на случай, если что-то не работает должным образом.</p><p>И последнее - вызвать файл отображение, в котором отображается синхронизированное изображение и соответствующее сообщение.</p><pre class="brush: php noskimlinks noskimwords">// call viewreturn view("aws::upload", ["imageUrl" =&gt; $imageUrl, "errorMsg" =&gt; $errorMsg]);</pre><p>Конечно, мы еще не создали файл представления, и это именно то, о чем идет речь в следующем разделе.</p><h3>Отображение</h3><p>Давайте создадим файл отображения в <code class="inline">packages/envato/aws/src/views/upload.blade.php</code> со следующим содержимым.</p><pre class="brush: php noskimlinks noskimwords">&lt;!DOCTYPE html&gt;&lt;html lang="{{ config("app.locale") }}"&gt;    &lt;head&gt;        &lt;meta charset="utf-8"&gt;        &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;        &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;        &lt;title&gt;Laravel&lt;/title&gt;        &lt;!-- Fonts --&gt;        &lt;link href="https://fonts.googleapis.com/css?family=Raleway:100,600" rel="stylesheet" type="text/css"&gt;        &lt;!-- Styles --&gt;        &lt;style&gt;            html, body {                background-color: #fff;                color: #636b6f;                font-family: "Raleway", sans-serif;                font-weight: 100;                height: 100vh;                margin: 0;            }            .full-height {                height: 100vh;            }            .flex-center {                align-items: center;                display: flex;                justify-content: center;            }            .position-ref {                position: relative;            }            .top-right {                position: absolute;                right: 10px;                top: 18px;            }            .content {                text-align: center;            }            .title {                font-size: 84px;            }            .links &gt; a {                color: #636b6f;                padding: 0 25px;                font-size: 12px;                font-weight: 600;                letter-spacing: .1rem;                text-decoration: none;                text-transform: uppercase;            }            .m-b-md {                margin-bottom: 30px;            }        &lt;/style&gt;    &lt;/head&gt;    &lt;body&gt;        &lt;div class="flex-center position-ref full-height"&gt;            @if (Route::has("login"))                &lt;div class="top-right links"&gt;                    @if (Auth::check())                        &lt;a href="{{ url("/home") }}"&gt;Home&lt;/a&gt;                    @else                        &lt;a href="{{ url("/login") }}"&gt;Login&lt;/a&gt;                        &lt;a href="{{ url("/register") }}"&gt;Register&lt;/a&gt;                    @endif                &lt;/div&gt;            @endif            &lt;div class="content"&gt;                &lt;div class="title m-b-md"&gt;                    File upload to S3 Cloud                &lt;/div&gt;                &lt;div&gt;                  @if ($imageUrl)                      &lt;img src="{{ $imageUrl }}" width="100"/&gt;                  @else                      &lt;span class="error"&gt;{{ $errorMsg }}&lt;/span&gt;                  @endif                &lt;/div&gt;            &lt;/div&gt;        &lt;/div&gt;    &lt;/body&gt;&lt;/html&gt;</pre><p>Это довольно стандартный файл представлений, который отображает загруженное изображение при успешной загрузке или, в противном случае, соответствующее сообщение об ошибке.</p><h3>Поставщик услуг</h3><p>Мы почти закончили с нашим пакетом, так как мы создали необходимые файлы. Следующим шагом будет создание поставщика услуг, чтобы мы могли регистрировать маршруты и представления нашего пакета.</p><p>Давайте создадим файл поставщика услуг в <code class="inline">packages/envato/aws/src/Providers/AwsServiceProvider.php</code> со следующим содержимым.</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpnamespace Envato\Aws\Providers;use Illuminate\Support\ServiceProvider;class AwsServiceProvider extends ServiceProvider{  /**   * Bootstrap the application services.   *   * @return void   */  public function boot()  {      // load routes      $this-&gt;loadRoutesFrom(__DIR__."/../routes/web.php");      // load view files      $this-&gt;loadViewsFrom(__DIR__."/../views", "aws");            // publish files      $this-&gt;publishes([      __DIR__."/../views" =&gt; resource_path("views/vendor/aws"),    ]);  }  /**   * Register the application services.   *   * @return void   */  public function register()  {  }}</pre><p>Очевидно, что вы могли бы создать файл поставщика услуг, используя команду artisan. Но это потребовало бы дополнительного шага перемещения файла из <code class="inline">app/Providers</code> в наш пакет.</p><p>В любом случае, давайте рассмотрим созданный файл поставщика услуг.</p><p>Во-первых, мы загружаем маршруты и представления, связанные с нашим пакетом.</p><pre class="brush: php noskimlinks noskimwords">// load routes$this-&gt;loadRoutesFrom(__DIR__."/../routes/web.php");// load view files$this-&gt;loadViewsFrom(__DIR__."/../views", "aws");</pre><p>Затем мы предлагаем поддержку публикации представлений наших пакетов, чтобы разработчики, которые хотят переопределить представления, смогли это сделать. В следующий раз, когда они запустят команду <code class="inline">php artisan vendor:publish</code>  Laravel копирует представления из <code class="inline">packages/envato/aws/src/views/</code> в <code class="inline">resources/views/vendor/aws</code>.</p><p>Теперь они могут изменять представления в каталоге <code class="inline">resources/views/vendor/aws</code>, и он будет автоматически выбран Laravel вместо представлений в <code class="inline">packages/envato/aws/src/views/</code>. Фактически, это правильный способ изменения сторонних представлений пакетов, а не прямое изменение представлений непосредственно в исходном коде пакета.</p><p>Это то, что касается поставщика услуг. Как и следовало ожидать, нам нужно добавить запись поставщика услуг в <code class="inline">config/app.php</code>. Добавьте следующую запись в массив <code class="inline">providers</code>.</p><pre class="brush: php noskimlinks noskimwords">....../* * Application Service Providers... */App\Providers\AppServiceProvider::class,App\Providers\AuthServiceProvider::class,App\Providers\BroadcastServiceProvider::class,App\Providers\EventServiceProvider::class,App\Providers\RouteServiceProvider::class,Envato\Aws\Providers\AwsServiceProvider::class, // Our package service provider......</pre><p>И вот теперь все в порядке, так что мы можем продолжить и проверить наш пакет.</p><p>Перейдите и запустите URL-адрес <span>http://your-laravel-application/aws/s3/upload</span> в своем браузере. Если все будет хорошо, вы должны увидеть изображение на своей странице, загруженное из облака Amazon S3. Пожалуйста, дайте мне знать, если у вас возникнут какие-либо проблемы, и я был бы более чем счастлив ответить на них.</p><p>Итак, мы находимся в заключительной части этой статьи, и я надеюсь, что вам понравилось!</p><h2>Вывод</h2><p>Сегодня мы обсудили одну из важных особенностей фреймворка Laravel - управление пакетами . В процессе создания нашего индивидуального пакета Laravel мы рассмотрели реальный пример, который продемонстрировал, как вы можете загрузить изображение в облако Amazon S3.</p><p>Это действительно приятная функция, если вы хотите объединить и распределить набор функций вместе. Фактически, вы можете посмотреть на это как на подход к разработке пользовательских модулей в Laravel.</p><p>Для тех из вас, кто только начинает работать с Laravel или хочет расширить свои знания, сайт или приложение с расширениями, у нас есть множество вещей, которые вы можете изучить на <span>Envato Market</span>.<br></p><p>Как всегда, вы можете оставить свои ценные комментарии и отзывы в ленте ниже!<br></p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824879-upravlenie-paketami-v-laravel" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Laravel 5" href="https://norma-studio.github.io/article/220824879-upravlenie-paketami-v-laravel" class="tm-article-body__tags-item-link">Laravel 5</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
35974</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
626</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
