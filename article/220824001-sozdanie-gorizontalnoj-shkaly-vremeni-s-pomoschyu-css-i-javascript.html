
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Создание горизонтальной шкалы времени с помощью CSS и JavaScript... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Создание горизонтальной шкалы времени с помощью CSS и JavaScript... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Создание горизонтальной шкалы времени с помощью CSS и JavaScript... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Создание горизонтальной шкалы времени с помощью CSS и JavaScript... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="В предыдущей статье, я показал как сделать адаптивную вертикальную шкалу времени с нуля. Сегодня, я разберу процесс создания ассоциативной горизонтальной временной шкалы....">
<meta property="og:description" content="В предыдущей статье, я показал как сделать адаптивную вертикальную шкалу времени с нуля. Сегодня, я разберу процесс создания ассоциативной горизонтальной временной шкалы....">
<meta name="twitter:description" content="В предыдущей статье, я показал как сделать адаптивную вертикальную шкалу времени с нуля. Сегодня, я разберу процесс создания ассоциативной горизонтальной временной шкалы....">
<meta property="aiturec:description" content="В предыдущей статье, я показал как сделать адаптивную вертикальную шкалу времени с нуля. Сегодня, я разберу процесс создания ассоциативной горизонтальной временной шкалы....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/780/posts/28378/image/No_paddings.png">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/780/posts/28378/image/No_paddings.png">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/780/posts/28378/image/No_paddings.png">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/780/posts/28378/image/No_paddings.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/780/posts/28378/image/No_paddings.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824001-sozdanie-gorizontalnoj-shkaly-vremeni-s-pomoschyu-css-i-javascript.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824001-sozdanie-gorizontalnoj-shkaly-vremeni-s-pomoschyu-css-i-javascript.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824001-sozdanie-gorizontalnoj-shkaly-vremeni-s-pomoschyu-css-i-javascript.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824001-sozdanie-gorizontalnoj-shkaly-vremeni-s-pomoschyu-css-i-javascript.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824001-sozdanie-gorizontalnoj-shkaly-vremeni-s-pomoschyu-css-i-javascript.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824001-sozdanie-gorizontalnoj-shkaly-vremeni-s-pomoschyu-css-i-javascript.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824001-sozdanie-gorizontalnoj-shkaly-vremeni-s-pomoschyu-css-i-javascript.html" title="Создание горизонтальной шкалы времени с помощью CSS и JavaScript... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Создание горизонтальной шкалы времени с помощью CSS и JavaScript... | envatomarket.ru | norma-studio.github.io" title="Создание горизонтальной шкалы времени с помощью CSS и JavaScript... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/543234456.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824001-sozdanie-gorizontalnoj-shkaly-vremeni-s-pomoschyu-css-i-javascript.html" class="tm-user-info__username" title="
А. Гаврилов" aria-label="
А. Гаврилов">
А. Гаврилов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Создание горизонтальной шкалы времени с помощью CSS и JavaScript...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Web Design" href="https://norma-studio.github.io/article/220824001-sozdanie-gorizontalnoj-shkaly-vremeni-s-pomoschyu-css-i-javascript" class="tm-article-snippet__hubs-item-link"><span>Web Design</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="UI Design" href="https://norma-studio.github.io/article/220824001-sozdanie-gorizontalnoj-shkaly-vremeni-s-pomoschyu-css-i-javascript" class="tm-article-snippet__hubs-item-link"><span>UI Design</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824001-sozdanie-gorizontalnoj-shkaly-vremeni-s-pomoschyu-css-i-javascript.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/780/posts/28378/image/No_paddings.png">
    <meta itemprop="headline name" content="Создание горизонтальной шкалы времени с помощью CSS и JavaScript... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="В предыдущей статье, я показал как сделать адаптивную вертикальную шкалу времени с нуля. Сегодня, я разберу процесс создания ассоциативной горизонтальной временной шкалы....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">В предыдущей статье, я показал как сделать адаптивную вертикальную шкалу времени с нуля. Сегодня, я разберу процесс создания ассоциативной горизонтальной временной шкалы....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>В <span>предыдущей статье</span>, я показал как сделать адаптивную вертикальную шкалу времени с нуля. Сегодня, я разберу процесс создания ассоциативной <em>горизонтально</em>й временной шкалы.</p><p>Как обычно, чтобы представить, что мы будем разрабатывать, ознакомьтесь с демонстрацией на CodePen (для более глубокого понимания концепции, взгляните на <span>полную версию</span>)</p> <p>Нам предстоит многое разобрать, давайте же начнём!</p><h2> <span class="sectionnum">1. HTML разметка</span></h2><p>Размета аналогична разметке, которую мы использовали для вертикальной временной шкалы, разве что изменились три небольших детали:</p><ul><li>Мы используем упорядоченный список вместо неупорядоченного, так как данный список семантически вернее.</li> <li>В списке есть дополнительный элемент списка (последний), который в свою очередь будет пустым. В дальнейшем мы обсудим зачем это нужно.</li> <li>Присутствует вспомогательный элемент (<code class="inline">.arrows</code>), который отвечает за навигацию.</li> </ul><p>Ниже пример необходимой нам разметки:</p><pre class="brush: html noskimlinks noskimwords">&lt;section class="timeline"&gt;  &lt;ol&gt;    &lt;li&gt;      &lt;div&gt;        &lt;time&gt;1934&lt;/time&gt;        Some content here      &lt;/div&gt;    &lt;/li&gt;         &lt;!-- more list items here --&gt;        &lt;li&gt;&lt;/li&gt;  &lt;/ol&gt;    &lt;div class="arrows"&gt;    &lt;button class="arrow arrow__prev disabled" disabled&gt;      &lt;img src="arrow_prev.svg" alt="prev timeline arrow"&gt;    &lt;/button&gt;    &lt;button class="arrow arrow__next"&gt;      &lt;img src="arrow_next.svg" alt="next timeline arrow"&gt;    &lt;/button&gt;  &lt;/div&gt;&lt;/section&gt;</pre><p>Начальное состояние временной шкалы выглядит следующим образом:</p> <h2> <span class="sectionnum">2. Добавляем первые CSS стили</span></h2><p>После добавления основных стилей шрифтов, цвета, и так далее. Которые я не описал здесь, чтобы не усложнять, мы укажем основные CSS правила для создания структуры.<br></p><pre class="brush: css noskimlinks noskimwords">.timeline {  white-space: nowrap;  overflow-x: hidden;}.timeline ol {  font-size: 0;  width: 100vw;  padding: 250px 0;  transition: all 1s;}.timeline ol li {  position: relative;  display: inline-block;  list-style-type: none;  width: 160px;  height: 3px;  background: #fff;}.timeline ol li:last-child {  width: 280px;}.timeline ol li:not(:first-child) {  margin-left: 14px;}.timeline ol li:not(:last-child)::after {  content: "";  position: absolute;  top: 50%;  left: calc(100% + 1px);  bottom: 0;  width: 12px;  height: 12px;  transform: translateY(-50%);  border-radius: 50%;  background: #F45B69;}</pre><p>Важно - стоит обратить внимание на две вещи:</p><ul><li>Мы добавили большой верхний и нижний padding нашему списку. Опять же, далее я объясню зачем это сделано. </li> <li>Как вы наверно заметите в следующем примере, мы не можем видеть все элементы списка, так как ему задана ширина <code class="inline">width: 100vw</code>, а родитель обладает свойством <code class="inline">overflow-x: hidden</code>. Данный подход эффективно скрывает элементы списка. Благодаря навигации, однако, мы сможем управлять, перемещать эти элементы.</li> </ul><p>Зная это, ниже пример текущего состояния, внешнего вида нашей шкалы времени (без какого-либо контента, для простоты):</p>  <h2> <span class="sectionnum">3. Стили элемента шкалы времени</span></h2><p>На этом этапе мы добавим стили элементу <code class="inline">div</code> (будем называть их "элементы шкалы времени"), которые представляют из себя часть элемента списка, также как и псевдоэлемент <code class="inline">::before</code>.</p><p>В дополнение, мы прибегнем к помощи <code class="inline">:nth-child(odd)</code> и <code class="inline">:nth-child(even)</code> CSS псевдоклассов.</p><p>Ниже основные стили для элементов временной шкалы:</p><pre class="brush: css noskimlinks noskimwords">.timeline ol li div {  position: absolute;  left: calc(100% + 7px);  width: 280px;  padding: 15px;  font-size: 1rem;  white-space: normal;  color: black;  background: white;}.timeline ol li div::before {  content: "";  position: absolute;  top: 100%;  left: 0;  width: 0;  height: 0;  border-style: solid;}</pre><p>Далее некоторые стили для чётных:</p><pre class="brush: css noskimlinks noskimwords">.timeline ol li:nth-child(odd) div {  top: -16px;  transform: translateY(-100%);}.timeline ol li:nth-child(odd) div::before {  top: 100%;  border-width: 8px 8px 0 0;  border-color: white transparent transparent transparent;}</pre><p>И наконец некоторые стили для нечётных:</p><pre class="brush: css noskimlinks noskimwords">.timeline ol li:nth-child(even) div {  top: calc(100% + 16px);}.timeline ol li:nth-child(even) div::before {  top: -8px;  border-width: 8px 0 0 8px;  border-color: transparent transparent transparent white;}</pre><p>Теперь можно ознакомиться с новым внешним видом временной шкалы, после добавления контента:</p>  <p>Как вы вероятно заметили, элементы шкалы времени абсолютно позиционированы. Зная это, можно убедиться, что вся шкала появляется, нам нужно задать большое верхнее и нижнее значения padding для списка. Если не добавить padding"и, шкала времени будет обрезаться:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/780/posts/28378/image/No_paddings.png" alt="Создание горизонтальной шкалы времени с помощью CSS и JavaScript..." title="Создание горизонтальной шкалы времени с помощью CSS и JavaScript..." width="50" height="50"></figure><h2> <span class="sectionnum">4. Стили навигации шкалы времени</span></h2><p>Теперь пришёл черёд задать стили навигационным кнопкам. Помните, что по умолчанию мы отключили стрелку отвечающую за обратную прокрутку и присвоили ей класс <code class="inline">disabled</code>.</p><p>Вот стили, которые отвечают за всё это:</p><pre class="brush: css noskimlinks noskimwords">.timeline .arrows {  display: flex;  justify-content: center;  margin-bottom: 20px;}.timeline .arrows .arrow__prev {  margin-right: 20px;}.timeline .disabled {  opacity: .5;}.timeline .arrows img {  width: 45px;  height: 45px;}</pre><p>Правила выше, изменят внешний вид шкалы следующим образом:</p>  <h2> <span class="sectionnum">5. Добавим интерактив</span></h2><p>Основная структура временной шкалы готова. Добавим больше интерактивности.</p><h3>Переменные</h3><p>Сперва самое главное, мы определим набор переменных, которые будем позже использовать. </p><pre class="brush: javascript noskimlinks noskimwords">const timeline = document.querySelector(".timeline ol"),  elH = document.querySelectorAll(".timeline li &gt; div"),  arrows = document.querySelectorAll(".timeline .arrows .arrow"),  arrowPrev = document.querySelector(".timeline .arrows .arrow__prev"),  arrowNext = document.querySelector(".timeline .arrows .arrow__next"),  firstItem = document.querySelector(".timeline li:first-child"),  lastItem = document.querySelector(".timeline li:last-child"),  xScrolling = 280,  disabledClass = "disabled";</pre><h3>Инициализация</h3><p>Когда все необходимые для страницы ресурсы будут готовы, вызовем функцию <code class="inline">init</code>.</p><pre class="brush: javascript noskimlinks noskimwords">window.addEventListener("load", init);</pre><p>Данная функция вызывает 4-и подфункции:</p><pre class="brush: javascript noskimlinks noskimwords">function init() {  setEqualHeights(elH);  animateTl(xScrolling, arrows, timeline);  setSwipeFn(timeline, arrowPrev, arrowNext);  setKeyboardFn(arrowPrev, arrowNext);}</pre><p>Как вы скоро поймёте, каждая функция служит определённой задаче.</p><h3>Элементы временной шкалы, одинаковой высоты</h3><p>Если вернуться к <span>предыдущему примеру</span>, вы заметите, что элементы шкалы времени различаются по высоте. Это не препятствует основному функционалу временной шкалы, однако скорее всего хочется, чтобы они были одинаковой высоты. Добиться этого можно, либо указав фиксированную высоту в CSS (простое решение), или динамично вычислять необходимую высоту, согласно самому большому элементу с помощью JavaScript.</p><p>Второй вариант более гибкий и стабильный, так что представляю вам функцию, которая позволяет добиться подобного поведения.</p><pre class="brush: javascript noskimlinks noskimwords">function setEqualHeights(el) {  let counter = 0;  for (let i = 0; i &lt; el.length; i++) {    const singleHeight = el[i].offsetHeight;        if (counter &lt; singleHeight) {      counter = singleHeight;    }  }    for (let i = 0; i &lt; el.length; i++) {    el[i].style.height = `${counter}px`;  }}</pre><p>Эта функция находит высоту самого высокого элемента временной шкалы и задаёт её в качестве высоты по умолчанию для остальных элементов.</p><p>Результат представлен ниже:</p> <h2> <span class="sectionnum">6. Анимация временной шкалы</span></h2><p>Теперь давайте сосредаточимся на анимации. Создадим для этого функцию, добавляющую данное поведение.</p><p>Сперва, мы опишем обработчик события, нажатия кнопки мыши для кнопок шкалы:</p><pre class="brush: javascript noskimlinks noskimwords">function animateTl(scrolling, el, tl) {  for (let i = 0; i &lt; el.length; i++) {    el[i].addEventListener("click", function() {      // code here    });  }}</pre><p>Каждый раз когда кнопка была нажата, мы определяем находится ли кнопка в нерабочем состоянии (disable), если это не так, мы отключим их. Это позволит нам убедиться, что кнопка была нажата один раз, до того как закончится анимация.</p><p>Код обработчика содержит нижеописанные строки кода:</p><pre class="brush: javascript noskimlinks noskimwords">if (!arrowPrev.disabled) {  arrowPrev.disabled = true;}if (!arrowNext.disabled) {  arrowNext.disabled = true;}</pre><p>Дальше нам предстоит:</p><ul><li>Проверить первый раз была нажата кнопка. Опять же, вспомните, что кнопка обратной прокрутки (<strong>previous</strong>) по умолчанию не работает, так что единственная кнопка, которая может быть изначально нажата это - <strong>next</strong>. </li> <li>Первый раз мы используем свойство <code class="inline">transform</code>, для перемещения вправо на 280px. Значение переменной <code class="inline">xScrolling</code> определяет количество пикселей, на которые мы сместимся.  </li> <li>С другой стороны, если мы уже нажали на кнопку, мы получаем текущее значение <code class="inline">transform</code> шкалы и добавляем или вычитаем данное значение, необходимое количество пикселей для перемещения (280px). Таким образом, как только мы нажали на кнопку <strong>previous</strong>, значение <code class="inline">transform</code> уменьшается и шкала будет прокручена слева направо.  Однако, когда кнопка <strong>next</strong> будет нажат, значение свойства <code class="inline">transform</code> уменьшается и шкала времени передвинется справа налево.</li> </ul><p>Код, отвечающий за подобный функционал:</p><pre class="brush: javascript noskimlinks noskimwords">let counter = 0; for (let i = 0; i &lt; el.length; i++) {  el[i].addEventListener("click", function() {    // other code here      const sign = (this.classList.contains("arrow__prev")) ? "" : "-";    if (counter === 0) {      tl.style.transform = `translateX(-${scrolling}px)`;    } else {      const tlStyle = getComputedStyle(tl);      // add more browser prefixes if needed here      const tlTransform = tlStyle.getPropertyValue("-webkit-transform") || tlStyle.getPropertyValue("transform");      const values = parseInt(tlTransform.split(",")[4]) + parseInt(`${sign}${scrolling}`);      tl.style.transform = `translateX(${values}px)`;    }    counter++;  });}</pre><p>Отличная работа! Мы только что добавили анимацию нашей временной шкале. Следующее испытание - выяснить когда анимации следует остановиться. Мы будем применять следующий подход:</p><ul><li>Когда первый элемент временной шкалы становится полностью видимым, это значит, что мы уже достигли начала временной шкалы, в связи с этим мы отключаем кнопку <strong>previous</strong>. Также этот момент даёт нам понять, что кнопка <strong>next</strong> включена.</li> <li>Когда последний элемент полостью видимй, это значит мы достигли конца шкалы времени, следовательно стоит отключить кнопку <strong>next</strong>. Кроме этого нужно включить кнопку <strong>previous</strong>.</li> </ul><p>Необходимо помнить - ширина последнего элемента равна ширине временной шкалы (280px). Мы задаём ему такое значение (или значение больше) так как нужно убедиться, что последний элемент будет виден до того как кнопка <strong>next</strong> будет выключена.</p><p>Чтобы определить, что целевой элемент полностью видим в текущей области видимости, мы воспользуемся тем же самым кодом, который использовали для создания вертикальной шкалы. Нужный код, ознакомиться с котором можно в одном из <span>обсуждений на Stack Overflow</span>, выглядит следующим образом:</p><pre class="brush: javascript noskimlinks noskimwords">function isElementInViewport(el) {  const rect = el.getBoundingClientRect();  return (    rect.top &gt;= 0 &amp;&amp;    rect.left &gt;= 0 &amp;&amp;    rect.bottom &lt;= (window.innerHeight || document.documentElement.clientHeight) &amp;&amp;    rect.right &lt;= (window.innerWidth || document.documentElement.clientWidth)  );}</pre><p>Помимо кода описанного выше, понадобиться ещё один вспомогательный функционал:</p><pre class="brush: javascript noskimlinks noskimwords">function setBtnState(el, flag = true) {  if (flag) {    el.classList.add(disabledClass);  } else {    if (el.classList.contains(disabledClass)) {      el.classList.remove(disabledClass);    }    el.disabled = false;  }}</pre><p>Данная функция убирает класс <code class="inline">disabled</code> у элемента в зависимости от значения в параметре <code class="inline">flag</code>. Дополнительно, функция может изменить состояние disabled для этого элемента.</p><p>Принимая во внимание описанное выше, посмотрим на код, отвечающий за момент когда анимация должна прекратиться:</p><pre class="brush: javascript noskimlinks noskimwords">for (let i = 0; i &lt; el.length; i++) {  el[i].addEventListener("click", function() {    // other code here        // code for stopping the animation    setTimeout(() =&gt; {      isElementInViewport(firstItem) ? setBtnState(arrowPrev) : setBtnState(arrowPrev, false);      isElementInViewport(lastItem) ? setBtnState(arrowNext) : setBtnState(arrowNext, false);    }, 1100);      // other code here  });}</pre><p>Также стоит обратить внимание на задержку в 1.1 секунды перед тем как код начнёт выполняться. Зачем это нужно?</p><p>Если вернуться и изучить наш CSS, вы увидите данное правило:</p><pre class="brush: css noskimlinks noskimwords">.timeline ol {  transition: all 1s;}</pre><p>Тем самым анимации временной шкалы требуется одна секунда до завершения. Как только она завершится, мы ждём 100 миллисекунд, после чего выполняем наши проверки.</p><p>Ниже пример временной шкалы с анимацией:</p>  <h2> <span class="sectionnum">7. Добавляем прокрутку</span></h2><p>До этого момента, временная шкала никоим образом не реагировала на touch события. Тем не менее стоит добавить подобный функционал. Для этого мы можем написать собственную JavaScript реализацию, или использовать готовые библиотеки (к примеру <span>Hammer.js</span>, <span>TouchSwipe.js</span>).</p><p>Для нашего демо, мы не будем усложнять и прибегнем к помощи Hammer.js, для начала, добавим эту библиотеку в наш пример на CodePen:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=519/uploads/users/780/posts/28378/image/Hammer.png" alt="Создание горизонтальной шкалы времени с помощью CSS и JavaScript..." title="Создание горизонтальной шкалы времени с помощью CSS и JavaScript..." width="50" height="50"></figure><p>Затем опишем соответствующую функцию:</p><pre class="brush: javascript noskimlinks noskimwords">function setSwipeFn(tl, prev, next) {  const hammer = new Hammer(tl);  hammer.on("swipeleft", () =&gt; next.click());  hammer.on("swiperight", () =&gt; prev.click());}</pre><p>Внутри функции выше, мы делаем следующее:</p><ul><li>Создаём экземпляр Hammer. </li> <li>Описываем обработчики событий <code class="inline">swipeleft</code> и <code class="inline">swiperight</code>. </li> <li>Когда мы прокручиваем временную шкалу влево, мы вызываем нажатие на кнопку next, таким образом временная шкала будет прокручивается с анимацией справа налево.</li> <li>Когда мы прокручиваем шкалу времени вправо, будет вызвано нажатие на кнопку previous, таким образом шкала прокручивается с анимацией слева направо.</li> </ul><p>Временная шкала с поддержкой прокрутки на мобильных и так далее:</p>  <h3>Добавляем навигацию клавиатурой</h3><p>Давайте и дальше улучшим впечатления пользователей, предоставив поддержку навигации клавиатурой. Наши задачи:</p><ul><li>Когда будут нажаты кнопки на клавиатуре - <b>стрелка влево</b> или <b>стрелка вправо</b>, документ должен прокручиваться до конечной позиции временной шкалы (в случае если другая секция страницы в данный момент видна). Тем самым мы будем знать, что вся шкала времени видна.</li> <li>Когда нажимаем <strong>кнопку со стрелкой влево</strong>, временная шкала должна анимироваться слева направо.</li> <li>Точно также когда <strong>кнопка со стрелкой вправо</strong> будет нажата, шкала времени прокручивается с анимацией справа налево.</li> </ul><p>Вот пример соответствующей функции:</p><pre class="brush: javascript noskimlinks noskimwords">function setKeyboardFn(prev, next) {  document.addEventListener("keydown", (e) =&gt; {    if ((e.which === 37) || (e.which === 39)) {      const timelineOfTop = timeline.offsetTop;      const y = window.pageYOffset;      if (timelineOfTop !== y) {        window.scrollTo(0, timelineOfTop);      }       if (e.which === 37) {        prev.click();      } else if (e.which === 39) {        next.click();      }    }  });}</pre><p>Шкала времени с поддержкой клавиатуры:</p>  <h2> <span class="sectionnum">8. Добавляем адаптивность</span></h2><p>Мы практически закончили! Последнее но не менее важное, давайте сделаем нашу шкалу времени адаптивной. Когда область видимости будет меньше 600px, будет отображаться следующая структура, расположенных друг под другом элементов:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/30/posts/28378/image/resp.png" alt="Создание горизонтальной шкалы времени с помощью CSS и JavaScript..." title="Создание горизонтальной шкалы времени с помощью CSS и JavaScript..." width="50" height="50"></figure><p>Так как мы руководствуемся подходом сначала персональные компьютеры, ниже можно увидеть пример CSS правил, которые следует переписать:</p><pre class="brush: css noskimlinks noskimwords">@media screen and (max-width: 599px) {  .timeline ol,  .timeline ol li {    width: auto;   }    .timeline ol {    padding: 0;    transform: none !important;  }    .timeline ol li {    display: block;    height: auto;    background: transparent;  }    .timeline ol li:first-child {    margin-top: 25px;  }    .timeline ol li:not(:first-child) {    margin-left: auto;  }    .timeline ol li div {    width: 94%;    height: auto !important;    margin: 0 auto 25px;  }    .timeline ol li:nth-child div {    position: static;  }    .timeline ol li:nth-child(odd) div {    transform: none;  }    .timeline ol li:nth-child(odd) div::before,  .timeline ol li:nth-child(even) div::before {    left: 50%;    top: 100%;    transform: translateX(-50%);    border: none;    border-left: 1px solid white;    height: 25px;  }    .timeline ol li:last-child,  .timeline ol li:nth-last-child(2) div::before,  .timeline ol li:not(:last-child)::after,  .timeline .arrows {    display: none;  }}</pre><p><strong>Обратите внимание</strong>: для двух правил, которые представлены выше, нам приходится использовать <code class="inline">!important</code> для изменения стилей присвоенных в разметке JavaScript"ом. </p><p>Конечное состояние нашей временной шкалы:</p>  <h2>Поддержка браузеров</h2><p>Данный пример отлично работает во всех современных браузерах. Также, как вы вероятно заметили, мы использовали <span>Babel</span> для компиляции нашего ES6 кода в ES5.<br></p><p>Единственная небольшая проблема, которую я обнаружил, отображение текста меняется, это связанно с тем, что шкала времени анимированна. Я пробовал различные подходы, которые мне довелось найти на Stack Overflow, но так и не нашёл простого решения, которое будет работать на всех операционных системах, во всех браузерах. Так что помните о присутствие небольших проблем с отображением шрифта, в момент когда включается анимация нашей шкалы времени.</p><h2>Заключение</h2><p>В этом довольно подробном туториале, мы начали с создания обычного упорядоченного списка и в итоге сделали адаптивную горизонтальную временную шкалу. Без сомнения, мы рассмотрели много интересных вещей, но я надеюсь, вам понравилось и вы довольны окончательным результатом, кроме этого получили ценные знания.</p><p>Если у вас есть вопросы или если какие-то моменты для вас непонятны, оставьте комментарий снизу!</p><h3>Дальнейшие шаги</h3><p>В случае если вы хотите и дальше улучшить уже созданную временную шкалу, вот несколько вещей, который можно сделать:</p><ul><li>Добавьте поддержку перетаскивания dragging. Вместо того, чтобы нажимать на кнопки временной шкалы для навигации, мы можем просто перетащить область временной шкалы. Для этого можно воспользоваться нативным <span>Drag and Drop Api</span> (которое к сожалению <span>не поддерживает мобильные устройства</span>, на момент написания данной статьи) или используйте стороннюю библиотеку на подобии <span>Draggable.js</span>.</li> <li>Улучшите поведение временной шкалы, когда мы меняем размер окна браузера. К примеру, когда мы меняем размер области видимости, кнопки должны быть соответствующим образом включаться и выключаться.</li> <li>Организуйте код другим образом, так чтобы им было удобнее управлять. Возможно, следует использовать распространённые <span>шаблоны проектирования JavaScript</span>.</li> </ul>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Web Design" href="https://norma-studio.github.io/article/220824001-sozdanie-gorizontalnoj-shkaly-vremeni-s-pomoschyu-css-i-javascript" class="tm-article-body__tags-item-link">Web Design</a></span><span class="tm-article-body__tags-item"><a aria-label="UI Design" href="https://norma-studio.github.io/article/220824001-sozdanie-gorizontalnoj-shkaly-vremeni-s-pomoschyu-css-i-javascript" class="tm-article-body__tags-item-link">UI Design</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
35510</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
727</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
