
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="При работе с опытом пользователя может быть рискованным полагаться на предположения, однако некоторые из них могут позволить вам предоставить вашим пользователям более индивидуализированный опыт взаимодействия. Мы рассмотрим, как улучшить опыт взаимодействия пользователя за счет добавления на ваши веб-сайты возможности определения его местоположени...">
<meta property="og:description" content="При работе с опытом пользователя может быть рискованным полагаться на предположения, однако некоторые из них могут позволить вам предоставить вашим пользователям более индивидуализированный опыт взаимодействия. Мы рассмотрим, как улучшить опыт взаимодействия пользователя за счет добавления на ваши веб-сайты возможности определения его местоположени...">
<meta name="twitter:description" content="При работе с опытом пользователя может быть рискованным полагаться на предположения, однако некоторые из них могут позволить вам предоставить вашим пользователям более индивидуализированный опыт взаимодействия. Мы рассмотрим, как улучшить опыт взаимодействия пользователя за счет добавления на ваши веб-сайты возможности определения его местоположени...">
<meta property="aiturec:description" content="При работе с опытом пользователя может быть рискованным полагаться на предположения, однако некоторые из них могут позволить вам предоставить вашим пользователям более индивидуализированный опыт взаимодействия. Мы рассмотрим, как улучшить опыт взаимодействия пользователя за счет добавления на ваши веб-сайты возможности определения его местоположени...">
<meta property="og:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=600/webdesign/authors/ian-yates/google-chrome-geolocation.png">
<meta property="aiturec:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=600/webdesign/authors/ian-yates/google-chrome-geolocation.png">
<meta name="twitter:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=600/webdesign/authors/ian-yates/google-chrome-geolocation.png">
<meta property="vk:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=600/webdesign/authors/ian-yates/google-chrome-geolocation.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=600/webdesign/authors/ian-yates/google-chrome-geolocation.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824496-dobavlenie-na-sajty-vozmozhnosti-opredeleniya-mestopolozheniya-polzovatelya-pri-pomoschi-html5-geolocation.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824496-dobavlenie-na-sajty-vozmozhnosti-opredeleniya-mestopolozheniya-polzovatelya-pri-pomoschi-html5-geolocation.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824496-dobavlenie-na-sajty-vozmozhnosti-opredeleniya-mestopolozheniya-polzovatelya-pri-pomoschi-html5-geolocation.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824496-dobavlenie-na-sajty-vozmozhnosti-opredeleniya-mestopolozheniya-polzovatelya-pri-pomoschi-html5-geolocation.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824496-dobavlenie-na-sajty-vozmozhnosti-opredeleniya-mestopolozheniya-polzovatelya-pri-pomoschi-html5-geolocation.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824496-dobavlenie-na-sajty-vozmozhnosti-opredeleniya-mestopolozheniya-polzovatelya-pri-pomoschi-html5-geolocation.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824496-dobavlenie-na-sajty-vozmozhnosti-opredeleniya-mestopolozheniya-polzovatelya-pri-pomoschi-html5-geolocation.html" title="Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation... | envatomarket.ru | norma-studio.github.io" title="Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/64533jghfdd.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824496-dobavlenie-na-sajty-vozmozhnosti-opredeleniya-mestopolozheniya-polzovatelya-pri-pomoschi-html5-geolocation.html" class="tm-user-info__username" title="
Д. Слесарев" aria-label="
Д. Слесарев">
Д. Слесарев</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Web Design" href="https://norma-studio.github.io/article/220824496-dobavlenie-na-sajty-vozmozhnosti-opredeleniya-mestopolozheniya-polzovatelya-pri-pomoschi-html5-geolocation" class="tm-article-snippet__hubs-item-link"><span>Web Design</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="UX" href="https://norma-studio.github.io/article/220824496-dobavlenie-na-sajty-vozmozhnosti-opredeleniya-mestopolozheniya-polzovatelya-pri-pomoschi-html5-geolocation" class="tm-article-snippet__hubs-item-link"><span>UX</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824496-dobavlenie-na-sajty-vozmozhnosti-opredeleniya-mestopolozheniya-polzovatelya-pri-pomoschi-html5-geolocation.html" />
    <link itemprop="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=600/webdesign/authors/ian-yates/google-chrome-geolocation.png">
    <meta itemprop="headline name" content="Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="При работе с опытом пользователя может быть рискованным полагаться на предположения, однако некоторые из них могут позволить вам предоставить вашим пользователям более индивидуализированный опыт взаимодействия. Мы рассмотрим, как улучшить опыт взаимодействия пользователя за счет добавления на ваши веб-сайты возможности определения его местоположени...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">При работе с опытом пользователя может быть рискованным полагаться на предположения, однако некоторые из них могут позволить вам предоставить вашим пользователям более индивидуализированный опыт взаимодействия. Мы рассмотрим, как улучшить опыт взаимодействия пользователя за счет добавления на ваши веб-сайты возможности определения его местоположени...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>При работе с опытом пользователя может быть рискованным полагаться на предположения, однако некоторые из них могут позволить вам предоставить вашим пользователям более индивидуализированный опыт взаимодействия. Мы рассмотрим, как улучшить опыт взаимодействия пользователя за счет добавления на ваши веб-сайты возможности определения его местоположения.</p><p><!--more--></p> <p>Опыт пользователя занял одно из главным мест в области веб-дизайна в последние десять лет. Нас как пользователей постоянно просят предоставить обновленную информацию о себе. Все: от Твиттера, спрашивающего «Что происходит?», до Фейсбук, интересующегося, что нам «нравится». Все это позволяет этим компаниям, помимо прочего, составить ваш довольно подробный и точный профиль, благодаря чему они могут предоставить вам более персонализированный опыт пользователя.</p> <p>Примерно в то же время, когда было объявлено о выходе HTML5, другой API был представлен нам W3C. Я вполне уверен, что вы, должно быть, слышали о нем – API Geolocation. За счет него на вашем сайте появляется возможность получать информацию о географическом местоположении при помощи JavaScript.</p> <hr><h2>Как работает геолокация?</h2> <p>Данные о местоположении могут быть получены при помощи множества различных источников. Обычно на веб-сайтах они определялись бы исходя из IP-адреса посетителя. Далее на его основании при помощи сервиса WHOIS (* сокр. от who is who; сетевая интернет-программа, которая позволяет абонентам обращаться с запросами к хранимой в DDN NIC базе данных о пользователях сети, доменах, доступных сетях и прочих объектах. Здесь и далее примеч. пер.) был бы получен адрес физического местоположения посетителя за счет информации whois (* адрес, электронный адрес, номер телефона, контакты и т.д.). Однако с недавних пор стал общепринятым более популярный и точный способ получения этой информации – за счет использования встроенного GPS-чипа (* GPS – спутниковая система позиционирования, позволяющая с помощью специального приёмника осуществить быстрое автоматическое определение координат в любой точке мира (точность колеблется от 1 до 100 м) и скорости перемещения различных объектов на поверхности Земли и в воздушном пространстве). Такие чипы имеются в большинстве смартфонов и планшетов и являются причиной роста популярности сервисов с возможностью определения местоположения пользователя, которыми мы могли бы воспользоваться. Вспомните Foursquare (* мобильное приложение, предоставляющее информацию о местах, расположенных недалеко от текущего местоположения пользователей и рекомендуемых им для посещения на основании ранее полученной о них информации) или любое другое приложение, при помощи которого вы могли бы отметиться в различных заведениях.</p> <hr><h2>Защита персональной информации пользователей сайта</h2> <p>В спецификации API Geolocation, выпущенной W3C, указано:</p> <blockquote><p>Пользовательский агенты не должны отсылать информацию о местоположении пользователя веб-сайтам без его согласия на это.</p></blockquote> <p>Перед тем как устройство или браузер смогут получить данные о местоположении посетителя, он должен для начала дать на это разрешение. Ниже показано, как это выглядит в Google Chrome:</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/webdesign/authors/ian-yates/google-chrome-geolocation.png" alt="Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation..." title="Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation..." width="50" height="50"></div> <p>Сейчас, как никогда, пользователи обращают внимание на то, какую информацию веб-сайты хранят о них, и ваши пользователи должны будут точно знать, для чего вы используете их данные. Проинформируйте их о том, для чего вам нужна эта информация, и подчеркните, как это поможет создать для них лучший опыт взаимодействия в сети.</p> <p>При использовании веб-сайта или приложения с возможностью отметить себя на карте согласно установившейся практике следует контролировать количество информации, которой вы делитесь с другими людьми. Большинство приложений и сервисов, предоставляющих возможность поделиться своим местоположением,  действительно предоставляют какую-то возможность контроля над персональной информацией, так что обязательно пользуйтесь этим и некогда не делитесь вашим домашний адресом.</p> <hr><h2>Варианты использования возможности определения географического местоположения Интернет-пользователя</h2> <p>После добавления на ваш сайт возможности определения местоположения вы получаете возможность предоставить более точный и подходящий контент вашим пользователям. Давайте посмотрим, где может пригодиться информация о географическом местоположении пользователя.</p> <h3>Геомаркетинг</h3> <p>Геомаркетинг – относительно новый термин, определение которого может быть сформулировано следующим образом:</p> <blockquote><p>Использование географических данных в различных аспектах маркетинга, включая продажу и распространение товаров.</p></blockquote> <p>Хотя это и новый термин, фактический принцип геомаркетинга уже был популярен какое-то время. На Фейсбуке этот подход уже используется в течение некоторого времени. Фейсбук собрал бы при помощи него данные, связанные с местоположением пользователя, а затем показал бы рекламу, соответствующую найденному географическому региону. Google и другие поисковые системы также воспользовались этим принципом и добавляют для пользователей в список результатов поиска результаты, связанных с местоположением.</p> <h3>Краудсорсинг</h3> <p>(* краудсорсинг – по аналогии с аутсорсингом (outsourcing) - привлечение работников-добровольцев, часто неквалифицированных Интернет-пользователей, например для наполнения сайта тем или иным контентом; расходы на содержание таких нештатных сотрудников минимальны). Не только маркетологи могут извлечь пользу из сервисов с возможностью определения местоположения, но и представители творческой деятельности также выгадали от их использования (вероятно, даже не подозревая об этом). Люди воспользовались ими для получения доступа к большой аудитории людей, все члены которой располагаются на той же самой территории и объединены одной целью «что-то сделать». Это могут быть как флеш-мобы (* краткая массовая акция, как правило, не имеющая определённой цели и организованная с помощью интернета или мобильной связи: люди собираются в условленном месте, выполняют определённые, заранее оговорённые, действия и быстро расходятся), так и крупномасштабные танцевальные номера, так и создание групп активистов для людей с общими интересами.</p> <p>Также такие сервисы были использованы в ситуациях вроде землетрясения на Гаити в 2010, когда большие группы обычных людей собрались вместе для оказания помощи пострадавшим только за счет возможностей социальных сетей и возможности определения местоположения.</p> <h3>Предложения</h3> <p>Недавно стало появляться повсюду большое количество «сайтов с предложениями». Одним из наиболее ярких их представителей является <span>Groupon</span> (* крупнейший в мире сайт коллективных покупок), запущенный в ноябре 2008 года. Groupon предлагает своим пользователям сервисы быстрой продажи (* от англ. deal-of-the-day ( daily deal, или flash sales, или one deal a day); ежедневная сделка) и каждый день на сайте предлагается заранее установленное количество скидок для каждого предложения. Необходимо, чтобы для каждого предложения набралось достаточно заинтересованных лиц; в этом случае они получают его, но только если достигается предопределенное количество людей.</p> <p>За счет этого подхода для продавцов снижается риск и появляется возможность продавать оптом, что делает его беспроигрышным вариантом. Секрет Groupon заключается в его тесной интеграции с местоположением пользователей. За счет предложения своим пользователям локальных предложений и сделок он стал одним из наиболее популярных купонных сайтов и его формат был повторен много раз.</p> <hr><h2>Практические примеры</h2> <p>Теперь, когда вы знаете немного больше об определении местоположения, давайте взглянем на некоторые примеры из реального мира разработки.</p> <h3><span>The Rocky Horror Show</span></h3> <p>Этот веб-сайт позволяет вам узнать время показа шоу в близко расположенных к вам местах. Просто перейдите на сайт и нажмите "Find my location".</p> <div class="tutorial_image"> <span><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/webdesign/authors/ian-yates/rocky-horrer-geolocation.png" alt="Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation..." title="Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation..." width="50" height="50"></span> </div> <h3><span>Проект Places Flickr</span></h3> <p>При помощи той же самой технологии Flickr показывает, что было закачено другими пользователями на веб-сайт из мест, расположенных рядом с вами.</p> <div class="tutorial_image"> <span><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/webdesign/authors/ian-yates/flickr-places-geolocation.png" alt="Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation..." title="Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation..." width="50" height="50"></span> </div> <h3><span>Mapumental</span></h3> <p>Mapumanetal появился примерно в 2006 году, когда Министерство транспорта Соединенного Королевства (Великобритании и Северной Ирландии) связалось со стартапом для разработки сервиса, использующего имеющуюся у него информацию насчет общественного транспорта. Они описали то, чем занимаются в Mapumental, как «Мы создаем карты, которые помогают людям принимать лучшие решения и быстрее». Этот сайт предлагает множество инструментов и сервисов, которые предоставляют способы визуализации данных о поездках в режиме реального времени.</p> <div class="tutorial_image"> <span><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/webdesign/authors/ian-yates/mapumental-geolocation.png" alt="Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation..." title="Добавление на сайты возможности определения местоположения пользователя при помощи HTML5 Geolocation..." width="50" height="50"></span> </div> <hr><h2>Реализация возможности определения местоположения пользователя</h2> <p>Если вы ранее не реализовывали возможность определения местоположения ни на одном веб-сайте или приложении, то хорошая новость заключается в том, что это чрезвычайно просто. В этом руководстве я покажу вам, как вы можете получить данные о местоположении пользователя на вашем веб-сайте или в вашем веб-приложении.</p> <h3>HTML-разметка</h3> <p>Я ее создал таким образом, чтобы вы могли довольно просто добавить ее на ваш веб-сайт. Цель состоит в том, чтобы у пользователя была возможность нажать кнопку, при помощи чего будут получены и отображены на сайте данные о его местоположении за счет небольшой помощи со стороны API Google Maps.</p> <p>Мы начинаем с элемента-обертки для выравнивания нашего дизайна по центру. Я задал для него в качестве значения ширины 960px, однако вы можете установить любой необходимый для вашего дизайна размер. В обертке я добавил div, который является местом, где будет располагаться карта сразу после создания. Я задал для него в качестве ID "map".</p> <p>В div с ID "map" я затем поместил элемент span, для которого добавил класс под названием "helper". Он будет выступать в роли небольшой подсказки, информирующей пользователей о том, что им необходимо выполнить. Может показаться, что это излишне, однако согласно установившейся практике всегда следует <span>по возможности помогать пользователям</span>.</p> <p>Далее идет изображение предварительного загрузчика, для которого я добавил ID "preloader". Если вы подыскиваете предварительные загрузчики, то вы можете посетить <span>preloaders.net</span>.</p> <p>Ниже показано, что у вас должно быть на данный момент:</p> <pre class="brush: html noskimlinks noskimwords">&lt;div class="wrapper"&gt;&lt;div id="map"&gt;  &lt;span class="helper"&gt;Click the button below to show your location on the map&lt;/span&gt;&lt;img id="preloader" src="images/257.gif"&gt;&lt;/div&gt;&lt;/div&gt;&lt;!--End Wrapper--&gt;</pre> <p>После div с ID  "map" я добавил простой якорный элемент, который будет выступать в роли кнопки, которую сможет нажать пользователь. В качестве класса для него задано (да, верно) "button".</p> <p>Сразу после нажатия кнопки нам не только нужно, чтобы была отображена карта, но также могло бы быть полезным отобразить местоположение пользователя, географическую долготу и широту. Для этого я создал div с ID "results", который в свою очередь содержит три строчных элемента, каждый из которых имеет соответствующий класс. На этом все с разметкой. Ниже показано, как должен выглядеть весь код разметки:</p> <pre class="brush: html noskimlinks noskimwords">&lt;div class="wrapper"&gt;&lt;div id="map"&gt;&lt;span class="helper"&gt;Click the button below to show your location on the map&lt;/span&gt;&lt;img id="preloader" src="images/257.gif"&gt;&lt;/div&gt;&lt;a class="button" href="" title=""&gt;Find My Location&lt;/a&gt;&lt;div id="results"&gt;&lt;span class="longitude"&gt;&lt;/span&gt;&lt;br&gt;&lt;span class="lattitude"&gt;&lt;/span&gt;&lt;br&gt;&lt;span class="location"&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;!--End Wrapper--&gt;</pre> <h3>Код CSS</h3> <p>В CSS-коде все довольно ясно. Он представлен полностью ниже:</p> <pre class="brush: css noskimlinks noskimwords">@charset "utf-8";html{background:#222222;font-family:helvetica, arial, sans-serif;}.wrapper{width:960px;margin: 0 auto;position:relative;}#map{position:relative;text-align: center;color: #363535;text-transform: uppercase;width: 425px;height: 350px;margin:0 auto;margin-top:20px;padding: 5px;border: 1px solid black;background: #474747;box-shadow: 0px 0px 3px 3px rgba(0, 0, 0, .3);}#map .helper{display: block;font-weight: bold;font-size: 12px;color: rgb(54, 54, 54);width: 180px;line-height: 135%;margin: 0 auto;margin-top: 140px;}#map #preloader{position: absolute;top: 141px;left: 190px;display:none;}#map iframe{border:1px solid black;}.button{padding:13px 40px;background-color:#00caa7;color:#00caa7;border-radius:3px;color:white;display:block;text-decoration:none;box-shadow: inset 0px 1px 0px rgba(255, 255, 255, 0.3);width:122px;margin:0 auto;margin-top:20px;}.button:hover{background-color:#00b495}#results{color: rgb(0, 180, 149);position: absolute;margin-top: 20px;text-align: center;line-height: 23px;width: 100%;}</pre> <p>Следует обратить внимание на то, что предварительный загрузчик – единственный элемент div, для которого установлено абсолютное позиционирование. Абсолютное позиционирование по отношению к div с ID "map". Для этого нужно всего лишь убедиться, что у div с ID "map" в качестве значения position задано relative. За счет этого будет возможным задать для предварительного загрузчика позиционирование относительно его родительского элемента, а не целого документа.</p> <h3>jQuery</h3> <p>Google предоставляет набор API для своих сервисов для работы с картами, пользоваться которыми можно бесплатно, пока не будут достигнуты определенные ограничения использования. После этого будет взиматься плата.</p> <p>К счастью, оба сервиса, которые мы будем использовать, полностью бесплатны; в действительности при использовании одного из приемов вообще не используется API, а используется обычный iframe (* является дочерним контекстом для браузера, за счет которого в текущую страницу встраивается другая страница-HTML) для встраивания карты, в котором мы изменим некоторые значения на те, что получаем из браузера пользователя.</p> <p>Для начала давайте определим в каких-то тегах <code>&lt;script&gt;</code> или в отдельном JavaScript-файле некоторые переменные для HTML-элементов, которые будем использовать в коде jQuery.</p> <pre class="brush: javascript noskimlinks noskimwords">var button = jQuery(".button");var preloader = jQuery("#preloader");var longitudediv = jQuery(".longitude");var lattitudediv = jQuery(".lattitude");var locationdiv = jQuery(".location");</pre> <p>После этого нам необходимо проверить, что браузер поддерживает API Geolocation. Мы можем это сделать при помощи следующего высказывания "if":</p> <pre class="brush: javascript noskimlinks noskimwords">if (navigator.geolocation) {  // Browser supports it, we"re good to go!  } else {  alert("Sorry your browser doesn\"t support the Geolocation API"); }</pre> <p>После того как мы убедились, что браузер поддерживает вышеуказанную технологию, мы затем будем отслеживать нажатие кнопки в части с комментарием "Browser supports it, we"re good to go".</p> <p>Обработчик события click для кнопки должен выглядеть следующим образом:</p> <pre class="brush: javascript noskimlinks noskimwords">button.click(function(e) {e.preventDefault();preloader.show();navigator.geolocation.getCurrentPosition(exportPosition, errorPosition);});</pre> <p>После нажатия кнопки при помощи обработчика будет показан предварительный загрузчик. Здесь важно обратить внимание на строки со второй по последнюю, содержащей "navigator". При помощи него браузеру по сути сообщается примерно следующее: «получи данные о положении пользователей, и если эта операция была выполнена успешно, то отправь данные о местоположении в функцию "exportPosition", в ином случае передай ошибку функции "errorPosition".</p> <p>Давайте перейдем к написанию кода и создадим эти функции: В функции для обработки ошибки все довольно ясно:</p> <pre class="brush: javascript noskimlinks noskimwords">function errorPosition() {  alert("Sorry couldn\"t find your location");     pretext.show();  }</pre> <p>Вы видите в функции выше, что при помощи нее будет выведено сообщение об ошибке, а затем снова показан предварительный загрузчик.</p> <p>В функции, запускаемой при успешном выполнении операции, ниже под названием "exportPosition" мы получаем данные о широте (* latitude) и долготе (* longitude), предоставленные API Geolocation, и устанавливаем их в качестве значений переменных под теми же именами.</p> <p>После их получения мы затем можем ими воспользоваться в коде с Google Maps, встроенном в iframe. Также мы можем использовать их в строчных элементах, при помощи которых пользователю отображаются данные о долготе и широте. Ниже показано, как все это выглядит:</p> <pre class="brush: javascript noskimlinks noskimwords">function exportPosition(position) {// Get the geolocation properties and set them as variableslatitude = position.coords.latitude;longitude  = position.coords.longitude;// Insert the google maps iframe and change the location using the variables returned from the APIjQuery("#map").html("&lt;iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.co.uk/?ie=UTF8&amp;amp;ll="+latitude+","+longitude+"&amp;amp;spn=0.332359,0.617294&amp;amp;t=m&amp;amp;z=11&amp;amp;output=embed"&gt;&lt;/iframe&gt;");longitudediv.html("Longitude: "+longitude);lattitudediv.html("Latitude: "+latitude);}</pre> <p>Важной частью здесь является URL iframe. В нем я добавил переменные "+latitude+" и "+longitude+". Поближе это выглядит следующим образом:</p> <pre class="brush: html noskimlinks noskimwords">&lt;iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.co.uk/?ie=UTF8&amp;amp;ll="+latitude+","+longitude+"&amp;amp;spn=0.332359,0.617294&amp;amp;t=m&amp;amp;z=11&amp;amp;output=embed"&gt;&lt;/iframe&gt;</pre> <p>За счет этого в div с ID "#map" будет добавлена карта, а также будут выведены пользователю данные о широте и долготе. Также имеется еще кое-что, что нам хотелось бы знать; это название местоположения пользователя. Для этого нам необходимо выполнить запрос API Google Maps при помощи AJAX. Мы добавляем следующую функцию AJAX в функции "exportPosition". Она выглядит следующим образом:</p> <pre class="brush: javascript noskimlinks noskimwords">//Make a call to the Google maps api to get the name of the locationjQuery.ajax({  url: "http://maps.googleapis.com/maps/api/geocode/json?latlng="+latitude+","+longitude+"&amp;sensor=true",  type: "POST",  dataType: "json",  success: function(data) {  //If Successful add the data to the "location" div locationdiv.html("Location: "+data.results[0].address_components[2].long_name);  },  error: function(xhr, textStatus, errorThrown) {   errorPosition();  }});</pre> <p>В функции, запускаемой при успешном выполнении операции, мы получаем название местоположения, данные о котором были возвращены AJA-вызовом, и добавляем его в span с классом ".location". Если по какой-то причине при этом вызове произошла ошибка, то будет вызвана функция "errorPosition" и выведено пользователю сообщение о том, что его местоположение не может быть определено.</p> <p>API Geolocation работает во всех современных браузерах. Однако в некоторых версиях Safari для получения данных о местоположении используется <code>CoreLocation</code>, и это означает, что вы должны быть подключены к сети при помощи WIFI. Если вы подключены через Ethernet или что-то вроде этого, то у вас могут возникнуть проблемы при сборе данных о местоположении.</p> <p>Также стоит отметить, что для успешной работы файлы этого руководства должны быть закачаны на рабочий веб-сервер и не будут работать на локальном сервере.</p> <hr><h2>Заключение</h2> <p>Надеюсь, что теперь вы лучше понимаете API Geolocation, как он работает и как вы можете воспользоваться им, не особо напрягаясь. При творческом и эффективном подходе к использованию возможности определения местоположения у вас теперь должна иметься возможность предоставить вашим пользователям лучший опыт взаимодействия.</p> <p>Воспользовались ли вы API Geolocation на каких-либо сайтах, над которыми работали, для создания лучшего опыта пользователя? Видели ли вы, как им творчески и умело воспользовались? Дайте нам знать об этом ниже в разделе для добавления комментариев.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Web Design" href="https://norma-studio.github.io/article/220824496-dobavlenie-na-sajty-vozmozhnosti-opredeleniya-mestopolozheniya-polzovatelya-pri-pomoschi-html5-geolocation" class="tm-article-body__tags-item-link">Web Design</a></span><span class="tm-article-body__tags-item"><a aria-label="UX" href="https://norma-studio.github.io/article/220824496-dobavlenie-na-sajty-vozmozhnosti-opredeleniya-mestopolozheniya-polzovatelya-pri-pomoschi-html5-geolocation" class="tm-article-body__tags-item-link">UX</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
33224</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
568</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
