
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Начало работы с Ionic Services: развертывание... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Начало работы с Ionic Services: развертывание... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Начало работы с Ionic Services: развертывание... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Начало работы с Ionic Services: развертывание... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Одна из сильных сторон-Ionic - это те сервисы, которые он предлагает в качестве фреймворка. Сюда входят службы аутентификации пользователей вашего приложения, push-уведомления и аналитика. В этой серии мы узнаем об этих сервисах, создавая приложения, которые их используют. ...">
<meta property="og:description" content="Одна из сильных сторон-Ionic - это те сервисы, которые он предлагает в качестве фреймворка. Сюда входят службы аутентификации пользователей вашего приложения, push-уведомления и аналитика. В этой серии мы узнаем об этих сервисах, создавая приложения, которые их используют. ...">
<meta name="twitter:description" content="Одна из сильных сторон-Ionic - это те сервисы, которые он предлагает в качестве фреймворка. Сюда входят службы аутентификации пользователей вашего приложения, push-уведомления и аналитика. В этой серии мы узнаем об этих сервисах, создавая приложения, которые их используют. ...">
<meta property="aiturec:description" content="Одна из сильных сторон-Ionic - это те сервисы, которые он предлагает в качестве фреймворка. Сюда входят службы аутентификации пользователей вашего приложения, push-уведомления и аналитика. В этой серии мы узнаем об этих сервисах, создавая приложения, которые их используют. ...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1125/posts/28827/image/add-metadata.png">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1125/posts/28827/image/add-metadata.png">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1125/posts/28827/image/add-metadata.png">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1125/posts/28827/image/add-metadata.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1125/posts/28827/image/add-metadata.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article/220824965-nachalo-raboty-s-ionic-services-razvertyvanie.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article/220824965-nachalo-raboty-s-ionic-services-razvertyvanie.html">
<link rel="canonical" href="https://norma-studio.github.io/article/220824965-nachalo-raboty-s-ionic-services-razvertyvanie.html">
<meta property="og:url" content="https://norma-studio.github.io/article/220824965-nachalo-raboty-s-ionic-services-razvertyvanie.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article/220824965-nachalo-raboty-s-ionic-services-razvertyvanie.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article/220824965-nachalo-raboty-s-ionic-services-razvertyvanie.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article/220824965-nachalo-raboty-s-ionic-services-razvertyvanie.html" title="Начало работы с Ionic Services: развертывание... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Начало работы с Ionic Services: развертывание... | envatomarket.ru | norma-studio.github.io" title="Начало работы с Ionic Services: развертывание... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/64535356345.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article/220824965-nachalo-raboty-s-ionic-services-razvertyvanie.html" class="tm-user-info__username" title="
В. Чендылов" aria-label="
В. Чендылов">
В. Чендылов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Начало работы с Ionic Services: развертывание...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824965-nachalo-raboty-s-ionic-services-razvertyvanie" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Ionic" href="https://norma-studio.github.io/article/220824965-nachalo-raboty-s-ionic-services-razvertyvanie" class="tm-article-snippet__hubs-item-link"><span>Ionic</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article/220824965-nachalo-raboty-s-ionic-services-razvertyvanie.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1125/posts/28827/image/add-metadata.png">
    <meta itemprop="headline name" content="Начало работы с Ionic Services: развертывание... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Одна из сильных сторон-Ionic - это те сервисы, которые он предлагает в качестве фреймворка. Сюда входят службы аутентификации пользователей вашего приложения, push-уведомления и аналитика. В этой серии мы узнаем об этих сервисах, создавая приложения, которые их используют. ...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Одна из сильных сторон-Ionic - это те сервисы, которые он предлагает в качестве фреймворка. Сюда входят службы аутентификации пользователей вашего приложения, push-уведомления и аналитика. В этой серии мы узнаем об этих сервисах, создавая приложения, которые их используют. ...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Одна из сильных сторон Ionic - это те сервисы, которые он предлагает в качестве фреймворка. Сюда входят службы аутентификации пользователей вашего приложения, push-уведомления и аналитика. В этой серии мы узнаем об этих сервисах, создавая приложения, которые их используют. </p><p>В данной статье мы рассмотрим Ionic Deploy. Эта служба позволяет публиковать изменения в вашем приложении Ionic без необходимости перекомпиляции и повторной отправки в хранилище приложений. Это очень полезно для быстрого нажатия исправлений ошибок, небольших обновлений и других косметических изменений в приложении. С помощью функции «Deploy Channels» вы также можете выполнять A/B тесты, выкатывая различные изменения кода в разные каналы развертывания.</p><p>Однако не все изменения, которые вы хотите представить в приложении, можно использовать с помощью Ionic Deploy. Только изменения в HTML, CSS, JavaScript и ресурсы под вашим <strong>www</strong>-каталогом могут быть перенесены таким образом. Бинарные изменения, такие как обновления версии платформы Cordova, плагины Cordova (либо обновление существующих, либо добавление новых), и ресурсы, такие как значок и заставка, не могут быть выложены с помощью Ionic Deploy. </p><h2>Как это работает</h2><p>В вашем приложении Ionic у вас может быть код, который будет проверять наличие доступных деплоев (обновлений). По умолчанию он проверяет развертывание в канале <code class="inline">production</code>. Но вы также можете указать другие каналы для получения обновлений. </p><p>Затем вы можете запушить свои изменения, используя команду <code class="inline">ionic upload</code>. Это выведет ваши изменения в Ionic Cloud. После того, как они будут загружены, вы можете выбрать, к какому каналу вы хотите подключиться, и развертывать ли его сейчас или позже. </p><p>Развертывание на канал, который отслеживает ваше приложение, приведет к запуску кода в вашем приложении. Затем этот код отвечает за загрузку обновления, извлечение его и перезагрузку приложения для применения изменений.</p><h2>Что вы будете создавать</h2><p>В этой статье вы будете использовать командную строку для пуша изменений и тестирования, если развертывание работает должным образом. Чтобы все было просто, изменения, которые мы собираемся представить, будут в основном для пользовательского интерфейса. Для каждого развертывания мы собираемся изменить номер версии, отображаемой для приложения. Мы также собираемся изменить изображение, отображаемое в приложении, чтобы показать, что активы также могут быть обновлены.</p><h2>Настройка</h2><p>Теперь, когда у вас есть представление о том, как работает Ionic Deploy и что вы будете строить, пришло время создать приложение, использующее Ionic Deploy. Начнем с загрузки нового приложения Ionic:</p><pre class="brush: bash noskimlinks noskimwords">ionic start --v2 deployApp tabs</pre><p>Приведенная выше команда создаст новое приложение, используя шаблон с табами. Перейдите в каталог <code class="inline">deployApp</code> после его установки:</p><pre class="brush: bash noskimlinks noskimwords">cd deployApp</pre><p>Затем вам нужно установить пакет <code class="inline">@ionic/cloud-angular</code>. Это библиотека JavaScript для службы Ionic Cloud. Она позволяет нам взаимодействовать с сервисом Ionic Deploy и другими Ionic-сервисами с помощью JavaScript кода.</p><pre class="brush: bash noskimlinks noskimwords">npm install @ionic/cloud-angular --save</pre><p>Как только это будет сделано, вы можете теперь инициализировать новое приложение Ionic на основе этого приложения. Прежде чем это сделать, убедитесь, что у вас уже есть<span> учетная запись Ionic</span>. Инструмент командной строки предложит вам войти в свою учетную запись Ionic, если вы этого еще не сделали. </p><pre class="brush: bash noskimlinks noskimwords">ionic io init</pre><p>Это создаст новое приложение под названием «deployApp» (или то, как вы назвали своим приложением при загрузке нового приложения Ionic) под <span>панелью инструментов Ionic apps</span>. </p><p>После того, как вы подтвердили, что приложение указано на вашей информационной панели Ionic, вернитесь к терминалу и установите плагин Deploy:</p><pre class="brush: bash noskimlinks noskimwords">cordova plugin add ionic-plugin-deploy --save</pre><p>Обратите внимание, что этот плагин выполняет всю тяжелую работу. Пакет <code class="inline">@ionic/cloud-angular</code> просто предоставляет API-интерфейсы, необходимые для легкой работы с Ionic-сервисами внутри приложения Ionic.</p><h2>Работа с развертываниями</h2><p>Теперь, когда вы выполнили всю необходимую настройку, пришло время добавить код для проверки и применения обновлений. Но прежде чем вы это сделаете, сначала откройте приложение через браузер:</p><pre class="brush: bash noskimlinks noskimwords">ionic serve</pre><p>Это позволяет проверить, работает ли код, который вы добавили. Таким образом, вы можете внести необходимые исправления, как только увидите ошибку.</p><p>Откройте файл <strong>src/app/app.module.ts</strong>. Под импортом <code class="inline">SplashScreen</code> импортируйте службы, необходимые для работы с Ionic Cloud:</p><pre class="brush: javascript noskimlinks noskimwords">import { SplashScreen } from "@ionic-native/splash-screen";// add the following:import { CloudSettings, CloudModule } from "@ionic/cloud-angular";</pre><p>Затем добавьте <code class="inline">app_id</code> вашего приложения Ionic. Вы можете найти его на панели инструментов Ionic, прямо под названием приложения.</p><pre class="brush: javascript noskimlinks noskimwords">const cloudSettings: CloudSettings = {  "core": {    "app_id": "YOUR IONIC APP ID"  }};</pre><p>После того вы его добавите, можно будет включить его в качестве одного из модулей приложения:</p><pre class="brush: javascript noskimlinks noskimwords">@NgModule({    declarations: [        //...    ],    imports: [        BrowserModule,        IonicModule.forRoot(MyApp),        CloudModule.forRoot(cloudSettings) // &lt;-- add this    ],});</pre><p>Затем откройте файл<strong> src/app/app.component.ts</strong>. Прямо под импортом <code class="inline">TabsPage</code> укажите следующее:</p><pre class="brush: javascript noskimlinks noskimwords">import { TabsPage } from "../pages/tabs/tabs";// add these:import { AlertController, LoadingController } from "ionic-angular";import { Deploy } from "@ionic/cloud-angular"; // import the Deploy service from @ionic/cloud-angular package</pre><p>В <code class="inline">constructor()</code> добавьте ранее импортированные службы:</p><pre class="brush: javascript noskimlinks noskimwords">constructor(platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen, public deploy: Deploy, private alertCtrl: AlertController, private loadingCtrl: LoadingController){    //...}</pre><h3>Настройка канала развертывания</h3><p>Поскольку мы все еще разрабатываем приложение, установите канал развертывания в <code class="inline">dev</code>:</p><pre class="brush: javascript noskimlinks noskimwords">this.deploy.channel = "dev";</pre><p>Позже, если вы хотите переключиться на канал production, вы cможете просто удалить эту строку, поскольку <code class="inline">production</code> является каналом развертывания по умолчанию. Если вы создали другой канал, вы также можете включить его имя здесь.</p><h3>Работа со снапшотами</h3><p>Вы можете получить доступ к массиву снапшотов, которые были ранее загружены. Переменная <code class="inline">snapshots</code> - это массив, содержащий идентификаторы каждого снимка.</p><pre class="brush: javascript noskimlinks noskimwords">this.deploy.getSnapshots().then((snapshots) =&gt; {    console.log("now getting snapshots...");    console.log(snapshots);});</pre><p>Мы не будем использовать эти снимки для данного приложения, но хорошо знать, что приложение хранит этот тип информации для последующего использования. В приведенном ниже примере мы рассмотрим список старых снимков и удалим их, чтобы освободить место на устройстве.</p><pre class="brush: javascript noskimlinks noskimwords">snapshots.forEach((snapshot_id) =&gt; {    this.deploy.getMetadata(snapshot_id).then((metadata) =&gt; {      // do something with metadata    });    // delete snapshot    this.deploy.deleteSnapshot(snapshot_id);});</pre><h3>Проверка обновлений</h3><p>Чтобы проверить наличие обновлений, используйте метод <code class="inline">check()</code>. Он возвращает логическое значение, указывающее, доступен ли новый снимок или нет. По умолчанию последнее развертывание создаст новый снимок. Таким образом, только последнее развертывание будет применено, если вы последовательно выкатываете два обновления.</p><pre class="brush: javascript noskimlinks noskimwords">this.deploy.check().then((snapshotAvailable: boolean) =&gt; {    // ...});</pre><p>Если снимок доступен для загрузки, вы можете получить дополнительную информацию о нем, вызвав метод <code class="inline">getMetaData()</code>. Эти метаданные можно добавить к развертыванию через панель инструментов Ionic. Здесь можно добавить пары ключ-значение, и каждая из них становится доступным как свойство для объекта <code class="inline">metadata</code>. Позже мы будем использовать метаданные для настройки сообщений, отображаемых в приложении, каждый раз, когда будет доступно новое обновление.</p><pre class="brush: javascript noskimlinks noskimwords">if (snapshotAvailable) {    // get metadata    this.deploy.getMetadata().then((metadata) =&gt; {        console.log("now getting metadata..");        console.log(metadata);    });}</pre><p>Затем покажите сообщение с подтверждением, чтобы позволить пользователю решить, хочет ли он загрузить обновление или нет:</p><pre class="brush: javascript noskimlinks noskimwords">let alert = this.alertCtrl.create({    title: "Version " + metadata.version + " is available",    message: "Do you want to download this update?",    buttons: [      {        text: "No",        role: "cancel",        handler: () =&gt; {          // do some stuff (e.g. add analytics code for counting how many users didn"t apply the update)        }      },      {        text: "Yes",        handler: () =&gt; {                      // proceed with downloading the update        }      }    ]});alert.present();</pre><p>Вы можете быть обеспокоены тем, что это будет раздражать пользователя, если они продолжат получать приглашение обновить свое приложение, после того как ответят «Нет». Чаще всего это не так, на самом деле это хорошо. Не должно быть никаких оснований для отказа пользователя от обновления. </p><h3>Загрузка и применение обновлений</h3><p>Когда пользователь соглашается, вы можете продолжить и загрузить обновление. Это может занять некоторое время в зависимости от вашего интернет-соединения и вашего устройства. Как только обновление будет загружено, покажите загрузчик, чтобы привлечь внимание пользователя во время его извлечения. Как только оно будет извлечено, перезагрузите приложение и скройте загрузчик.</p><pre class="brush: javascript noskimlinks noskimwords">this.deploy.download().then(() =&gt; {    // download is done    console.log("download completed!");    // show loader    let loading = this.loadingCtrl.create({      content: "Now reloading the app..."    });    loading.present();        // extract the update    this.deploy.extract().then(() =&gt; {      console.log("extract completed!");      this.deploy.load(); // reload the app to apply the changes      console.log("reload completed!");      loading.dismiss();    });});</pre><p>Взгляните на то, <span>как должен выглядеть обновленный файл <strong></strong></span><strong><span>app.components.ts</span></strong> после всех этих изменений.</p><h2>Установка приложения на устройство</h2><p>Теперь, когда добавлен код для проверки развертываний, мы можем создать приложение и установить его на устройстве. Остальные изменения, которые мы собираемся внедрить, будут в основном передаваться через службу Ionic Deploy. <br></p><p>Идем дальше и добавляем платформу android в ваш проект Ionic и создаем файл <strong>.apk</strong> со следующими командами:</p><pre class="brush: bash noskimlinks noskimwords">ionic platform add androidionic build android</pre><p>Будет создан файл <strong>android-debug.apk</strong> внутри папки <strong>platform/android/build/output/apk</strong>. Скопируйте его на свое устройство и установите.</p><h2>Пуш изменений</h2><p>Теперь пришло время внести некоторые изменения в приложение. Чтобы попробовать, просто внесите некоторые незначительные изменения в пользовательский интерфейс приложения. И теперь вы можете загрузить их:</p><pre class="brush: bash noskimlinks noskimwords">ionic upload</pre><h3>Добавление метаданных</h3><p>После завершения загрузки новая запись будет указана в вашем разделе <strong>Recent Activity</strong>. Нажмите ссылку <strong>Edit</strong> для этой записи. Это позволит вам добавить примечание, информацию о версии и метаданные к этой конкретной версии. Всегда полезно добавить заметку, чтобы вы знали, что такое конкретный релиз. Как только вы это сделаете, перейдите на вкладку «Метаданные» и добавьте следующее:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1125/posts/28827/image/add-metadata.png" alt="Начало работы с Ionic Services: развертывание..." title="Начало работы с Ionic Services: развертывание..." width="50" height="50"></figure><p>Затем нажмите кнопку <strong>Save</strong>, чтобы зафиксировать изменения. Наконец, нажмите кнопку <b>Deploy</b>, чтобы развернуть релиз. После того, как приложение подхватит изменения, метаданные, которые вы предоставили, также становятся доступными. </p><p>Вы можете видеть, что теперь он показывает номер версии выпуска:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1125/posts/28827/image/version-number.png" alt="Начало работы с Ionic Services: развертывание..." title="Начало работы с Ionic Services: развертывание..." width="50" height="50"></figure><h3>Версии<br></h3><p>Иногда вы будете вызывать обновление с помощью Ionic Deploy, но также перестраивайте и отправляйте эти пакеты в прилагаемое приложение в App Store. Однако обратите внимание, что Ionic не знает, что ваше приложение уже содержит это обновление, и ваше приложение предложит пользователю загрузить последние обновления при первом запуске вашего приложения.</p><p>Функция управления версиями может помочь предотвратить это. С помощью функции управления версиями вы можете указать версию приложения, которое может получать обновления:<br></p><ul><li> <strong>Minimum</strong>: развертывается, только если текущая версия приложения выше или равна этой версии.</li> <li> <strong>Maximum</strong>: развертывается, только если текущая версия приложения равна или ниже этой версии.</li> <li> <strong>Equivalent</strong>: не выполняет развертывание, если текущая версия приложения равна этой версии.</li> </ul><p>Вы можете добавить информацию о версии, щелкнув ссылку <strong>EDIT</strong> на определенной версии, а затем перейдите на вкладку <strong>VERSIONING</strong>. Оттуда вы можете указать версии (iOS или Android), на которые вы хотите настроить таргетинг.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1125/posts/28827/image/versioning.png" alt="Начало работы с Ionic Services: развертывание..." title="Начало работы с Ionic Services: развертывание..." width="50" height="50"></figure><p>Ionic затем сравнивает эту версию с той, которую вы указали в файле <strong>config.xml</strong>:</p><p>Если версия приложения находится между указанным <strong>minimum</strong> и <strong>maximum</strong>  выпуск будет поднят. И если версия приложения равна <strong>equivalent</strong> версии версии, релиз игнорируется. Поэтому для приведенного выше скриншота, если версия, указанная в файле <strong>config.xml</strong>, равна <code class="inline">0.0.1</code>, релиз приложением будет проигнорирован.</p><h2>Обновления ресурсов<br></h2><p>Следующее изменение, которое мы собираемся сделать, - показать изображение.</p><p>Первое, что вам нужно сделать, это найти изображение. Поместите его в папку <strong>src/assets/img</strong> и свяжите его с файлом <strong>src/pages/home/home.html</strong>:</p><pre class="brush: html noskimlinks noskimwords">&lt;ion-header&gt;  &lt;ion-navbar&gt;    &lt;ion-title&gt;Home&lt;/ion-title&gt;  &lt;/ion-navbar&gt;&lt;/ion-header&gt;&lt;ion-content padding&gt;  &lt;ion-card&gt;  &lt;img src="assets/img/lightning.png" /&gt;  &lt;ion-card-content&gt;    &lt;ion-card-title&gt;      Version 4    &lt;/ion-card-title&gt;  &lt;/ion-card-content&gt;&lt;/ion-card&gt;&lt;/ion-content&gt;</pre><p>Загрузите свои изменения в качестве новой версии для Ionic Deploy.</p><pre class="brush: bash noskimlinks noskimwords">ionic upload</pre><p>После загрузки перейдите на панель инструментов Ionic app и обновите выпуск запиской и соответствующей <code class="inline">version</code> в метаданных. Сохраните изменения и разверните их.</p><p>Открытие приложения теперь должно поднять этот новый выпуск, и его обновление будет применяться к пользовательскому интерфейсу.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1125/posts/28827/image/asset-changes.png" alt="Начало работы с Ionic Services: развертывание..." title="Начало работы с Ionic Services: развертывание..." width="50" height="50"></figure><h3>Каналы развертывания<br></h3><p>По умолчанию Ionic Deploy имеет три канала, которые можно развернуть: <code class="inline">dev</code>, <code class="inline">staging</code> и <code class="inline">production</code>. Но вы также можете создавать новые каналы для вашего приложения, чтобы слушать в них новые обновления. Вы можете сделать это, щелкнув значок шестеренки на вкладке <strong>Ionic Deploy</strong> на панели инструментов приложения:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1125/posts/28827/image/create-deploy-channel.png" alt="Начало работы с Ionic Services: развертывание..." title="Начало работы с Ionic Services: развертывание..." width="50" height="50"></figure><p>Это будет полезно для таких вещей, как A/B тестирование, поэтому вы можете выкатывать определенные изменения только определенным пользователям.</p><p>Не забудьте обновить свой код для использования этого конкретного канала развертывания:</p><pre class="brush: javascript noskimlinks noskimwords">this.deploy.channel = "me";</pre><h3>Откат</h3><p>Если вы выкатили что-то, чего вам не нужно было, вы можете использовать функцию отката. С помощью этой функции вы можете вернуть своим пользователям предыдущий выпуск. </p><p>Обратите внимание, что откатом вы не можете исправить поврежденный код! Например, если у вас есть синтаксическая ошибка в вашем JavaScript-коде, она сломает все приложение, а код для проверки обновлений не будет выполняться. Чтобы исправить такие ошибки, единственное, что вы можете сделать, это выпустить новую версию в магазине приложений. </p><p>Вы можете откатить, нажав на ссылку <strong>Roll back to here</strong> при любом развертывании. </p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/1125/posts/28827/image/rollback.png" alt="Начало работы с Ionic Services: развертывание..." title="Начало работы с Ionic Services: развертывание..." width="50" height="50"></figure><p>Затем вас попросят подтвердить, хотите ли вы вернуться или нет. После подтверждения релиз будет автоматически установлен в качестве текущей версии. Таким образом, код для сбора новых выпусков распознает его как последнюю версию и предложит пользователям обновить. У запасных релизов будет значок оранжевого обновления.</p><p>Вы также можете развернуть конкретную версию, щелкнув ссылку <strong>Deploy</strong> рядом с релизом, который вы хотите развернуть.</p><h2>Использование Git Hooks</h2><p>Вы можете автоматизировать развертывание обновлений приложений на Ionic Deploy с помощью <span>Git hooks</span>. Git hooks позволяют выполнять скрипты до или после определенных событий Git, таких как фиксация, пуш и получение. В этом случае мы будем использовать хук <code class="inline">pre-push</code>, чтобы загрузить наши изменения в Ionic Cloud прямо перед тем, как команда <code class="inline">git push</code> сделает свое дело. </p><p>Начните с переименования примера <code class="inline">pre-push</code> в настоящее имя, которе распознает Git:</p><pre class="brush: bash noskimlinks noskimwords">mv .git/hooks/pre-push.sample .git/hooks/pre-push</pre><p>Откройте файл в текстовом редакторе и замените его содержимое следующим:</p><pre class="brush: bash noskimlinks noskimwords">#!/bin/shecho now pushing changes to Ionic deployionic upload</pre><p>Теперь скопируйте свои изменения и запушьте их в удаленный репозиторий:</p><pre class="brush: bash noskimlinks noskimwords">git add .git commit -m "make some changes..."git push origin master</pre><p>Перед выполнением команды <code class="inline">git push</code> будет выполняться <code class="inline">ionic deploy</code>. </p><p>Также, если хотите, вы можете автоматически развернуть релиз:</p><pre class="brush: bash noskimlinks noskimwords">#!/bin/shecho now pushing changes to Ionic deployionic upload --deploy dev</pre><p>Однако это не будет работать для нашего примера, потому что вы не можете указывать метаданные!</p><p>Если вы хотите продолжить изучение процесса развертывания, я рекомендую вам просмотреть <span>HTTP API для Ionic Deploy</span>. Это позволяет программно развернуть изменения в приложении с сервера непрерывной интеграции. Оно также позволяет обновлять номера версий и метаданные в ваших деплоях. Все это можно сделать автоматически и без прикосновения к панели Ionic app.<br></p><h2>Вывод</h2><p>Вот оно! В этом уроке вы узнали об Ionic Deploy и о том, как вы можете использовать его для push-обновлений вашего приложения Ionic. Это мощная функция, которая позволяет вам создавать надежную систему управления версиями и обновлениями в вашем приложении.</p><p>Оставайтесь с нами и получайте большег контента на тему Ionic и облачных сервисов, таких как Ionic Deploy! Если вы хотите получить полное представление о начале разработки приложения Ionic 2, ознакомьтесь с нашим курсом здесь, на Envato Tuts +.</p><ul class="roundup-block__contents posts--half-width roundup-block--list"><li class="roundup-block__content"><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/71/courses/888/preview_image/ionic-3.png" alt="Начало работы с Ionic Services: развертывание..." title="Начало работы с Ionic Services: развертывание..." width="50" height="50"><div class="roundup-block__primary-category topic-code">Ionic</div> <div class="roundup-block__content-title">Начало работы с Ionic 2</div> <div class="roundup-block__author">Реджинальд Доусон</div></span></li></ul><p>И проверьте некоторые из наших других статей о разработке Ionic и кросс-платформенных мобильных приложений.</p><ul class="roundup-block__contents posts--half-width roundup-block--list"><li class="roundup-block__content"><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/769/posts/28471/preview_image/ionic.png" alt="Начало работы с Ionic Services: развертывание..." title="Начало работы с Ionic Services: развертывание..." width="50" height="50"><div class="roundup-block__primary-category topic-code">Ionic 2</div> <div class="roundup-block__content-title">Код вашего первого приложения Ionic 2: приложение для обмена фотографиями</div> <div class="roundup-block__author">Вернер-Бел-Анчета</div></span></li> <li class="roundup-block__content"><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1757/posts/28782/preview_image/0-Cover.png" alt="Начало работы с Ionic Services: развертывание..." title="Начало работы с Ionic Services: развертывание..." width="50" height="50"><div class="roundup-block__primary-category topic-code">Мобильная разработка</div> <div class="roundup-block__content-title">Представляем Vue и Weex для нативных мобильных приложений</div> <div class="roundup-block__author">Лоуренс Тертон</div></span></li> <li class="roundup-block__content"><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/362/posts/28563/preview_image/prev.jpg" alt="Начало работы с Ionic Services: развертывание..." title="Начало работы с Ionic Services: развертывание..." width="50" height="50"><div class="roundup-block__primary-category topic-code">Шаблоны приложений</div> <div class="roundup-block__content-title">15 лучших шаблонов приложений для Ionic</div> <div class="roundup-block__author">Ашраф Хатибелагал</div></span></li> </ul>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article/220824965-nachalo-raboty-s-ionic-services-razvertyvanie" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Ionic" href="https://norma-studio.github.io/article/220824965-nachalo-raboty-s-ionic-services-razvertyvanie" class="tm-article-body__tags-item-link">Ionic</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
41369</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
478</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
