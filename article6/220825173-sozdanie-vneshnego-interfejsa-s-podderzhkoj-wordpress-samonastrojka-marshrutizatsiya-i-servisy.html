
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Создание внешнего интерфейса с поддержкой WordPress: самонастройка, маршрутизация и сервисы... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Создание внешнего интерфейса с поддержкой WordPress: самонастройка, маршрутизация и сервисы... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Создание внешнего интерфейса с поддержкой WordPress: самонастройка, маршрутизация и сервисы... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Создание внешнего интерфейса с поддержкой WordPress: самонастройка, маршрутизация и сервисы... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="В предыдущей части этой серии о построении интерфейса с WP-API и AngularJS мы проанализировали требования к проекту, оценили каркасы, загрузили и скомпилировали пакет HTML, а также создали плагин для WordPress, который изменяет ответы для-Posts-и-Users....">
<meta property="og:description" content="В предыдущей части этой серии о построении интерфейса с WP-API и AngularJS мы проанализировали требования к проекту, оценили каркасы, загрузили и скомпилировали пакет HTML, а также создали плагин для WordPress, который изменяет ответы для-Posts-и-Users....">
<meta name="twitter:description" content="В предыдущей части этой серии о построении интерфейса с WP-API и AngularJS мы проанализировали требования к проекту, оценили каркасы, загрузили и скомпилировали пакет HTML, а также создали плагин для WordPress, который изменяет ответы для-Posts-и-Users....">
<meta property="aiturec:description" content="В предыдущей части этой серии о построении интерфейса с WP-API и AngularJS мы проанализировали требования к проекту, оценили каркасы, загрузили и скомпилировали пакет HTML, а также создали плагин для WordPress, который изменяет ответы для-Posts-и-Users....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/167/profiles/2548/profileImage/dp.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/167/profiles/2548/profileImage/dp.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/167/profiles/2548/profileImage/dp.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/167/profiles/2548/profileImage/dp.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/167/profiles/2548/profileImage/dp.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825173-sozdanie-vneshnego-interfejsa-s-podderzhkoj-wordpress-samonastrojka-marshrutizatsiya-i-servisy.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825173-sozdanie-vneshnego-interfejsa-s-podderzhkoj-wordpress-samonastrojka-marshrutizatsiya-i-servisy.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825173-sozdanie-vneshnego-interfejsa-s-podderzhkoj-wordpress-samonastrojka-marshrutizatsiya-i-servisy.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825173-sozdanie-vneshnego-interfejsa-s-podderzhkoj-wordpress-samonastrojka-marshrutizatsiya-i-servisy.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825173-sozdanie-vneshnego-interfejsa-s-podderzhkoj-wordpress-samonastrojka-marshrutizatsiya-i-servisy.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825173-sozdanie-vneshnego-interfejsa-s-podderzhkoj-wordpress-samonastrojka-marshrutizatsiya-i-servisy.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825173-sozdanie-vneshnego-interfejsa-s-podderzhkoj-wordpress-samonastrojka-marshrutizatsiya-i-servisy.html" title="Создание внешнего интерфейса с поддержкой WordPress: самонастройка, маршрутизация и сервисы... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Создание внешнего интерфейса с поддержкой WordPress: самонастройка, маршрутизация и сервисы... | envatomarket.ru | norma-studio.github.io" title="Создание внешнего интерфейса с поддержкой WordPress: самонастройка, маршрутизация и сервисы... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/64533ghhjgjj.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825173-sozdanie-vneshnego-interfejsa-s-podderzhkoj-wordpress-samonastrojka-marshrutizatsiya-i-servisy.html" class="tm-user-info__username" title="
С. Парфенов" aria-label="
С. Парфенов">
С. Парфенов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Создание внешнего интерфейса с поддержкой WordPress: самонастройка, маршрутизация и сервисы...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825173-sozdanie-vneshnego-interfejsa-s-podderzhkoj-wordpress-samonastrojka-marshrutizatsiya-i-servisy" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="WordPress" href="https://norma-studio.github.io/article5/220825173-sozdanie-vneshnego-interfejsa-s-podderzhkoj-wordpress-samonastrojka-marshrutizatsiya-i-servisy" class="tm-article-snippet__hubs-item-link"><span>WordPress</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825173-sozdanie-vneshnego-interfejsa-s-podderzhkoj-wordpress-samonastrojka-marshrutizatsiya-i-servisy.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/167/profiles/2548/profileImage/dp.jpg">
    <meta itemprop="headline name" content="Создание внешнего интерфейса с поддержкой WordPress: самонастройка, маршрутизация и сервисы... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="В предыдущей части этой серии о построении интерфейса с WP-API и AngularJS мы проанализировали требования к проекту, оценили каркасы, загрузили и скомпилировали пакет HTML, а также создали плагин для WordPress, который изменяет ответы для-Posts-и-Users....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">В предыдущей части этой серии о построении интерфейса с WP-API и AngularJS мы проанализировали требования к проекту, оценили каркасы, загрузили и скомпилировали пакет HTML, а также создали плагин для WordPress, который изменяет ответы для-Posts-и-Users....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>В предыдущей части этой серии о построении интерфейса с WP-API и AngularJS мы проанализировали требования к проекту, оценили каркасы, загрузили и скомпилировали пакет HTML, а также создали плагин для WordPress, который изменяет ответы для <code class="inline">Posts</code> и <code class="inline">Users</code>.<br></p><p>Заложив прочный фундамент для нашего проекта, мы теперь готовы приступить к работе над интерфейсом и настроить базовые конфигурации для нашего приложения с AngularJS.<br></p><p>В текущей части серии мы будем:<br></p><ul><li>загружать приложение AngularJs</li> <li>Анализировать шаблоны для разных представлений в пакете HTML<br></li> <li>Настроим маршрутизацию для нашего приложения<br></li> <li>Настром службы для различных ресурсов в WP REST API<br></li> </ul><p>Давайте начнем с инициализации приложения AngularJS и разделения шаблонов для просмотров, включая просмотр списка постов, отдельный пост и категории.<br></p><h2>Запуск приложения AngularJS<br></h2><p>Первое, что нам нужно сделать, чтобы создать приложение WP REST API, - это загрузить его с помощью директивы AngularJS <span><code class="inline">ng-app</code></span>. Директива <code class="inline">ng-app</code> используется для автоматической загрузки приложения, и она принимает имя модуля AngularJS в качестве необязательного значения.<br></p><p>Но прежде чем начинать изменять какие-либо файлы, убедитесь, что вы запустили команду <code class="inline">gulp</code>, перейдя в каталог <strong>quiescent-rest-api-html</strong>. Это гарантирует, что любые изменения, внесенные вами в каталоге <strong>/src</strong>, немедленно компилируются в каталог<strong> /dist</strong> командой <code class="inline">gulp watch</code>. Кроме того, я бы посоветовал вам перейти в каталог <strong>/dist</strong> в другом окне консоли и запустить команду <code class="inline">http-server</code>, которая будет запускать HTTP-сервер Node.js для этого каталога, и вы можете предварительно просмотреть свой сайт в браузере. Просто введите веб-адрес <code class="inline">127.0.0.1:8080</code>.<br></p><p>Директива <code class="inline">ng-app</code> обычно помещается в корневой элемент, т.н. тег <code class="inline">&lt;html&gt;</code>. Следовательно, мы изменим тэг <code class="inline">&lt;html&gt;</code> в файле <strong>src/index.html</strong> на следующее:</p><pre class="brush: html noskimlinks noskimwords">&lt;html class="no-js" lang="en" ng-app="quiescentApp"&gt;</pre><p>Здесь <code class="inline">quiescentApp</code> - это имя нашего основного модуля AngularJS, который мы инициализируем затем в нашем файле <strong>src/js/app.js</strong>.<br></p><p>Файл <strong>src/js/app.js</strong> в настоящее время содержит только одну строку кода для инициализации функций JavaScript, предоставляемых Zurb Foundation. Мы можем изменить этот файл, включив следующий код для основного модуля нашего приложения AngularJS:</p><pre class="brush: javascript noskimlinks noskimwords">(function() {    /**     * Module definition for Quiescent App     */    var quiescentApp = angular.module( "quiescentApp", ["ngSanitize", "ngRoute", "ngResource"] );})();</pre><p>Первым делом в приведенном выше коде появляется анонимная функция с самовывозом, которая представлена следующим:</p><pre class="brush: javascript noskimlinks noskimwords">(function() {    })();</pre><p>Как следует из названия, вышеупомянутая функция является <em>анонимной</em>, то есть у нее нет имени, и она вызывает сама себя, немедленно выполняя весь код, который находится внутри ее тела. Это хороший способ ограничить объем наших переменных и функций, чтобы они не были доступны во всем мире для любых манипуляций.<br></p><p>Внутри анонимной функции мы инициализируем наш модуль AngularJS, используя метод <span><code class="inline">angular.module()</code></span>. Функция <code class="inline">angular.module()</code> принимает имя модуля в качестве первого аргумента и массив зависимостей в качестве второго аргумента.</p><p>Зависимости, которые мы передали во втором аргументе в виде массива, - <code class="inline">ngRoute</code>, <code class="inline">ngSanitize</code> и <code class="inline">ngResource</code>. Вот что делает каждый из них:<br></p><ul><li> <span><code class="inline">ngRoute</code></span>: Этот модуль предоставляет услуги маршрутизации и глубокой привязки для нашего приложения. Он находится в файле <strong>angular-route.js</strong> в пакете AngularJS, загруженном с официального сайта.</li> <li> <span><code class="inline">ngResource</code></span>: этот модуль предоставляет поддержку для взаимодействия с сервисами RESTful. Поскольку мы планируем использовать WP REST API, то это будет самый важный модуль в нашем приложении, поскольку мы будем использовать его для взаимодействия с ресурсами, такими как посты, категории и пользователей.<br></li> <li> <span><code class="inline">ngSanitize</code></span>: Этот модуль обеспечивает функциональность для очищения HTML. Нам понадобится этот модуль при выводе HTML на странице. Примеры включают заголовок сообщения, содержание сообщения и выдержку.<br></li> </ul><p>Обратите внимание, что перед вводом этих модулей в качестве зависимостей в нашем основном модуле их соответствующие файлы должны быть включены в HTML-документ. Но вам не нужно беспокоиться об этом, так как мы уже настроили в нашем файле <strong>gulp.js</strong>.</p><p>После помещения вышеуказанного кода в ваш файл <strong>app.js</strong>, перейдите на адрес, предоставленный HTTP-сервером Node.js. Также откройте инструменты разработчика в своем браузере, и если вы не увидите ошибок JavaScript, мы будем рады!<br></p><p>Теперь, когда мы успешно инициализировали наше приложение AngularJS, мы можем поработать над частью шаблонов и создать шаблоны для разных представлений.<br></p><h2>Разделение шаблонов для разных представлений<br></h2><p>Поскольку мы создаем одностраничное приложение (SPA), нам нужно настроить шаблоны для разных представлений, которые динамически загружаются на страницу, когда кто-то нажимает на ссылку. <br></p><p>В настоящее время у нас есть несколько страниц в нашем HTML: листинг постов, отдельный пост, автор и категория. HTML был структурирован таким образом, что заголовок, нижний колонтитул и основной контейнер одинаковы для всех этих страниц. Основной контейнер в нашем случае - <code class="inline">div.columns.medium-8</code> внутри тега <code class="inline">div.main.row</code>. AngularJS позволяет нам конфигурировать различные шаблоны для разных маршрутов в приложении. Но прежде чем мы настроим маршрутизацию, нам нужно проанализировать эти шаблоны из существующих HTML-файлов.<br></p><p>Поэтому вместо использования четырех разных страниц для индексной страницы, отдельной публикации, автора и категории мы можем использовать одну основную HTML-страницу и загружать шаблоны для разных представлений в зависимости от текущего маршрута.<br></p><p>Начнем с разбора шаблона для просмотра списка публикаций. Откройте файл <strong>/src/index.html</strong> в редакторе кода по вашему выбору и вырежьте весь код, который находится внутри контейнера <code class="inline">div.columns.medium-8</code>. Создайте новый файл с названием <strong>listing.html</strong> внутри каталога <strong>/src/views</strong> и вставьте код в этот файл.<br></p><p>Этот шаблон будет служить представлением для нашей страницы листинга. Мы можем повторить процедуру для каждого из файлов <strong>post-single.html</strong>, <strong>author.html</strong> и <strong>category.html</strong>. Откройте каждый из этих файлов в редакторе кода и вырежьте содержимое контейнера <code class="inline">div.columns.medium-8</code> и вставьте их в новые файлы, созданные в каталоге <strong>/src/views</strong>. Имена файлов шаблонов должны быть <strong>single.html</strong>, <strong>author.html</strong> и <strong>category.html</strong> соответственно.<br></p><p>Создайте новый файл в каталоге <strong>/src/views</strong> для страницы 404 и назовите его <strong>404.html</strong>. Он не должен содержать ничего особенного, кроме следующей строки кода:</p><pre class="brush: html noskimlinks noskimwords">&lt;h2&gt;404 - Nothing Found&lt;/h2&gt;</pre><p>Теперь мы можем безопасно удалить файлы<strong> /src/post-single.html</strong>, <strong>/src/author.html</strong> и <strong>/src/category.html</strong>. Мы сохраним файл <strong>/src/index.html</strong>, который будет служить основной точкой входа для нашего приложения.<br></p><p>Последнее, что нам нужно сделать, - это указать AngularJS, где загрузить эти шаблоны. И мы можем это сделать, добавив директиву <span><code class="inline">ng-view</code></span> в контейнер <code class="inline">div.columns.medium-8</code> внутри файла <strong>/src/index.html</strong>:</p><pre class="brush: html noskimlinks noskimwords">&lt;div class="columns medium-8" ng-view&gt;    &lt;/div&gt;</pre><p>Директива <code class="inline">ng-view</code> сообщает AngularJS, куда загружать содержимое файлов шаблонов.<br></p><p>Мы также можем добавить атрибут <span><code class="inline">auto-scroll = "true"</code></span> в контейнере <code class="inline">div.columns.medium-8</code>, чтобы при переходе между представлениями браузер отображал точку, из которой мы вышли.</p><p>Вернитесь в свой браузер и обновите его, и вы увидите страницу, содержащую только заголовок и нижний колонтитул. Это связано с тем, что мы еще не настроили маршрутизацию. И это то, что мы делаем дальше.<br></p><h2>Настройка маршрутизации для нашего приложения<br></h2><p>Создав шаблоны для разных представлений в нашем приложении, пришло время рассказать AngularJS, как и когда загружать эти шаблоны. С этой целью AngularJS предоставляет компонент provider, называемый <span><code class="inline">$routeProvider</code></span>. <code class="inline">$routeProvider</code> предоставляет нам метод с названием <code class="inline">.when()</code>, который можно использовать для настройки маршрутов вместе с их шаблонами и некоторыми другими свойствами.<br></p><p>Рассмотрим следующий код:</p><pre class="brush: javascript noskimlinks noskimwords">/** * Configuring routes for our app */quiescentApp.config( ["$routeProvider", function( $route ) {    // post listing route    $route.when( "/posts", {        templateUrl: "views/listing.html",    } )        // single post route    .when( "/posts/:slug", {        templateUrl: "views/single.html",    } )        // author profile route    .when( "/users/:id", {        templateUrl: "views/author.html",    } )        // category profile route    .when( "/categories/:id", {        templateUrl: "views/category.html",    } )        // 404 route    .otherwise( {        templateUrl: "views/404.html"    } );}] );</pre><p>Здесь мы настраиваем наше приложение, используя метод <code class="inline">.config()</code>, вставив в него <code class="inline">$routeProvider</code>. Функция принимает аргумент <code class="inline">$route</code> для<code class="inline"> $routeProvider</code>, а затем мы используем его для настройки различных маршрутов.<br></p><p>Метод <code class="inline">.when()</code> настраивает новый маршрут и принимает два параметра для <code class="inline">$path</code> и <code class="inline">$route</code> соответственно. Аргумент <code class="inline">$path</code> представляет собой строку, представляющую путь, по которому мы настраиваем маршрут. Аргумент <code class="inline">$route</code> - это объект, содержащий информацию, такую как URL-адрес шаблона, который будет использоваться, контроллер, идентификатор контроллера и т.д.</p><p>В приведенном выше коде мы настроили четыре маршрута для просмотра списка сообщений, отдельного сообщения, авторов и категорий соответственно. Мы только что назначили им соответствующие URL-адреса шаблонов, и мы сконфигурируем их контроллеры позже в этой серии, когда мы их построим. Таким образом, с этого момента мы будем постепенно развивать этот код.<br></p><p>В приведенном выше коде обратите внимание на именованные группы, за которыми следует двоеточие: для одиночной поста, автора и категории. Они хранятся в службе <code class="inline">$routeParams</code> и будут доступны для любой директивы или контроллера, который хочет их использовать. Мы рассмотрим это более подробно, но на данный момент просто думаем о них как о местах, где можно найти столбец сообщения, идентификатор пользователя или идентификатор категории, предоставленный пользователем в URL-адресе.<br></p><p>Помимо четырех маршрутов, мы настроили шаблон 404 с помощью метода <code class="inline">.otherwise()</code>. Этот метод сообщает AngularJS перенаправить пользователя к определенному шаблону, если ни один из настроенных маршрутов не был сопоставлен.<br></p><p>Подробнее об сервисе маршрутизации AngularJS, а также о ее различных методах и аргументах можно узнать в <span>официальной документации</span>.<br></p><p>Теперь вы можете открыть любой из следующих четырех URL-адресов в вашем браузере и увидеть соответствующий загружаемый шаблон:</p><pre class="brush: plain noskimlinks noskimwords">https://127.0.0.1:8080/#/postshttp://127.0.0.1:8080/#/posts/10http://127.0.0.1:8080/#/categories/10http://127.0.0.1:8080/#/users/10</pre><p>Адрес <span><code class="inline">http://127.0.0.1:8080</code></span> может отличаться в вашем случае. id/slug, который мы здесь предоставляем (в данном случае 10), в данном случае не имеет значения.<br></p><p>Последнее, что нам нужно сделать, - это создать службы для таких ресурсов, как посты, пользователи и категории.</p><h2>Создание служб RESTful для ресурсов<br></h2><p>AngularJS предоставляет нам модуль <code class="inline">ngResource</code>, который позволяет нам строить RESTful-сервис вокруг определенной конечной точки для ресурса. Но прежде чем мы начнем писать любой код для создания сервисов, давайте создадим некоторые конфигурационные переменные, которые хранят некоторую базовую информацию.</p><pre class="brush: javascript noskimlinks noskimwords">/** * Configuration variables for the app */var     serverPath = "http://localhost/wordpress/",    apiPath = "wp-json/wp/v2/",    apiUrl = serverPath + apiPath;</pre><p>В вашем случае путь к серверу может отличаться, и я рекомендую вам изменить его соответствующим образом. Объявление этих переменных позволяет нам сконфигурировать путь к серверу только в одном месте, а не отдельно для каждой службы. Вышеприведённый код должен быть помещен внутри анонимной функции, и я разместил его сразу после объявления модуля <code class="inline">quiescentApp</code>.<br></p><p>Создание службы вокруг конечной точки в AngularJS так же просто, как и следующий код:</p><pre class="brush: javascript noskimlinks noskimwords">quiescentApp.factory( "Posts", ["$resource", function( $resource ) {    return $resource( "http://localhost/wordpress/wp-json/wp/v2/posts" );}] );</pre><p>Вышеприведенный код создает службу для ресурса <code class="inline">Posts</code> в WP REST API. Здесь <code class="inline">quiescentApp</code> - это имя нашего основного модуля, который мы определили в самом начале.<br></p><p>Метод <span><code class="inline">.factory()</code></span> принимает имя в качестве первого аргумента, а второй - массив, содержащий список зависимостей и функцию. Функция принимает аргументы, переданные как зависимости. Поскольку мы предоставили <span><code class="inline">$resource</code></span> как зависимость для нашего сервиса, он передается функции как аргумент, а затем мы используем ее для создания службы для ресурса <code class="inline">Posts</code>.</p><p>Мы уже объявили переменную для пути API, поэтому мы можем заменить путь следующим:</p><pre class="brush: javascript noskimlinks noskimwords">quiescentApp.factory( "Posts", ["$resource", function( $resource ) {    return $resource( apiUrl + "posts" );}] );</pre><p>Теперь, когда мы создали службу для ресурса <code class="inline">Posts</code>, мы можем внедрить эту службу как зависимость в наши директивы и контроллеры и начать использовать ее методы, такие как <code class="inline">Posts.query()</code>, <code class="inline">Posts.get()</code> и т. Д. Мы узнаем больше об этих методах и то, что они делают в следующих частях серии, но если вам интересно, вы всегда можете проверить <span>официальную документацию</span>.<br></p><p>Для создания сервиса для ресурса <code class="inline">Posts</code> мы предоставили маршрут<code class="inline"> /wp/v2/posts</code>. Этот маршрут указывает на коллекцию сообщений, а также может использоваться для создания одного сообщения. Но в нашем приложении нам также нужно получить одну запись, основанную на ее slug. Чтобы учесть эту возможность, мы можем изменить код следующим образом:</p><pre class="brush: javascript noskimlinks noskimwords">quiescentApp.factory( "Posts", ["$resource", function( $resource ) {    return $resource( apiUrl + "posts?slug=:slug" );}] );</pre><p>Это называется параметризованным шаблоном URL, а параметры суффикс с двоеточием<code class="inline">:</code>.<br></p><p>Эта модификация позволяет нам извлекать коллекцию сообщений, используя маршрут <code class="inline">/wp/v2/posts</code>, а также извлекать отдельную запись посредством ее slug с помощью аргумента <code class="inline">/posts?slug=&lt;slug&gt;</code>.</p><p>Помимо сообщений, мы будем получать категории и пользователей по их идентификаторам. Поэтому следующий код создает службы для ресурсов <code class="inline">Users</code> и <code class="inline">Categories</code>:</p><pre class="brush: javascript noskimlinks noskimwords">/** * Creating a service for Users */quiescentApp.factory( "Users", ["$resource", function( $resource ) {    return $resource( apiUrl + "users/:id" );}] );/** * Creating a service for Categories */quiescentApp.factory( "Categories", ["$resource", function( $resource ) {    return $resource( apiUrl + "categories/:id" );}] );</pre><p>Следовательно, код для всех трех служб следующий:</p><pre class="brush: javascript noskimlinks noskimwords">/**/** * Creating a service for Posts */quiescentApp.factory( "Posts", ["$resource", function( $resource ) {    return $resource( apiUrl + "posts?slug=:slug" );}] );/** * Creating a service for Users */quiescentApp.factory( "Users", ["$resource", function( $resource ) {    return $resource( apiUrl + "users/:id" );}] );/** * Creating a service for Categories */quiescentApp.factory( "Categories", ["$resource", function( $resource ) {    return $resource( apiUrl + "categories/:id" );}] );</pre><p>И наш файл <strong>/src/js/app.js</strong> выглядит примерно так:</p><pre class="brush: javascript noskimlinks noskimwords">(function() {        /**     * Module definition for Quiescent App     */     var quiescentApp = angular.module( "quiescentApp", ["ngSanitize", "ngRoute", "ngResource"] );        /**     * Configuration variables for the app     */    var         serverPath = "http://localhost/wordpress/",        apiPath = "wp-json/wp/v2/",        apiUrl = serverPath + apiPath;        /**     * Configuring routes for our app     */    quiescentApp.config( ["$routeProvider", function( $route ) {    // post listing route    $route.when( "/posts", {        templateUrl: "views/listing.html",    } )        // single post route    .when( "/posts/:slug", {        templateUrl: "views/single.html",    } )        // author profile route    .when( "/users/:id", {        templateUrl: "views/author.html",    } )        // category profile route    .when( "/categories/:id", {        templateUrl: "views/category.html",    } )        // 404 route    .otherwise( {        templateUrl: "views/404.html"    } );    }] );        /**     * Creating a service for Posts     */    quiescentApp.factory( "Posts", ["$resource", function( $resource ) {        return $resource( apiUrl + "posts?slug=:slug" );    }] );        /**     * Creating a service for Users     */    quiescentApp.factory( "Users", ["$resource", function( $resource ) {        return $resource( apiUrl + "users/:id" );    }] );        /**     * Creating a service for Categories     */    quiescentApp.factory( "Categories", ["$resource", function( $resource ) {        return $resource( apiUrl + "categories/:id" );    }] );})();$(document).foundation();</pre><p>Метод <code class="inline">.get()</code> для службы RESTful возвращает один объект с помощью метода <code class="inline">GET</code> HTTP. Метод <code class="inline">.query()</code> использует тот же метод <code class="inline">GET</code> HTTP, но возвращает массив. Существует три предопределенных метода, предоставляемых службой, а именно <code class="inline">.save()</code>, <code class="inline">.remove()</code> и <code class="inline">.delete()</code>, которые используют методы <code class="inline">POST</code> и <code class="inline">DELETE</code>. Но мы будем иметь дело только с методами <code class="inline">.get()</code> и <code class="inline">.query()</code> в этой серии, поскольку мы имеем дело только с извлечением данных.<br></p><p>И это завершает наш учебник на сегодня.</p><h2>Что дальше?<br></h2><p>В текущем учебнике мы написали много кода JavaScript для начальной загрузки нашего приложения, настройки маршрутов и создания служб RESTful. Мы также проанализировали шаблоны для разных представлений в нашем приложении.<br></p><p>В следующей части этой серии мы создадим специальную директиву AngularJS для функции публикации сообщений, используя созданную нами службу <code class="inline">Posts</code>. Это позволит нам включить функцию публикации сообщений во многих местах, не повторяясь. Так что следите за обновлениями ...<br></p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825173-sozdanie-vneshnego-interfejsa-s-podderzhkoj-wordpress-samonastrojka-marshrutizatsiya-i-servisy" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="WordPress" href="https://norma-studio.github.io/article5/220825173-sozdanie-vneshnego-interfejsa-s-podderzhkoj-wordpress-samonastrojka-marshrutizatsiya-i-servisy" class="tm-article-body__tags-item-link">WordPress</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
33681</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
580</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
