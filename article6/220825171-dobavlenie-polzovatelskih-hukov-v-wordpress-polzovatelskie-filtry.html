
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Добавление пользовательских хуков в WordPress: пользовательские фильтры... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Добавление пользовательских хуков в WordPress: пользовательские фильтры... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Добавление пользовательских хуков в WordPress: пользовательские фильтры... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Добавление пользовательских хуков в WordPress: пользовательские фильтры... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="В этой серии из двух частей мы рассмотрим систему хуков WordPress. В частности, мы внимательно изучим как действия, так и фильтры и роль, которую они играют в разработке WordPress....">
<meta property="og:description" content="В этой серии из двух частей мы рассмотрим систему хуков WordPress. В частности, мы внимательно изучим как действия, так и фильтры и роль, которую они играют в разработке WordPress....">
<meta name="twitter:description" content="В этой серии из двух частей мы рассмотрим систему хуков WordPress. В частности, мы внимательно изучим как действия, так и фильтры и роль, которую они играют в разработке WordPress....">
<meta property="aiturec:description" content="В этой серии из двух частей мы рассмотрим систему хуков WordPress. В частности, мы внимательно изучим как действия, так и фильтры и роль, которую они играют в разработке WordPress....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/34/profiles/213/profileImage/4cssCOaK.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/34/profiles/213/profileImage/4cssCOaK.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/34/profiles/213/profileImage/4cssCOaK.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/34/profiles/213/profileImage/4cssCOaK.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/34/profiles/213/profileImage/4cssCOaK.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825171-dobavlenie-polzovatelskih-hukov-v-wordpress-polzovatelskie-filtry.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825171-dobavlenie-polzovatelskih-hukov-v-wordpress-polzovatelskie-filtry.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825171-dobavlenie-polzovatelskih-hukov-v-wordpress-polzovatelskie-filtry.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825171-dobavlenie-polzovatelskih-hukov-v-wordpress-polzovatelskie-filtry.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825171-dobavlenie-polzovatelskih-hukov-v-wordpress-polzovatelskie-filtry.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825171-dobavlenie-polzovatelskih-hukov-v-wordpress-polzovatelskie-filtry.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825171-dobavlenie-polzovatelskih-hukov-v-wordpress-polzovatelskie-filtry.html" title="Добавление пользовательских хуков в WordPress: пользовательские фильтры... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Добавление пользовательских хуков в WordPress: пользовательские фильтры... | envatomarket.ru | norma-studio.github.io" title="Добавление пользовательских хуков в WordPress: пользовательские фильтры... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/653463654.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825171-dobavlenie-polzovatelskih-hukov-v-wordpress-polzovatelskie-filtry.html" class="tm-user-info__username" title="
С. Салин" aria-label="
С. Салин">
С. Салин</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Добавление пользовательских хуков в WordPress: пользовательские фильтры...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825171-dobavlenie-polzovatelskih-hukov-v-wordpress-polzovatelskie-filtry" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="WordPress" href="https://norma-studio.github.io/article5/220825171-dobavlenie-polzovatelskih-hukov-v-wordpress-polzovatelskie-filtry" class="tm-article-snippet__hubs-item-link"><span>WordPress</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825171-dobavlenie-polzovatelskih-hukov-v-wordpress-polzovatelskie-filtry.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/34/profiles/213/profileImage/4cssCOaK.jpg">
    <meta itemprop="headline name" content="Добавление пользовательских хуков в WordPress: пользовательские фильтры... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="В этой серии из двух частей мы рассмотрим систему хуков WordPress. В частности, мы внимательно изучим как действия, так и фильтры и роль, которую они играют в разработке WordPress....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">В этой серии из двух частей мы рассмотрим систему хуков WordPress. В частности, мы внимательно изучим как действия, так и фильтры и роль, которую они играют в разработке WordPress....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>В этой серии из двух частей мы рассмотрим систему хуков WordPress. В частности, мы внимательно изучим как действия, так и фильтры и роль, которую они играют в разработке WordPress.</p><p>Хотя оба они определяются как «хуки», каждый из них играет определенную роль в разработке WordPress. И если вы хотите стать более совершенным разработчиком WordPress, важно не только понять разницу между ними, но и то, как вы можете реализовать пользовательские перехватчики.</p><p>В первой части серии мы определили, что такое «хуки», посмотрели, как они используются в другом месте, а также рассмотрели действия, включая определение наших собственных. Если вы пропустили первую статью, <span>я настоятельно рекомендую ее прочитать</span>, прежде чем приступать к работе с этим учебным пособием.</p><p>Прежде чем приступить к работе с перехватами, я расскажу о том, что было обсуждено в предыдущей статье, а затем перейдем оттуда.</p><p>Давайте начнем.</p><h2>Быстрое обновление</h2><p>В предыдущей статье мы видели, как хуки являются реализацией <span>шаблона проектирования, управляемого событиями.</span> В частности, мы определили его следующим образом:</p><ul><li>Программное обеспечение имеет определенные моменты, в которых он передает сообщение о том, что что-то произошло.</li> <li>Мы, как разработчики, умеем писать код, который слушает это сообщение, а затем реагировать на него с помощью настраиваемого кода.</li> </ul><p>И затем во всем содержимом мы рассмотрели, как именно этот шаблон реализован в WordPress. Мы говорили о том, как мы можем это использовать, а затем, как мы можем реализовать наши собственные действия.</p><p>Мы также признали тонкое различие: </p><blockquote>Действия предназначены для работы с функциональными возможностями, а фильтры предназначены для работы с данными.<br></blockquote><p>Принимая во внимание, что действия позволяют нам изменять то, как что-то ведет себя, фильтры позволяют нам изменять данные до их сохранения, извлечения или отображения на экране. В этом уроке мы рассмотрим, как работать с фильтрами, прежде чем записывать данные на экран, например, как вводить строчные буквы и удалять гласные из текста. </p><p>В конечном итоге речь идет о попытках получить удовольствие и увидеть ощутимые результаты благодаря работе, которую мы делаем, узнавая все об этом мощном аспекте WordPress.</p><p>Прежде чем мы это сделаем, мы должны убедиться, что у нас есть локальная среда разработки, настроенная и готовая к работе.</p><h2>Начинаем</h2><p>Напомним из предыдущей статьи, что наша локальная среда разработки должна состоять из следующего:</p><ul><li> <span>WordPress</span> 4.5.2</li> <li>Предпочитаемый вами IDE</li> <li>Веб-сервер</li> <li>Копия PHP</li> <li>база данных</li> </ul><p>Для многих Apache, PHP и MySQL могут быть легко установлены. Если вы более продвинутый, вы можете использовать что-то вроде <span>Nginx</span> и альтернативной базы данных. Если это так, это нормально, но для целей этого урока я предполагаю, что у вас есть первый.</p><p>И если у вас нет такой настройки окружения, тогда не стоит беспокоиться: <span>мы для вас написали урок</span>. Этот учебник предоставит вам все необходимое для начала работы с WordPress на локальном компьютере.</p><p>Как только вы настроитесь, мы будем готовы продолжить.</p><h2>Понимание фильтров WordPress</h2><p>WordPress Codex предоставляет исчерпывающий набор ресурсов для тех, кто хочет узнать все о фильтрах. Как мы уже говорили, он <span>определяет фильтры </span>следующим образом:</p><blockquote>Пользовательские фильтры отличаются от пользовательских действий, так как пользовательские действия позволяют добавлять или удалять код из существующих действий. В то время как пользовательские фильтры позволяют заменять определенные данные (например, переменные), обнаруженные в существующем действии.<br></blockquote><p>Но если вы ищете полный список доступных фильтров в WordPress, обязательно обратитесь к <span>этой странице</span> (и закладите) в Codex. Он имеет фильтры примерно за 20 секунд, многие из которых связаны со своей страницей документации.</p><p>Это означает, что если вам интересно, существует ли определенный фильтр, вы можете ссылаться на эту страницу. Точно так же вы можете посетить страницу этого конкретного фильтра, чтобы увидеть аргументы параметров, например определения функции и способы работы с ним.</p><h3>Слово о приоритете и параметрах</h3><p>Прежде чем мы двинемся дальше, я хочу убедиться, что все мы сейчас находимся на одной странице с тем, о каком приоритете и количестве аргументов идет речь, когда мы говорим о них в контексте перехватов WordPress.</p><p>Возьмем, к примеру, следующую строку кода:</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpadd_filter( "author_edit_pre", "filter_function_name", 10, 2 );</pre><p>Она говорит нам о четырех вещах:</p><ol><li>Имя фильтра, в который мы подключаемся</li> <li>Имя функции, которая должна быть вызвана</li> <li>Приоритет, когда функция должна быть вызвана</li> <li>Сколько параметров должна принимать функция</li> </ol><p>Вообще говоря, первые два момента сразу поняты; Тем не менее, два других часто могут сбить с толку новых разработчиков, но понять их не сложно.</p><p>Во-первых, подумайте о приоритете, <em>когда</em> вызывается функция. Помните, поскольку данный хук может иметь несколько связанных с ним функций, приоритет позволяет определить, как скоро или как поздно вызывается ваша функция. Чем меньше число, тем скорее оно срабатывает; Чем выше число, тем позже оно срабатывает.</p><p>Во-вторых, число, указывающее, сколько параметров принимает аргумент. Если вы не укажете это число, хук либо не примет ни того, ни другого по умолчанию. Если вы хотите передать другое количество, отличное от того что ожидалось, вы должны указать, сколько параметров должен принимать аргумент. Мы рассмотрим это более подробно позже в учебнике.</p><h3>Работа с фильтрами</h3><p>Чтобы начать работу с фильтрами, давайте создадим наш собственный файл в корне каталога <span>twentysixteen</span>. Мы будем вызывать файл <code class="inline">tutsplus-filters.php</code>. Затем, в <code class="inline">functions.php</code> twentysixteen, мы добавим следующую строку кода:</p><pre class="brush: php noskimlinks noskimwords">&lt;?php  include_once( get_template_directory() . "/tutsplus-filters.php" );</pre><p>Это позволит убедиться, что весь наш настраиваемый код будет находиться в одном файле, который мы можем исключить, если мы не хотим его использовать. Он также держит его в своей собственной области, чтобы он не переплетался ни с каким кодом, который существует с темой.</p><h3>Фильтрация содержимого сообщения</h3><p>Прежде чем мы начнем определять наши собственные фильтры, важно понять, как работают фильтры. Поскольку фильтры предназначены для использования в целях изменения данных, и поскольку сообщения являются одним из основных элементов блога, давайте посмотрим, как мы можем фильтровать содержимое сообщения в блоге до его отображения на экране.</p><p>При работе с этим примером обратите внимание на то, как он похож на то, как мы работаем с действиями WordPress, но вместо того, чтобы изменять поведение, он модифицирует данные.</p><h4>1. Регистрация нашего фильтра</h4><p>Чтобы зарегистрировать наш фильтр, нам нужны две части информации:</p><ol><li>Имя фильтра, к которому мы собираемся подключить нашу функцию</li> <li>Функция, которая будет отвечать за фильтрацию данных</li> </ol><p>Поскольку мы собираемся модифицировать контент для публикации, мы можем воспользоваться фильтром <code class="inline"><span>the_content</span></code>. Суть функции заключается в следующем:</p><ul><li>Она принимает один аргумент, содержимое сообщения, позволяет нам изменить его, а затем возвращает его вызывающему</li></ul><p>В этом случае WordPress передает содержимое сообщения в функцию, а затем функция будет возвращать данные после того, как она завершит свою работу.</p><p>Назовем нашу пользовательскую функцию <code class="inline">tutsplus_the_content</code> и затем зарегистрируем ее в WordPress.</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpadd_filter( "the_content", "tutsplus_the_content" );function tutsplus_the_content( $content ) {    return $content;}</pre><p>На самом фундаментальном уровне это и должно выглядеть так. Конечно, она мало что дает сейчас. Она просто возвращает содержимое, которое передается в нее.</p><h4>2. Изменение содержимого</h4><p>Давайте немного изменим данные. В частности, давайте сделаем это:</p><ol><li>Убедитесь, что сообщение просматривается в виде одного сообщения</li> <li>Добавьте сообщение в начало сообщения, которое поясняет, что содержание сообщения изменяется</li> </ol><p>Это не самое практичное использование фильтра, но это даст вам представление о том, как вы можете изменить функцию.</p><p>Вот как должен выглядеть код. Обратите внимание также на комментарии к коду:</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpadd_filter( "the_content", "tutsplus_the_content" );function tutsplus_the_content( $content ) {    // Don"t proceed with this function if we"re not viewing a single post.  if ( ! is_single() ) {return $content;}// First, define the message to be displayed.$html .= "&lt;p&gt;";$html .= "This is a custom message created by a hooked function.";$html .= "&lt;/p&gt;";// Now prepend it to the content.$content = $html .= $content;return $content;}</pre><p>Если вы посмотрите на страницу в режиме индексирования или в главном представлении блога, вы увидите стандартные сообщения, которые выглядят точно так же, без каких-либо изменений. Если вы откроете отдельный пост, то увидите новую фразу в начале каждой записи. В частности, вы увидите:</p><blockquote>Это настраиваемое сообщение, созданное подключенной функцией.<br></blockquote><p>Но давайте сделаем что-то более продвинутое. В дополнение к добавлению сообщения в верхней части содержимого, давайте удалим все гласные из содержимого сообщения, прежде чем возвращать его в WordPress.</p><p>Для этого мы использовали следующий код:</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpadd_filter( "the_content", "tutsplus_the_content" );function tutsplus_the_content( $content ) {    // Don"t proceed with this function if we"re not viewing a single post.if ( ! is_single() ) {return $content;}// First, remove all of the vowels from the content using a regular expression.$content = preg_replace( "$[aeiou]$i", "", $content );// Then, define the message to be displayed.$html .= "&lt;p&gt;";$html .= "This is a custom message created by a hooked function.";$html .= "&lt;/p&gt;";// And now prepend it to the content.$content = $html .= $content;return $content;}</pre><p>Внедрите этот код, сохраните его, а затем откройте любой пост в своей установке WordPress.</p><p>Технически, вышеупомянутая функция делает две вещи, поэтому для написания более сплоченного кода я рекомендую разбить поведение на отдельные функции и вызвать их с помощью нашей основной фильтрованной функции.</p><p>Вот как может выглядеть конечный результат:</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpadd_filter( "the_content", "tutsplus_the_content" );function tutsplus_the_content( $content ) {    // Don"t proceed with this function if we"re not viewing a single post.if ( ! is_single() ) {return $content;}$content = _tutsplus_strip_vowels( $content );$content = _tutsplus_add_message( $content );return $content;}function _tutsplus_strip_vowels( $content ) {return preg_replace( "$[aeiou]$i", "", $content );}function _tutsplus_add_message( $content ) {$html .= "&lt;p&gt;";$html .= "This is a custom message created by a hooked function.";$html .= "&lt;/p&gt;";return ( $html . $content );}</pre><p>Опять же, это не невероятно практичная или полезная реализация фильтра показывает, что мы можем сделать, когда настраиваем нашу собственную функцию.</p><h2>Определение пользовательских фильтров</h2><p>Тем не менее, легко воспользоваться уже существующими фильтрами. Как упоминалось ранее, на самом деле довольно просто вызвать <code class="inline">add_filter</code>, указав имя фильтра, а затем передав имя функции, которую мы хотим вызвать для фильтрации данных.</p><p>Но что, если мы хотим создать свой собственный фильтр? Возможно, мы хотим создать фильтр, который будет записывать строчные буквы всего текста в сообщении? Или, может быть, мы хотим создать фильтр, который удалит все гласные из сообщения?</p><h3>Понимание apply_filters</h3><p>Здесь мы начинаем интересоваться <code class="inline"><span>apply_filters</span></code>. Эта функция - функция, принимающая два аргумента:</p><ol><li>Тег, который идентифицирует имя хука фильтра</li> <li>Значение, которое ссылается на значение, на которое применяются фильтры</li> </ol><p>Если вы посмотрите пример, скажем, <code class="inline">get_the_content</code> в ядре WordPress, вы заметите, что он передает указанное значение через <span>the_content_more_link</span> через <code class="inline">apply_filters</code>.</p><p>Важно это понять, но как мы можем определить наши собственные фильтры, чтобы другие могли вызывать <code class="inline">apply_filters</code> для функциональности, которую мы разработали?</p><h3>Добавление собственных фильтров</h3><p>Добавить свои фильтры очень просто. Нам нужно указать те же четыре вещи, которые мы изложили выше:</p><ol><li>Имя фильтра</li> <li>Функция, которую должен вызывать фильтр</li> <li>Приоритет функции</li> <li>Количество аргументов, которые оно должно принять</li> </ol><p>Начнем с простого примера.</p><h4>Строчные буквы</h4><p> Убедиться, что содержание всего сообщения является строчным. </p><p>Во-первых, мы хотим определить фильтр с приоритетом 10. Мы знаем, что он будет принимать только один аргумент - контент, поэтому мы передадим номер 1 при добавлении нашего фильтра:</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpadd_filter( "tutsplus_lowercase_all", "tutsplus_lowercase_all_callback", 10, 1 );</pre><p>Далее мы определим простой функциональный объект, который использует функцию <code class="inline">strtolower</code> PHP для того, чтобы передать ему все значения, и мы вернем его.</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpfunction tutsplus_lowercase_all_callback( $content ) {    return strtolower( $content );}</pre><p>Окончательная версия кода будет выглядеть так:</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpadd_filter( "tutsplus_lowercase_all", "tutsplus_lowercase_all_callback", 10, 1 );function tutsplus_lowercase_all_callback( $content ) {    return strtolower( $content );}add_filter( "the_content", "tutsplus_the_content" );function tutsplus_the_content( $content ) {    // Don"t proceed with this function if we"re not viewing a single post.if ( ! is_single() ) {return $content;}return apply_filters( "tutsplus_lowercase_all", $content );}</pre><p>Достаточно просто для понимания, не так ли? Давайте рассмотрим еще один пример, основанный на некоторой функциональности, которую мы уже написали.</p><h4>Удалить все гласные</h4><p>Чтобы удалить гласные, мы можем использовать ту же функцию, которую мы уже определили; Однако мы должны изменить способ регистрации фильтра в WordPress, а затем мы должны убедиться, что функция, зарегистрированная в WordPress, правильно вызывает <code class="inline">apply_filters</code>.</p><p>Поскольку мы видели, как добавить наш собственный фильтр, указать приоритет, определить количество аргументов, которые он должен принять, и реализовать функцию, я не буду тратить время на тривиальные детали. </p><p>Вот фильтр, и он вызывается по своему усмотрению:</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpadd_filter( "tutsplus_remove_vowels", "tutsplus_remove_vowels_callback", 10, 1 );function tutsplus_remove_vowels_callback( $content ) {    return preg_replace( "$[aeiou]$i", "", $content );}add_filter( "the_content", "tutsplus_the_content" );function tutsplus_the_content( $content ) {// Don"t proceed with this function if we"re not viewing a single post.if ( ! is_single() ) {return $content;}return apply_filters( "tutsplus_remove_vowels", $content );}</pre><p>И затем это - то, как Вы можете вызвать его от в рамках начального хука.</p><h4>Вызываем все вместе</h4><p>Наконец, можно вызвать <code class="inline">apply_filters</code> несколько раз:</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpadd_filter( "tutsplus_remove_vowels", "tutsplus_remove_vowels_callback", 10, 1 );function tutsplus_remove_vowels_callback( $content ) {    return preg_replace( "$[aeiou]$i", "", $content );}add_filter( "tutsplus_lowercase_all", "tutsplus_lowercase_all_callback", 10, 1 );function tutsplus_lowercase_all_callback( $content ) {return strtolower( $content );}add_filter( "the_content", "tutsplus_the_content" );function tutsplus_the_content( $content ) {// Don"t proceed with this function if we"re not viewing a single post.if ( ! is_single() ) {return $content;}return apply_filters( "tutsplus_lowercase_all",apply_filters( "tutsplus_remove_vowels", $content ) );}</pre><p>Обратите внимание, что это приводит к такому же результату, что и в предыдущих случаях, но делает это путем сложения их в одну строку кода. Есть и другие способы, как это можно было написать, но цель этого учебника - рассказать вам о том, как писать свои собственные фильтры и как использовать в своих работах <code class="inline">apply_filters</code>.</p><h2>Заключение</h2><p>Это учебное пособие завершает наше знакомство с хуками WordPress. Во всей серии статей мы рассмотрели, как использовать существующие действия и фильтры, а также как создавать и реализовывать наши собственные.</p><p>Система хуков - один из самых мощных аспектов WordPress для разработчиков, поэтому очень важно ознакомиться с ним. При этом вы не только можете манипулировать поведением и данными, которые предоставляет WordPress, но вы можете определить свои собственные перехватчики, которые другие разработчики могут использовать в своем собственном коде.</p><p>Не стесняйтесь продолжать играть с исходным кодом, который был предоставлен в обоих этих уроках.</p><p>Наконец, если вы ищете другие утилиты, которые помогут вам построить свой растущий набор инструментов для WordPress или код для изучения и стать более сведущими в WordPress, не забудьте посмотреть, что у нас есть <span>на рынке Envato</span>.</p><p>Помните, что вы можете просмотреть все мои курсы и учебные материалы на <span>моей странице в профиле</span>, и вы можете следить за мной в <span>моем блоге</span> и/или Twitter в <span>@tommcfarlin</span>, где я рассказываю о различных практиках разработки программного обеспечения и о том, как мы можем использовать их в WordPress.</p><p>Пожалуйста, не стесняйтесь оставлять любые вопросы или комментарии в ленте ниже, и я постараюсь ответить на каждый из них.</p><h2>Близкие по теме ресурсы</h2><ul><li><span>Шаблон проектирования, управляемый событиями</span></li> <li><span>WordPress 4.5.2</span></li> <li> <span>Nginx</span><br></li> <li> <span>Настройка локальной среды разработки</span><br></li> <li> <span>WordPress Codex для фильтров</span><br></li> <li> <span>Список фильтров WordPress</span><br></li> <li> <span>Тема двадцатых годов</span><br></li> <li> <span>the_content</span><br></li> <li> <span>apply_filters</span><br></li> </ul>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825171-dobavlenie-polzovatelskih-hukov-v-wordpress-polzovatelskie-filtry" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="WordPress" href="https://norma-studio.github.io/article5/220825171-dobavlenie-polzovatelskih-hukov-v-wordpress-polzovatelskie-filtry" class="tm-article-body__tags-item-link">WordPress</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
30278</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
734</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
