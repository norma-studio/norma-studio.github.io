
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Пишем свой стартап: отзывчивая электронная почта для Gmail... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Пишем свой стартап: отзывчивая электронная почта для Gmail... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Пишем свой стартап: отзывчивая электронная почта для Gmail... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Пишем свой стартап: отзывчивая электронная почта для Gmail... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Этот учебник является частью серии статей-Пишем свой стартап на PHP-на Envato Tuts +. В этой серии я направляю вас через запуск приложения от концепции до готового продукта, используя приложение-Планировщик встреч-в качестве реального приложения. На каждом шаге я делаю релиз кода планировщика собраний в качестве примеров с открытым исходным кодом, ...">
<meta property="og:description" content="Этот учебник является частью серии статей-Пишем свой стартап на PHP-на Envato Tuts +. В этой серии я направляю вас через запуск приложения от концепции до готового продукта, используя приложение-Планировщик встреч-в качестве реального приложения. На каждом шаге я делаю релиз кода планировщика собраний в качестве примеров с открытым исходным кодом, ...">
<meta name="twitter:description" content="Этот учебник является частью серии статей-Пишем свой стартап на PHP-на Envato Tuts +. В этой серии я направляю вас через запуск приложения от концепции до готового продукта, используя приложение-Планировщик встреч-в качестве реального приложения. На каждом шаге я делаю релиз кода планировщика собраний в качестве примеров с открытым исходным кодом, ...">
<meta property="aiturec:description" content="Этот учебник является частью серии статей-Пишем свой стартап на PHP-на Envato Tuts +. В этой серии я направляю вас через запуск приложения от концепции до готового продукта, используя приложение-Планировщик встреч-в качестве реального приложения. На каждом шаге я делаю релиз кода планировщика собраний в качестве примеров с открытым исходным кодом, ...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/48/posts/26613/image/premailer%20-%20start.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/48/posts/26613/image/premailer%20-%20start.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/48/posts/26613/image/premailer%20-%20start.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/48/posts/26613/image/premailer%20-%20start.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/48/posts/26613/image/premailer%20-%20start.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825127-pishem-svoj-startap-otzyvchivaya-elektronnaya-pochta-dlya-gmail.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825127-pishem-svoj-startap-otzyvchivaya-elektronnaya-pochta-dlya-gmail.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825127-pishem-svoj-startap-otzyvchivaya-elektronnaya-pochta-dlya-gmail.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825127-pishem-svoj-startap-otzyvchivaya-elektronnaya-pochta-dlya-gmail.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825127-pishem-svoj-startap-otzyvchivaya-elektronnaya-pochta-dlya-gmail.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825127-pishem-svoj-startap-otzyvchivaya-elektronnaya-pochta-dlya-gmail.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825127-pishem-svoj-startap-otzyvchivaya-elektronnaya-pochta-dlya-gmail.html" title="Пишем свой стартап: отзывчивая электронная почта для Gmail... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Пишем свой стартап: отзывчивая электронная почта для Gmail... | envatomarket.ru | norma-studio.github.io" title="Пишем свой стартап: отзывчивая электронная почта для Gmail... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/54332343.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825127-pishem-svoj-startap-otzyvchivaya-elektronnaya-pochta-dlya-gmail.html" class="tm-user-info__username" title="
В. Бухтеев" aria-label="
В. Бухтеев">
В. Бухтеев</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Пишем свой стартап: отзывчивая электронная почта для Gmail...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825127-pishem-svoj-startap-otzyvchivaya-elektronnaya-pochta-dlya-gmail" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="HTML" href="https://norma-studio.github.io/article5/220825127-pishem-svoj-startap-otzyvchivaya-elektronnaya-pochta-dlya-gmail" class="tm-article-snippet__hubs-item-link"><span>HTML</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825127-pishem-svoj-startap-otzyvchivaya-elektronnaya-pochta-dlya-gmail.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/48/posts/26613/image/premailer%20-%20start.jpg">
    <meta itemprop="headline name" content="Пишем свой стартап: отзывчивая электронная почта для Gmail... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Этот учебник является частью серии статей-Пишем свой стартап на PHP-на Envato Tuts +. В этой серии я направляю вас через запуск приложения от концепции до готового продукта, используя приложение-Планировщик встреч-в качестве реального приложения. На каждом шаге я делаю релиз кода планировщика собраний в качестве примеров с открытым исходным кодом, ...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Этот учебник является частью серии статей-Пишем свой стартап на PHP-на Envato Tuts +. В этой серии я направляю вас через запуск приложения от концепции до готового продукта, используя приложение-Планировщик встреч-в качестве реального приложения. На каждом шаге я делаю релиз кода планировщика собраний в качестве примеров с открытым исходным кодом, ...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/48/posts/26613/image/premailer%20-%20start.jpg" alt="Пишем свой стартап: отзывчивая электронная почта для Gmail..." title="Пишем свой стартап: отзывчивая электронная почта для Gmail..." width="50" height="50"></figure><p>Этот учебник является частью серии статей <span>Пишем свой стартап на PHP</span> на Envato Tuts +. В этой серии я направляю вас через запуск приложения от концепции до готового продукта, используя приложение <span>Планировщик встреч</span> в качестве реального приложения. На каждом шаге я делаю релиз кода планировщика собраний в качестве примеров с открытым исходным кодом, из которых вы можете узнать что-то новое. Я также рассмотрю связанные с запуском бизнес-вопросы по мере их возникновения.</p><p>В нашем предыдущем эпизоде <span>Доставка приглашений</span> я представил гибкие шаблоны электронной почты HTML, которые мы построили на некоторых open-source шаблонах MailChimp. Затем, в нашем предыдущем эпизоде <span>Очистка шаблонов электронной почты</span>, мы перешли на шаблоны Sendwithus Oxygen. Новые шаблоны выглядели великолепно:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26613/image/featured.jpg" alt="Пишем свой стартап: отзывчивая электронная почта для Gmail..." title="Пишем свой стартап: отзывчивая электронная почта для Gmail..." width="50" height="50"></figure><p>Но были проблемы с шаблонами в Gmail. Вот ссылочный шаблон Oxygen в Gmail:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26613/image/welcome%20litmus%20preview.jpg" alt="Пишем свой стартап: отзывчивая электронная почта для Gmail..." title="Пишем свой стартап: отзывчивая электронная почта для Gmail..." width="50" height="50"></figure><p>В этом уроке я расскажу историю о том, как я очистил появление новых HTML-шаблонов в Gmail. Это связано с наложением CSS, потому что <span>гении в Google</span> не поддерживают определения стиля, как и все остальное. </p><p>Поскольку, скорее всего половина первого опыта людей с Планировщиком собраний будет проходить через электронную почту с запросом на собрание, и, вероятно, от 10 до 25 процентов из них могут использовать Gmail, это важно было исправить.</p><p>Если вы еще не опробовали Планировщик собраний, то пойдите и <span>запланируйте свою первую встречу</span>. Я участвую в комментариях ниже, так что скажите мне, что вы думаете! Вы также можете связаться со мной в Twitter <span>@reifman</span>. Меня особенно интересует, если вы хотите предложить новые функции или темы для будущих учебников.</p><p>Напомним, что весь код Планировщика собраний написан в Yii2 Framework для PHP. Если вы хотите узнать больше о Yii2, ознакомьтесь с нашей параллельной серией <span>Программирование с Yii2</span>.</p><h2>Быстро освежим в памяти</h2><p>Для шаблонов электронной почты я решил перейти на <span>шаблоны электронной почты Sendwithus Oxygen</span>. Oxygen предложил полное семейство шаблонов для полезных сценариев. Они казались простыми, хорошо организованы и легко расширяемы:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26596/image/oxygen.jpg" alt="Пишем свой стартап: отзывчивая электронная почта для Gmail..." title="Пишем свой стартап: отзывчивая электронная почта для Gmail..." width="50" height="50"></figure><p>Каждый из отдельных шаблонов Sendwithus может быть просмотрен и протестирован на <span>их учетной записи Litmus</span>.<br></p><p>Здесь наш сброс пароля электронной почты сейчас на iPhone, гораздо приятнее, чем это было раньше:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26596/image/reset%20on%20iphone.jpg" alt="Пишем свой стартап: отзывчивая электронная почта для Gmail..." title="Пишем свой стартап: отзывчивая электронная почта для Gmail..." width="50" height="50"></figure><p>Я был немного смущен, когда первые письма в Gmail выглядели некорректно:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26596/image/reset%20-%20in%20gmail.jpg" alt="Пишем свой стартап: отзывчивая электронная почта для Gmail..." title="Пишем свой стартап: отзывчивая электронная почта для Gmail..." width="50" height="50"></figure><p>Но просмотрев их предварительные просмотры Litmus (которые они с тех пор обновили и отремонтировали) я понял, <span>как именно они выглядят в Gmail</span>:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26596/image/welcome%20litmus%20preview.jpg" alt="Пишем свой стартап: отзывчивая электронная почта для Gmail..." title="Пишем свой стартап: отзывчивая электронная почта для Gmail..." width="50" height="50"></figure><p>Позже я узнал, что Gmail требует большей инкрустации CSS, чем другие сервисы. Моя задача - решить эту проблему для пользователей Meeting Planner.</p><h2>Решение проблемы рендеринга Gmail</h2><p>Первоначально я думал, что нам нужно будет управлять CSS-inlining для Gmail. Было два пути, которые нужно было сделать, и оба сложные. </p><p>Либо a) я мог обработать каждое исходящее сообщение через Python премейлер после того, как он был полностью сконструирован, или, б) я мог бы применить inlining к шаблонам в исходном коде письма.</p><p>Для простоты я решил применить inlining к шаблонам вручную, думая, что в будущем я могу выбрать живой инлайн. Я не так хорошо знаком с запуском задач Python из PHP и отслеживанием их производительности для такой важной функции, как отправка приглашений на собрание по электронной почте. Точно так же, если мне нужно отправить электронное письмо всем 10 000 пользователей, это будет 10 000 событий, которые могут замедлить работу сервера.</p><p>Тем не менее, подход, который я выбрал, был непростым и превратился в процедурный кошмар. Не было простого способа программно генерировать HTML-код, который можно было бы легко обработать, а затем вернуться к PHP для динамического генерации электронной почты.</p><p><span>Premailer</span> <span>Питера Бенгтсона</span> встраивает CSS для вас через Python. Он также помог мне заметить <span>Premailer.io</span>, что упростило ситуацию.</p><p>В принципе, вы копируете и вставляете свой шаблон электронной почты на вкладку <strong>Textarea</strong> и нажимаете кнопку <strong>Convert</strong> (не показано):</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26613/image/premailer%20-%20start.jpg" alt="Пишем свой стартап: отзывчивая электронная почта для Gmail..." title="Пишем свой стартап: отзывчивая электронная почта для Gmail..." width="50" height="50"></figure><p>Затем вы можете скопировать и вставить полученный шаблон электронной почты с уже встроенным CSS:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26613/image/premailer%20-%20results%20-%20header.jpg" alt="Пишем свой стартап: отзывчивая электронная почта для Gmail..." title="Пишем свой стартап: отзывчивая электронная почта для Gmail..." width="50" height="50"></figure><p>Вот улучшенный HTML с встроенным CSS - обратите внимание на встроенные стили в каждом теге HTML, как это делают инженеры Gmail:</p><pre class="brush: php noskimlinks noskimwords">&lt;tr&gt;  &lt;td align="center" valign="top" width="100%" style="color:#777; font-family:Helvetica, Arial, sans-serif; font-size:14px; line-height:21px; text-align:center; padding:20px 0 30px; background-color:#f7f7f7" bgcolor="#f7f7f7"&gt;    &lt;center&gt;      &lt;table cellspacing="0" cellpadding="0" width="600" style="border-collapse:collapse"&gt;        &lt;tr&gt;          &lt;td style="color:#4d4d4d; font-family:Helvetica, Arial, sans-serif; font-size:32px; line-height:normal; text-align:center; border-collapse:collapse; font-weight:700; padding:35px 0 0" align="center"&gt;            Changes to Your Meeting          &lt;/td&gt;        &lt;/tr&gt;        &lt;tr&gt;          &lt;td style="color:#777; font-family:Helvetica, Arial, sans-serif; font-size:14px; line-height:21px; text-align:center; border-collapse:collapse; padding:10px 60px 0; width:100%" align="center" width="100%"&gt;            &lt;p&gt;Hi &lt;?php echo Html::encode(MiscHelpers::getDisplayName($user_id)); ?&gt;, changes have been made to your meeting.&lt;/p&gt;            &lt;p&gt;&lt;?php echo $history; ?&gt;&lt;/p&gt;            &lt;p&gt;Please click the button below to view the meeting page.&lt;/p&gt;          &lt;/td&gt;        &lt;/tr&gt;</pre><p>Вы даже можете увидеть результат на вкладке <strong>Preview</strong> - на этих скриншотах я только что обработал заголовок макета:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26613/image/premailer%20-%20results%20-%20preview.jpg" alt="Пишем свой стартап: отзывчивая электронная почта для Gmail..." title="Пишем свой стартап: отзывчивая электронная почта для Gmail..." width="50" height="50"></figure><p>Кроме того, все должно было быть сделано вместе. Я мог бы создать старый и новый макет и измененный код шаблона один за другим, но это создало бы больше областей изменений. В конечном счете, у меня было около семи полных шаблонов и их общих компонентов для обработки.</p><h3>Обработка шаблонов</h3><p>Поскольку Планировщик собраний на MVC фреймворке Yii2, электронные письма имеют внешний шаблон макета и внутренний шаблон с большим количеством смешанного PHP для генерации данных. У меня также были подшаблоны для обычных, многоразовых элементов, таких как встречающие заметки и нижние колонтитулы. </p><p>Вы не можете просто обработать PHP-код. Вы должны удалить PHP-элементы, пропустить шаблон через Premailer, а затем повторно интегрировать PHP-код. Мне повезло, что большая часть моего PHP-кода не сильно использует стили.</p><p>В целом процесс создания встроенных шаблонов оказался довольно сложным и трудоемким. Мне также показалось, что будет сложно сохранить и создавать новые шаблоны.</p><p>В принципе, мне пришлось создавать временные файлы со всем блоком стиля выше и HTML, который я хотел бы включить ниже, удалить PHP, обработать шаблон и затем заново вставить PHP.</p><p>Сначала я обработал макет HTML. Затем я обработал каждый отдельный подшаблон и шаблон.</p><p>Но это сработало; вот скриншот шаблона <strong>Reset Your Password</strong> в веб-службе Gmail:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26613/image/gmail%20-%20reset%20pwd.jpg" alt="Пишем свой стартап: отзывчивая электронная почта для Gmail..." title="Пишем свой стартап: отзывчивая электронная почта для Gmail..." width="50" height="50"></figure><h2>Еще одно перспективное решение</h2><p>В какой-то момент до конца всей этой нудной работы и понимания того, насколько сложно было бы поддерживать мои шаблоны в ближайшем будущем, я задавался вопросом, предоставил ли Mailgun встроенные CSS и начал искать в Интернете. </p><p>Mailgun этого не делал, но SwiftMailer, который Yii использует для доставки SMTP почты, делает. Потребовалось еще полчаса, чтобы очистить мою раннюю работу (a.k.a. беспорядок) и сортировать все, установкой плагина CSS Inlining для SwiftMailer.</p><p>Я использовал встроенный <span>PHP-модуль Open Buildings CSS Inliner</span>, который я добавил к composer.json:</p><pre class="brush: php noskimlinks noskimwords">"minimum-stability": "stable",    "require": {        "php": "&gt;=5.4.0",        "yiisoft/yii2": "&gt;=2.0.7",        "yiisoft/yii2-bootstrap": "*",        "yiisoft/yii2-swiftmailer": "*",        "openbuildings/swiftmailer-css-inliner":"*",        "2amigos/yii2-google-maps-library": "*",    </pre><p>Вот результаты обновления composer"а:</p><pre class="brush: bash noskimlinks noskimwords">$ composer updateLoading composer repositories with package informationUpdating dependencies (including require-dev)  - Installing openbuildings/swiftmailer-css-inliner (0.3.0)    Downloading: 100%  - Installing symfony/css-selector (v3.1.0)    Downloading: 100%  - Installing tijsverkoyen/css-to-inline-styles (1.5.5)    Downloading: 100%Writing lock fileGenerating autoload files</pre><p>Мне также нужно было настроить конфигурацию почтовой программы для использования плагина в /common/config/main-local.php (в локальном и prod окружениях):</p><pre class="brush: php noskimlinks noskimwords">  ],        "mailer" =&gt; [            "class" =&gt; "yii\swiftmailer\Mailer",            "viewPath" =&gt; "@common/mail",            //comment the following array to send mail using php"s mail function            "transport" =&gt; [                "class" =&gt; "Swift_SmtpTransport",                "host" =&gt; "smtp.mailgun.org",                "username" =&gt; "xxxxxxxxxxxxxxxxxxxxxxxxxxxx",                "password" =&gt; "xxxxxxxxxxxxxxxxxxxxxxxxxxxx",                "port" =&gt; "587",                "encryption" =&gt; "tls",                "plugins"    =&gt; [                  [                      "class" =&gt; "Openbuildings\Swiftmailer\CssInlinerPlugin",                  ],                ],              ],            // send all mails to a file by default. You have to set            // "useFileTransport" to false and configure a transport            // for the mailer to send real emails.            "useFileTransport" =&gt; false,        ],    ],</pre><p>Дела пошли довольно быстрее, хотя в Gmail все еще был большой визуальный дефект:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26613/image/defects%20in%20gmail.jpg" alt="Пишем свой стартап: отзывчивая электронная почта для Gmail..." title="Пишем свой стартап: отзывчивая электронная почта для Gmail..." width="50" height="50"></figure><p>Open Building"s CSS inliner, написанный на PHP, не работал так успешно, как Python-based Premailer, по крайней мере, из коробки с настройками по умолчанию.</p><p>Вместо того, чтобы тратить время на отладку этого инлайнера и шаблонов прямо сейчас, я решил вернуться к шаблонам, обработанным в Premailer. На данный момент он работает хорошо.</p><p>В какой-то момент мне нужно будет пересмотреть, есть ли простые способы исправить это или настроить встроенный плагин на основе PHP. В качестве альтернативы, возможно, мне придется переключиться на Inliner на Python. </p><p><em>При создании стартапа вам нужно выбирать решения и определять приоритеты. На данный момент это более низкий приоритет и довольно легко работает.</em></p><p>В дереве кода вы найдете <span>/common/mail/inlining</span> с деревом различных папок и файлом mail-readme.txt с пояснениями. В основном, есть копии шаблонов Oxygen, рабочие версии PHP, отредактированный предварительно обработанный код и окончательный обработанный код.</p><h2>Что дальше?</h2><p>В настоящее время я работаю над подготовкой Meeting Planner для альфа-релиза. В первую очередь я сосредоточен на улучшениях и особенностях, чтобы сделать альфа-выпуск плавным. Сейчас я отслеживаю все в Asana, о котором я расскажу в следующем учебнике. Есть также некоторые интересные новые функции, все еще находящиеся в разработке.</p><p>Наконец, я начинаю экспериментировать с WeFunder на основе <span>реализации новых правил SEC</span>. Пожалуйста, подпишитесь <span>на наш профиль</span>. Я также напишу об этом в следующем учебнике.</p><p>Пока вы ждете больше эпизодов, <span>запланируйте свое первое собрание</span> и пробуйте шаблоны с друзьями у которых есть почтовые ящики Gmail. Кроме того, я был бы признателен, если вы поделитесь своим опытом ниже в комментариях, меня всегда интересуют ваши предложения. Вы также можете связаться со мной в Twitter <span>@reifman</span> напрямую.<br></p><p>Следите за предстоящими учебными пособиями в разделе серии <span>Пишем свой стартап на PHP</span>.</p><h2>Ссылки по теме</h2><ul><li><span>Планировщик встреч</span></li> <li><span>We Funder Страница Планировщика встреч</span></li> <li><span>Программирование с помощью Yii2: Начало работы</span></li> <li><span>Yii2 Developer Exchange</span></li> <li> <span>Premailer.io:</span> <span>Premailer</span> <span>Питера Бенгтсона</span> (на основе Python)</li> <li> <span>Open Buildings CSS Inliner plugin</span> (на основе PHP)<br></li> </ul>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825127-pishem-svoj-startap-otzyvchivaya-elektronnaya-pochta-dlya-gmail" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="HTML" href="https://norma-studio.github.io/article5/220825127-pishem-svoj-startap-otzyvchivaya-elektronnaya-pochta-dlya-gmail" class="tm-article-body__tags-item-link">HTML</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
31929</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
577</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
