
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Программирование с помощью Yii2: безопасность... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Программирование с помощью Yii2: безопасность... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Программирование с помощью Yii2: безопасность... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Программирование с помощью Yii2: безопасность... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Если вы интересуетесь: «Что такое Yii?» то ознакомьтесь с Знакомство с Yii Framework, в котором рассматриваются преимущества Yii и которое включает обзор Yii 2.0....">
<meta property="og:description" content="Если вы интересуетесь: «Что такое Yii?» то ознакомьтесь с Знакомство с Yii Framework, в котором рассматриваются преимущества Yii и которое включает обзор Yii 2.0....">
<meta name="twitter:description" content="Если вы интересуетесь: «Что такое Yii?» то ознакомьтесь с Знакомство с Yii Framework, в котором рассматриваются преимущества Yii и которое включает обзор Yii 2.0....">
<meta property="aiturec:description" content="Если вы интересуетесь: «Что такое Yii?» то ознакомьтесь с Знакомство с Yii Framework, в котором рассматриваются преимущества Yii и которое включает обзор Yii 2.0....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/48/posts/26701/image/featured.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/48/posts/26701/image/featured.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/48/posts/26701/image/featured.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/48/posts/26701/image/featured.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/48/posts/26701/image/featured.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825120-programmirovanie-s-pomoschyu-yii2-bezopasnost.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825120-programmirovanie-s-pomoschyu-yii2-bezopasnost.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825120-programmirovanie-s-pomoschyu-yii2-bezopasnost.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825120-programmirovanie-s-pomoschyu-yii2-bezopasnost.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825120-programmirovanie-s-pomoschyu-yii2-bezopasnost.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825120-programmirovanie-s-pomoschyu-yii2-bezopasnost.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825120-programmirovanie-s-pomoschyu-yii2-bezopasnost.html" title="Программирование с помощью Yii2: безопасность... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Программирование с помощью Yii2: безопасность... | envatomarket.ru | norma-studio.github.io" title="Программирование с помощью Yii2: безопасность... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/54332343.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825120-programmirovanie-s-pomoschyu-yii2-bezopasnost.html" class="tm-user-info__username" title="
В. Бухтеев" aria-label="
В. Бухтеев">
В. Бухтеев</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Программирование с помощью Yii2: безопасность...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825120-programmirovanie-s-pomoschyu-yii2-bezopasnost" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Security" href="https://norma-studio.github.io/article5/220825120-programmirovanie-s-pomoschyu-yii2-bezopasnost" class="tm-article-snippet__hubs-item-link"><span>Security</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825120-programmirovanie-s-pomoschyu-yii2-bezopasnost.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/48/posts/26701/image/featured.jpg">
    <meta itemprop="headline name" content="Программирование с помощью Yii2: безопасность... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Если вы интересуетесь: «Что такое Yii?» то ознакомьтесь с Знакомство с Yii Framework, в котором рассматриваются преимущества Yii и которое включает обзор Yii 2.0....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Если вы интересуетесь: «Что такое Yii?» то ознакомьтесь с Знакомство с Yii Framework, в котором рассматриваются преимущества Yii и которое включает обзор Yii 2.0....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/48/posts/26701/image/featured.jpg" alt="Программирование с помощью Yii2: безопасность..." title="Программирование с помощью Yii2: безопасность..." width="50" height="50"></figure><p><em>Если вы интересуетесь: «Что такое Yii?» то ознакомьтесь с</em> <span><em>Знакомство с Yii Framework</em></span>,<em> в котором рассматриваются преимущества Yii и которое включает обзор Yii 2.0.</em></p><p>В этой серии <span>Программировании с помощью Yii2</span> я направляю читателей в использование Yii2 Framework для PHP. Если вы планируете поделиться своим приложением с общественностью, вам нужно, чтобы это было безопасно, и лучше всего планировать это с самого начала. К счастью, используя такой фреймворк, как Yii, это стало намного проще, чем было бы без него. Как указано в <span>Особенности Yii</span>:</p><blockquote>Yii оснащен множеством мер безопасности, которые помогут предотвратить атаки ваших веб-приложений, такие как SQL-инъекция, межсайтовый скриптинг (XSS), подделка запросов на межсайтовый запрос (CSRF) и подделка файлов cookie.</blockquote><p>В этом уроке я рассмотрю основные концепции безопасности в рамках приложения Yii. И, если вам интересно, будущие эпизоды будут посвящены <span>теме безопасности в приложении</span> Планировщик собраний, которое представлено в нашей серии <span>Пишем стартап на PHP</span>, поскольку он приближается к альфа-выпуску.</p><p>Прежде чем мы начнем, пожалуйста, помните, я стараюсь участвовать в обсуждениях ниже. Если у вас есть вопрос или предложение по теме, пожалуйста, напишите комментарий ниже или свяжитесь со мной в Twitter <span>@reifman</span>. <br></p><p><em>Примечание. Если вы заметили пробел между эпизодами Программирование серии Yii, это связано с тем, что в прошлом году мне пришлось провести</em> операцию на головном мозге. Благодарю вас за терпение и поддержку. Приятно регулярно писать, и я с нетерпением жду продолжения освещения Yii2.</p><h2>Основы безопасности с Yii</h2><p>Если вы новичок в безопасности веб-приложений, есть много возможностей, которые предлагает Yii. Я сделаю все возможное, чтобы предложить обзор, основанный на лучшей документации Yii 2.0. Команда Yii делит <span>безопасность на семь ключевых областей</span>:</p><ol><li><span>Аутентификация</span></li> <li><span>Авторизация</span></li> <li><span>Работа с паролями</span></li> <li><span>Криптография</span></li> <li><span>Безопасность отображений</span></li> <li><span>Аутентификация клиентов</span></li> <li><span>Лучшие практики</span></li> </ol><p>Давайте начнем погружаться в них один за другим.<br></p><h3>1. Аутентификация</h3><p>В презентации Yii Framework от <span>Ilko Kacharov</span> представлены несколько полезных слайдов, которые суммируют цель аутентификации (и следующую подтему, авторизацию). По сути, вот те вопросы, на которые должны отвечать эти темы:</p><ul><li>Кто является пользователем?</li> <li>Является ли пользователь тем, кем он себя называет?</li> <li>Есть ли у пользователя для доступа к ресурсу?</li> <li>Разрешено ли пользователю выполнять действие?</li> <li>Разрешено ли пользователю выполнять действие на ресурсе?</li> </ul><h4>Пользовательская модель и интерфейс идентификации</h4><p>Yii класс <span>yii/web/User</span> интегрируется с <span>yii\web\IdentityInterface</span> для управления статусом аутентификации пользователя в вашем приложении. </p><p>В ноябре прошлого года я написал учебное пособие о <span>расширенном шаблоне приложений Yii</span>. Одним из преимуществ расширенного шаблона является то, что он обеспечивает предварительно встроенную интеграцию модели User с ActiveRecord и вашей базой данных. Поэтому ваше приложение предлагает аутентификацию, основанную на базе данных, прямо из коробки.<br></p><p>Модель User позволяет вам программно входить в систему и выходить из системы:</p><ul><li> <span>login() </span>устанавливает указанное имя и запоминает статус аутентификации в сеансе и cookie.</li> <li> <span>logout()</span> отмечает пользователя как гостя и очищает соответствующую информацию от сеанса и файла cookie.</li> <li> <span>setIdentity()</span>: изменяет идентификатор пользователя, не затрагивая сеанс или файл cookie, лучше всего подходит для функций API.</li> </ul><p>Свойство <span>$isGuest</span> определяет, был ли текущий пользователь залогинен или нет. Когда пользователь выйдет из системы, свойство имеет значение null, но в противном случае возвращает экземпляр IdentityInterface.<br></p><p>По сути, вам нужен класс User, который расширяет ActiveRecord и реализует методы для поддержки IdentityInterface, например:<br></p><pre class="brush: php noskimlinks noskimwords">&lt;?phpuse yii\db\ActiveRecord;use yii\web\IdentityInterface;class User extends ActiveRecord implements IdentityInterface{    public static function tableName()    {        return "user";    }    /**     * Finds an identity by the given ID.     *     * @param string|integer $id the ID to be looked for     * @return IdentityInterface|null the identity object that matches the given ID.     */    public static function findIdentity($id)    {        return static::findOne($id);    }    /**     * Finds an identity by the given token.     *     * @param string $token the token to be looked for     * @return IdentityInterface|null the identity object that matches the given token.     */    public static function findIdentityByAccessToken($token, $type = null)    {        return static::findOne(["access_token" =&gt; $token]);    }    /**     * @return int|string current user ID     */    public function getId()    {        return $this-&gt;id;    }    /**     * @return string current user auth key     */    public function getAuthKey()    {        return $this-&gt;auth_key;    }    /**     * @param string $authKey     * @return boolean if auth key is valid for current user     */    public function validateAuthKey($authKey)    {        return $this-&gt;getAuthKey() === $authKey;    }}</pre><p>Кроме того, перед созданием пользователя приложение генерирует случайную строку в качестве ключа авторизации. Его можно использовать в сообщениях «забыли пароль» или других ссылках на электронную почту:</p><pre class="brush: php noskimlinks noskimwords">class User extends ActiveRecord implements IdentityInterface{    ......        public function beforeSave($insert)    {        if (parent::beforeSave($insert)) {            if ($this-&gt;isNewRecord) {                $this-&gt;auth_key = \Yii::$app-&gt;security-&gt;generateRandomString();            }            return true;        }        return false;    }}</pre><h3>Авторизация</h3><p>Yii предоставляет два встроенных подхода к авторизации. Более простой список контроля доступа (ACL) определяет, каким пользователям или процессам разрешено выполнять действия на ресурсе, а более интенсивный контроль доступа на основе ролей (RBAC) помогает вам управлять доступом, определяя роли. В RBAC только определенные пользователем или системные задачи с определенными ролями могут выполнять определенные действия.</p><h4>Список контроля доступа</h4><p>ACL иногда также называют фильтром контроля доступа (ACF). Yii обеспечивает поддержку ACL внутри <span>yii\filters\AccessControl</span>. Он идеально подходит для приложений, которым требуется простой контроль доступа. Это то, что я использовал до сих пор в Meeting Planner.</p><p>Вот пример обычного SiteController, настраивающего поведение доступа для фильтрации доступа к доступным действиям, часто это просто страницы. В этом случае ACL действует при регистрации, входе в систему и выходе. <code class="inline">«?»</code> указывает, что любой пользователь может получить доступ к страницам входа и регистрации, тогда как <code class="inline">«@»</code> указывает, что разрешен доступ только для зарегистрированных пользователей или пользователей, прошедших проверку подлинности. В приведенном ниже примере только зарегистрированные пользователи могут выйти из системы:</p><pre class="brush: php noskimlinks noskimwords">use yii\web\Controller;use yii\filters\AccessControl;class SiteController extends Controller{    public function behaviors()    {        return [            "access" =&gt; [                "class" =&gt; AccessControl::className(),                "only" =&gt; ["login", "logout", "signup"],                "rules" =&gt; [                    [                        "allow" =&gt; true,                        "actions" =&gt; ["login", "signup"],                        "roles" =&gt; ["?"],                    ],                    [                        "allow" =&gt; true,                        "actions" =&gt; ["logout"],                        "roles" =&gt; ["@"],                    ],                ],            ],        ];    }    // ...}</pre><p>По мере того, как растет контроллер, каждое новое действие должно быть определено в правилах AccessControl. И, по мере роста вашего приложения, каждый контроллер и все его действия должны интегрировать фильтрацию ACL для обеспечения безопасности.</p><h4>Контроль доступа на основе ролей</h4><p><span>Управление доступом на основе ролей (RBAC)</span> обеспечивает более надежную систему аутентификации, но также требует гораздо большей предварительной разработки и реализации. </p><p>С RBAC вы определяете аутентификацию через роли, которые могут быть унаследованы (или нет), и вы применяете роли на пользователей. Вы также можете определить правила для ролей. Реализации RBAC могут стать довольно сложными.</p><p>На рисунке ниже администраторы могут выполнять любую задачу, а авторы могут создавать сообщение и обновлять свои собственные сообщения. Джейн - администратор, поэтому она может выполнять задачи администраторов, а Джон - всего лишь автор:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26701/image/rbac.jpg" alt="Программирование с помощью Yii2: безопасность..." title="Программирование с помощью Yii2: безопасность..." width="50" height="50"></figure><p>Yii реализует то, что он называет «общим иерархическим RBAC, <span>следуя модели NIST RBAC</span>». Функциональность RBAC обеспечивается его компонентом приложения <span>authManager</span>.<br></p><p>Здесь я не буду слишком глубоко вдаваться в RBAC, но надеюсь, что сделаю это в одном из будущих учебников. Опять же, для редакционных богов:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26701/image/noone.jpg" alt="Программирование с помощью Yii2: безопасность..." title="Программирование с помощью Yii2: безопасность..." width="50" height="50"><figcaption>через <span>PopSugar</span></figcaption></figure><p>В принципе, чтобы полностью реализовать RBAC, вы должны:</p><ul><li>определить роли и разрешения</li> <li>устанавливать отношения между вашими ролями и разрешениями</li> <li>определить любые существующие правила</li> <li>связать правила с вашими ролями и разрешениями</li> <li>и, наконец, назначить роли пользователям</li> </ul><p>Вы можете увидеть код, необходимый для включения системы RBAC ниже:</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpnamespace app\commands;use Yii;use yii\console\Controller;class RbacController extends Controller{    public function actionInit()    {        $auth = Yii::$app-&gt;authManager;        // add "createPost" permission        $createPost = $auth-&gt;createPermission("createPost");        $createPost-&gt;description = "Create a post";        $auth-&gt;add($createPost);        // add "updatePost" permission        $updatePost = $auth-&gt;createPermission("updatePost");        $updatePost-&gt;description = "Update post";        $auth-&gt;add($updatePost);        // add "author" role and give this role the "createPost" permission        $author = $auth-&gt;createRole("author");        $auth-&gt;add($author);        $auth-&gt;addChild($author, $createPost);        // add "admin" role and give this role the "updatePost" permission        // as well as the permissions of the "author" role        $admin = $auth-&gt;createRole("admin");        $auth-&gt;add($admin);        $auth-&gt;addChild($admin, $updatePost);        $auth-&gt;addChild($admin, $author);        // Assign roles to users. 1 and 2 are IDs returned by IdentityInterface::getId()        // usually implemented in your User model.        $auth-&gt;assign($author, 2);        $auth-&gt;assign($admin, 1);    }}</pre><p>Чтобы реализовать RBAC, вы должны быть готовы сразу написать много кода или по мере увеличения вашего приложения. И, если вы это сделаете, вы будете управлять аутентификацией в соответствии с установленной вами структурой проверки подлинности. Другими словами, дизайн и кодирование наперед обеспечивают надежную и подробную аутентификацию.</p><h3>Работа с паролями</h3><p>Как узнал Марк Цукерберг в июне, некоторые веб-сайты <span>хранят пароли пользователей в текстовом виде</span>, но ваш сайт не должен этого делать; чтобы быть справедливым к Цукербергу, моя учетная запись Facebook была однажды взломана из-за того, что PHPList сделал то же самое - до дней менеджеров паролей. Во всяком случае, Yii упрощает шифрование и надежную проверку паролей.</p><p>Функция <span>crypt</span> Yii использует <span>bcrypt</span> для генерации хэшей для вашего пароля. Когда люди регистрируются, создается хэш:</p><pre class="brush: php noskimlinks noskimwords">$hash = Yii::$app-&gt;getSecurity()-&gt;generatePasswordHash($password);</pre><p>Затем, когда пользователь пытается войти в систему, пароль хэшируется и сравнивается с хешем в базе данных:</p><pre class="brush: php noskimlinks noskimwords">if (Yii::$app-&gt;getSecurity()-&gt;validatePassword($password, $hash)) {    // all good, logging user in} else {    // wrong password}</pre><p>Но вы также можете использовать Yii для защиты данных с помощью криптографии.</p><h3>Криптография</h3><p>Yii Framework предоставляет ряд встроенных функций для защиты данных:</p><ul><li>Функции генерации пароля и генерации ключей, такие как <span>generateRandomKey</span>, <span>generateRandomString</span> и <span>generateSalt</span>.</li> <li>Проверка пароля: <span>generatePasswordHash()</span> и <span>validatePassword()</span>.</li> <li>Шифрование/дешифрование: <span>encryptByKey()</span>, <span>decryptByKey()</span>, <span>encryptByPassword()</span> и <span>decryptByPassword()</span>.</li> <li>Вывод ключей с использованием стандартных алгоритмов: <span>pbkdf2()</span> и <span>hkdf()</span>.</li> <li>Предотвращение несанкционированного доступа: <span>hashData()</span> и <span>validateData()</span>.</li> </ul><h3>Безопасность в отображениях</h3><p>Любые данные, поступающие от пользователей, могут быть заражены такими атаками, как SQL-инъекция или кросс-браузерные скрипты. Важно, чтобы любые данные, которые вы выводили пользователям в представлениях, были очищены. Yii предлагает несколько методов для этого. </p><p>Во-первых, есть <code class="inline">Html::encode</code>, который существенно разбивает любой SQL или скрипт:</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpuse yii\helpers\Html;?&gt;&lt;div class="username"&gt;    &lt;?= Html::encode($user-&gt;name) ?&gt;&lt;/div&gt;</pre><p>И есть интеграция с библиотекой <span>HtmlPurifier</span> для больших текстовых блоков:</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpuse yii\helpers\HtmlPurifier;?&gt;&lt;div class="post"&gt;    &lt;?= HtmlPurifier::process($post-&gt;text) ?&gt;&lt;/div&gt;</pre><h3>Вход через Auth Client</h3><p>Yii также предоставляет возможность сторонней аутентификации, что особенно полезно для поддержки социального входа через Google, Facebook, Twitter и т.д.</p><p>Я написал несколько руководств для Envato Tuts + об использовании AuthClient в Yii Framework с социальными входами:</p><ul><li> <span>Пишем свой стартап: упрощение Onramp с помощью AuthClient</span> (<em>ожидает публикации</em>)</li> <li><span>Как программировать с Yii2: аутентификация Google</span></li> <li> <span>Как программировать с Yii2: Интеграция AuthClient с Twitter, Google и другими сетями</span> <br></li> </ul><p>Я нашел, что социальный вход работает очень хорошо для <span>Планировщика встреч</span>. Новые пользователи могут начать планировать встречу без пароля.</p><h3>Лучшие практики</h3><p>Yii также рекомендует <span>несколько лучших практик</span>, касающихся безопасности веб-приложений. И его документация предлагает хороший учебник по этим темам.</p><ol><li><span>Фильтрация ввода и вывода</span></li> <li><span>Избегаем инъекций SQL</span></li> <li><span>Предотвращение межсайтовых сценариев (XSS)</span></li> <li><span>Предотвращение подделки запроса (CSRF)</span></li> <li><span>Избегаем выполнения файлов</span></li> <li><span>Избегаем дебага</span></li> <li><span>Использование безопасного подключения через TLS</span></li> </ol><p>Первые три приведенные выше темы хорошо управляются кодированием, описанным выше в <strong>Views Security</strong>. </p><p>Yii также обеспечивает встроенную защиту CSRF для общих действий - и при необходимости ее можно отключить. В Планировщике собраний мне пришлось отключить CSRF, чтобы принимать сообщения, отправленные из <span>служб API Mailgun</span>.</p><p>Что касается воздействия файлов, фреймворк помогает свести к минимуму это, объединив все входные запросы в запрос к файлу web/index.php. Это значительно ограничивает необходимость написания кода приложения, который фильтрует запросы. Это хорошо управляется в одном месте.</p><p>Наконец, использование HTTPS может помочь защитить ваши подключения и работать с Yii для защиты пользователей. В начале этого года я написал о <span>Let"s Encrypt</span> - вы можете использовать этот учебник для установки HTTPS для приложений Yii.</p><h3>Хотите узнать больше?</h3><p>Если вам интересно прочитать более подробный материал по этим темам, Yii 1.x Framework предлагает эти туториалы. Конечно, они старше и менее специфичны для Yii 2, но они остаются полезными.</p><ul><li><span>Специальные темы: Безопасность</span></li> <li><span>Как написать безопасные приложения Yii</span></li> <li><span>Расширенное руководство Yii</span></li> </ul><h2>В заключение<br></h2><p>Надеюсь, вам понравился обзор безопасности в Yii2. Если вы интегрируете аспекты большинства или всех вышеперечисленных понятий в ваше приложение, вы должны получить в итоге безопасный веб-сервис. Вы можете проверить нашу серию <span>Пишем стартап на PHP</span> для <span>реальной реализации</span> некоторых из этих методов безопасности.</p><p>Следите за предстоящими учебниками в нашей <span>серии Yii2</span>, поскольку мы продолжаем погружаться в разные аспекты фреймворка. Я приветствую любые пожелания по темам. Вы можете опубликовать их в комментариях ниже или отправить мне по электронной почте на моем веб-сайте <span>Lookahead Consulting</span>.<br></p><p>Если вы хотите узнать, когда выйдет следующий учебник Yii2, подпишитесь на меня <span>@reifman</span> в Twitter или проверьте <span>мою страницу инструктора</span>. Моя страница инструктора будет включать все статьи из этой серии, как только они будут опубликованы. </p><p>Давайте работать вместе.</p><h2>Ссылки по теме</h2><ul><li><span>Yii Лучшие методы обеспечения безопасности</span></li> <li> <span>Базовый класс Security Yii</span> </li> <li><span>Yii2 Developer Exchange</span></li> </ul>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825120-programmirovanie-s-pomoschyu-yii2-bezopasnost" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Security" href="https://norma-studio.github.io/article5/220825120-programmirovanie-s-pomoschyu-yii2-bezopasnost" class="tm-article-body__tags-item-link">Security</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
42824</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
336</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
