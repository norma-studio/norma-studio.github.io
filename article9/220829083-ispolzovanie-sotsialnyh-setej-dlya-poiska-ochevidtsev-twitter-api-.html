
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Использование социальных сетей для поиска очевидцев:-Twitter-API-... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Использование социальных сетей для поиска очевидцев:-Twitter-API-... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Использование социальных сетей для поиска очевидцев:-Twitter-API-... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Использование социальных сетей для поиска очевидцев:-Twitter-API-... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Это вторая часть серии из двух частей, посвященная использованию социальных сетей для поиска очевидцев важных событий. В первой части я показал вам, как использовать API Instagram, чтобы найти свидетелей живой видеосессии Макклемора в Сиэтле. В этой части мы будем использовать API Twitter для поиска участников выступления президента Обамы в Сельме ...">
<meta property="og:description" content="Это вторая часть серии из двух частей, посвященная использованию социальных сетей для поиска очевидцев важных событий. В первой части я показал вам, как использовать API Instagram, чтобы найти свидетелей живой видеосессии Макклемора в Сиэтле. В этой части мы будем использовать API Twitter для поиска участников выступления президента Обамы в Сельме ...">
<meta name="twitter:description" content="Это вторая часть серии из двух частей, посвященная использованию социальных сетей для поиска очевидцев важных событий. В первой части я показал вам, как использовать API Instagram, чтобы найти свидетелей живой видеосессии Макклемора в Сиэтле. В этой части мы будем использовать API Twitter для поиска участников выступления президента Обамы в Сельме ...">
<meta property="aiturec:description" content="Это вторая часть серии из двух частей, посвященная использованию социальных сетей для поиска очевидцев важных событий. В первой части я показал вам, как использовать API Instagram, чтобы найти свидетелей живой видеосессии Макклемора в Сиэтле. В этой части мы будем использовать API Twitter для поиска участников выступления президента Обамы в Сельме ...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/48/posts/23580/image/obama%20on%20stage.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/48/posts/23580/image/obama%20on%20stage.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/48/posts/23580/image/obama%20on%20stage.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/48/posts/23580/image/obama%20on%20stage.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/48/posts/23580/image/obama%20on%20stage.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article9/220829083-ispolzovanie-sotsialnyh-setej-dlya-poiska-ochevidtsev-twitter-api-.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article9/220829083-ispolzovanie-sotsialnyh-setej-dlya-poiska-ochevidtsev-twitter-api-.html">
<link rel="canonical" href="https://norma-studio.github.io/article9/220829083-ispolzovanie-sotsialnyh-setej-dlya-poiska-ochevidtsev-twitter-api-.html">
<meta property="og:url" content="https://norma-studio.github.io/article9/220829083-ispolzovanie-sotsialnyh-setej-dlya-poiska-ochevidtsev-twitter-api-.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article9/220829083-ispolzovanie-sotsialnyh-setej-dlya-poiska-ochevidtsev-twitter-api-.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article9/220829083-ispolzovanie-sotsialnyh-setej-dlya-poiska-ochevidtsev-twitter-api-.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article9/220829083-ispolzovanie-sotsialnyh-setej-dlya-poiska-ochevidtsev-twitter-api-.html" title="Использование социальных сетей для поиска очевидцев:-Twitter-API-... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Использование социальных сетей для поиска очевидцев:-Twitter-API-... | envatomarket.ru | norma-studio.github.io" title="Использование социальных сетей для поиска очевидцев:-Twitter-API-... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/64533ghhjgjj.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article9/220829083-ispolzovanie-sotsialnyh-setej-dlya-poiska-ochevidtsev-twitter-api-.html" class="tm-user-info__username" title="
С. Парфенов" aria-label="
С. Парфенов">
С. Парфенов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Использование социальных сетей для поиска очевидцев:-Twitter-API-...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article9/220829083-ispolzovanie-sotsialnyh-setej-dlya-poiska-ochevidtsev-twitter-api-" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="PHP" href="https://norma-studio.github.io/article9/220829083-ispolzovanie-sotsialnyh-setej-dlya-poiska-ochevidtsev-twitter-api-" class="tm-article-snippet__hubs-item-link"><span>PHP</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article9/220829083-ispolzovanie-sotsialnyh-setej-dlya-poiska-ochevidtsev-twitter-api-.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/48/posts/23580/image/obama%20on%20stage.jpg">
    <meta itemprop="headline name" content="Использование социальных сетей для поиска очевидцев:-Twitter-API-... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Это вторая часть серии из двух частей, посвященная использованию социальных сетей для поиска очевидцев важных событий. В первой части я показал вам, как использовать API Instagram, чтобы найти свидетелей живой видеосессии Макклемора в Сиэтле. В этой части мы будем использовать API Twitter для поиска участников выступления президента Обамы в Сельме ...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Это вторая часть серии из двух частей, посвященная использованию социальных сетей для поиска очевидцев важных событий. В первой части я показал вам, как использовать API Instagram, чтобы найти свидетелей живой видеосессии Макклемора в Сиэтле. В этой части мы будем использовать API Twitter для поиска участников выступления президента Обамы в Сельме ...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/48/posts/23580/image/obama%20on%20stage.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></figure><p>Это вторая часть серии из двух частей, посвященная использованию социальных сетей для поиска очевидцев важных событий. В <span>первой части</span> я показал вам, как использовать API Instagram, чтобы найти свидетелей живой видеосессии Макклемора в Сиэтле. В этой части мы будем использовать API Twitter для поиска участников выступления президента Обамы в Сельме на мосту Эдмунда Петтуса.</p><p>Вы можете загрузить код для обоих эпизодов, используя ссылку репозитория GitHub на боковой панели. Вы также можете быть заинтересованы в моей серии Tuts +, <span>Работа с Twitter API</span>.</p><p>Возможности геопоиск Twitter более ограничены и поэтому требуют более подробного кода для использования. Geotagged сообщения в Twitter можно найти только за последние семь дней. И они доступны только по дате (а не по времени), поэтому вам нужно фильтровать результаты API для точности. </p><p>Я участвую в обсуждениях ниже. Если у вас есть вопрос или предложение, пожалуйста, напишите комментарий ниже. Вы также можете связаться со мной в Twitter <span>@reifman</span> или напрямую <span>отправить мне электронное письмо</span>. </p><h2>Что мы рассмотрели в первой части</h2><p>Телефоны, которые мы носим в наших карманах, записывают каждый наш шаг, делясь им с поставщиками сотовых телефонов и часто сторонними компаниями-разработчиками программного обеспечения, чьи мотивации в основном фокусируются на прибыли. </p><p>Многие люди не понимают, что они оставили геотаггинг в своих приложениях в социальных сетях, полностью предоставляя свое местоположение с каждым сообщением в социальных сетях. Это включало конгрессмена Республиканской партии Аарона Шока. AP использовала геотаг своей учетной записи Instagram, чтобы показать использование средств налогоплательщиков для экстравагантных частных рейсов и других роскошных мероприятий. <br></p><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23563/image/aaronshock%20-%20instagram2.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"><br></p><p>Таким образом, геотаггинг можно использовать для благих целей. В этой серии мы изучаем то, как журналисты и правоохранительные органы могут найти потенциальных свидетелей для важных событий, таких как преступление или происшествие с использованием социальных сетей.</p><p>Однако геотаггинг также можно использовать и с плохими намерениями. В Беркли компьютерные ученые и педагоги написали приложение <span>Ready или нет?</span>, чтобы продемонстрировать, как геотаггинг в Twitter и Instagram записывают каждый наш шаг. </p><p>Вот Twitter-аккаунт соаснователя Apple Стив Возняка в этом приложении:<br></p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23563/image/wozniak.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></figure><p>Геотегинг на Instagram и Twitter достаточно точен, чтобы позволить кому-то легко определить ваше место жительства, место работы и маршрут путешествия.</p><p>В этом эпизоде я проведу вас через API Twitter. Я предоставил репозиторий GitHub (ссылка находится на боковой панели), чтобы скачать его и самим попробовать этот код. Мое приложение Свидетель написано на<span> Yii Framework для PHP</span>, о котором вы можете узнать больше в моей серии статей <span>Программирование на Yii2</span> на Tuts+. </p><p>Если вы не хотите делиться своим местоположением с общественностью, приложение <span>Готов или нет?</span> предлагает ссылки и руководства по отключению этих функций (найдите ссылку на своей домашней странице). Честно говоря, я отключил их у себя себя, и я призываю вас тоже это сделать.</p><p>Если вы являетесь членом правоохранительных органов или журналистом, который хотел бы получить больше информации, пожалуйста, <span>свяжитесь со мной напрямую</span>. Я также был бы заинтересован в любом успешном использовании этого кода (в благих целях).<br></p><h2>Что мы сделали с Instagram</h2><p>В последнем эпизоде, мы использовали API Instagram, чтобы найти очевидцев для <span>видеоролика Mackelmore в 2013 году </span>для White Cadillac. Довольно легко нам удалось найти фотографию пользователя Instagram Джошуа Льюиса, на которой Маклемор вышел из своего автомобиля (круто, да?):</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23563/image/macklemore.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></figure><p>Теперь давайте начнем использовать API Twitter.</p><h2>Использование API Twitter</h2><p>Как и в случае с Instagram, вам необходимо войти в свою учетную запись Twitter и <span>зарегистрировать приложение разработчика</span>. Вы должны зарегистрировать такое приложение:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23580/image/twitter-create-app.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></figure><p>Twitter покажет вам данные о вашем приложении:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23580/image/twitter-app-created.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></figure><p>Вот страница настроек:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23580/image/twitter-app-settings.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></figure><p>Вот ключи и токены доступа для приложения. Обратите внимание на это.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23580/image/twitter-keys.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></figure><p>Затем прокрутите вниз и создайте токены доступа для своей учетной записи. Запишите их.</p><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23580/image/twitter-access-tokens.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></p><p>Добавьте все четыре этих ключа конфигурации и секреты в файл <code class="inline">/var/secure/eyew.ini</code>:</p><pre class="brush: bash noskimlinks noskimwords">mysql_host="localhost"mysql_db="eyew"mysql_un="xxxxxxxxx"mysql_pwd="xxxxxxxxxxxx"instagram_client_id = "4xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx7"instagram_client_secret = "1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx4"twitter_key = "zxxxxxxxxxxxxxxxxxxxx2"twitter_secret ="4xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxp"twitter_oauth_token="1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxs"twitter_oauth_secret="exxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxV"</pre><p>Затем мы создадим миграцию Active Record, чтобы создать нашу модель Twitter. Она сохранит твиты, которые мы получаем от вызовов API.</p><pre class="brush: bash noskimlinks noskimwords">&lt;?phpuse yii\db\Schema;use yii\db\Migration;class m150309_174014_create_twitter_table extends Migration{    public function up()    {          $tableOptions = null;          if ($this-&gt;db-&gt;driverName === "mysql") {              $tableOptions = "CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE=InnoDB";          }          $this-&gt;createTable("{{%twitter}}", [              "id" =&gt; Schema::TYPE_PK,              "moment_id" =&gt; Schema::TYPE_INTEGER . " NOT NULL",              "tweet_id" =&gt; Schema::TYPE_BIGINT . " NOT NULL",              "twitter_id" =&gt; Schema::TYPE_BIGINT . " NOT NULL",              "screen_name" =&gt; Schema::TYPE_STRING . " NOT NULL DEFAULT 0",              "text" =&gt; Schema::TYPE_TEXT . " NOT NULL ",              "tweeted_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",              "created_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",              "updated_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",          ], $tableOptions);                $this-&gt;addForeignKey("fk_twitter_moment", "{{%twitter}}", "moment_id", "{{%moment}}", "id", "CASCADE", "CASCADE");         }            public function down()    {      $this-&gt;dropForeignKey("fk_twitter_moment","{{%twitter}}");      $this-&gt;dropTable("{{%twitter}}");    }}</pre><p>Как и в <span>первой части</span>, вам нужно выполнить миграцию:</p><pre class="brush: bash noskimlinks noskimwords">./yii migrate/upYii Migration Tool (based on Yii v2.0.3)Total 1 new migration to be applied:    m150309_174014_create_twitter_tableApply the above migration? (yes|no) [no]:yes*** applying m150309_174014_create_twitter_table    &gt; create table {{%twitter}} ... done (time: 0.008s)    &gt; add foreign key fk_twitter_moment: {{%twitter}} (moment_id) references {{%moment}} (id) ... done (time: 0.007s)*** applied m150309_174014_create_twitter_table (time: 0.019s)Migrated up successfully.</pre><p>Затем я использовал генератор кода Yii2, Gii, чтобы создать модель и CRUD-контроллеры для модели Twitter. Если вы скачаете код репозитория GitHub, используя ссылку боковой панели в этом учебнике, вы также получите этот код.</p><h3>Создаем новый момент</h3><p>Поскольку Twitter ограничивает поиски геолокации максимум на 7 дней, я в конечном итоге выбрал <span>пятилетнюю юбилейную речь президента Обамы на мосту Эдмунда Петтуса</span>.</p><p>Я снова использовал Карты Google, чтобы получить координаты GPS для моста:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23580/image/selma-map.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></figure><p>Затем я создал Момент для для поиска речи. Я обновил его несколько раз, чтобы настроить географический радиус поиска (это мост) и временной диапазон:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23580/image/selma%20-%20moment.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></figure><h3>Поиск с помощью API Twitter<br></h3><p>Ограничения API Twitter - в том, что он позволяет вам искать по дате, например. 2015-03-07, тогда как Instagram индексируется точными отметками времени Unix. Поэтому мы должны начать наш поиск в Twitter на целый день вперед и искать назад.</p><p>Поскольку мы, скорее всего, получим много твитов за пределами желаемого временного диапазона, мы должны повторять вызовы в API Twitter. Twitter возвращает до 100 твитов за запрос API и позволяет 180 запросов в 15-минутном окне.</p><p>Я использую библиотеку <span>API Twitter Джеймса Мэллисона для PHP</span>. Вот как мы настраиваем библиотеку для вызовов:</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpnamespace app\models;use Yii;use yii\db\ActiveRecord;use app\models\Gram;use Instagram;use TwitterAPIExchange;...public function searchTwitter() {   date_default_timezone_set("America/Los_Angeles");          Yii::trace("start searchTwitter ".date("y-m-d h:m "));   // Load your Twitter application keys   $settings = array(       "oauth_access_token" =&gt; \Yii::$app-&gt;params["twitter"]["oauth_token"],       "oauth_access_token_secret" =&gt; \Yii::$app-&gt;params["twitter"]["oauth_secret"],       "consumer_key" =&gt; \Yii::$app-&gt;params["twitter"]["key"],       "consumer_secret" =&gt; \Yii::$app-&gt;params["twitter"]["secret"],   );   // Connect to Twitter    $twitter = new TwitterAPIExchange($settings);</pre><p>Первоначально мы запрашиваем 100 результатов от Twitter по нашим GPS-координатам до определенной даты. </p><pre class="brush: php noskimlinks noskimwords">public function searchTwitter() {   date_default_timezone_set("America/Los_Angeles");          Yii::trace("start searchTwitter ".date("y-m-d h:m "));   // Load your Twitter application keys   $settings = array(       "oauth_access_token" =&gt; \Yii::$app-&gt;params["twitter"]["oauth_token"],       "oauth_access_token_secret" =&gt; \Yii::$app-&gt;params["twitter"]["oauth_secret"],       "consumer_key" =&gt; \Yii::$app-&gt;params["twitter"]["key"],       "consumer_secret" =&gt; \Yii::$app-&gt;params["twitter"]["secret"],   );   // Connect to Twitter    $twitter = new TwitterAPIExchange($settings);   // Query settings for search   $url = "https://api.twitter.com/1.1/search/tweets.json";   $requestMethod = "GET";   // rate limit of 180 queries   $limit = 180;   $query_count=1;   $count = 100;   $result_type = "recent";   // calculate valid timestamp range   $valid_start = $this-&gt;start_at;   // $until_date and $valid_end = // start time + duration   $valid_end = $this-&gt;start_at + ($this-&gt;duration*60);   Yii::trace( "Valid Range: ".$valid_start." -&gt; ".$valid_end);   $until_date = date("Y-m-d",$valid_end+(24*3600)); // add one day    $distance_km = $this-&gt;distance/1000; // distance in km   // Unused: &amp;since=$since_date   // $since_date = "2015-03-05";    // Perform first query with until_date   $getfield ="?result_type=$result_type&amp;geocode=".$this-&gt;latitude.",".$this-&gt;longitude.",".$distance_km."mi&amp;include_entities=false&amp;until=$until_date&amp;count=$count";</pre><p>Мы записываем только твиты в пределах нашего точного диапазона времени, игнорируя другие результаты. Когда мы обрабатываем их, мы учитываем самый низкий идентификатор твита.</p><pre class="brush: php noskimlinks noskimwords">       $tweets = json_decode($twitter-&gt;setGetfield($getfield)                    -&gt;buildOauth($url, $requestMethod)                    -&gt;performRequest());        if (isset($tweets-&gt;errors)) {          Yii::$app-&gt;session-&gt;setFlash("error", "Twitter Rate Limit Reached.");          Yii::error($tweets-&gt;errors[0]-&gt;message);          return;        }       $max_id = 0;       Yii::trace( "Count Statuses: ".count($tweets-&gt;statuses));       Yii::trace( "Max Tweet Id: ".$max_id);       foreach ($tweets-&gt;statuses as $t) {         // check if tweet in valid time range         $unix_created_at = strtotime($t-&gt;created_at);                  Yii::trace("Tweet @ ".$t-&gt;created_at." ".$unix_created_at.":".$t-&gt;user-&gt;screen_name." ".(isset($t-&gt;text)?$t-&gt;text:""));         if ($unix_created_at &gt;= $valid_start &amp;&amp; $unix_created_at &lt;= $valid_end)         {           // print_r($t);            $i = new Twitter();           $i-&gt;add($this-&gt;id,$t-&gt;id_str,$t-&gt;user-&gt;id_str,$t-&gt;user-&gt;screen_name,$unix_created_at,(isset($t-&gt;text)?$t-&gt;text:""));         }                 if ($max_id ==0) {           $max_id = intval($t-&gt;id_str);         } else {           $max_id = min($max_id, intval($t-&gt;id_str));         }       }</pre><p>Затем мы делаем цикл, повторяя запросы в Twitter (до 179 раз), запрашивая дополнительные записи, которые были сделаны раньше, чем предыдущий идентификатор твита предыдущей партии. Другими словами, при последующих запросах вместо запроса до определенной даты мы запрашиваем max_id самого низкого идентификатора твита, который мы получили.</p><p>Мы останавливаемся, когда возвращается менее 100 записей или когда возвращенные твиты раньше нашего реального диапазона. </p><p>Если вам нужен доступ к более чем 18 000 твитов, вам нужно будет выполнить задание в фоне для вызова API Twitter, как это было сделано в нашей <span>другой серии API Twitter</span>.</p><p>Когда мы обрабатываем результаты API, нам необходимо фильтровать твиты, записывая только те, которые попадают в наше фактическое время начала и окончания.</p><p><em>Примечание. В API Twitter есть много разочаровывающих причуд, которые делают пейджинг сложнее, чем он должен быть. Довольно часто Twitter не возвращает никаких результатов без кода ошибки. В других случаях я обнаружил, что он возвращал небольшое количество результатов, но это не означает, что другой запрос не вернет больше. Нет четких способов узнать, когда Twitter вернул все результаты. Очень непоследовательно. Таким образом, вы можете заметить, что мой код содержит несколько интересных обходных решений, например, изучите $count_max_repeats.</em></p><pre class="brush: php noskimlinks noskimwords">       $count_repeat_max =0;       // Perform all subsequent queries with addition of updated maximum_tweet_id       while ($query_count&lt;=$limit) {         $prior_max_id = $max_id;         $query_count+=1;         Yii::trace( "Request #: ".$query_count);                  // Perform subsequent query with max_id         $getfield ="?result_type=$result_type&amp;geocode=".$this-&gt;latitude.",".$this-&gt;longitude.",".$distance_km."mi&amp;include_entities=false&amp;max_id=$max_id&amp;count=$count";                  $tweets = json_decode($twitter-&gt;setGetfield($getfield)                      -&gt;buildOauth($url, $requestMethod)                      -&gt;performRequest());          if (isset($tweets-&gt;errors)) {            Yii::$app-&gt;session-&gt;setFlash("error", "Twitter Rate Limit Reached.");            Yii::error($tweets-&gt;errors[0]-&gt;message);            return;          }          // sometimes twitter api fails          if (!isset($tweets-&gt;statuses)) continue;                    Yii::trace( "Count Statuses: ".count($tweets-&gt;statuses));          Yii::trace( "Max Tweet Id: ".$max_id);         foreach ($tweets-&gt;statuses as $t) {                      // check if tweet in valid time range           $unix_created_at = strtotime($t-&gt;created_at);           if ($unix_created_at &gt;= $valid_start &amp;&amp; $unix_created_at &lt;= $valid_end)           {              $i = new Twitter();           $i-&gt;add($this-&gt;id,$t-&gt;id_str,$t-&gt;user-&gt;id_str,$t-&gt;user-&gt;screen_name,$unix_created_at,(isset($t-&gt;text)?$t-&gt;text:""));           } else if ($unix_created_at &lt; $valid_start) {             // stop querying when earlier than valid_start             return;           }           $max_id = min($max_id,intval($t-&gt;id_str))-1;         }                if ($prior_max_id - $max_id &lt;=1 OR count($tweets-&gt;statuses)&lt;1) {           $count_repeat_max+=1;         }                    if ($count_repeat_max&gt;5) {                      // when the api isn"t returning more results           break;         }       } // end while </pre><p>Один из первых результатов, которые были возвращены, включал твит ниже <span>Фреда Дэвенпорта</span>, демонстрирующего президента Обаму на сцене:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23580/image/obama%20takes%20stage.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></figure><p>Вот это на Twitter:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23580/image/obama%20on%20stage.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></figure><p>Затем, когда вы просматриваете результаты дальше, вы можете найти еще много людей, которые написали об Обаме, включая средства массовой информации:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23580/image/selma-result%20tweets.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></figure><p>Теперь давайте сделаем более локальный поиск.</p><h3>Второй, более локальный поиск</h3><p>Key Arena - крупная концертная и спортивная арена в Сиэтле. В минувшие выходные они провели турнир по баскетболу среди женщин Pac-12:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23580/image/keyarena%20-%20calendar.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></figure><p>Давайте получим наши GPS-координаты для Key Arena с помощью Google Maps:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23580/image/map-keyarena.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></figure><p>Затем я создал и изменил момент, чтобы найти более длинный диапазон времени для твитов:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23580/image/moment%20keyarena.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></figure><p>И вот некоторые из результатов. Мой любимый:</p><blockquote>«Я хочу оставить эту игру в баскетбол. Я ненавижу баскетбол."</blockquote><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/23580/image/key-results.jpg" alt="Использование социальных сетей для поиска очевидцев: Twitter API ..." title="Использование социальных сетей для поиска очевидцев: Twitter API ..." width="50" height="50"></figure><p>По большей части мне кажется, что API Instagram намного мощнее, чем Twitter, и дает в целом более интригующие результаты. Однако это зависит от того, кого вы ищете. Если вы просто хотите идентифицировать людей, которые там были, любой API работает хорошо.</p> <h2>Что мы узнали</h2><p>Надеюсь, вам понравилась эта серия. Я нашел ее увлекательной и был впечатлен результатами. И в ней подчеркивается, что мы все должны заботиться о нашем уровне конфиденциальности в этой взаимосвязанной цифровой эпохе.</p><p>API для Instagram и Twitter - это невероятно мощные сервисы для поиска пользователей социальных сетей, которые находились поблизости от определенных мест в определенное время. Эта информация может быть использована как в благих так и не очень целях. Вероятно, вам стоит подумать об отключении геолокации - следуйте ссылкам в <span>приложении Готов или нет?</span></p><p>Вы также можете ознакомиться с <span>моей серией статей Работаем с API Twitter на Tuts +</span>.</p><p>Пожалуйста, не стесняйтесь оставлять свои вопросы и комментарии ниже. Вы также можете связаться со мной в Twitter <span>@reifman</span> или напрямую <span>отправить мне электронное письмо</span>. Я особенно хотел бы услышать комментарии от журналистов и правоохранительных органов, которые используют эти примеры.</p><p>Вы также можете просмотреть <span>мою страницу инструктора Tuts +</span>, чтобы найти другие учебники, которые я написал. </p><h2>Ссылки по теме</h2><ul><li><span>API Twitter</span></li> <li><span>API-интерфейс Instagram</span></li> <li><span>Готов или нет? (Обучение конфиденциальности)</span></li> <li> <span>Как мы получили пропущенный журнал Wired Magazine Evan Ratliff</span><br></li> <li><span>Yii2 Developer Exchange</span></li> </ul>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article9/220829083-ispolzovanie-sotsialnyh-setej-dlya-poiska-ochevidtsev-twitter-api-" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="PHP" href="https://norma-studio.github.io/article9/220829083-ispolzovanie-sotsialnyh-setej-dlya-poiska-ochevidtsev-twitter-api-" class="tm-article-body__tags-item-link">PHP</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
38230</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
534</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
