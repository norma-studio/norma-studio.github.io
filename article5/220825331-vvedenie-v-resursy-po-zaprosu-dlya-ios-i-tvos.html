
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Введение в ресурсы по запросу для iOS и tvOS
... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Введение в ресурсы по запросу для iOS и tvOS
... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Введение в ресурсы по запросу для iOS и tvOS
... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Введение в ресурсы по запросу для iOS и tvOS
... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Наряду с iOS 9 и watchOS 2 компания Apple представила ресурсы по запросу, новый API для доставки контента, уменьшающее объем пространства, которое приложение занимает на устройстве пользователя. Используя ресурсы по запросу вы можете отметить определенные активы вашего приложения, перенести их на сервер Apple, чтобы ваши пользователи могли загружат...">
<meta property="og:description" content="Наряду с iOS 9 и watchOS 2 компания Apple представила ресурсы по запросу, новый API для доставки контента, уменьшающее объем пространства, которое приложение занимает на устройстве пользователя. Используя ресурсы по запросу вы можете отметить определенные активы вашего приложения, перенести их на сервер Apple, чтобы ваши пользователи могли загружат...">
<meta name="twitter:description" content="Наряду с iOS 9 и watchOS 2 компания Apple представила ресурсы по запросу, новый API для доставки контента, уменьшающее объем пространства, которое приложение занимает на устройстве пользователя. Используя ресурсы по запросу вы можете отметить определенные активы вашего приложения, перенести их на сервер Apple, чтобы ваши пользователи могли загружат...">
<meta property="aiturec:description" content="Наряду с iOS 9 и watchOS 2 компания Apple представила ресурсы по запросу, новый API для доставки контента, уменьшающее объем пространства, которое приложение занимает на устройстве пользователя. Используя ресурсы по запросу вы можете отметить определенные активы вашего приложения, перенести их на сервер Apple, чтобы ваши пользователи могли загружат...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Simulator%20Screen%20Shot%2027%20Sep%202015,%203.29.34%20PM.png">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Simulator%20Screen%20Shot%2027%20Sep%202015,%203.29.34%20PM.png">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Simulator%20Screen%20Shot%2027%20Sep%202015,%203.29.34%20PM.png">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Simulator%20Screen%20Shot%2027%20Sep%202015,%203.29.34%20PM.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Simulator%20Screen%20Shot%2027%20Sep%202015,%203.29.34%20PM.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825331-vvedenie-v-resursy-po-zaprosu-dlya-ios-i-tvos.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825331-vvedenie-v-resursy-po-zaprosu-dlya-ios-i-tvos.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825331-vvedenie-v-resursy-po-zaprosu-dlya-ios-i-tvos.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825331-vvedenie-v-resursy-po-zaprosu-dlya-ios-i-tvos.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825331-vvedenie-v-resursy-po-zaprosu-dlya-ios-i-tvos.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825331-vvedenie-v-resursy-po-zaprosu-dlya-ios-i-tvos.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825331-vvedenie-v-resursy-po-zaprosu-dlya-ios-i-tvos.html" title="Введение в ресурсы по запросу для iOS и tvOS
... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Введение в ресурсы по запросу для iOS и tvOS
... | envatomarket.ru | norma-studio.github.io" title="Введение в ресурсы по запросу для iOS и tvOS
... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/45343254534.jpg" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825331-vvedenie-v-resursy-po-zaprosu-dlya-ios-i-tvos.html" class="tm-user-info__username" title="
С. Баранов" aria-label="
С. Баранов">
С. Баранов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Введение в ресурсы по запросу для iOS и tvOS
...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825331-vvedenie-v-resursy-po-zaprosu-dlya-ios-i-tvos" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="iOS" href="https://norma-studio.github.io/article5/220825331-vvedenie-v-resursy-po-zaprosu-dlya-ios-i-tvos" class="tm-article-snippet__hubs-item-link"><span>iOS</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825331-vvedenie-v-resursy-po-zaprosu-dlya-ios-i-tvos.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Simulator%20Screen%20Shot%2027%20Sep%202015,%203.29.34%20PM.png">
    <meta itemprop="headline name" content="Введение в ресурсы по запросу для iOS и tvOS
... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Наряду с iOS 9 и watchOS 2 компания Apple представила ресурсы по запросу, новый API для доставки контента, уменьшающее объем пространства, которое приложение занимает на устройстве пользователя. Используя ресурсы по запросу вы можете отметить определенные активы вашего приложения, перенести их на сервер Apple, чтобы ваши пользователи могли загружат...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Наряду с iOS 9 и watchOS 2 компания Apple представила ресурсы по запросу, новый API для доставки контента, уменьшающее объем пространства, которое приложение занимает на устройстве пользователя. Используя ресурсы по запросу вы можете отметить определенные активы вашего приложения, перенести их на сервер Apple, чтобы ваши пользователи могли загружат...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



   <h2>Введение</h2> <p>Наряду с iOS 9 и watchOS 2 компания Apple представила ресурсы по запросу, новый API для доставки контента, уменьшающее объем пространства, которое приложение занимает на устройстве пользователя. Используя ресурсы по запросу вы можете отметить определенные активы вашего приложения, перенести их на сервер Apple, чтобы ваши пользователи могли загружать их по мере необходимости. В этом уроке я расскажу вам об основах ресурсов по запросу, создав простое приложение для просмотра изображений.</p> <h2>Необходимые условия</h2> <p>Для этого урока нам потребуется Xcode 7+ и навыки разработки для iOS. Также необходимо будет скачать стартовый проект на <span>GitHub</span>.</p> <h2> <span class="sectionnum">1. Ресурсы по требованию</span></h2> <h3>Преимущества</h3> <p>Ресурсы по запросу были представлены в iOS 9 и watchOS 2 с основной целью - сократить объем занимаемого места в приложениях на устройстве. Другим важным преимуществом ресурсов по запросу является то, что ваше приложение может быть загружено и открыто пользователями намного быстрее.</p> <p>Ресурсы по требованию работают, назначая уникальные <strong>теги</strong> ресурсам в Xcode, чтобы создать так называемый <strong>пакет активов</strong>. Эти пакеты могут включать в себя все, что связано с каталогами ресурсов (изображения, текстуры SpriteKit, данные и т. д.) Или даже с другими файлами, такими как OpenGL и Metal Shaders, а также сцены SpriteKit и  SceneKit и системы частиц.</p> <p>Когда вы отправляете свое приложение в App Store, эти ресурсы также загружаются и размещаются там для загрузки в любое время. Чтобы загрузить пакеты активов во время выполнения в  приложении, вы просто используете тег для каждого пакета, который вы назначили в Xcode.</p> <h3>Категории</h3> <p>Двумя основными аспектами приложения, использующего ресурсы по требованию, являются <strong>пакет приложений</strong>, который заполнен исполняемым кодом для вашего приложения и основных активов, таких как значки пользовательского интерфейса и <strong>пакеты активов</strong>.</p> <p>Для этих пакетов активов существуют три основные категории, которые вы можете организовать в Xcode:<br></p> <ul> <li> <strong>Первоначальная установка:</strong> это для контента, который требуется для запуска приложения в первый раз, но его можно удалить позже. Это может включать в себя первые несколько уровней игры, которые больше не нужны, когда игрок продвигается достаточно далеко в игре.</li> <li> <strong><strong>Prefetched:</strong> </strong>эта категория включает контент, который вы хотите загрузить сразу после завершения установки. Этот тип контента рекомендуется для ресурсов, которые не требуются для работы вашего приложения после его установки, но которые необходимы для лучшего удобства пользователей. Хорошим примером являются учебники для игры.</li> <li> <strong>On Demand:</strong> эта категория предназначена для контента, который вам нужен в более позднее время, и ваше приложение может функционировать без него. При работе с ресурсами по требованию это наиболее распространенный тип категории, который вы будете использовать.</li> </ul> <h3>Ограничения</h3> <p>Приложения, созданные с поддержкой ресурсов по требованию, также должны придерживаться следующих ограничений в отношении размера файла:</p> <ul> <li> <strong>2GB</strong> для <strong>пакета приложений для iOS</strong> </li> <li> <strong>2GB</strong> для <strong>начальных тегов установки</strong><br> </li> <li> <strong>2GB</strong> для <strong>предварительно выбранных</strong> тегов<br> </li> <li> <strong>2ГБ</strong> для использования ресурсов. Это важно только при запуске приложения и использовании ресурсов по требованию.<br> </li> <li> <strong>512МБ</strong> для каждого отдельного пакета активов. Ни один ярлык не может содержать больше, чем этот объем данных. Если вы перейдете этот предел, Xcode предоставит вам предупреждение и позволит вам еще тестировать и разрабатывать ваше приложение. Однако попытки подачи заявок в App Store потерпят неудачу.<br> </li> <li> <strong>20ГБ</strong> для всех ресурсов, размещенных Apple. Это общий объем ресурсов, которые ваше приложение может загружать в любой момент времени. В то время как только 2 ГБ могут использоваться в любой момент времени, если на устройстве пользователя достаточно памяти, до 20 ГБ ваших ресурсов можно загрузить и сделать доступным для вашего приложения в любое время.</li> </ul> <h3>Нарезка приложений</h3> <p>Обратите внимание, что общая сумма в 20 ГБ не учитывает <strong><span>аппликацию приложений</span></strong>, пока все остальные суммы делают. Что такое нарезка приложений? Срезание приложений - еще одна функция, которая была внедрена в iOS 9 для уменьшения размера приложений. Он делает это, только просматривая ресурсы, специфичные для устройства, на котором установлено приложение. Например, если каталоги активов используются правильно, приложение, установленное на iPhone 6 Plus или 6s Plus, нужно загрузить только 3-кратные изображения и не беспокоиться о масштабах 1x и 2x. Для ресурсов по требованию 20 ГБ общих ресурсов,  которые вы можете загрузить на серверы App Store, - это <strong>общая</strong> сумма для всех типов устройств. Все остальные ограничения предназначены для каждого конкретного устройства, на котором установлено приложение.</p> <h3>Удаление ресурсов по требованию</h3> <p>С точки зрения удаления данных (очистки) пакеты активов, загруженные вашим приложением, будут удалены только тогда, когда устройство, на котором установлено ваше приложение, исчерпало доступное пространство. Когда это произойдет, система ресурсов по требованию будет смотреть на все приложения на устройстве, и, выбрав ее, вы увидите свойство сохранения каждого пакета активов, а также когда оно было использовано в последний раз. Важно отметить, что пакеты активов для вашего приложения никогда не будут очищены во время работы вашего приложения.</p> <h2> <span class="sectionnum">2. Назначение и организация тегов</span></h2> <p>Откройте проект стартера в Xcode и запустите приложение в iOS Simulator. На данный момент это основное приложение содержит коллекцию изображений, каждая из которых имеет комбинацию одного из трех цветов (красного, зеленого или синего) и одной из четырех фигур (круг, квадрат, звезда или шестиугольник). При запуске приложения перейдите в <strong>«Цвета» &gt; «Красный»</strong>, и на экране появится одно изображение красного круга.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Simulator%20Screen%20Shot%2027%20Sep%202015,%203.29.34%20PM.png" alt="Введение в ресурсы по запросу для iOS и tvOS..." title="Введение в ресурсы по запросу для iOS и tvOS..." width="50" height="50"></figure><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Simulator%20Screen%20Shot%2027%20Sep%202015,%203.29.36%20PM.png" alt="Введение в ресурсы по запросу для iOS и tvOS..." title="Введение в ресурсы по запросу для iOS и tvOS..." width="50" height="50"></figure><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Simulator%20Screen%20Shot%2027%20Sep%202015,%203.29.38%20PM.png" alt="Введение в ресурсы по запросу для iOS и tvOS..." title="Введение в ресурсы по запросу для iOS и tvOS..." width="50" height="50"></figure><p>В этом приложении мы собираемся создать в общей сложности семь пакетов активов, по одному для каждого цвета и по одному для каждой фигуры. Еще одна замечательная особенность ресурсов по требованию заключается в том, что одному ресурсу может быть назначено более одного тега. Красный круг, например, может быть частью как пакета <strong>Red</strong> активов, так и пакета активов <strong>Circle</strong>.</p> <p>API ресурсов по требованию также достаточно умен, чтобы не загружать и не копировать один и тот же ресурс дважды. Другими словами, если приложение уже загрузило пакет <strong>Red</strong> asset, а затем захотелось загрузить пакет ресурсов <strong>Circle</strong>, изображение с красным кружком не будет загружено снова.</p> <p>В Xcode откройте <strong>Assets.xcassets</strong>. Вы должны увидеть все двенадцать изображений, как показано ниже.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Screen%20Shot%202015-09-27%20at%203.42.26%20PM.png" alt="Введение в ресурсы по запросу для iOS и tvOS..." title="Введение в ресурсы по запросу для iOS и tvOS..." width="50" height="50"></figure><p>Затем выберите набор изображений <strong>Blue Square</strong> и откройте <strong>Attributes Inspector</strong> справа.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Screen%20Shot%202015-09-27%20at%203.45.01%20PM.png" alt="Введение в ресурсы по запросу для iOS и tvOS..." title="Введение в ресурсы по запросу для iOS и tvOS..." width="50" height="50"></figure><p>Вы увидите, что <strong>инспектор атрибутов</strong> включает в себя новый раздел <strong>тегов ресурсов спроса</strong>, в котором вы указываете теги для каждого ресурса. Чтобы установить синий квадрат, введите <strong>«Синий»</strong> и <strong>«Квадрат»</strong> в поле <strong>«Метки ресурсов по запросу»</strong>. Это означает, что у установленного изображения есть два присваиваемых им тега.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Screen%20Shot%202015-09-27%20at%203.48.51%20PM.png" alt="Введение в ресурсы по запросу для iOS и tvOS..." title="Введение в ресурсы по запросу для iOS и tvOS..." width="50" height="50"></figure><p>Обратите внимание, что стартовый проект уже включает теги ресурсов для девяти из двенадцати наборов изображений. Это объясняет, почему Xcode предоставляет параметры автозаполнения для вас при вводе этих тегов.</p> <p>После того, как вы завершили назначение тегов для набора изображений <strong><strong>Blue Square</strong></strong>, добавьте правильные теги к наборам изображений <strong>Green Hexagon</strong> и <strong>Red Circle</strong>, как показано ниже.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Screen%20Shot%202015-09-27%20at%204.02.23%20PM.png" alt="Введение в ресурсы по запросу для iOS и tvOS..." title="Введение в ресурсы по запросу для iOS и tvOS..." width="50" height="50"></figure><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Screen%20Shot%202015-09-27%20at%204.02.36%20PM.png" alt="Введение в ресурсы по запросу для iOS и tvOS..." title="Введение в ресурсы по запросу для iOS и tvOS..." width="50" height="50"></figure><p>Правильно настроенные метки ресурса по запросу, откройте <strong>навигатор проекта</strong> слева. Откройте вкладку <strong>«Теги ресурса»</strong> вверху и выберите <strong>«Предварительно установленный фильтр»</strong> вверху.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Screen%20Shot%202015-09-27%20at%204.08.29%20PM.png" alt="Введение в ресурсы по запросу для iOS и tvOS..." title="Введение в ресурсы по запросу для iOS и tvOS..." width="50" height="50"></figure><p>Теперь вы можете увидеть, насколько велик каждый пакет активов и какие ресурсы находятся в каждом из них. Фильтр <strong>«Все»</strong> показывает вам каждый из ресурсов по требованию. Фильтр <strong>Prefetched</strong> показывает ресурсы по требованию для каждой категории и позволяет переместить ресурсы из одной категории в другую:</p> <ul> <li> <strong>Исходные теги установки</strong><br> </li> <li><strong>Предварительно запрограммированный заказ тега</strong></li> <li><strong>Скачать только по запросу</strong></li> </ul> <p><strong></strong>Эти разделы отражают три категории пакетов активов, которые я изложил ранее. Важно отметить, что пакеты активов, которые вы разместили в разделе <strong>«Предварительно загруженный тег»</strong>, начнут загружаться в том порядке, в котором они появятся.<br></p> <p>С тегами, назначенными каждому набору изображений, пришло время начать доступ к ресурсам в проекте.</p> <h2> <span class="sectionnum">3. Доступ к ресурсам по запросу</span></h2> <p>Доступ к пакетам активов, размещенным на серверах App Store, обрабатывается новым классом <code class="inline">NSBundleResourceRequest</code>. Экземпляр этого класса создается с помощью набора тегов, который вы хотите использовать. Он сообщает системе о вашем использовании соответствующих пакетов активов. Освобождение этих объектов <code class="inline">NSBundleResourceRequest</code> является наилучшим и простым способом сообщить операционной системе, когда вы больше не используете какой-либо конкретный пакет активов. Это важно, чтобы вы не превышали лимит 2 ГБ для ресурсов, которые используются.</p> <p>В своем проекте откройте <strong>DetailViewController.swift</strong> и добавьте следующее свойство в класс <code class="inline">DetailViewController</code>.</p> <pre class="brush: javascript noskimlinks noskimwords">var request: NSBundleResourceRequest!</pre> <p>Затем замените метод <code class="inline">viewDidAppear(_:)</code> следующим образом:</p> <pre class="brush: javascript noskimlinks noskimwords">override func viewDidAppear(animated: Bool) {     super.viewDidAppear(animated)          request = NSBundleResourceRequest(tags: [tagToLoad])     request.beginAccessingResourcesWithCompletionHandler { (error: NSError?) -&gt; Void in         //  Called on background thread         if error == nil {             NSOperationQueue.mainQueue().addOperationWithBlock({ () -&gt; Void in                 self.displayImages()             })         }     } }</pre> <p>С помощью этого кода вы сначала инициализируете свойство <code class="inline">request</code> с помощью набора, который включает один тег. Набор тегов, которые вы предоставили этому инициализатору, содержит строковые значения. В этом случае мы используем свойство <code class="inline">tagToLoad</code>,  которое задается предыдущими контроллерами представлений в приложении.</p> <p>Затем мы начинаем загрузку пакетов активов для указанных тегов, вызывая <code class="inline">beginAccessingResourcesWithCompletionHandler(_:)</code>. Этот метод будет обращаться ко всем ресурсам с указанными тегами и автоматически загрузит их при необходимости. После доступа к ресурсам таким образом весь ваш другой код для загрузки этих ресурсов в ваше приложение остается прежним.</p> <p>Обратите внимание: если вы хотите получить доступ только к ресурсам, которые уже были загружены, без загрузки содержимого, вы можете использовать метод <code class="inline">conditionalBeginAccessingResourcesWithCompletionHandler(_)</code>.</p> <p>Как показано в приведенном выше коде, важно помнить об этом обработчике завершения, так как он вызывается в фоновом потоке. Это означает, что любые обновления пользовательского интерфейса, которые вы хотите выполнить после завершения, должны быть выполнены в основном потоке.</p> <p>Создайте и запустите приложение снова и выберите цвет или форму для просмотра в приложении. Вы должны увидеть все три цветных изображения для определенной фигуры или всех четырех фигур для определенного цвета.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Simulator%20Screen%20Shot%2027%20Sep%202015,%205.57.03%20PM.png" alt="Введение в ресурсы по запросу для iOS и tvOS..." title="Введение в ресурсы по запросу для iOS и tvOS..." width="50" height="50"></figure><p>Так просто использовать ресурсы по требованию. Теперь вы успешно реализовали ресурсы по требованию в приложении.</p> <p>Важной функцией отладки, доступной в Xcode 7, является возможность видеть, какие пакеты активов вы загрузили и какие из них используются. Чтобы просмотреть это, перейдите к <strong>Debug Navigator</strong> с запущенным приложением и выберите <strong>«Диск»</strong>. Вы увидите экран, подобный показанному ниже. <strong>On Demand Resources</strong> - это раздел, который нас интересует.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/855/posts/24929/image/Screen%20Shot%202015-09-27%20at%206.15.47%20PM.png" alt="Введение в ресурсы по запросу для iOS и tvOS..." title="Введение в ресурсы по запросу для iOS и tvOS..." width="50" height="50"></figure><p>В качестве примера давайте теперь изменим приоритет загрузки, чтобы сразу загрузить некоторые ресурсы. В то же время мы изменим приоритеты сохранения пакетов активов, чтобы пакеты активов <strong>Hexagon</strong> и <strong>Star </strong>были очищены до пакетов активов <strong>Circle</strong> и <strong>Square</strong>. Обновите реализацию метода <code class="inline">viewDidAppear(_:)</code>, как показано ниже.<br></p> <pre class="brush: javascript noskimlinks noskimwords">override func viewDidAppear(animated: Bool) {     super.viewDidAppear(animated)          request = NSBundleResourceRequest(tags: [tagToLoad])          request.loadingPriority = NSBundleResourceRequestLoadingPriorityUrgent     NSBundle.mainBundle().setPreservationPriority(1.0, forTags: ["Circle", "Square"])     NSBundle.mainBundle().setPreservationPriority(0.5, forTags: ["Hexagon", "Star"])          request.beginAccessingResourcesWithCompletionHandler { (error: NSError?) -&gt; Void in         //  Called on background thread         if error == nil {             NSOperationQueue.mainQueue().addOperationWithBlock({ () -&gt; Void in                 self.displayImages()             })         }     } }</pre> <p>После инициализации запроса мы устанавливаем свойство <code class="inline">loadPriority</code> <code class="inline">NSBundleResourceRequestLoadingPriorityUrgent</code>. В качестве альтернативы вы можете присвоить это значение между <strong>0.0</strong> и <strong>1.0</strong>, чтобы диктовать приоритет загрузки в вашем приложении.</p> <p>Преимущество использования этой константы состоит в том, что она автоматически дает запросу самый высокий приоритет загрузки, но также игнорирует текущую активность ЦП. В некоторых ситуациях, если процессор процессора используется в значительной степени, загрузка пакета активов может быть отложена.</p> <p>Затем мы устанавливаем приоритет сохранения для всех четырех тегов формы. Это делается путем вызова метода <code class="inline">setPreservationPriority(_:forTags:)</code>  основного пакета приложения. Мы теперь гарантировали, что если система ресурсов по требованию должна очистить некоторые активы от нашего приложения, пакеты активов <strong>Hexagon</strong> и <strong>Star</strong> будут удалены первыми.</p> <h2> <span class="sectionnum">4. Лучшие практики</span></h2> <p>Теперь, когда вы знаете, как реализовать ресурсы по требованию в приложении iOS, я хочу кратко рассказать вам о нескольких лучших практиках, которые следует учитывать.</p> <h3>Сохраняйте как можно меньше индивидуальных тегов</h3> <p>В дополнение к сокращению времени загрузки и повышению доступности ресурсов, максимально уменьшая количество активов, предотвращает чрезмерную очистку системы. Это когда система ресурсов по требованию должна  освобождать определенное количество места и в итоге освобождает гораздо больше, чем необходимо.</p> <p>Например, если системе необходимо высвободить 50 МБ пространства и, основываясь на упомянутых выше условиях, решили, что 400-мегабайтный пакет активов из вашего приложения был наиболее подходящим для удаления, система будет чрезмерно чистить 350 МБ. Это означает, что если ваше приложение потеряло больше данных, чем нужно, потребуется снова загрузить все ресурсы, связанные с этим тегом. Рекомендуемый размер для отдельных тегов составляет приблизительно 64МБ.</p> <h4>Загрузить теги в Advance</h4> <p>Если ваше приложение имеет очень предсказуемое взаимодействие с пользователем, то лучше начать загрузку ресурсов до того, как они действительно понадобятся. Это должно улучшить пользовательский опыт, так как им не нужно смотреть на экран загрузки, пока ваше приложение загружает контент.</p> <p>Игры - общий пример. Если игрок только что завершил уровень 5, то неплохо начать загрузку уровня 7, пока она играет на уровне 6.</p> <h4>Правильно прекратите доступ к ресурсам</h4> <p>Когда вы закончите использовать определенный пакет активов, убедитесь, что ваш <code class="inline">NSBundleResourceRequest</code> объект освобожден или вы вызываете на нем метод <code class="inline">endAccessingResources</code>.</p> <p>Это не только предотвратит попадание вашего приложения на ограничение 2 ГБ для использования ресурсов, но также поможет системе ресурсов по требованию узнать, когда ваше приложение использует эти ресурсы, а это значит, что он может лучше решить, что делать, если больше места необходимо.</p> <h2> <span class="sectionnum">5. Ресурсы по запросу для tvOS</span></h2> <p><span>Недавно я писал о развитии tvOS</span>, и в этом уроке я упомянул об ограничениях приложений tvOS. Максимальный размер для пакета приложений - 200 МБ, поэтому настоятельно рекомендуется использовать ресурсы по требованию в ваших приложениях tvOS, когда это возможно.</p> <p>Из-за сходства tvOS и iOS API и ограничения хранения (за исключением пакета приложений) для ресурсов по требованию одинаковы. Однако при работе с ресурсами по требованию на tvOS важно также помнить, что все активы, такие как изображения, имеют одну версию масштаба 1x, поэтому размер ваших пакетов активов, как показано в Xcode, не будет уменьшаться из-за наложения приложений.</p> <h2>Заключение</h2> <p>Ресурсы по требованию в iOS 9 и tvOS - отличный способ уменьшить размер вашего приложения и обеспечить лучший пользовательский интерфейс для пользователей, загружающих и использующих ваше приложение. Хотя его очень легко реализовать и настроить, есть немало деталей, которые вы должны иметь в виду, чтобы система ресурсов по требованию работала безупречно без чрезмерного времени загрузки и ненужной очистки данных.</p> <p>Как всегда, не забудьте оставить свои комментарии и отзывы в комментариях ниже.</p> 

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825331-vvedenie-v-resursy-po-zaprosu-dlya-ios-i-tvos" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="iOS" href="https://norma-studio.github.io/article5/220825331-vvedenie-v-resursy-po-zaprosu-dlya-ios-i-tvos" class="tm-article-body__tags-item-link">iOS</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
38582</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
664</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
