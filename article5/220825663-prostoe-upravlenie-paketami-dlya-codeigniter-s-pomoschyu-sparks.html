
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Простое управление пакетами для CodeIgniter с помощью Sparks... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Простое управление пакетами для CodeIgniter с помощью Sparks... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Простое управление пакетами для CodeIgniter с помощью Sparks... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Простое управление пакетами для CodeIgniter с помощью Sparks... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Этот учебник переплетает обзор архитектуры и использования системы искр начального уровня с созданием dovecote - простой искры для управления данными RSS....">
<meta property="og:description" content="Этот учебник переплетает обзор архитектуры и использования системы искр начального уровня с созданием dovecote - простой искры для управления данными RSS....">
<meta name="twitter:description" content="Этот учебник переплетает обзор архитектуры и использования системы искр начального уровня с созданием dovecote - простой искры для управления данными RSS....">
<meta property="aiturec:description" content="Этот учебник переплетает обзор архитектуры и использования системы искр начального уровня с созданием dovecote - простой искры для управления данными RSS....">
<meta property="og:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=403/net/uploads/legacy/1092_sparks/installing_sparks.png">
<meta property="aiturec:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=403/net/uploads/legacy/1092_sparks/installing_sparks.png">
<meta name="twitter:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=403/net/uploads/legacy/1092_sparks/installing_sparks.png">
<meta property="vk:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=403/net/uploads/legacy/1092_sparks/installing_sparks.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=403/net/uploads/legacy/1092_sparks/installing_sparks.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825663-prostoe-upravlenie-paketami-dlya-codeigniter-s-pomoschyu-sparks.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825663-prostoe-upravlenie-paketami-dlya-codeigniter-s-pomoschyu-sparks.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825663-prostoe-upravlenie-paketami-dlya-codeigniter-s-pomoschyu-sparks.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825663-prostoe-upravlenie-paketami-dlya-codeigniter-s-pomoschyu-sparks.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825663-prostoe-upravlenie-paketami-dlya-codeigniter-s-pomoschyu-sparks.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825663-prostoe-upravlenie-paketami-dlya-codeigniter-s-pomoschyu-sparks.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825663-prostoe-upravlenie-paketami-dlya-codeigniter-s-pomoschyu-sparks.html" title="Простое управление пакетами для CodeIgniter с помощью Sparks... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Простое управление пакетами для CodeIgniter с помощью Sparks... | envatomarket.ru | norma-studio.github.io" title="Простое управление пакетами для CodeIgniter с помощью Sparks... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/ded38a8520cf75a955c11fc92a1a403e.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825663-prostoe-upravlenie-paketami-dlya-codeigniter-s-pomoschyu-sparks.html" class="tm-user-info__username" title="
В. Самсонов" aria-label="
В. Самсонов">
В. Самсонов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Простое управление пакетами для CodeIgniter с помощью Sparks...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825663-prostoe-upravlenie-paketami-dlya-codeigniter-s-pomoschyu-sparks" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="PHP" href="https://norma-studio.github.io/article5/220825663-prostoe-upravlenie-paketami-dlya-codeigniter-s-pomoschyu-sparks" class="tm-article-snippet__hubs-item-link"><span>PHP</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825663-prostoe-upravlenie-paketami-dlya-codeigniter-s-pomoschyu-sparks.html" />
    <link itemprop="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=403/net/uploads/legacy/1092_sparks/installing_sparks.png">
    <meta itemprop="headline name" content="Простое управление пакетами для CodeIgniter с помощью Sparks... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Этот учебник переплетает обзор архитектуры и использования системы искр начального уровня с созданием dovecote - простой искры для управления данными RSS....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Этот учебник переплетает обзор архитектуры и использования системы искр начального уровня с созданием dovecote - простой искры для управления данными RSS....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p><span>Sparks</span> - это новая система управления пакетами для CodeIgniter, которая расширяет ядро с поддержкой gem-подобных искр. </p><p>Этот учебник переплетает обзор архитектуры и использования системы искр начального уровня с созданием dovecote - простой искры для управления данными RSS.</p> <p></p> <hr><h2>Введение</h2> <blockquote><p>Пакеты - это блоки кода с возможностью его повторного использования, которые могут сделать жизнь разработчиков намного проще.</p></blockquote> <p>Разработчики CodeIgniter давно завидовали менеджерам пакетов, таким как gems и npm, системам, которые предоставляют своим соответствующим сообществам инструменты и центральный репозиторий для разработки, переработки и совместного использования полезных компонентов приложения. Теперь ожидание закончилось. Благодаря новой системе -  искры -разработчикам CodeIgniter, наконец, можно порадоваться, так у них появилась наконец их собственная  растущая система управления пакетами.</p> <h3>Обзор</h3> <p>Если вы раньше не работали с ними, просто подумайте о пакетах как блоках повторно используемого кода, которые могут сделать жизнь разработчиков намного проще. Может быть, вам нужен интерфейс для хранилища в облаке Amazon? Пропустите поздние ночи, изучая документацию S3 и просто хватайте <span>искру</span>.</p> <p>Со своей стороны, система искр состоит из трех частей:</p> <ol><li>Центральный репозиторий (<span>getsparks.org</span>) для хранения и обмена искрами</li> <li>Утилита для управления искрами, установленными в данном приложении CodeIgniter</li> <li>Сами искры</li> </ol><p>Для целей этого урока мы представим первые два, но сосредоточимся на разработке с искрами и некоторых основных соображениях при разработке своей искры. Звучит неплохо? Давайте посмотрим, как это делается.</p> <hr><h2>Шаг 1: Установка искры</h2> <p>Официальная документация: искры предназначены для интеграции в ядро CodeIgniter, возможно, сразу же после выхода в версии 2.1. Но поскольку они не является частью установки по умолчанию, все же вам нужно настроить систему вручную.</p> <p>Если вы работаете под OSX или Linux, или если в Windows установлен интерфейс командной строки PHP, установка выполняется так же просто, как установка чистой копии <span>CodeIgniter</span> и выдача следующего в каталоге установки:</p> <pre class="brush: php noskimlinks noskimwords">$ php -r "$(curl -fsSL http://getsparks.org/go-sparks)"</pre> <p>Если все пойдет хорошо, вы должны увидеть что-то вроде этого:</p> <div> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=403/net/uploads/legacy/1092_sparks/installing_sparks.png" alt="Простое управление пакетами для CodeIgniter с помощью Sparks..." title="Простое управление пакетами для CodeIgniter с помощью Sparks..." width="50" height="50"></div> <p>Если по какой-то причине это не сработало, или если вы работаете в Windows и не добавили PHP в свой командный путь, вы также можете установить искры вручную. Потребуется немного больше работы, но результат тот же:</p> <ol><li>Добавление каталога с именем <code>sparks</code> в корень вашего каталога codeigniter</li> <li>Добавление пользовательского класса <span>Loader</span> в <code>application/core/MY_Loader.php</code> </li> <li>(необязательно) Загрузка и извлечение<span> утилиты командной строки sparks</span> в каталог codeigniter</li> </ol><p>Теперь ваша установка CodeIgniter должна быть пропатчена, чтобы поддерживать искры.</p> <hr><h2>Шаг 2: Начало работы</h2> <p>В средневековой Европе каждый усадебный дом включал небольшую флигель для голубей под названием голубятня. Поскольку мы будем создавать искру, которая включает в себя как твиты, так и фид, то это имя достаточно хорошо подходит. Но оно также отвечает единственному требованию при именовании: чтобы быть включенным в репозиторий в GetSparks.org,</p> <blockquote> <p>имена проектов GetSparks должны быть уникальными</p> </blockquote> <h3>Обозначение искры</h3> <p>Прежде чем мы сможем начать писать код, нам нужно будет развернуть проект. В директории <code>sparks</code> в корне вашей установки CodeIgniter (создайте ее, если она не существует) добавьте новую папку для хранения искры:</p> <pre class="brush: php noskimlinks noskimwords">/sparks/dovecote</pre> <p>Согласно соглашению искры организованы по версиям, поэтому нам понадобится вложенная папка для хранения первого черновика. <code>0.0.1</code> - хорошее место для начала. </p> <pre class="brush: php noskimlinks noskimwords">/sparks/dovecote/0.0.1</pre> <p>В этой папке будут выполняться все действия. Когда в остальной части учебника я буду упоминать «директория искры» - это она.</p> <h3>Файл <code>spark.info</code></h3> <p>До сих пор все выглядит довольно гладко, но мы готовы начать их заполнять. Первая часть искры - и единственный файл, технически <em>необходимый</em> для искровой утилиты, - <code>spark.info</code>. Создайте новый файл с именем <code>spark.info</code> в своей spak директории и добавьте следующее:</p> <pre class="brush: php noskimlinks noskimwords">name: dovecoteversion: 0.0.1compatibility: 2.0.2dependencies:    Atomizer: 0.0.1tags: ["twitter","api","social"]</pre> <p>Эти поля представляют собой всю информацию, необходимую утилите искр для управления версией и зависимостями всех искр в этой установке CodeIgniter. Утилита будет искать пять позиций, но требуются только первые три:</p> <ul><li> <code>name</code> - уникальный идентификатор искры</li> <li> <code>version</code> - текущая версия </li> <li> <code>compatibility</code> - минимальная версия CodeIgniter</li> <li> <code>dependencies</code> - (необязательно) другие искры, требуемые этой искрой </li> <li> <code>tags</code> - (необязательные) теги, которые описывают эту искру </li> </ul><p>Даже если вы не планируете использовать искровую утилиту самостоятельно, все равно будет хорошим тоном включить файл <code>spark.info</code> в любую искру, которую вы планируете распространять. Одним из реальных преимуществ управления искрами таким образом, а не вставкой их непосредственно в каталог <code>sparks</code>, является то, что менеджер искры может использовать информацию о совместимости, зависимости и версии в каждой искре, чтобы обеспечить совместимость с текущей установкой CodeIgniter и друг другом. Есть еще одно преимущество, как мы скоро увидим: искры, установленные вне утилиты менеджера, должны иметь свои зависимости, установленные вручную.</p> <h3>Организация искры</h3> <p>После создания информационного файла пришло время придать искре некоторую структуру. Создайте четыре новые папки в каталоге искры:</p> <ul><li>config</li> <li>helpers</li> <li>libraries</li> <li>views</li> </ul><p>Если вы раньше работали с CodeIgniter, то для вас, вероятно, это будут знакомые имена. Класс <code>Loader</code> в CodeIgniter рассматривает искры как пакеты, а это означает, что содержимое этих каталогов проверяется для любых компонентов приложения, которые не могут быть найдены в каталоге <code>/application</code>. На данный момент это относится к пяти типам ресурсов:</p> <ul><li>configs</li> <li>helpers</li> <li>libraries</li> <li>models</li> <li>views</li> </ul><hr><h2>Шаг 3: Написание Искры</h2> <p>Прежде чем мы начнем писать код, найдите момент, чтобы убедиться, что ваша директория содержит все необходимые фрагменты.</p> <div> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=405/net/uploads/legacy/1092_sparks/spark_directories.png" alt="Простое управление пакетами для CodeIgniter с помощью Sparks..." title="Простое управление пакетами для CodeIgniter с помощью Sparks..." width="50" height="50"></div> <p>Все в порядке? Давайте продолжим.</p> <p>Создайте файл в недавно созданном каталоге <code>config</code> и назовите его <code>dovecote.php</code>. Мы будем хранить несколько основных опций здесь, чтобы дать знать искре, где она может найти RSS данные:</p> <pre class="brush: php noskimlinks noskimwords">&lt;?php /** config/dovecote.php **/// Username to retrieve tweets from:$config[ "twitter" ]    = "getsparks";// API endpoint to query for tweets:$config[ "twitterURL" ] = "http://twitter.com/statuses/user_timeline/%s.rss";// Feed carrying RSS data:$config[ "feedURL" ]    = "http://feeds.bbci.co.uk/news/rss.xml";?&gt;</pre> <p>Не так много - мы определили имя пользователя twitter (<span>@getsparks</span>), чтобы получить твиты, предоставив API ендпоинт для API Twitter и добавив дополнительный URL-адрес для поиска новостей RSS.</p> <p>Теперь искра знает, где можно найти данные, пришло время получить некоторые каналы. Для этого нам нужно создать библиотеку - назвать <code>dovecote.php</code> и сохранить ее в каталоге <code>libraries</code>:</p> <pre class="brush: php noskimlinks noskimwords">&lt;?php /** libraries/dovecote.php **/ class dovecote {    protected $ci, $timeline;    public function __construct() {        $this-&gt;ci = &amp;amp;get_instance();            }    public function retrieve() {        // build twitter request URL        $twitterURL = sprintf( $this-&gt;option( "twitterURL" ), $this-&gt;option( "twitter" ) );        // get RSS Data        $tweets = $this-&gt;ci-&gt;atomizer-&gt;loadURL( $twitterURL );        $feed = $this-&gt;ci-&gt;atomizer-&gt;loadURL( $this-&gt;option( "feedURL" ) );        // set channel information for new feed        $info = array(            "title" =&gt; "Convolved feed"        );        // mix the two feeds together        $this-&gt;timeline = $feed-&gt;convolve( $tweets, $info );        return $this-&gt;timeline;    }    public function publish() {        header("content-type: application/rss+xml");        echo $this-&gt;timeline-&gt;save();    }    // retrieve an option ($key) from config files    protected function option( $key ) {        return $this-&gt;ci-&gt;config-&gt;item( $key );    }}?&gt;</pre> <p>Эта библиотека предоставляет вспомогательные функции для извлечения параметров из нашего файла конфигурации и публикации RSS-канала, но критической частью является <code>retrieve()</code>. Эта функция захватывает данные RSS от поставщиков, описанных в файле конфигурации dovecote, в несколько этапов:</p> <ul><li>Сначала создается адрес RSS-канала Twitter. В конфиге есть имя пользователя (<code>twitter</code>) и ендпоинт (<code>twitterURL</code>); теперь они объединяются с помощью <code>sprintf</code>.</li> <li>Затем данные RSS в каждом канале извлекаются с помощью функции <code>loadURL</code> в библиотеке <code>automizer</code>. Эта функция возвращает объект «<code>AtomizerFeed</code>», который предоставляет некоторые полезные функции для управления данными RSS.</li> <li>Наконец, операция <code>convolve</code> у <code>AtomizerFeed</code> используется для объединения двух элементов фидов в один канал, который и возвращается.</li> <p></p> <p>На данный момент мы почти готовы запустить нашу голубятню в реальном приложении. Нам просто нужно проверить, чтобы наше приложение включало все зависимости dovecote и что сама искра будет загружаться правильно.</p> <hr><h2>Шаг 4: Зависимости</h2> <p>Когда мы создавали файл <code>spark.info</code>, напомним, что мы описали зависимости dovecote:</p> </ul><pre class="brush: php noskimlinks noskimwords">Dependencies:   Atomizer: 0.0.1</pre> <p>Это означает, что наша искра для своей работы, полагается на другую искру - Atomizer. Как только искры будут привязаны к репозиторию <span>getparks.org</span>, утилита менеджера автоматически загрузит необходимые зависимости. Но пока мы работаем локально, нам нужно будет сделать это самим.</p> <p>Если вы используете менеджер искр, вы можете установить Atomizer, перейдя в каталог CodeIgniter и вызывая функцию <code>install</code> у менеджера:</p> <pre class="brush: php noskimlinks noskimwords">php tools/spark install -v0.0.2 atomizer</pre> <p><strong>Примечание</strong>. Если вы работаете в Windows, вам вместо этого нужно будет вызвать <code>php tools \ spark install -v0.0.2 atomizer</code>.</p> <p>Если вы не используете менеджера или если установка не завершилась успешно, вы можете <span>загрузить Atomizer прямо с Github</span> и извлечь его в каталог <code>sparks</code> вашего приложения рядом с папкой, содержащей dovecote.</p> <hr><h2>Шаг 5: Автозагрузка</h2> <p>До того, как dovecote будет доступен для других частей приложения, нам нужно убедиться, что он будет загружаться правильно. Вернитесь в папку конфигурации в своем каталоге искры и вставьте следующее в новый файл с именем <code>autoload.php</code>.</p> <pre class="brush: php noskimlinks noskimwords">&lt;?php /** config/autoload.php **/// load default configuration$autoload["config"] = array( "dovecote" );// load dependency$autoload["sparks"] = array( "atomizer/0.0.2" );// load library$autoload["libraries"] = array( "dovecote" );?&gt;</pre> <p>Всякий раз, когда CodeIgniter загружает искру, он попытается загрузить все ресурсы, перечисленные в файле <code>autoload.php</code>. Это позволяет авторам искры определять ресурсы, с которыми пользователи должны иметь непосредственный доступ, когда они загружают искру. Так как библиотека <code>dovecote</code> указана здесь, например, мы сразу получим доступ к функции <code>retieve</code>, как только искра будет загружена. </p> <p>Стоит отметить, что ресурсы, описанные в <code>autoload.php</code>, не обязательно должны находиться в каталоге искры. Пока они находятся где-то в пути поиска CodeIgniter, приложение должно быть в состоянии их найти. Обратите внимание, что <code>atomizer</code> загружается в приведенном выше примере; было бы мало толку от зависимостей искры, если их не удалось загрузить!</p> <p>Сохраните файл автозагрузки, и давайте загрузим все. В welcome контроллере вашего основного приложения (<code>/application/controllers/welcome.php</code>) добавьте следующее:</p> <pre class="brush: php noskimlinks noskimwords">public function dovecote() {    $this-&gt;load-&gt;spark( "dovecote/0.0.1" );    $this-&gt;dovecote-&gt;retrieve();    $this-&gt;dovecote-&gt;publish();}</pre> <p>Давайте пройдемся по коду:</p> <ol><li>Мы просим CodeIgniter загружать dovecote, зная, что будут загружены все ресурсы, запрошенные в <code>config/autoload.php</code></li> <li>Функция <code>retrieve</code> используется для получения копий RSS-каналов, описанных в файле <code>config/dovecote.php</code> </li> <li>Объединенная временная шкала, полученная с помощью <code>retrieve</code>, подается в виде RSS-канала, используя функцию <code>publish</code></li> </ol><h3>А теперь посмотрим в действии</h3> <p>Перейдите по адресу <code>welcome/dovecote</code> в своем браузере, и вы увидите RSS-канал, в котором будут перечислены твиты и статьи, которые собирает наша голубятня.</p> <hr><h2>Шаг 6: Создание искры</h2> <p>Давайте сделаем dovecote немного более полезным. Сначала мы создадим базовый шаблон представления, чтобы показать название каждой статьи на нашей временной шкале:</p> <pre class="brush: php noskimlinks noskimwords">&lt;?php /** views/dovecote_timeline.php */ ?&gt;&lt;h3&gt;Recent Happenings:&lt;/h3&gt;&lt;ol&gt;&lt;?php foreach ($items as $item): ?&gt;    &lt;li&gt;&lt;?php echo $item-&gt;title; ?&gt;&lt;/li&gt;&lt;?php endforeach; ?&gt;&lt;/ol&gt;</pre> <p>Затем мы сделаем представление доступным, предоставив функцию-хелпер, которую другие части приложения могут использовать для отображения временной шкалы в HTML. </p> <pre class="brush: php noskimlinks noskimwords">&lt;?php /** helpers/dovecote_helper.php */function dovecote_timeline() {    $ci = &amp;amp;get_instance();    $feed = $ci-&gt;dovecote-&gt;retrieve();    $data = array(        "items" =&gt; $feed-&gt;items()    );    $ci-&gt;load-&gt;view( "dovecote_timeline", $data );}?&gt;</pre> <p>Функция <code>dovecote_timeline</code> и ее одноименное представление теперь могут использоваться для отображения временной шкалы в любом месте нашего приложения. Но в соответствии с философией CodeIgniter, мы не будем делать ее доступной автоматически через <code>autoload.php</code>. Вместо этого нам нужно будет вручную загрузить помощник, когда это необходимо. Вернитесь к контроллеру приветствия вашего приложения и обновите функцию <code>dovecote</code> для генерации HTML-версии фида:</p> <pre class="brush: php noskimlinks noskimwords">public function dovecote() {    $this-&gt;load-&gt;spark( "dovecote/0.0.1" );    $this-&gt;load-&gt;helper( "dovecote" );    $this-&gt;dovecote-&gt;retrieve();        // call the helper function    echo dovecote_timeline();}</pre> <p>Обновите свой браузер, и теперь вы должны увидеть список всех элементов на временной шкале dovecote.</p> <div> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=405/net/uploads/legacy/1092_sparks/spark_html.png" alt="Простое управление пакетами для CodeIgniter с помощью Sparks..." title="Простое управление пакетами для CodeIgniter с помощью Sparks..." width="50" height="50"></div> <hr><h2>Подведем итоги</h2> <p>Поздравляю! Теперь вы являетесь владельцем очень простой искры, но еще много чего можно сделать. Перед тем, как опубликовать dovecote, вы можете рассмотреть возможность создания дополнительных функций. Детали зависит от вас, но некоторые полезные функции могут включать:</p> <ul><li> <strong>кэширование</strong> ответов API</li> <li> <strong>отображения</strong> для красивого отображения полученных данных</li> <li> <strong>сохранение данных</strong> для сохранения старых элементов временной шкалы</li> </ul><p>Этот урок поверхностное описание того, что можно сделать с помощью искр, и показывает преимущества, которые дают искры в минимизации дублирования кода и ускорения разработки.</p> <p>Работаете над собственной искру? Столкнулись с проблемами? Поделитесь ими в комментариях ниже и благодарю вас за чтение!</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825663-prostoe-upravlenie-paketami-dlya-codeigniter-s-pomoschyu-sparks" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="PHP" href="https://norma-studio.github.io/article5/220825663-prostoe-upravlenie-paketami-dlya-codeigniter-s-pomoschyu-sparks" class="tm-article-body__tags-item-link">PHP</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
42046</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
687</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
