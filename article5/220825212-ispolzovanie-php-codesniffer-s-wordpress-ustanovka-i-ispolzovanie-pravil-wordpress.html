
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Использование PHP CodeSniffer с WordPress: установка и использование правил WordPress... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Использование PHP CodeSniffer с WordPress: установка и использование правил WordPress... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Использование PHP CodeSniffer с WordPress: установка и использование правил WordPress... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Использование PHP CodeSniffer с WordPress: установка и использование правил WordPress... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Если вы только присоединяетесь к этой серии, мы обсуждаем тему кодовых душков, способы их рефакторинга и инструменты, которые помогут нам автоматизировать некоторые рутины, связанные с этим, особенно в программировании на PHP....">
<meta property="og:description" content="Если вы только присоединяетесь к этой серии, мы обсуждаем тему кодовых душков, способы их рефакторинга и инструменты, которые помогут нам автоматизировать некоторые рутины, связанные с этим, особенно в программировании на PHP....">
<meta name="twitter:description" content="Если вы только присоединяетесь к этой серии, мы обсуждаем тему кодовых душков, способы их рефакторинга и инструменты, которые помогут нам автоматизировать некоторые рутины, связанные с этим, особенно в программировании на PHP....">
<meta property="aiturec:description" content="Если вы только присоединяетесь к этой серии, мы обсуждаем тему кодовых душков, способы их рефакторинга и инструменты, которые помогут нам автоматизировать некоторые рутины, связанные с этим, особенно в программировании на PHP....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/34/posts/26443/image/wpcs.png">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/34/posts/26443/image/wpcs.png">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/34/posts/26443/image/wpcs.png">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/34/posts/26443/image/wpcs.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/34/posts/26443/image/wpcs.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825212-ispolzovanie-php-codesniffer-s-wordpress-ustanovka-i-ispolzovanie-pravil-wordpress.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825212-ispolzovanie-php-codesniffer-s-wordpress-ustanovka-i-ispolzovanie-pravil-wordpress.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825212-ispolzovanie-php-codesniffer-s-wordpress-ustanovka-i-ispolzovanie-pravil-wordpress.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825212-ispolzovanie-php-codesniffer-s-wordpress-ustanovka-i-ispolzovanie-pravil-wordpress.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825212-ispolzovanie-php-codesniffer-s-wordpress-ustanovka-i-ispolzovanie-pravil-wordpress.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825212-ispolzovanie-php-codesniffer-s-wordpress-ustanovka-i-ispolzovanie-pravil-wordpress.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825212-ispolzovanie-php-codesniffer-s-wordpress-ustanovka-i-ispolzovanie-pravil-wordpress.html" title="Использование PHP CodeSniffer с WordPress: установка и использование правил WordPress... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Использование PHP CodeSniffer с WordPress: установка и использование правил WordPress... | envatomarket.ru | norma-studio.github.io" title="Использование PHP CodeSniffer с WordPress: установка и использование правил WordPress... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/63456435436.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825212-ispolzovanie-php-codesniffer-s-wordpress-ustanovka-i-ispolzovanie-pravil-wordpress.html" class="tm-user-info__username" title="
М. Старостенко" aria-label="
М. Старостенко">
М. Старостенко</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Использование PHP CodeSniffer с WordPress: установка и использование правил WordPress...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825212-ispolzovanie-php-codesniffer-s-wordpress-ustanovka-i-ispolzovanie-pravil-wordpress" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="PHP" href="https://norma-studio.github.io/article5/220825212-ispolzovanie-php-codesniffer-s-wordpress-ustanovka-i-ispolzovanie-pravil-wordpress" class="tm-article-snippet__hubs-item-link"><span>PHP</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825212-ispolzovanie-php-codesniffer-s-wordpress-ustanovka-i-ispolzovanie-pravil-wordpress.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/34/posts/26443/image/wpcs.png">
    <meta itemprop="headline name" content="Использование PHP CodeSniffer с WordPress: установка и использование правил WordPress... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Если вы только присоединяетесь к этой серии, мы обсуждаем тему кодовых душков, способы их рефакторинга и инструменты, которые помогут нам автоматизировать некоторые рутины, связанные с этим, особенно в программировании на PHP....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Если вы только присоединяетесь к этой серии, мы обсуждаем тему кодовых душков, способы их рефакторинга и инструменты, которые помогут нам автоматизировать некоторые рутины, связанные с этим, особенно в программировании на PHP....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Если вы только присоединяетесь к этой серии, мы обсуждаем тему кодовых душков, способы их рефакторинга и инструменты, которые помогут нам автоматизировать некоторые рутины, связанные с этим, особенно в программировании на PHP.</p><p>Если вы не прочитали первые две статьи из этой серии, я рекомендую это, поскольку они охватывают несколько предварительных условий, которые мы имеем на старте, прежде чем двигаться вперед с остальной частью статьи.</p><p>Эти статьи:</p><ol><li><span>Использование PHP CodeSniffer с WordPress: понимание кодовых душков</span></li> <li><span>Использование PHP CodeSniffer с WordPress: установка и использование PHP CodeSniffer</span></li> </ol><p>Короче говоря, в приведенных выше статьях будет представлена концепция кодовых запахов, которую мы определяем следующим образом:</p><blockquote>[A] запах кода, также известный как плохой запах, в коде компьютерного программирования, относится к любому признаку в исходном коде программы, который, возможно, указывает на более глубокую проблему. <br></blockquote><p>И я проведу вас через шаги, необходимые для установки PHP_CodeSniffer на вашем компьютере.</p><p>Но если вы зашли так далеко, то я предполагаю, что вы разработчик WordPress, и вы заинтересованы в том, чтобы PHP CodeSniffer был настроен таким образом, чтобы он мог вынюхивать любые проблемы в вашем коде, связанные с стандартами кодирования WordPress.</p><p>Это хорошо! Потому что в оставшейся части этой статьи мы рассмотрим именно это.</p><h2>Предпосылки</h2><p>Это должен быть очень короткий список. Если вы следовали вместе с сериями до этого момента, вам необходимо иметь:</p><ul><li>Версия <span>PHP</span> (предпочтительно 5.6.10 или более поздняя)</li> <li><span>PHP CodeSniffer</span></li> <li><span>Composer</span></li> </ul><p>Все это подробно описано во всех предыдущих статьях серии, но если вы добрались до этого момента и владеете командной строкой, то это должно быть подгонкой по сравнению с тем, что мы сделали до сих пор.</p><p>Со всем сказанным, давайте начнем.</p><h2>Правила WordPress для PHP CodeSniffer</h2><p>Во-первых, найдите правила стандартов кодирования WordPress на GitHub. Их там легко найти.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/34/posts/26443/image/wpcs.png" alt="Использование PHP CodeSniffer с WordPress: установка и использование правил WordPress..." title="Использование PHP CodeSniffer с WordPress: установка и использование правил WordPress..." width="50" height="50"></figure><p>Вы можете прочитать все подробности на странице проекта, но вот самое главное, чем я хотел бы поделиться:</p><blockquote>Этот проект представляет собой набор правил PHP_CodeSniffer (sniff) для проверки кода, разработанного для WordPress. Он обеспечивает качество кода и соблюдение правил кодирования, особенно официальных стандартов кодирования WordPress.<br></blockquote><p>Я хотел бы обратить ваше внимание на фразу, что это относится к «официальным стандартам кодирования WordPress». Обратите внимание, что эти правила основаны на стандартах кодирования WordPress. То есть, вы не можете официально ссылаться на них.</p><p>Если вы хотите найти способ просмотреть правила, которые определяет WordPress, ознакомьтесь <span>с этой статьей в Codex</span>. Им легко следовать, легко читать, но многое нужно запомнить. К счастью, у нас есть набор правил, указанный выше.</p><p>Важно отметить, что даже если вы не знакомы с правилами, CodeSniffer найдет проблемы в вашем коде и уведомит вас о том, что вам нужно исправить. Хотя вам и не нужно читать статью Codex, она иногда может помочь в определении того, что необходимо поправить на основе ошибок или предупреждений, генерируемых сниффером.</p><h3>1. Установите правила WordPress.</h3><p>Предполагая, что вы правильно установили PHP CodeSniffer, давайте добавим в программное обеспечение правила WordPress. В этом уроке я собираюсь делать все с помощью командной строки, чтобы быть максимально независимым от платформы. Я расскажу несколько слов об IDE и правилах в конце серии.</p><p>Откройте свой терминал и перейдите туда, где у вас установлена копия PHP CodeSniffer. Если вы следовали вместе с этой серией обучающих программ, то, скорее всего, вспомните, что у нас есть файл <code class="inline">composer.json</code>, который установит все за нас. Если нет, не забудьте создать <code class="inline">composer.json</code> в корневом каталоге вашего проекта и добавить в него:</p><pre class="brush: javascript noskimlinks noskimwords">{    "require": {        "squizlabs/php_codesniffer": "2.*"    }}</pre><p>После этого запустите <code class="inline">$ composer update</code> из вашего терминала, и у вас будет все, что вам нужно чтобы начать. Чтобы проверить установку, выполните следующую команду:</p><pre class="brush: plain noskimlinks noskimwords">$ vendor/bin/phpcs --version</pre><p>И вы должны получить что-то вроде следующего вывода:</p><pre class="brush: bash noskimlinks noskimwords">PHP_CodeSniffer version 2.6.0 (stable) by Squiz (https://www.squiz.net)</pre><p>Отлично. Далее, давайте установим правила WordPress. Поскольку мы используем Composer (и будем продолжать это делать), это очень легко сделать.</p><p>Выполните следующую команду из корневого каталога вашего проекта:</p><pre class="brush: bash noskimlinks noskimwords">composer create-project wp-coding-standards/wpcs:dev-master --no-dev</pre><p>Обратите внимание, что может появиться запрос со следующим вопросом:</p><pre class="brush: bash noskimlinks noskimwords">Do you want to remove the existing VCS (.git, .svn..) history? [Y,n]?</pre><p>Если вы знаете, что вы делаете, тогда не стесняйтесь идти дальше и выберите «n»; В противном случае, лучше нажимать "y".</p><h3>2. Добавление правил в PHP CodeSniffer</h3><p>Теперь, когда PHP CodeSniffer установлен и установлены правила WordPress, мы должны убедиться, что PHP CodeSniffer знает о нашем новом наборе правил. Для этого нам нужно ввести следующую команду в командной строке. </p><p>В корневом каталоге вашего проекта введите следующую команду:</p><pre class="brush: bash noskimlinks noskimwords">$ vendor/bin/phpcs --config-set installed_paths wpcs</pre><p>Чтобы убедиться, что новые правила добавлены, мы можем попросить PHP CodeSniffer сообщить нам набор правил, которые он в настоящее время имеет. В терминале введите следующую команду:</p><pre class="brush: bash noskimlinks noskimwords">$ vendor/bin/phpcs -i</pre><p>И вы должны увидеть следующий результат (или что-то очень похожее):</p><pre class="brush: bash noskimlinks noskimwords">The installed coding standards are MySource, PEAR, PHPCS, PSR1, PSR2, Squiz, Zend, WordPress, WordPress-Core, WordPress-Docs, WordPress-Extra and WordPress-VIP</pre><p>Обратите внимание, что в строке выше мы имеем несколько наборов правил относительно WordPress. Очень красиво, не так ли? Конечно, давайте посмотрим, как это все сработает, когда мы запустим наборы правил чтобы проверить плагин, такой как например <em><span>Hello Dolly</span></em>.</p><h3>3. Запуск PHP CodeSniffer для проверки проектов WordPress</h3><p>Предполагая, что вы работаете в каталоге, который включает плагин WordPress, вы можете пропустить следующий шаг. Если, с другой стороны, у вас нет копии сценария WordPress, файла, темы или плагина, установленных в каталоге проекта, перейдите вперед и скопируйте его в свой каталог проекта.</p><p>Как уже упоминалось, мы будем тестировать плагин Hello Dolly.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/34/posts/26443/image/hello-dolly.png" alt="Использование PHP CodeSniffer с WordPress: установка и использование правил WordPress..." title="Использование PHP CodeSniffer с WordPress: установка и использование правил WordPress..." width="50" height="50"></figure><p>Чтобы запустить PHP CodeSniffer с правилами WordPress в отношении файлов в каталоге плагина, введите в терминале следующую команду:</p><pre class="brush: bash noskimlinks noskimwords">$ vendor/bin/phpcs --standard=WordPress hello-dolly</pre><p>Это приведет к выводу, который должен соответствовать тому, что вы видите здесь:</p><pre class="brush: bash noskimlinks noskimwords">FILE: /Users/tommcfarlin/Desktop/tutsplus_demo/hello-dolly/hello.php----------------------------------------------------------------------FOUND 14 ERRORS AFFECTING 14 LINES----------------------------------------------------------------------  2 | ERROR | Missing short description in doc comment  5 | ERROR | There must be exactly one blank line after the file    |       | comment  6 | ERROR | Empty line required before block comment 15 | ERROR | You must use "/**" style comments for a function    |       | comment 46 | ERROR | Inline comments must end in full-stops, exclamation    |       | marks, or question marks 49 | ERROR | Inline comments must end in full-stops, exclamation    |       | marks, or question marks 53 | ERROR | Inline comments must end in full-stops, exclamation    |       | marks, or question marks 54 | ERROR | You must use "/**" style comments for a function    |       | comment 56 | ERROR | Expected next thing to be an escaping function (see    |       | Codex for "Data Validation"), not ""&lt;p    |       | id="dolly"&gt;$chosen&lt;/p&gt;"" 59 | ERROR | Inline comments must end in full-stops, exclamation    |       | marks, or question marks 62 | ERROR | Inline comments must end in full-stops, exclamation    |       | marks, or question marks 63 | ERROR | You must use "/**" style comments for a function    |       | comment 64 | ERROR | Inline comments must end in full-stops, exclamation    |       | marks, or question marks 67 | ERROR | Expected next thing to be an escaping function (see    |       | Codex for "Data Validation"), not ""    |       | "----------------------------------------------------------------------</pre><p>Конечно, некоторые из этих вещей могут измениться в зависимости от того, когда вы читаете этот урок.</p><p>Ошибки должны быть достаточно ясными относительно того, что необходимо исправить:</p><ul><li>Первый столбец обозначает строку, в которой обнаружена проблема.</li> <li>Второй столбец определяет, есть ли ошибка или предупреждение.</li> <li>В третьей колонке объясняется проблема и что ожидается от кода.</li> </ul><p>Обратите внимание, что хотя это ошибки или предупреждения, код, очевидно, будет работать. Но давайте посмотрим, как это исправить, плагин, возможно, самый популярный, поскольку он поставляется с каждой установкой WordPress, и рассмотрим различия в качестве кода.</p><h3>4. Рефакторинг <em>Hello Dolly</em> </h3><p>Обратите внимание, что плагин, прежде чем мы начнем работать над ним, включает в себя следующий исходный код:</p><pre class="brush: php noskimlinks noskimwords">&lt;?php/** * @package Hello_Dolly * @version 1.6 *//*Plugin Name: Hello DollyPlugin URI: https://wordpress.org/plugins/hello-dolly/Description: This is not just a plugin, it symbolizes the hope and enthusiasm of an entire generation summed up in two words sung most famously by Louis Armstrong: Hello, Dolly. When activated you will randomly see a lyric from &lt;cite&gt;Hello, Dolly&lt;/cite&gt; in the upper right of your admin screen on every page.Author: Matt MullenwegVersion: 1.6Author URI: http://ma.tt/*/function hello_dolly_get_lyric() {    /** These are the lyrics to Hello Dolly */  $lyrics = "Hello, DollyWell, hello, DollyIt"s so nice to have you back where you belongYou"re lookin" swell, DollyI can tell, DollyYou"re still glowin", you"re still crowin"You"re still goin" strongWe feel the room swayin"While the band"s playin"One of your old favourite songs from way back whenSo, take her wrap, fellasFind her an empty lap, fellasDolly"ll never go away againHello, DollyWell, hello, DollyIt"s so nice to have you back where you belongYou"re lookin" swell, DollyI can tell, DollyYou"re still glowin", you"re still crowin"You"re still goin" strongWe feel the room swayin"While the band"s playin"One of your old favourite songs from way back whenGolly, gee, fellasFind her a vacant knee, fellasDolly"ll never go awayDolly"ll never go awayDolly"ll never go away again";// Here we split it into lines$lyrics = explode( "\n", $lyrics );// And then randomly choose a linereturn wptexturize( $lyrics[ mt_rand( 0, count( $lyrics ) - 1 ) ] );}// This just echoes the chosen line, we"ll position it laterfunction hello_dolly() {$chosen = hello_dolly_get_lyric();echo "&lt;p id="dolly"&gt;$chosen&lt;/p&gt;";}// Now we set that function up to execute when the admin_notices action is calledadd_action( "admin_notices", "hello_dolly" );// We need some CSS to position the paragraphfunction dolly_css() {// This makes sure that the positioning is also good for right-to-left languages$x = is_rtl() ? "left" : "right";echo "&lt;style type="text/css"&gt;#dolly {float: $x;padding-$x: 15px;padding-top: 5px;margin: 0;font-size: 11px;}&lt;/style&gt;";}add_action( "admin_head", "dolly_css" );?&gt;</pre><p>Код довольно простой, поскольку он использует только несколько базовых функций PHP, и Мэтт проделал хорошую работу по комментированию кода.</p><p>Но, учитывая 14 ошибок, обнаруженных CodeSniffer, давайте реорганизуем плагин. Принимая во внимание ошибки, которые мы получили, и то, что от нас ожидают увидеть, давайте обратимся к каждой из них.</p><p>После этого плагин должен выглядеть следующим образом:</p><pre class="brush: php noskimlinks noskimwords">&lt;?php/** * This is a plugin that symbolizes the hope and enthusiasm of an entire * generation summed up in two words sung most famously by Louis Armstrong. * * @package Hello_Dolly * @version 1.6 * * @wordpress-plugin * Plugin Name: Hello Dolly * Plugin URI: https://wordpress.org/plugins/hello-dolly/ * Description: This is not just a plugin, it symbolizes the hope and enthusiasm of an entire generation summed up in two words sung most famously by Louis Armstrong: Hello, Dolly. When activated you will randomly see a lyric from &lt;cite&gt;Hello, Dolly&lt;/cite&gt; in the upper right of your admin screen on every page. * Author: Matt Mullenweg * Version: 1.6 * Author URI: http://ma.tt/ *//** * Defines the lyrics for "Hello Dolly". * * @return string A random line of from the lyrics to the song. */function hello_dolly_get_lyric() {    /** These are the lyrics to Hello Dolly */    $lyrics = "Hello, DollyWell, hello, DollyIt"s so nice to have you back where you belongYou"re lookin" swell, DollyI can tell, DollyYou"re still glowin", you"re still crowin"You"re still goin" strongWe feel the room swayin"While the band"s playin"One of your old favourite songs from way back whenSo, take her wrap, fellasFind her an empty lap, fellasDolly"ll never go away againHello, DollyWell, hello, DollyIt"s so nice to have you back where you belongYou"re lookin" swell, DollyI can tell, DollyYou"re still glowin", you"re still crowin"You"re still goin" strongWe feel the room swayin"While the band"s playin"One of your old favourite songs from way back whenGolly, gee, fellasFind her a vacant knee, fellasDolly"ll never go awayDolly"ll never go awayDolly"ll never go away again";// Here we split it into lines.$lyrics = explode( "\n", $lyrics );// And then randomly choose a line.return wptexturize( $lyrics[ mt_rand( 0, count( $lyrics ) - 1 ) ] );}add_action( "admin_notices", "hello_dolly" );/** * This just echoes the chosen line, we"ll position it later. This function is * set up to execute when the admin_notices action is called. */function hello_dolly() {$chosen = hello_dolly_get_lyric();echo "&lt;p id="dolly"&gt;$chosen&lt;/p&gt;"; // WPCS: XSS OK.}add_action( "admin_head", "dolly_css" );/** * Add some CSS to position the paragraph. */function dolly_css() {/** *This makes sure that the positioning is also good for right-to-left languages. */$x = is_rtl() ? "left" : "right";echo "&lt;style type="text/css"&gt; #dolly { float: $x; padding-$x: 15px; padding-top: 5px; margin: 0; font-size: 11px; } &lt;/style&gt; "; // WPCS: XSS OK.}</pre><p>Обратите внимание, что плагин продолжает работать, и код стал немного чище. Наконец, давайте проверим, что плагин проходит тест PHP CodeSniffer. Давайте снова запустим код, который мы использовали выше, чтобы сначала оценить плагин.</p><pre class="brush: php noskimlinks noskimwords">$ vendor/bin/phpcs --standard=WordPress hello-dolly</pre><p>И вывод, который мы видим:</p><pre class="brush: bash noskimlinks noskimwords">Skyhopper5:tutsplus_demo tommcfarlin$</pre><p>Именно так: вывода не должно быть. Вместо этого должно быть возвращение к стандартной командной строке.</p><p>Отлично. Плагин был доведен до стандарта. Вот почему наличие анализатора кода настолько ценно: он находит ошибки в вашем коде на основе правил, которые вы определяете, а затем сообщает о любых возможных ошибках.</p><p>В конечном счете, это гарантирует, что вы выпускаете высококачественный письменный код на сайт производственного уровня. Теперь это не означает, что вам следует избегать модульного тестирования или других типов тестирования, и при этом это не означает, что ошибок не существует. Это просто значит, что ваш код соответствует высокому стандарту.</p><h2>Вывод</h2><p>И с этим мы завершаем серию использования PHP CodeSniffer. Напомним, что во всей серии мы рассмотрели идею запахов кода, способы их рефакторинга и инструменты, которые доступны нам при работе с PHP-приложениями.</p><p>В этой статье мы увидели, как мы можем использовать предоставленный набор правил для стандартов кодирования WordPress для оценки нашего кода при работе над новым или существующим проектом. Обратите внимание, что некоторые IDE поддерживают возможность выполнения правил при написании кода.</p><p>Хотя это выходит за рамки данного учебника, вы можете найти ресурсы для этого в разных местах в Интернете. Просто найдите свою IDE по имени, определите ее поддержку для PHP CodeSniffer, а затем обязательно установите правила WordPress, как мы подробно рассказали в этом учебнике.</p><p>Если вам понравилась эта статья или эта серия, вам может быть интересно проверить другие вещи, которые я написал как на с<span>транице моего профиля</span>, так и в <span>моем блоге</span>. Вы также можете следить за мной в Twitter на <span>@tommcfarlin</span>, где я часто общаюсь и обмениваюсь различными методами разработки программного обеспечения в контексте WordPress.</p><p>С учетом сказанного, не стесняйтесь оставлять любые вопросы или комментарии в фиде ниже, и я постараюсь ответить на каждый из них.</p><h2>Ресурсы</h2><ul><li><span>Стандарты кодирования WordPress для PHP CodeSniffer</span></li> <li><span>Hello Dolly</span></li> <li><span>wptexturize</span></li> <li><span>Валидация данных</span></li> <li><span>WPCS: XSS ОК.</span></li> </ul>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825212-ispolzovanie-php-codesniffer-s-wordpress-ustanovka-i-ispolzovanie-pravil-wordpress" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="PHP" href="https://norma-studio.github.io/article5/220825212-ispolzovanie-php-codesniffer-s-wordpress-ustanovka-i-ispolzovanie-pravil-wordpress" class="tm-article-body__tags-item-link">PHP</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
31765</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
477</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
