
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Основы Bash Scripting... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Основы Bash Scripting... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Основы Bash Scripting... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Основы Bash Scripting... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Скрипты оболочки широко используются в мире UNIX. Они отлично подходят для ускорения повторяющихся задач и упрощения сложной логики выполнения. Они могут быть такими же простыми, как набор команд, или они могут организовывать сложные задачи. В этом уроке мы узнаем больше о языке сценариев Bash, написав примерный скрипт шаг за шагом....">
<meta property="og:description" content="Скрипты оболочки широко используются в мире UNIX. Они отлично подходят для ускорения повторяющихся задач и упрощения сложной логики выполнения. Они могут быть такими же простыми, как набор команд, или они могут организовывать сложные задачи. В этом уроке мы узнаем больше о языке сценариев Bash, написав примерный скрипт шаг за шагом....">
<meta name="twitter:description" content="Скрипты оболочки широко используются в мире UNIX. Они отлично подходят для ускорения повторяющихся задач и упрощения сложной логики выполнения. Они могут быть такими же простыми, как набор команд, или они могут организовывать сложные задачи. В этом уроке мы узнаем больше о языке сценариев Bash, написав примерный скрипт шаг за шагом....">
<meta property="aiturec:description" content="Скрипты оболочки широко используются в мире UNIX. Они отлично подходят для ускорения повторяющихся задач и упрощения сложной логики выполнения. Они могут быть такими же простыми, как набор команд, или они могут организовывать сложные задачи. В этом уроке мы узнаем больше о языке сценариев Bash, написав примерный скрипт шаг за шагом....">
<meta property="og:image" content="//www.gravatar.com/avatar/dfa06b20297d7fddd2fa5c4a1d4990dd?s=200&d=https%3A%2F%2Fassets.tutsplus.com%2Fimages%2Fhub%2Favatar_default.png&r=PG">
<meta property="aiturec:image" content="//www.gravatar.com/avatar/dfa06b20297d7fddd2fa5c4a1d4990dd?s=200&d=https%3A%2F%2Fassets.tutsplus.com%2Fimages%2Fhub%2Favatar_default.png&r=PG">
<meta name="twitter:image" content="//www.gravatar.com/avatar/dfa06b20297d7fddd2fa5c4a1d4990dd?s=200&d=https%3A%2F%2Fassets.tutsplus.com%2Fimages%2Fhub%2Favatar_default.png&r=PG">
<meta property="vk:image" content="//www.gravatar.com/avatar/dfa06b20297d7fddd2fa5c4a1d4990dd?s=200&d=https%3A%2F%2Fassets.tutsplus.com%2Fimages%2Fhub%2Favatar_default.png&r=PG">
<meta property="og:type" content="article">
<link image_src="image" href="//www.gravatar.com/avatar/dfa06b20297d7fddd2fa5c4a1d4990dd?s=200&d=https%3A%2F%2Fassets.tutsplus.com%2Fimages%2Fhub%2Favatar_default.png&r=PG">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825568-osnovy-bash-scripting.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825568-osnovy-bash-scripting.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825568-osnovy-bash-scripting.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825568-osnovy-bash-scripting.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825568-osnovy-bash-scripting.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825568-osnovy-bash-scripting.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825568-osnovy-bash-scripting.html" title="Основы Bash Scripting... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Основы Bash Scripting... | envatomarket.ru | norma-studio.github.io" title="Основы Bash Scripting... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/543543242.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825568-osnovy-bash-scripting.html" class="tm-user-info__username" title="
А. Морозов" aria-label="
А. Морозов">
А. Морозов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Основы Bash Scripting...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825568-osnovy-bash-scripting" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825568-osnovy-bash-scripting" class="tm-article-snippet__hubs-item-link"><span>Web Development</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825568-osnovy-bash-scripting.html" />
    <link itemprop="image" href="//www.gravatar.com/avatar/dfa06b20297d7fddd2fa5c4a1d4990dd?s=200&d=https%3A%2F%2Fassets.tutsplus.com%2Fimages%2Fhub%2Favatar_default.png&r=PG">
    <meta itemprop="headline name" content="Основы Bash Scripting... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Скрипты оболочки широко используются в мире UNIX. Они отлично подходят для ускорения повторяющихся задач и упрощения сложной логики выполнения. Они могут быть такими же простыми, как набор команд, или они могут организовывать сложные задачи. В этом уроке мы узнаем больше о языке сценариев Bash, написав примерный скрипт шаг за шагом....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Скрипты оболочки широко используются в мире UNIX. Они отлично подходят для ускорения повторяющихся задач и упрощения сложной логики выполнения. Они могут быть такими же простыми, как набор команд, или они могут организовывать сложные задачи. В этом уроке мы узнаем больше о языке сценариев Bash, написав примерный скрипт шаг за шагом....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Скрипты оболочки широко используются в мире UNIX. Они отлично подходят для ускорения повторяющихся задач и упрощения сложной логики выполнения. Они могут быть такими же простыми, как набор команд, или они могут организовывать сложные задачи. В этом уроке мы узнаем больше о языке сценариев Bash, написав примерный скрипт шаг за шагом.</p><p><!--more--></p> <hr><h2>Проблема с Fizz-Buzz</h2> <p>Например, один из лучших способов узнать о новом языке. Начнем с одного.</p> <p>Проблема Fizz-Buzz очень проста. Он прославился после того, как программист, названный Имран, использовал его в качестве теста на собеседование. Оказывается, 90-99,5% кандидатов на задание по программированию просто не могут написать простейшую программу. Имран взял эту простую игру Fizz-Buzz и попросил кандидатов решить ее. Многие последовали примеру Имрана, и сегодня он является одним из наиболее часто задаваемых вопросов для задания программирования. Если вы нанимаете и нуждаетесь в способе проверке кандидатов,в 90% - это большая проблема.</p> <p>Вот правила:</p> <ul><li>Возьмите и напечатайте цифры от 1 до 100.</li> <li>Когда число делится на 3, напечатайте «Fizz» вместо номера.</li> <li>Когда оно делится на 5, вместо этого напечатайте «Buzz».</li> <li>Когда оно делится на 3 и 5, напечатайте «FizzBuzz».</li> </ul><p>Вот и все. Я уверен, что большинство из вас уже могут визуализировать два или три оператора <code>if</code>, чтобы решить эту проблему. Поработаем с использованием языка сценариев Bash.</p> <hr><h2>Шебанг</h2> <p>Шебанг относится к комбинации символов хэша и восклицательных знаков: <code>&amp;num;!</code>. Программа-загрузчик будет искать shebang в первой строке скрипта и использовать указанный в нем интерпретатор. Шебанг состоит из следующего синтаксиса: <code>&amp;num;! Interpreter [parameters]</code>. Интерпретатор - это программа, которая используется для интерпретации нашего языка. Для сценариев bash это будет <code>/bin/bash</code>. Например, если вы хотите создать скрипт в PHP и запустить его на консоли, вы, вероятно, захотите использовать <code>/usr/bin/php</code> (или путь к исполняемому файлу PHP на вашем компьютере) в качестве интерпретатора.</p> <pre class="brush: bash noskimlinks noskimwords">#!/usr/bin/php&lt;?phpphpinfo();</pre> <p>Да, это действительно сработает! Разве это не просто? Просто сначала сделайте свой файл исполняемым. Как только вы это сделаете, этот скрипт выведет вашу информацию PHP, как и следовало ожидать.</p> <div class="tip-shortcode"> <p><strong>Совет:</strong> Чтобы ваш скрипт работал на максимально возможном количестве систем, вы можете использовать <code>/bin/env</code> в shebang. Таким образом, вместо <code>/bin/bash</code> вы можете использовать <code>/bin/env bash</code>, который будет работать в системах, где исполняемый файл bash не находится в <code>/bin</code>.</p> </div> <hr><h2>Вывод текста</h2> <p>Результат скрипта будет равен, как и следовало ожидать, тому, что выводится из вашей команды. Однако, если мы явно хотим что-то написать на экране, мы можем использовать <code>echo</code>.</p> <pre class="brush: bash noskimlinks noskimwords">#!/bin/bashecho "Hello World"</pre> <p>Запуск этого скрипта приведет к печати «Hello World» в консоли.</p> <pre class="brush: bash noskimlinks noskimwords">csaba@csaba ~ $ ./helloWorld.shHello Worldcsaba@csaba ~ $</pre> <hr><h2>Введение переменных</h2> <p>Как и при любом языке программирования, при написании сценариев оболочки вы можете использовать переменные.</p> <pre class="brush: bash noskimlinks noskimwords">#!/bin/bashmessage="Hello World"echo $message</pre> <p>Этот код создает точно такое же сообщение «Hello World». Как вы можете видеть, чтобы присвоить значение переменной, просто напишите ее имя - исключите знак доллара перед ним. Кроме того, будьте осторожны с пробелами; между именем переменной и знаком равенства не должно быть пробелов. Поэтому<code> message="Hello"</code> вместо <code>message = "Hello"</code></p> <p>Если вы хотите использовать переменную, вы можете взять значение из нее так же, как в команде <code>echo</code>. Превращение <code>$ </code>в имя переменной вернет свое значение.</p> <div class="tip-shortcode"> <p><strong>Совет:</strong> точки с запятой не требуются в сценариях bash. Вы можете использовать их в большинстве случаев, но будьте осторожны: они могут иметь другое значение, чем то, что вы ожидаете.</p> </div> <hr><h2>Печать номеров от 1 до 100</h2> <p>Продолжая наш демо-проект, нам нужно циклически перебирать все числа от 1 до 100. Для этого нам нужно использовать цикл <code>for</code>.</p> <pre class="brush: bash noskimlinks noskimwords">#!/bin/bashfor number in {1..100}; do    echo $numberdone</pre> <p>В этом примере стоит отметить несколько новых вещей, которые, кстати, печатают все числа от 1 до 100, по одному числу за раз.</p> <ul><li>Синтаксис for для Bash: <code>для параметра VARIABLE в</code> <code>RANGE; сделайте COMMAND.</code></li> <li>В нашем примере фигурные скобки будут преобразовывать в диапазоне <code>1..100</code>. Они также используются в других контекстах, которые мы рассмотрим в ближайшее время.</li> <li> <code>do</code> и <code>for</code> - фактически две отдельные команды. Если вы хотите разместить две команды в одной строке, вам нужно как-то их отделить. Один из способов - использовать точку с запятой. В качестве альтернативы вы можете написать код без точки с запятой, перемещаясь <code>do</code>  до следующей строки.</li> </ul><pre class="brush: bash noskimlinks noskimwords">#!/bin/bashfor number in {1..100}do    echo $numberdone</pre> <hr><h2>Первое решение</h2> <p>Теперь, когда мы знаем, как печатать все числа от 1 до 100, пришло время принять наше первое решение.</p> <pre class="brush: bash noskimlinks noskimwords">#!/bin/bashfor number in {1..100}; do    if [ $((number%3)) -eq 0 ]; then        echo "Fizz"    else        echo $number    fidone</pre> <p>В этом примере будет выводиться «Fizz» для чисел, делящихся на 3. Опять же, нам нужно иметь дело с небольшим количеством нового синтаксиса. Давайте возьмем их один за другим.</p> <ul><li> <code>if..then..else..fi</code> - это классический синтаксис для оператора <code>if</code> в Bash. Конечно, часть <code>else</code> является необязательной, но в этом случае необходима для нашего алгоритма.</li> <li> <code>if COMMAND-RETURN-VALUE; then...</code> - <code>if</code> будет выполнено, если возвращаемое значение команды равно нулю. Да, логика в Bash основана на нулевом значении, что означает, что команды, которые успешно завершают работу , у них  код равен 0. Если что-то пойдет не так, с другой стороны, будет возвращено положительное целое число. Для упрощения вещей: ничего, кроме 0, считается <code>false</code>.</li> <li>Математические выражения в Bash задаются двойными скобками. <code>$((number%3))</code> вернет оставшееся значение деления переменной, <code>number</code> на 3. Обратите внимание, что мы не использовали <code>$</code> в скобках - только перед ними.</li> </ul><p>Вам может быть интересно, где команда в нашем примере. Разве нет только скобки с нечетным выражением в ней? Ну, оказывается, что <code>[</code> на самом деле является исполняемой командой. Чтобы поиграть с этим, попробуйте выполнить следующие команды на консоли.</p> <pre class="brush: bash noskimlinks noskimwords">csaba@csaba ~ $ which [/usr/bin/[csaba@csaba ~ $ [ 0 -eq 1 ]csaba@csaba ~ $ echo $?1csaba@csaba ~ $ [ 0 -eq 0 ]csaba@csaba ~ $ echo $?0</pre> <blockquote> <p><strong>Совет:</strong> значение переменной команды всегда возвращается в переменную,<code>?</code> (вопросительный знак). Он перезаписывается после выполнения каждой новой команды.</p> </blockquote> <hr><h2>Проверка для Buzz</h2> <p>Пока у нас все хорошо. У нас есть «Fizz»; теперь давайте сделаем часть «Buzz».</p> <pre class="brush: bash noskimlinks noskimwords">#!/bin/bashfor number in {1..100}; do    if [ $((number%3)) -eq 0 ]; then        echo "Fizz"    elif [ $((number%5)) -eq 0 ]; then        echo "Buzz"    else        echo $number    fidone</pre> <p>Выше мы ввели еще одно условие делимости на 5: заявление <code>elif</code>. Это, конечно, переводит в <em>else if</em>, и будет выполняться, если команда, следующая за ней, возвращает <code>true</code> (или <code>0</code>). Как вы можете заметить, условные утверждения внутри <code>[]</code> обычно оцениваются с помощью параметров, таких как <code>-eq</code>, что означает "равно". </p> <blockquote> <p>Для синтаксиса <code>arg1 OP arg2</code>, <code>OP</code> является одним из <code>-eq</code>, <code>-ne</code>, <code>-lt</code>, <code>-le</code>, <code>-gt</code> или -<code>ge</code>. Эти арифметические двоичные операторы возвращают <code>true</code>, если <code>arg1</code> равно, не равному, меньше чем, меньше или равно, больше чем или больше или равно <code>arg2</code> соответственно. <code>arg1</code> и <code>arg2</code> могут быть положительными или отрицательными целыми числами. - <em>Руководство по Bash</em></p> </blockquote> <p>Когда вы пытаетесь сравнить строки, вы можете использовать известный символ <code>==</code> или даже один знак равенства. <code>! =</code> возвращает <code>true</code>, когда строки разные.</p> <hr><h2>Но Кодекс не вполне корректен</h2> <p>Пока что код работает, но алгоритм неверен. Когда число делится на 3 и 5, наш алгоритм будет выводить только «Fizz». Давайте изменим наш код, чтобы удовлетворить последнее требование FizzBuzz.</p> <pre class="brush: bash noskimlinks noskimwords">#!/bin/bashfor number in {1..100}; do    output=""    if [ $((number%3)) -eq 0 ]; then        output="Fizz"    fi    if [ $((number%5)) -eq 0 ]; then        output="${output}Buzz"    fi    if [ -z $output ]; then        echo $number    else        echo $output;    fidone</pre> <p>Опять же, нам пришлось внести несколько изменений. Наиболее примечательным является введение переменной, а затем объединение «Buzz» на нее, если это необходимо. Строки в bash обычно определяются между двойными кавычками ("). Одиночные кавычки также можно использовать, но для более простой взаимосвязи лучше всего выбирать парные. В этих двойных кавычках вы можете ссылаться на переменные: <code>некоторый текст $variable какой-то другой текст</code> «заменит <code>$переменную</code>  своим содержимым. Если вы хотите объединить переменные со строками без пробелов между ними, вы можете поместить имя переменной в фигурные скобки. В большинстве случаев, как и PHP, вы не обязаны это делать, но это очень помогает, когда дело доходит до читаемости кода.</p> <div class="tip-shortcode"> <p><strong>Совет:</strong> Вы не можете сравнивать пустые строки. Это вернет отсутствующий параметр.</p> </div> <p>Поскольку аргументы внутри <code>[]</code> рассматриваются как параметры, для <code>"["</code>они должны отличаться от пустой строки. Таким образом, это выражение, хотя и логическое, выдает ошибку: <code>[$ output!= ""]</code>. Вот почему мы использовали <code>[-z $output]</code>, который возвращает <code>true</code>, если длина строки равна нулю. </p> <hr><h2>Метод извлечения для логического выражения</h2> <p>Один из способов улучшить наш пример - извлечь в функции математического выражения из операторов <code>if</code>, например:</p> <pre class="brush: bash noskimlinks noskimwords">#!/bin/bashfunction isDivisibleBy {    return $(($1%$2))}for number in {1..100}; do    output=""    if isDivisibleBy $number 3; then        output="Fizz"    fi    if isDivisibleBy $number 5; then        output="${output}Buzz"    fi    if [ -z $output ]; then        echo $number    else        echo $output;    fidone</pre> <p>Мы взяли выражения, сравнивающие остальные с нулем, и переместили их в функцию. Более того, мы устранили сравнение с нулем, потому что нуль означает для нас истинное. Нам нужно вернуть значение из математического выражения - это очень просто!</p> <div class="tip-shortcode"> <p><strong>Совет.</strong> Определение функции должно предшествовать его вызову.</p> </div> <p>В Bash вы можете определить метод как ф<code>ункцию func_name {commands; }</code>. Необязательно, существует второй синтаксис для объявления функций: <code>func_name () {commands; }</code>. Итак, мы можем удалить строку, <code>function</code> и добавить <code>«()»</code> после ее имени. Я лично предпочитаю этот вариант, как показано в примере выше. Он более явный и напоминает традиционные языки программирования.</p> <p>Вам не нужно указывать параметры для функции в Bash. Отправка параметров функции выполняется путем простого перечисления по ним после вызова функции, разделенного пробелами. Не размещайте запятые или скобки в вызове функции - это не сработает.</p> <p>Полученные параметры автоматически присваиваются переменным по числу. Первый параметр равен <code>$1</code>, второй - <code>$2</code> и т. д. Специальная переменная <code>$0</code> обозначает имя файла текущего скрипта.</p> <h3>Давайте поиграемся с параметрами</h3> <pre class="brush: bash noskimlinks noskimwords">#!/bin/bashfunction exampleFunc {    echo $1    echo $0    IFS="X"    echo "$@"    echo "$*"}exampleFunc "one" "two" "three"</pre> <p>Этот код будет выдавать следующий результат:</p> <pre class="brush: bash noskimlinks noskimwords">csaba@csaba ~ $ ./parametersExamples.shone./parametersExamples.shone two threoneXtwoXthre</pre> <p>Давайте проанализируем источник, построчно.</p> <ul><li>Последняя строка - вызов функции. Мы называем это тремя строковыми параметрами.</li> <li>Первая строка после shebang - это определение функции.</li> <li>Первая строка функции выводит первый параметр: «один». Пока все так просто.</li> <li>Вторая строка выводит имя файла текущего скрипта. Опять же, очень просто.</li> <li>Третья строка изменяет разделитель символов по умолчанию на букву "X". По умолчанию это " " (пробел). Вот как Bash знает, как параметры разделены.</li> <li>Четвертая строка выводит специальную переменную <code>$@</code>. Она представляет все параметры как одно слово, точно так же, как указано в вызове функции.</li> <li>В последней строке выводится другая специальная переменная <code>$*</code>. Она представляет все параметры, взятые один за другим и объединенные с первой буквой переменной IFS. Вот почему результат <code>oneXtwoXthre</code>.</li> </ul><hr><h2>Возврат строк из функций</h2> <p>Как я уже отмечал ранее, функции в Bash могут возвращать только целые числа. Таким образом, запись <code>return "строка"</code> будет неправильным кодом. Тем не менее, во многих ситуациях вам нужно больше нуля или одного. Мы можем реорганизовать наш пример FizzBuzz, чтобы в инструкции <code>for</code> мы просто выполнили вызов функции.</p> <pre class="brush: bash noskimlinks noskimwords">#!/bin/bashfunction isDivisibleBy {    return $(($1%$2))}function fizzOrBuzz {    output=""    if isDivisibleBy $1 3; then        output="Fizz"    fi    if isDivisibleBy $1 5; then        output="${output}Buzz"    fi    if [ -z $output ]; then        echo $1    else        echo $output;    fi}for number in {1..100}; do    fizzOrBuzz $numberdone</pre> <p>Ну, это первый шаг. Мы просто извлекли весь код в функцию, называемую <code>fizzOrBuzz</code>, а затем заменили <code>$number</code> на <code>$1</code>. Однако всякий вывод выполняется в функции <code>fizzOrBuzz</code>. Мы хотим вывести из цикла <code>for</code> оператор <code>echo</code>, чтобы мы могли добавить каждую строку к другой строке. Мы должны захватить вывод функции <code>fizzOrBuzz</code>.</p> <pre class="brush: bash noskimlinks noskimwords">#[...]for number in {1..100}; do    echo "-`fizzOrBuzz $number`"    fizzBuzzer=$(fizzOrBuzz $number)    echo "-${fizzBuzzer}"done</pre> <p>Мы немного обновили цикл <code>for</code> (никаких других изменений). Мы повторили все два раза двумя разными способами, чтобы продемонстрировать различия между двумя решениями по одной и той же проблеме.</p> <p>Первым решением для захвата вывода функции или другой команды является использование обратных ссылок. В 99% случаев это будет работать нормально. Вы можете просто ссылаться на переменную в backticks по их именам, как это было в случае с <code>$number</code>. Первые несколько строк вывода должны теперь выглядеть так:</p> <pre class="brush: bash noskimlinks noskimwords">csaba@csaba ~/Personal/Programming/NetTuts/The Basics of BASH Scripting/Sources $ ./fizzBuzz.sh-1-1-2-2-Fizz-Fizz-4-4-Buzz-Buzz-Fizz-Fizz-7-7</pre> <p>Как вы можете видеть, все дублируется. Тот же выход.</p> <p>Для второго решения мы решили сначала присвоить возвращаемое значение переменной. В этом назначении мы использовали <code>$()</code>, который в этом случае разворачивает скрипт, выполняет код и возвращает свой вывод.</p> <hr><h2>&amp;semi;, &amp;&amp; и ||</h2> <p>Вы помните, что мы использовали точку с запятой здесь и там? Они могут использоваться для выполнения нескольких команд, написанных на одной строке. Если вы разделите их точкой с запятой, они просто будут выполнены.</p> <p>Более сложный случай - использовать <code>&amp;&amp;</code> между двумя командами. Да, это логично И; это означает, что вторая команда будет выполнена только в том случае, если первая возвращает <code>true</code> (она выходит с 0). Это полезно; мы можем упростить утверждения <code>if</code> в этих сокращениях:</p> <pre class="brush: bash noskimlinks noskimwords">#!/bin/bashfunction isDivisibleBy {    return $(($1%$2))}function fizzOrBuzz {    output=""    isDivisibleBy $1 3 &amp;&amp; output="Fizz"    isDivisibleBy $1 5 &amp;&amp; output="${output}Buzz"    if [ -z $output ]; then        echo $1    else        echo $output;    fi}for number in {1..100}; do    echo "-`fizzOrBuzz $number`"done</pre> <p>Поскольку наша функция <code>isDivisibleBy</code> возвращает правильное возвращаемое значение, мы можем затем использовать <code>&amp;&amp;</code> для установки нужной переменной. Что после <code>&amp;&amp;</code> будет исполнено, только если условие <code>true</code>. Таким же образом мы можем использовать <code>||</code> (двойной символ) в качестве логического ИЛИ. Ниже приведен краткий пример.</p> <pre class="brush: bash noskimlinks noskimwords">csaba@csaba ~ $ echo "bubu" || echo "bibi"bubucsaba@csaba ~ $ echo false || echo "bibi"falsecsaba@csaba ~ $</pre> <hr><h2>Последние мысли</h2> <p>Это все для этого урока! Я надеюсь, что вы взяли несколько новых советов и приемов для написания собственных сценариев Bash. Спасибо за чтение, и следите за новостями на эту тему.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825568-osnovy-bash-scripting" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825568-osnovy-bash-scripting" class="tm-article-body__tags-item-link">Web Development</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
34260</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
556</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
