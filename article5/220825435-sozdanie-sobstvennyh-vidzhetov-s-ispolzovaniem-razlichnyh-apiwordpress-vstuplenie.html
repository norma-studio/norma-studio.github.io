
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Создание собственных виджетов с использованием различных API
WordPress: Вступление... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Создание собственных виджетов с использованием различных API
WordPress: Вступление... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Создание собственных виджетов с использованием различных API
WordPress: Вступление... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Создание собственных виджетов с использованием различных API
WordPress: Вступление... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Виджеты - это аккуратный способ дать владельцам сайтов
некоторый контроль над внешним видом (а иногда и функциональностью) своих
сайтов WordPress. В этой серии мы собираемся создать несколько виджетов
WordPress, объединив-Widgets API-с другими внешними API....">
<meta property="og:description" content="Виджеты - это аккуратный способ дать владельцам сайтов
некоторый контроль над внешним видом (а иногда и функциональностью) своих
сайтов WordPress. В этой серии мы собираемся создать несколько виджетов
WordPress, объединив-Widgets API-с другими внешними API....">
<meta name="twitter:description" content="Виджеты - это аккуратный способ дать владельцам сайтов
некоторый контроль над внешним видом (а иногда и функциональностью) своих
сайтов WordPress. В этой серии мы собираемся создать несколько виджетов
WordPress, объединив-Widgets API-с другими внешними API....">
<meta property="aiturec:description" content="Виджеты - это аккуратный способ дать владельцам сайтов
некоторый контроль над внешним видом (а иногда и функциональностью) своих
сайтов WordPress. В этой серии мы собираемся создать несколько виджетов
WordPress, объединив-Widgets API-с другими внешними API....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/411/posts/22460/final_image/Creating_Your_Own_Widgets_600px.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/411/posts/22460/final_image/Creating_Your_Own_Widgets_600px.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/411/posts/22460/final_image/Creating_Your_Own_Widgets_600px.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/411/posts/22460/final_image/Creating_Your_Own_Widgets_600px.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/411/posts/22460/final_image/Creating_Your_Own_Widgets_600px.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825435-sozdanie-sobstvennyh-vidzhetov-s-ispolzovaniem-razlichnyh-apiwordpress-vstuplenie.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825435-sozdanie-sobstvennyh-vidzhetov-s-ispolzovaniem-razlichnyh-apiwordpress-vstuplenie.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825435-sozdanie-sobstvennyh-vidzhetov-s-ispolzovaniem-razlichnyh-apiwordpress-vstuplenie.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825435-sozdanie-sobstvennyh-vidzhetov-s-ispolzovaniem-razlichnyh-apiwordpress-vstuplenie.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825435-sozdanie-sobstvennyh-vidzhetov-s-ispolzovaniem-razlichnyh-apiwordpress-vstuplenie.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825435-sozdanie-sobstvennyh-vidzhetov-s-ispolzovaniem-razlichnyh-apiwordpress-vstuplenie.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825435-sozdanie-sobstvennyh-vidzhetov-s-ispolzovaniem-razlichnyh-apiwordpress-vstuplenie.html" title="Создание собственных виджетов с использованием различных API
WordPress: Вступление... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Создание собственных виджетов с использованием различных API
WordPress: Вступление... | envatomarket.ru | norma-studio.github.io" title="Создание собственных виджетов с использованием различных API
WordPress: Вступление... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/54332343.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825435-sozdanie-sobstvennyh-vidzhetov-s-ispolzovaniem-razlichnyh-apiwordpress-vstuplenie.html" class="tm-user-info__username" title="
В. Бухтеев" aria-label="
В. Бухтеев">
В. Бухтеев</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Создание собственных виджетов с использованием различных API
WordPress: Вступление...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825435-sozdanie-sobstvennyh-vidzhetov-s-ispolzovaniem-razlichnyh-apiwordpress-vstuplenie" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="WordPress Widgets" href="https://norma-studio.github.io/article5/220825435-sozdanie-sobstvennyh-vidzhetov-s-ispolzovaniem-razlichnyh-apiwordpress-vstuplenie" class="tm-article-snippet__hubs-item-link"><span>WordPress Widgets</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825435-sozdanie-sobstvennyh-vidzhetov-s-ispolzovaniem-razlichnyh-apiwordpress-vstuplenie.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/411/posts/22460/final_image/Creating_Your_Own_Widgets_600px.jpg">
    <meta itemprop="headline name" content="Создание собственных виджетов с использованием различных API
WordPress: Вступление... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Виджеты - это аккуратный способ дать владельцам сайтов
некоторый контроль над внешним видом (а иногда и функциональностью) своих
сайтов WordPress. В этой серии мы собираемся создать несколько виджетов
WordPress, объединив-Widgets API-с другими внешними API....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Виджеты - это аккуратный способ дать владельцам сайтов
некоторый контроль над внешним видом (а иногда и функциональностью) своих
сайтов WordPress. В этой серии мы собираемся создать несколько виджетов
WordPress, объединив-Widgets API-с другими внешними API....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Виджеты - это аккуратный способ дать владельцам сайтовнекоторый контроль над внешним видом (а иногда и функциональностью) своихсайтов WordPress. В этой серии мы собираемся создать несколько виджетовWordPress, объединив <span>Widgets API</span> с другими внешними API.</p><p>Серия будет состоять из следующих руководств:</p> <ol><li>Вступление</li> <li>Похожие сообщения Widget</li> <li>Вход Widget</li> <li>FAQ Widget</li> <li>Самые популярные сообщения Widget с интеграциейGoogle Analytics</li> <li>Физический адрес Widget с интеграцией с GoogleMaps</li> <li>Вывод</li> </ol><p>В этом уроке я познакомлю вас с API-интерфейсом WordPressWidgets (re), создав простой текстовый виджет. Мы проанализируем и рассмотрим различные функции, виджетсоставляющие, чтобы понять, как виджеты WordPress работают в целом.</p> <p>Этот виджет будет также служить основой, на которой мы будемосновываться при создании других виджетов в последующих частях этой серии.</p><h2>Виджеты WordPress</h2><p>Виджеты WordPress добавляют контент и функции к вашимбоковым панелям или виджетным областям вашей темы. Виджеты предназначены для простого и легкого в использованииспособа предоставления дизайна и структурного контроля темы WordPress дляпользователя, не требуя от них знать, как кодировать.</p> <p>Большинство виджетов WordPress предлагают настройки ипараметры, такие как формы для заполнения, дополнительные изображения и другиефункции настройки.</p> <h3>Изучение класса виджета</h3> <p>Самый простой способ создать виджет WordPress - наследоватькласс <code class="inline">WP_Widget</code>. Таким образом вы можете использовать встроенные функции дляобновления виджета, отображения виджета и создания интерфейса администраторадля виджета.</p> <p>Чтобы полностью понять, как работают виджеты, мы создадим ирассмотрим пустой виджет. Затем мы определим каждую функцию, составляющую виджет, чтобы посмотреть, как они работают вместе, чтобы создать рабочий виджет.</p> <h3>Определение нашего виджета</h3><br><pre class="brush: php noskimlinks noskimwords">&lt;?phpclass TutsPlusText_Widget extends WP_Widget {      // widget constructor  public function __construct(){      }     public function widget( $args, $instance ) {    // outputs the content of the widget  }     public function form( $instance ) {    // creates the back-end form  }     // Updating widget replacing old instances with new  public function update( $new_instance, $old_instance ) {    // processes widget options on save  }  }</pre><br><h3>Подробные функции</h3> <p>Давайте рассмотрим каждую функцию более подробно</p> <h4>__construct()</h4> <p>Эта функция регистрирует виджет с помощью WordPress </p> <h4>widget()</h4> <p>Эта функция отвечает за внешний вид виджета. Он выводит содержимое виджета</p> <h4>update()</h4> <p>Обработка параметров виджетов при сохранении. Используйте эту функцию для обновления виджета (опция). Эта функция принимает два параметра:</p> <ol><li> <code>$new_instance </code>- значения, отправленные толькодля сохранения. Эти значения будут поступать из формы, определенной в методеform ()</li> <li> <code>$old_instance </code>- ранее сохраненные значения избазы данных</li> </ol><p>Не забудьте очистить все представленные пользователемзначения. Пользовательские значения всегда должны быть дезинфицированыперед отправкой в ​​базу данных</p> <h4>form()</h4> <p>Метод / функция <code class="inline">form ()</code> используется для определения формывиджетов внешнего вида, которую вы видите на панели виджетов в информационнойпанели. Эта форма позволяет пользователю настроить заголовок и другие параметрывиджета.</p> <p>Эта функция принимает следующие параметры:</p> <ul><li> <code>$instance </code>- ранее сохраненные значения из базы данных</li></ul><h2>Создание нашего виджета</h2> <p>Чтобы создать наш виджет, мы выполним следующие шаги:</p> <ul><li>Определите, что мы создаем</li> <li>Зарегистрируйте наш виджет в WordPress</li> <li>Создание внутренней формы</li> <li>Сохранение значений в базе данных</li> <li>Определение интерфейсного дисплея</li> <li>Зарегистрировать виджет</li> </ul><h3>Что мы создаем?</h3> <p>Как мы упоминали ранее, мы создаем простой текстовый виджет,который позволяет пользователю вводить заголовок и некоторый произвольныйтекст, который затем будет выводиться в интерфейсе ихнего веб-сайта, где размещаетсявиджет.</p> <h3>Конструктор виджета</h3> <p>Конструктор позволяет нам инициализировать наш виджет,перезаписав исходный класс (стандартный класс <code class="inline">WP_Widget</code>).</p><br><pre class="brush: php noskimlinks noskimwords">&lt;?phppublic function __construct(){      parent::__construct(    "tutsplustext_widget",__( "TutsPlus Text Widget", "tutsplustextdomain" ),array("classname"   =&gt; "tutsplustext_widget","description" =&gt; __( "A basic text widget to demo the Tutsplus series on creating your own widgets.", "tutsplustextdomain" ))      );            load_plugin_textdomain( "tutsplustextdomain", false, basename( dirname( __FILE__ ) ) . "/languages" );          }</pre><br><p>В приведенном выше коде мы вызываем родительскуюконструкторскую функцию класса WP_Widget и передаем ей аргументы:</p><ul><li>Base ID - уникальный идентификатор для виджета. Должно быть в нижнем регистре. Если оставить пустым, будет использоваться часть именикласса виджета.<br></li> <li>Имя - это имя виджета, отображаемого на страницеконфигурации (на панели инструментов).<br></li> <li>И (необязательный) массив, содержащий имя класса и описание. Описание показано на странице конфигурации (в панелиинструментов WordPress).</li> </ul><h3>Создание обратной формы</h3> <p>Внутренняя форма будет состоять из двух полей: полязаголовка и поля textarea. Вот скриншот формы, как он будет выглядеть в панели Widgets:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/411/posts/22460/image/back-end-form-600px.jpg" alt="Создание собственных виджетов с использованием различных APIWordPress: Вступление..." title="Создание собственных виджетов с использованием различных APIWordPress: Вступление..." width="50" height="50"><br></figure><br><p>Чтобы сгенерировать приведенную выше форму, мы начнем счистого HTML, а затем заменим некоторые значения атрибутов на некоторыепеременные и выражения PHP. Ниже приведен код HTML для создания двух полей:</p><p><br></p><pre class="brush: html noskimlinks noskimwords">&lt;p&gt;  &lt;label for="title"&gt;Title&lt;/label&gt;  &lt;input class="widefat" id="title" name="title" type="text" value="WIDGET TITLE" /&gt;&lt;/p&gt;&lt;p&gt;  &lt;label for="message"&gt;Simple Message&lt;/label&gt;  &lt;textarea class="widefat" rows="16" cols="20" id="message" name="message"&gt;message...&lt;/textarea&gt;              &lt;/p&gt;</pre><br><p>Чтобы перейти от этого к нашему окончательному коду дляфункции form (), нам нужно будет сделать некоторые из атрибутов вышединамического - а именно, имя, идентификатор и атрибут label для атрибута(который должен соответствовать идентификатору HTML, что есть метка). Мы также заменим значение текстового поля и содержимого поляtextarea динамическими значениями из базы данных, если они уже были сохранены.</p> <p>Вот код, в котором мы заканчиваем:<br></p><br><pre class="brush: php noskimlinks noskimwords">&lt;?php/**  * Back-end widget form.  *  * @see WP_Widget::form()  *  * @param array $instance Previously saved values from database.  */public function form( $instance ) {        $title = esc_attr( $instance["title"] );$message= esc_attr( $instance["message"] );?&gt;&lt;p&gt;&lt;label for="&lt;?php echo $this-&gt;get_field_id("title"); ?&gt;"&gt;&lt;?php _e("Title:"); ?&gt;&lt;/label&gt; &lt;input class="widefat" id="&lt;?php echo $this-&gt;get_field_id("title"); ?&gt;" name="&lt;?php echo $this-&gt;get_field_name("title"); ?&gt;" type="text" value="&lt;?php echo $title; ?&gt;" /&gt;&lt;/p&gt;&lt;p&gt;&lt;label for="&lt;?php echo $this-&gt;get_field_id("message"); ?&gt;"&gt;&lt;?php _e("Simple Message"); ?&gt;&lt;/label&gt; &lt;textarea class="widefat" rows="16" cols="20" id="&lt;?php echo $this-&gt;get_field_id("message"); ?&gt;" name="&lt;?php echo $this-&gt;get_field_name("message"); ?&gt;"&gt;&lt;?php echo $message; ?&gt;&lt;/textarea&gt;&lt;/p&gt;&lt;?php     }</pre><br><p>Приведенный выше код получает доступ и присваивает ранеесохраненные значения из базы данных двум переменным - <code class="inline">$title</code>и <code class="inline">$message</code>. Затем мы используем <code>esc_attr()</code> длякодирования возвращаемых значений и во избежание нарушения нашего кода. Затем мы возвращаем атрибут $ title в атрибут valueтекстового поля и echo $ message как содержимое поля textarea.</p> <p>В приведенном выше коде вы заметите два метода, которые,вероятно, новы для вас: get_field_id () и get_field_name ().</p> <ul><li> <strong>get_field_id ()</strong> - принимает имя поля в качестве аргумента исоздает атрибуты id для использования в полях form (). Это гарантирует, что идентификатор возвращаемого поляявляется уникальным</li> <li> <strong>get_field_name ()</strong> - принимает имя поля в качестве аргументаи строит атрибуты имени для использования в полях form (). Он гарантирует уникальность имени возвращаемого поля.</li> </ul><p>Атрибут метки <code>for </code>атрибутазакодирован так, чтобы отображать значение id элементов, которые они маркируют.</p> <p>Класс <code>widefat </code>используется для обеспечения того, чтобы полявашего виджета были похожи на другие поля на панели инструментов WordPress.</p><br><h3>Варианты обновления нашего виджета</h3> <p>Чтобы обновить наш виджет, мы напишем соответствующий код вметоде обновления. Здесь есть наш код:</p><pre class="brush: php noskimlinks noskimwords">&lt;?php/**  * Sanitize widget form values as they are saved.  *  * @see WP_Widget::update()  *  * @param array $new_instance Values just sent to be saved.  * @param array $old_instance Previously saved values from database.  *  * @return array Updated safe values to be saved.  */public function update( $new_instance, $old_instance ) {        $instance = $old_instance;$instance["title"] = strip_tags( $new_instance["title"] );$instance["message"] = strip_tags( $new_instance["message"] );    return $instance;    }</pre><br><p>Вышеупомянутая функция принимает два параметра: <code>$new_instance</code> и <code>$old_instance</code></p> <ul><li> <strong>$new_instance</strong> -это массив, содержащий новые настройки (этого экземпляра виджета), которыетолько что были введены пользователем через бэкэнд-форму, которую мы определяемв функции form ().</li> <li> <strong>$old_settings</strong> - это массив, содержащий старыенастройки. Это значения, которые в настоящее время хранятся в базеданных.</li> </ul><p>Функция update () возвращает массив настроек для сохраненияили false для отмены сохранения.</p> <p>В приведенном выше коде мы присваиваем $old_instanceпеременной $instance и заменяем ее заголовок и ключи сообщений значениями $new_instance. Возвращая новый и обновленный массив, мы эффективнообновляем наши настройки виджета.</p> <p>Функция <code>strip_tags ()</code> удаляет теги HTML и PHP теги изстроки, которая передается ему. Мы включаем эту функцию, чтобы избежать ситуации, когдапользователи вашей темы не могут закрыть теги, введенные через внешнюю форму, врезультате чего ваш сайт разбивается (не обрабатывается должным образом).</p><h3>Определение Front-End </h3><p>Функция <code>widget ()</code> отвечает за внешний вид виджета. Он принимает два параметра: <code>$args</code> и <code>$instance</code>. </p><p><code class="inline">$args</code> - это массив,переданный функции register_sidebar () при определении боковой области / виджетнойобласти, в которой размещен виджет. Это можно найти в файле <code class="inline">functions.php</code>. Ниже приведен пример объявления <code class="inline">register_sidebar ()</code>: <br></p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/411/posts/22460/image/register_sidebar_600px.jpg" alt="Создание собственных виджетов с использованием различных APIWordPress: Вступление..." title="Создание собственных виджетов с использованием различных APIWordPress: Вступление..." width="50" height="50"></figure><p>Массив содержит определения тегов открытия и закрытия самоговиджета и заголовка виджета.</p> <p><code class="inline">$instance</code> - массив, содержащий параметры для конкретногоэкземпляра виджета. Эти настройки будут получены из базы данных.<br></p> <p>Мы используем теги, упомянутые выше, в последнем кодевиджета:</p><pre class="brush: php noskimlinks noskimwords">&lt;?php/**    * Front-end display of widget.  *  * @see WP_Widget::widget()  *  * @param array $args     Widget arguments.  * @param array $instance Saved values from database.  */public function widget( $args, $instance ) {            extract( $args );        $title         = apply_filters( "widget_title", $instance["title"] );    $message = $instance["message"];    echo $before_widget;        if ( $title ) {echo $before_title . $title . $after_title;}echo $message;    echo $after_widget;    }</pre><br><p>В приведенном выше коде, мы, наконец, получаем код переднегоконца нашего виджета. Наш виджет просто выводит заголовок и какое-то произвольное сообщение (текст). Код делает именно это и обертывает сам виджет и заголовоквиджета внутри открывающих и закрывающих тегов, определенных в <code>functions.php</code>для конкретной области виджетов (боковой панели), где размещается виджет.</p> <p>Введем функцию <code>extract ()</code>, которую некоторые могут не знать. Эта функция принимает ассоциативный массив и возвращает его ключикак переменные. Это позволяет нам выводить $before_widget вместо $args["before_widget"], что немного упрощает наш код.</p> <p>Окончательный результат на фактическом веб-сайте будетвыглядеть примерно так:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/411/posts/22460/image/front-end-widget.jpg" alt="Создание собственных виджетов с использованием различных APIWordPress: Вступление..." title="Создание собственных виджетов с использованием различных APIWordPress: Вступление..." width="50" height="50"></figure><h3>Регистрация виджета</h3> <p>Виджет должен быть зарегистрирован в WordPress после егоопределения, чтобы он стал доступен на панели виджетов нашей панели инструментовWordPress.</p><pre class="brush: perl noskimlinks noskimwords">&lt;?phpadd_action( "widgets_init", function() {     register_widget( "TutsplusText_Widget" );});</pre><h3>Итоговый код </h3><p>Чтобы все было просто для конечных пользователей нашихвиджетов, мы собираемся обернуть наш код виджета в плагин WordPress, чтобы егобыло легко установить.</p> <p>Это также позволит нам сохранить весь код, который мы будем создаватьво всей серии в одном файле.</p> <p>Вот окончательный код:</p><br><pre class="brush: php noskimlinks noskimwords">&lt;?php/*Plugin Name: Tutsplus Widget PackPlugin URI: http://code.tutsplus.comDescription: A plugin containing various widgets created in a TutsPlus series on WordPress widgetsVersion: 0.1Author: TutsplusAuthor URI: http://code.tutsplus.comText Domain: tutsplustextdomainLicense: GPLv2Copyright 2014  TutsplusThis program is free software; you can redistribute it and/or modifyit under the terms of the GNU General Public License, version 2, aspublished by the Free Software Foundation.This program is distributed in the hope that it will be useful,but WITHOUT ANY WARRANTY; without even the implied warranty ofMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See theGNU General Public License for more details.You should have received a copy of the GNU General Public Licensealong with this program; if not, write to the Free SoftwareFoundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA*/class TutsplusText_Widget extends WP_Widget {    public function __construct() {    parent::__construct(    "tutsplustext_widget",__( "TutsPlus Text Widget", "tutsplustextdomain" ),array("classname"   =&gt; "tutsplustext_widget","description" =&gt; __( "A basic text widget to demo the Tutsplus series on creating your own widgets.", "tutsplustextdomain" )));      load_plugin_textdomain( "tutsplustextdomain", false, basename( dirname( __FILE__ ) ) . "/languages" );          }/**   * Front-end display of widget. * * @see WP_Widget::widget() * * @param array $args     Widget arguments. * @param array $instance Saved values from database. */public function widget( $args, $instance ) {            extract( $args );        $title     = apply_filters( "widget_title", $instance["title"] );    $message = $instance["message"];    echo $before_widget;        if ( $title ) {echo $before_title . $title . $after_title;}echo $message;    echo $after_widget;    } /**  * Sanitize widget form values as they are saved.  *  * @see WP_Widget::update()  *  * @param array $new_instance Values just sent to be saved.  * @param array $old_instance Previously saved values from database.  *  * @return array Updated safe values to be saved.  */public function update( $new_instance, $old_instance ) {        $instance = $old_instance;$instance["title"] = strip_tags( $new_instance["title"] );$instance["message"] = strip_tags( $new_instance["message"] );    return $instance;    } /**  * Back-end widget form.  *  * @see WP_Widget::form()  *  * @param array $instance Previously saved values from database.  */public function form( $instance ) {        $title = esc_attr( $instance["title"] );$message= esc_attr( $instance["message"] );?&gt;&lt;p&gt;&lt;label for="&lt;?php echo $this-&gt;get_field_id("title"); ?&gt;"&gt;&lt;?php _e("Title:"); ?&gt;&lt;/label&gt; &lt;input class="widefat" id="&lt;?php echo $this-&gt;get_field_id("title"); ?&gt;" name="&lt;?php echo $this-&gt;get_field_name("title"); ?&gt;" type="text" value="&lt;?php echo $title; ?&gt;" /&gt;&lt;/p&gt;&lt;p&gt;&lt;label for="&lt;?php echo $this-&gt;get_field_id("message"); ?&gt;"&gt;&lt;?php _e("Simple Message"); ?&gt;&lt;/label&gt; &lt;textarea class="widefat" rows="16" cols="20" id="&lt;?php echo $this-&gt;get_field_id("message"); ?&gt;" name="&lt;?php echo $this-&gt;get_field_name("message"); ?&gt;"&gt;&lt;?php echo $message; ?&gt;&lt;/textarea&gt;&lt;/p&gt;&lt;?php     }    }/* Register the widget */add_action( "widgets_init", function(){     register_widget( "TutsplusText_Widget" );});</pre><h2>Заключение</h2> <p>В этом уроке мы представили серию - создание вашихсобственных виджетов WordPress с использованием различных API. Мы внимательно изучили, что они собой представляют, как они работаюти как их создать.</p> <p>Цель этого руководства состояла в том, чтобы предоставитьподробное введение в API Widgets и предоставить базовый виджет, из которогомогут быть созданы другие виджеты в этой серии.</p> <p>В следующей части этой серии мы создадим виджет связанныхдолжностей. В то же время, пожалуйста, оставляйте любые вопросы иликомментарии в форме ниже.<br></p><p></p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825435-sozdanie-sobstvennyh-vidzhetov-s-ispolzovaniem-razlichnyh-apiwordpress-vstuplenie" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="WordPress Widgets" href="https://norma-studio.github.io/article5/220825435-sozdanie-sobstvennyh-vidzhetov-s-ispolzovaniem-razlichnyh-apiwordpress-vstuplenie" class="tm-article-body__tags-item-link">WordPress Widgets</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
43514</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
638</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
