
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Создание чата при помощи Modulus и Node.js
... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Создание чата при помощи Modulus и Node.js
... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Создание чата при помощи Modulus и Node.js
... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Создание чата при помощи Modulus и Node.js
... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="В данном руководстве я покажу вам, как реализовать веб-приложение для чата при помощи Node.js, Socket.IO (* библиотека JavaScript для приложений, работающих в режиме реального времени;- благодаря ей возможно реализовать двунаправленную передачу данных в любое время. Здесь и далее прим. пер.) и MongoDB, и затем мы вместе развернем (* выполним дистан...">
<meta property="og:description" content="В данном руководстве я покажу вам, как реализовать веб-приложение для чата при помощи Node.js, Socket.IO (* библиотека JavaScript для приложений, работающих в режиме реального времени;- благодаря ей возможно реализовать двунаправленную передачу данных в любое время. Здесь и далее прим. пер.) и MongoDB, и затем мы вместе развернем (* выполним дистан...">
<meta name="twitter:description" content="В данном руководстве я покажу вам, как реализовать веб-приложение для чата при помощи Node.js, Socket.IO (* библиотека JavaScript для приложений, работающих в режиме реального времени;- благодаря ей возможно реализовать двунаправленную передачу данных в любое время. Здесь и далее прим. пер.) и MongoDB, и затем мы вместе развернем (* выполним дистан...">
<meta property="aiturec:description" content="В данном руководстве я покажу вам, как реализовать веб-приложение для чата при помощи Node.js, Socket.IO (* библиотека JavaScript для приложений, работающих в режиме реального времени;- благодаря ей возможно реализовать двунаправленную передачу данных в любое время. Здесь и далее прим. пер.) и MongoDB, и затем мы вместе развернем (* выполним дистан...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/487/posts/22512/image/modulus-node-1.png">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/487/posts/22512/image/modulus-node-1.png">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/487/posts/22512/image/modulus-node-1.png">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/487/posts/22512/image/modulus-node-1.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/487/posts/22512/image/modulus-node-1.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825349-sozdanie-chata-pri-pomoschi-modulus-i-nodejs.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825349-sozdanie-chata-pri-pomoschi-modulus-i-nodejs.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825349-sozdanie-chata-pri-pomoschi-modulus-i-nodejs.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825349-sozdanie-chata-pri-pomoschi-modulus-i-nodejs.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825349-sozdanie-chata-pri-pomoschi-modulus-i-nodejs.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825349-sozdanie-chata-pri-pomoschi-modulus-i-nodejs.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825349-sozdanie-chata-pri-pomoschi-modulus-i-nodejs.html" title="Создание чата при помощи Modulus и Node.js
... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Создание чата при помощи Modulus и Node.js
... | envatomarket.ru | norma-studio.github.io" title="Создание чата при помощи Modulus и Node.js
... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/542343243.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825349-sozdanie-chata-pri-pomoschi-modulus-i-nodejs.html" class="tm-user-info__username" title="
А. Анискин" aria-label="
А. Анискин">
А. Анискин</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Создание чата при помощи Modulus и Node.js
...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825349-sozdanie-chata-pri-pomoschi-modulus-i-nodejs" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Node.js" href="https://norma-studio.github.io/article5/220825349-sozdanie-chata-pri-pomoschi-modulus-i-nodejs" class="tm-article-snippet__hubs-item-link"><span>Node.js</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825349-sozdanie-chata-pri-pomoschi-modulus-i-nodejs.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/487/posts/22512/image/modulus-node-1.png">
    <meta itemprop="headline name" content="Создание чата при помощи Modulus и Node.js
... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="В данном руководстве я покажу вам, как реализовать веб-приложение для чата при помощи Node.js, Socket.IO (* библиотека JavaScript для приложений, работающих в режиме реального времени;- благодаря ей возможно реализовать двунаправленную передачу данных в любое время. Здесь и далее прим. пер.) и MongoDB, и затем мы вместе развернем (* выполним дистан...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">В данном руководстве я покажу вам, как реализовать веб-приложение для чата при помощи Node.js, Socket.IO (* библиотека JavaScript для приложений, работающих в режиме реального времени;- благодаря ей возможно реализовать двунаправленную передачу данных в любое время. Здесь и далее прим. пер.) и MongoDB, и затем мы вместе развернем (* выполним дистан...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



 <p>В данном руководстве я покажу вам, как реализовать веб-приложение для чата при помощи Node.js, Socket.IO (* библиотека JavaScript для приложений, работающих в режиме реального времени;  благодаря ей возможно реализовать двунаправленную передачу данных в любое время. Здесь и далее прим. пер.) и MongoDB, и затем мы вместе развернем (* выполним дистанционную инсталляцию) его на Modulus (* PaaS (Platform as a Service) – платформа, предоставляемая в качестве услуги для разработчиков на Node.js. С 2017 стала Xervo, которая недоступна).</p><p>Для начала позвольте показать вам конечный вид приложения, которое получим к концу руководства.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/487/posts/22512/image/modulus-node-1.png" alt="Создание чата при помощи Modulus и Node.js..." title="Создание чата при помощи Modulus и Node.js..." width="50" height="50"></figure><p>Node.js будет ядром нашего приложения, Express будем использовать в качестве MVC (* Model-View-Controller – Модель-Представление-Контроллер. Архитектурный паттерн программного обеспечения, обычно используемый для разработки пользовательских интерфейсов, при котором приложение разделяется на три взаимодействующие части), базой данных будет MongoDB и Socket.IO будет использоваться для обеспечения коммуникации в режиме реального времени. Когда мы закончим с разработкой, то развернем наше приложение на Modulus. Фактически MongoDB находится на Modulus. </p><h2> Сценарий (* пример использования системы)</h2><ol><li>Джон хочет воспользоваться нашим приложением и открывает его в браузере.</li> <li>На первой странице он выбирает ник (* псевдоним), используемый во время чата, и входит в чат.</li> <li>В текстовом поле он что-то пишет и нажимает Enter.</li> <li>Текст отсылается RESTful веб-службе (* веб-служба, построенная с учётом REST (Representational State Transfer – передача состояния представления), то есть не нарушающая накладываемых им ограничений) и этот текст сохраняется в MongoDB.</li> <li>Перед сохранением в MongoDB тот же самый текст будет передан получателям, которые в тот момент также находятся в чате.</li> </ol><p>Как вы видите, это будет очень простое приложение, но при его создании мы рассмотрим почти все, что необходимо для создания веб-приложения. В данном приложении не будет системы каналов (* группа сообщений на определенную тематику), но вы можете форкнуть (* создать собственную копию, создание ветвления проекта) исходный код и реализовать модуль для каналов, чтобы попрактиковаться.</p><h2> Разработка приложения с нуля</h2><p>Я попробую объяснить небольшие части проекта и соединю их к концу руководства. Начнем с разработки серверной части приложения, затем перейдем к клиентской. Что же, давайте начнем с определения объектов доменов (* метаданные, абстрактно описывающие столбец таблицы, включая проверки и ограничения (т. е. определяющие все значения, которые может принимать соответствующий элемент)) модели MongoDB.</p><h3>2.1. Модель</h3><p>Для облегчения работы с базой данных мы будем использовать <span>Mongoose </span>(* ODM (Object Document Mapper - объектно-документный отобразитель), инструмент для моделирования в Node.js). В этом руководстве у нас имеется только одна <strong>модель </strong>– <code class="inline">Message</code>. Эта модель сообщений содержит только поля <code class="inline">text</code>, <code class="inline">createDate </code>и <strong>author</strong>. У нас отсутствует модель для автора (такая как <code class="inline">User</code>), поскольку мы реализуем систему регистрации/входа не полностью. В приложении будет простая страница, на которой отображаются ники участников, и такой ник будет сохранен в куки (* поддерживаемая протоколом НТТР текстовая запись размером до 4 Кбайт с данными о пользователе, возвращаемая Web-сервером при регистрации пользователя и хранящаяся на его ПК.). Ник будет использоваться в модели <code class="inline">Message </code>для наполнения поля <code class="inline">author</code>. Вы можете посмотреть на пример образца модели в формате JSON ниже:</p><pre class="brush: javascript noskimlinks noskimwords">{    text: "Hi, is there any Full Stack Developer here?"    author: "john_the_full_stack",    createDate: "2015.05.15"}</pre><p>Для создания подобных документов вы можете создать модель при помощи функций Mongoose, представленных ниже:</p><pre class="brush: javascript noskimlinks noskimwords">var mongoose = require("mongoose")var Message = new mongoose.Schema({    author: String,    message: String,    createDate: {        type: Date,        default: Date.now    }});mongoose.model("Message", Message)</pre><p>Просто импортируйте модуль Mongoose, определите поля и их атрибуты вашей модели в формате JSON и создайте модель под названием <code class="inline">Message</code>. Эта модель будет использоваться на страницах где необходимо.</p><p>Возможно у вас возник вопрос, зачем мы сохраняем сообщения в базу данных, если мы уже передали это сообщение получателю в том же самом канале.  Действительно, вам не нужно сохранять сообщения из чата, но я хотел бы объяснить, как взаимодействовать с базой данных. Как бы там ни было, мы будем использовать эту модель в нашем проекте внутри контроллеров. Контроллеров?</p><h3>2.2. Контроллер</h3><p>Как я упомянул выше, мы будем использовать Express для реализации MVC. И <code class="inline"><strong>С</strong></code> означает <code class="inline">контроллер</code>. В нашем проекте будет только две конечные точки (* отдельные функции API) для работы с сообщениями. Одна из них служит для загрузки недавних сообщений чата, а другая – для сохранения присланных сообщений в базу данных и дальнейшей передачи их в канал. </p><pre class="brush: javascript noskimlinks noskimwords">.....app.get("/chat", function(req, res){    res.sendFile(__dirname + "/index.html");});app.get("/login", function(req, res){    res.sendFile(__dirname + "/login.html");});app.post("/messages", function(req, res, next) {    var message = req.body.message;    var author = req.body.author;    var messageModel = new Message();    messageModel.author = author;    messageModel.message = message;    messageModel.save(function (err, result) {       if (!err) {           Message.find({}).sort("-createDate").limit(5).exec(function(err, messages) {               io.emit("message", messages);           });           res.send("Message Sent!");       } else {           res.send("Technical error occurred!");       }    });});app.get("/messages", function(req, res, next) {    Message.find({}).sort("-createDate").limit(5).exec(function(err, messages) {        res.json(messages);    });});.....</pre><p>Первый и второй контроллеры служат просто для предоставления статических файлов HTML для страниц входа и чата. Третий обрабатывает POST-запросы к конечной точке <code class="inline">/messages,</code> где создаются и сохраняются новые сообщения. В этом контроллере сначала создается образец модели Message из тела запроса, и затем он сохраняется в базу данных при помощи функции Mongoose <code class="inline">save</code>.<strong> </strong> </p><p>Я не буду углубляться в подробности работы с Mongoose. Вы можете ознакомиться с ними <span>в документации.</span> Вы можете предоставить функцию обратного вызова для функции save для проверки наличия каких-либо проблем. Если все успешно, то мы извлекаем последние пять записей, отсортированных в убывающем порядке за счет <code class="inline">createDate </code>(* дата создания), и передаем пять сообщений участникам канала. </p><p>Что же, мы закончили с <code class="inline">MC</code>. Теперь давайте перейдем к <code class="inline">представлению</code>.</p><h3>2.3. Представление</h3><p>Как правило, в Express могут использоваться шаблонизаторы, например:<span> Jade,</span> <span>EJS</span>, <span>Handlebars </span>и т. д. Однако у нас есть только одна страница, и это – страница с сообщениями, поэтому мы обработаем запросы к ней статически. Собственно, как я сказал выше, имеется еще два контроллера для обслуживания этой статической страницы. Вот что мы используем для обработки запросов к статической странице HTML:</p><pre class="brush: javascript noskimlinks noskimwords">app.get("/chat", function(req, res){    res.sendFile(__dirname + "/index.html");});app.get("/login", function(req, res){    res.sendFile(__dirname + "/login.html");});</pre><p>В ответ на запросы к этой конечной точке отсылаются index.html и login.html при помощи <code class="inline">res.sendFile.</code> Поскольку оба index.html и login.html находятся в той же папке, что и server.js, то мы использовали  <strong>__dirname </strong>перед именем файла HTML.</p><h3>2.4. Клиентская часть</h3><p>На странице клиентской стороны я использовал Bootstrap (* веб-фреймворк для создания дизайна веб-сайтов и веб-приложений), и нет необходимости объяснять, как я это сделал. Я просто подключил к текстовому окну функцию, и при каждом нажатии клавиши <strong>Enter </strong>или кнопки <strong>Send</strong> сообщение отсылается к веб-службе на стороне сервера. </p><p>Для этой страницы также необходим файл Javascript, где реализуется функционал Socket.IO – прослушивание канала под названием <code class="inline">message</code>. Модуль Socket.IO уже подключен на стороне сервера, и и когда вы его используете там, то автоматически добавляется конечная точка для обслуживания файла Javascript Socket.IO (* на клиентской части), и мы получаем его c CDN (* content delivery network – сеть доставки (распространения) контента) – <code class="inline">&lt;script src="//cdn.socket.io/socket.io-1.3.5.js"&gt;</code>. </p><pre class="brush: javascript noskimlinks noskimwords">&lt;script&gt;        var socket = io();        socket.on("message", function (messages) {            refreshMessages(messages);        });        function refreshMessages(messages) {            $(".media-list").html("");            $.each(messages.reverse(), function(i, message) {                $(".media-list").append("&lt;li class="media"&gt;&lt;div class="media-body"&gt;&lt;div class="media"&gt;&lt;div class="media-body"&gt;"                + message.message + "&lt;br/&gt;&lt;small class="text-muted"&gt;" + message.author + " | " + message.createDate + "&lt;/small&gt;&lt;hr/&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;");            });        }        $(function(){            if (typeof $.cookie("realtime-chat-nickname") === "undefined") {                window.location = "/login"            } else {                $.get("/messages", function (messages) {                    refreshMessages(messages)                });                $("#sendMessage").on("click", function() {                    sendMessage()                });                $("#messageText").keyup(function(e){                    if(e.keyCode == 13)                    {                        sendMessage();                    }                });            }            function sendMessage() {                $container = $(".media-list");                $container[0].scrollTop = $container[0].scrollHeight;                var message = $("#messageText").val();                var author = $.cookie("realtime-chat-nickname");                $.post( "/messages", {message: message, author: author}, function( data ) {                    $("#messageText").val("")                });                $container.animate({ scrollTop: $container[0].scrollHeight }, "slow");            }        })    &lt;/script&gt;</pre><p>Происходит еще одна проверка в коде выше – проверка куки-файла. Если вы не выбрали никакого ника для чата, то это означает, что в куки не указан ник, и вы будете перенаправлены на страницу входа. </p><p>В ином случае будут запрошены пять последних сообщений при помощи простого запроса AJAX к конечно точке <code class="inline">/messages</code>. Подобным образом каждый раз при нажатии кнопки <strong>Send</strong> или клавиши <strong>Enter </strong>текстовое сообщение будет извлечено из текстового поля и ник будет извлечен из куки, а далее эти значения будут отосланы на сервер по методу POST. В приложении не осуществляется строгой проверки ника, поскольку я хотел бы сосредоточиться на реализации части, посвященной коммуникации в режиме реального времени, а не на разборе механизма аутентификации.</p><p>Как вы видите, в целом структура проекта очень проста. Давайте перейдем к развертыванию приложения. Как я сказал выше мы будем использовать <span>Modulus</span>, одну из лучших PaaS для размещения, масштабирования и мониторинга вашего приложения на языке вашего выбора. </p><h2> <span class="sectionnum">3. Развертывание</span></h2><h3>3.1. Предварительная подготовка</h3><p>Первое, что приходит в голову – это показать вам, как развертывать приложение, однако нам необходимо для начала разобраться с базой данных. Давайте посмотрим, как создавать базу данных на Modulus и затем осуществим развертывание. </p><p>Перейдите в инструментальную панель после создания аккаунта. Кликните по меню <strong>Databases </strong>и далее – по <strong>Create Database</strong>. </p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/487/posts/22512/image/modulus-node-2.png" alt="Создание чата при помощи Modulus и Node.js..." title="Создание чата при помощи Modulus и Node.js..." width="50" height="50"></figure><p>Заполните необходимые поля в выскочившей форме как показано ниже.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/487/posts/22512/image/modulus-node3.png" alt="Создание чата при помощи Modulus и Node.js..." title="Создание чата при помощи Modulus и Node.js..." width="50" height="50"></figure><p>После заполнения необходимых полей и нажатия кнопки <strong>Create </strong>для вас будет создана база данных MongoDB и вы увидите URL вашей база данных на экране. Мы будем использовать <strong>MONGO  </strong><strong>URI</strong>, поэтому скопируйте этот URI.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/487/posts/22512/image/modulus-node-4.png" alt="Создание чата при помощи Modulus и Node.js..." title="Создание чата при помощи Modulus и Node.js..." width="50" height="50"></figure><p>В нашем проекте Mongo URI получаем из переменной  окружения<code class="inline"> MONGO_URI</code>, и вам необходимо задать значение этой переменной окружения в инструментальной панели. Перейдите в инструментальную панель, кликните меню <strong>Projects</strong>, выберите ваш проект в списке и щелкните <strong>Administration </strong>в левом меню.  На этой странице вы увидите раздел для переменных  окружения после прокрутки страницы как показано ниже:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/487/posts/22512/image/modulus-node-7.png" alt="Создание чата при помощи Modulus и Node.js..." title="Создание чата при помощи Modulus и Node.js..." width="50" height="50"></figure><p>Вы можете развернуть проект на Modulus двумя способами: </p><ul><li>закачать проект в виде ZIP-файла при помощи инструментальной панели</li> <li>развернуть при помощи консоли, используя CLI (* command-line interface – интерфейс командной строки) Modulus</li> </ul><p>Я выбрал второй вариант, поскольку первым легко воспользоваться. Для начала установите CLI  Modulus:</p><pre class="brush: javascript noskimlinks noskimwords">npm install -g modulus</pre><p>Перейдите в папку проекта и выполните следующую команду для входа в Modulus.</p><pre class="brush: javascript noskimlinks noskimwords">modulus login</pre><p>После выполнения вышеуказанной команды вас попросят ввести username и password:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/487/posts/22512/image/modulus-node-5.png" alt="Создание чата при помощи Modulus и Node.js..." title="Создание чата при помощи Modulus и Node.js..." width="50" height="50"></figure><p>Если вы создали аккаунт при помощи GitHub, то можете использовать опцию <code class="inline">--github.</code></p><pre class="brush: javascript noskimlinks noskimwords">modulus login --github</pre><p>Теперь вы вошли в Modulus, и пришло время создать проект. Используйте следующую команду для создания проекта:</p><pre class="brush: javascript noskimlinks noskimwords">modulus project create "Realtime Chat"</pre><p>После этого вас попросят выбрать среду исполнения. Выберите первый вариант, то есть Node.js, и далее вам будет предложено ввести размер servo, который можете оставить по умолчанию.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/487/posts/22512/image/modulus-node-6.png" alt="Создание чата при помощи Modulus и Node.js..." title="Создание чата при помощи Modulus и Node.js..." width="50" height="50"></figure><p>Мы создали проект, и теперь мы развернем наш текущий проект на Modulus. Выполните следующую команду, чтобы передать текущий проект в проект <strong>Realtime Chat</strong> на стороне Modulus.</p><pre class="brush: javascript noskimlinks noskimwords">modulus deploy</pre><p>В результате ваш проект будет развернут на Modulus и вы получите URL вашего запущенного проекта в конце сообщения об успешном размещении:</p><pre class="brush: plain noskimlinks noskimwords">Realtime Chat running at realtime-chat-46792.onmodulus.net</pre><p>Как видите, развернуть проект на Modulus очень просто! </p><p>CLI Modulus  предлагает очень полезные команды для использования во время развертывания проекта или в период работы. Например, чтобы присоединить записи журнала регистрации вашего запущенного проекта, вы можете воспользоваться командой <code class="inline">modulus project logs tail</code>, для создания базы данных MongoDB используйте <code class="inline">modulus mongo create &lt;db-name&gt;,</code> чтобы задать значение переменной окружения воспользуйтесь <code class="inline">modulus env set &lt;key&gt;&lt;value&gt;</code> и т. д. Вы можете ознакомиться со всем списком команд при помощи modulus help. </p><h2>Заключение</h2><p>Главной целью этого руководства было показать вам, как создавать приложение для чата при помощи Node.js, Socket.IO и MongoDB. Для запуска проекта для публичного доступа мы использовали в качестве провайдера PaaS Modulus. Развернуть проект на Modulus очень просто, также она предоставляет собственную базу данных (MongoDB) для наших проектов. Кроме этого вы можете использовать очень полезные инструменты инструментальной панели Modulus, например: Logs (журнал регистрации [событий]), Notifications (извещения), Auto-Scaling (авто-масштабирование), Database Administration (администрирование базой данных) и т. д.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825349-sozdanie-chata-pri-pomoschi-modulus-i-nodejs" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Node.js" href="https://norma-studio.github.io/article5/220825349-sozdanie-chata-pri-pomoschi-modulus-i-nodejs" class="tm-article-body__tags-item-link">Node.js</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
37676</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
378</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
