
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Руководство по пользовательским типам записей: создание, выведение и дополнительные поля.... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Руководство по пользовательским типам записей: создание, выведение и дополнительные поля.... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Руководство по пользовательским типам записей: создание, выведение и дополнительные поля.... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Руководство по пользовательским типам записей: создание, выведение и дополнительные поля.... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="WordPress подразумевает кастомизацию/настройку.- Он был создан таким образом, чтобы можно было настроить абсолютно каждый раздел. В этом уроке мы рассмотрим пользовательские типы записей, одну из наиболее значительных и замечательных возможностей WordPress, с помощью которой WordPress смог достичь новых высот....">
<meta property="og:description" content="WordPress подразумевает кастомизацию/настройку.- Он был создан таким образом, чтобы можно было настроить абсолютно каждый раздел. В этом уроке мы рассмотрим пользовательские типы записей, одну из наиболее значительных и замечательных возможностей WordPress, с помощью которой WordPress смог достичь новых высот....">
<meta name="twitter:description" content="WordPress подразумевает кастомизацию/настройку.- Он был создан таким образом, чтобы можно было настроить абсолютно каждый раздел. В этом уроке мы рассмотрим пользовательские типы записей, одну из наиболее значительных и замечательных возможностей WordPress, с помощью которой WordPress смог достичь новых высот....">
<meta property="aiturec:description" content="WordPress подразумевает кастомизацию/настройку.- Он был создан таким образом, чтобы можно было настроить абсолютно каждый раздел. В этом уроке мы рассмотрим пользовательские типы записей, одну из наиболее значительных и замечательных возможностей WordPress, с помощью которой WordPress смог достичь новых высот....">
<meta property="og:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=850/wp/authors/legacy/soumitra/2012/10/18/1.2.jpg">
<meta property="aiturec:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=850/wp/authors/legacy/soumitra/2012/10/18/1.2.jpg">
<meta name="twitter:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=850/wp/authors/legacy/soumitra/2012/10/18/1.2.jpg">
<meta property="vk:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=850/wp/authors/legacy/soumitra/2012/10/18/1.2.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=850/wp/authors/legacy/soumitra/2012/10/18/1.2.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825616-rukovodstvo-po-polzovatelskim-tipam-zapisej-sozdanie-vyvedenie-i-dopolnitelnye-polya.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825616-rukovodstvo-po-polzovatelskim-tipam-zapisej-sozdanie-vyvedenie-i-dopolnitelnye-polya.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825616-rukovodstvo-po-polzovatelskim-tipam-zapisej-sozdanie-vyvedenie-i-dopolnitelnye-polya.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825616-rukovodstvo-po-polzovatelskim-tipam-zapisej-sozdanie-vyvedenie-i-dopolnitelnye-polya.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825616-rukovodstvo-po-polzovatelskim-tipam-zapisej-sozdanie-vyvedenie-i-dopolnitelnye-polya.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825616-rukovodstvo-po-polzovatelskim-tipam-zapisej-sozdanie-vyvedenie-i-dopolnitelnye-polya.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825616-rukovodstvo-po-polzovatelskim-tipam-zapisej-sozdanie-vyvedenie-i-dopolnitelnye-polya.html" title="Руководство по пользовательским типам записей: создание, выведение и дополнительные поля.... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Руководство по пользовательским типам записей: создание, выведение и дополнительные поля.... | envatomarket.ru | norma-studio.github.io" title="Руководство по пользовательским типам записей: создание, выведение и дополнительные поля.... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/ded38a8520cf75a955c11fc92a1a403e.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825616-rukovodstvo-po-polzovatelskim-tipam-zapisej-sozdanie-vyvedenie-i-dopolnitelnye-polya.html" class="tm-user-info__username" title="
В. Самсонов" aria-label="
В. Самсонов">
В. Самсонов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Руководство по пользовательским типам записей: создание, выведение и дополнительные поля....</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825616-rukovodstvo-po-polzovatelskim-tipam-zapisej-sozdanie-vyvedenie-i-dopolnitelnye-polya" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Plugins" href="https://norma-studio.github.io/article5/220825616-rukovodstvo-po-polzovatelskim-tipam-zapisej-sozdanie-vyvedenie-i-dopolnitelnye-polya" class="tm-article-snippet__hubs-item-link"><span>Plugins</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825616-rukovodstvo-po-polzovatelskim-tipam-zapisej-sozdanie-vyvedenie-i-dopolnitelnye-polya.html" />
    <link itemprop="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=850/wp/authors/legacy/soumitra/2012/10/18/1.2.jpg">
    <meta itemprop="headline name" content="Руководство по пользовательским типам записей: создание, выведение и дополнительные поля.... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="WordPress подразумевает кастомизацию/настройку.- Он был создан таким образом, чтобы можно было настроить абсолютно каждый раздел. В этом уроке мы рассмотрим пользовательские типы записей, одну из наиболее значительных и замечательных возможностей WordPress, с помощью которой WordPress смог достичь новых высот....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">WordPress подразумевает кастомизацию/настройку.- Он был создан таким образом, чтобы можно было настроить абсолютно каждый раздел. В этом уроке мы рассмотрим пользовательские типы записей, одну из наиболее значительных и замечательных возможностей WordPress, с помощью которой WordPress смог достичь новых высот....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>WordPress подразумевает кастомизацию/настройку.  Он был создан таким образом, чтобы можно было настроить абсолютно каждый раздел. В этом уроке мы рассмотрим <em>пользовательские типы записей</em>, одну из наиболее значительных и замечательных возможностей WordPress, с помощью которой WordPress смог достичь новых высот.<!--more--></p> <hr><h2>Что такое пользовательские типы записей?</h2> <p>Предположим, вы хотите чтобы в вашем блоге был отдельный раздел для кинообзоров. Используя пользовательские типы записей вы сможете создать новый тип, к примеру, Записи и Страницы, который будет содержать другой вид данных.  У него будет свое меню администратора, специальные страницы для редактирования, свои таксономии и многие другие инструменты, которые нужны для полноценной работы с публикациями.</p> <p>Пользовательские типы записей  - это дополнительный набор настроек администратора, который существует наряду с настройками для таких типов записей по умолчанию, как <strong>записи</strong>, <strong>страницы</strong>, <strong>прикрепленные файлы</strong>, и т.д. Пользовательские типы записей могут хранить любой тип данных. У них есть отдельный редактор, загрузчик медиафайлов, и они используют уже существующую структуру таблиц WordPress, что упрощает управление данными. Основное преимущество пользовательских типов записей, созданных при помощи WordPress API, состоит в их совместимости с уже существующими темами и шаблонами. Также, благодаря использованию постоянных ссылок, пользовательские типы постов хорошо взаимодействуют и с поисковыми системами.</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=850/wp/authors/legacy/soumitra/2012/10/18/1.2.jpg" alt="Руководство по пользовательским типам записей: создание, выведение и дополнительные поля...." title="Руководство по пользовательским типам записей: создание, выведение и дополнительные поля...." width="50" height="50"></div> <hr><h2>Зачем использовать пользовательские типы записей?</h2> <p>Пользовательские типы записей помогают хранить разные типы записей в разных местах. Это помогает отделить обычные посты от других.   Вот и все.</p> <hr><h2>Создаем плагин для пользовательского типа записи</h2> <p>Мы создадим плагин для пользовательского типа записи, который будет выводить лучшие кинообзоры. Начнем. </p> <h3> <span>Шаг 1</span>. Создайте папку для WordPress плагина </h3> <p>Откройте папку с WordPress плагинами  и создайте новую папку <strong>Movie-Reviews</strong>.</p> <h3> <span>Шаг 2</span>: Создайте PHP файл</h3> <p>В созданной папке создайте PHP файл <strong>Movie-Reviews.php</strong></p> <h3> <span>Шаг 3</span>: Добавьте шапку</h3> <p>Откройте созданный файл и вставьте код для шапки сверху.</p> <pre class="brush: php noskimlinks noskimwords">&lt;?php/*Plugin Name: Movie ReviewsPlugin URI: https://wp.tutsplus.com/Description: Declares a plugin that will create a custom post type displaying movie reviews.Version: 1.0Author: Soumitra ChakrabortyAuthor URI: http://wp.tutsplus.com/License: GPLv2*/?&gt;</pre> <h3> <span>Шаг 4</span>: Зарегистрируйте пользовательскую функцию</h3> <p>Перед тегом закрытия PHP команды  введите следующую строку кода <code>create_movie_review</code>. При инициализации она будет запускать соответствующую пользовательскую функцию каждый раз при генерации страницы.</p> <pre class="brush: php noskimlinks noskimwords">add_action( "init", "create_movie_review" );</pre> <h3> <span>Шаг 5</span>: Выполнение функции</h3> <p>Код для выполнения функции <code>create_movie_review</code>.</p> <pre class="brush: php noskimlinks noskimwords">function create_movie_review() {  register_post_type( "movie_reviews",array("labels" =&gt; array("name" =&gt; "Movie Reviews","singular_name" =&gt; "Movie Review","add_new" =&gt; "Add New","add_new_item" =&gt; "Add New Movie Review","edit" =&gt; "Edit","edit_item" =&gt; "Edit Movie Review","new_item" =&gt; "New Movie Review","view" =&gt; "View","view_item" =&gt; "View Movie Review","search_items" =&gt; "Search Movie Reviews","not_found" =&gt; "No Movie Reviews found","not_found_in_trash" =&gt; "No Movie Reviews found in Trash","parent" =&gt; "Parent Movie Review"),"public" =&gt; true,"menu_position" =&gt; 15,"supports" =&gt; array( "title", "editor", "comments", "thumbnail", "custom-fields" ),"taxonomies" =&gt; array( "" ),"menu_icon" =&gt; plugins_url( "images/image.png", __FILE__ ),"has_archive" =&gt; true));}</pre> <p>Функция <code>register_post_type</code> сделает бОльшую часть работы в нашем случае. Сразу как она вызовется, она подготовит необходимую для нового пользовательского поста конфигурацию WordPress, включая дополнительные разделы для администратора. В функцию передается два типа аргументов: уникальное имя (<code>name</code>)  пользовательского типа поста и массив с его свойствами. Это другой массив с другими метками, которые указывают какие текстовые  строки будут показываться в разных частях пользовательского типа записи, например: "<code>name</code>" выводит название пользовательского типа записи на панели управления, "<code>edit</code>" и "<code>view</code>" выводят кнопки <strong>Edit </strong>и <strong>View</strong>. Думаю, все остальные аргументы говорят сами за себя.</p> <p>Так, в следующих аргументах:</p> <ul><li> <code>"public" =&gt; true</code> задает видимость пользовательского типа записи как на панели управления администратора, так и в клиентской части.</li> <li> <code>"menu_position" =&gt; 15</code> задает, где в меню, будет находиться пользовательский тип записи.</li> <li> <code>"supports" =&gt; array( "title", "editor", "comments", "thumbnail", "custom-fields" )</code> задает те атрибуты пользовательского типа записи, которые будут отображаться.</li> <li> <code>"taxonomies" =&gt; array( "" )</code> создает пользовательские таксономии. В данном случае они не определены.</li> <li> <code>"menu_icon" =&gt; plugins_url( "images/image.png", __FILE__ ) </code> показывает иконку в меню администратора.</li> <li> <code>"has_archive" =&gt; true</code> разрешает архивирование пользовательских типов записей.</li> </ul><p>Вы можете узнать больше о других аргументах, используемых в пользовательских типах записей на странице <span>WordPress Codex <code>register_post_type</code></span>. </p> <h3> <span>Шаг 6</span>: Иконка для пользовательского типа записей</h3> <p>Сохраните иконку размером 16x16 пикселей в вашей папке с плагином.  Это нужно для того, чтобы на панели управления у пользовательского типа записи была иконка.</p> <h3> <span>Шаг 7</span>: Активируйте плагин</h3> <p>Активируйте плагин, и вуаля, у вас есть пользовательский тип записи с возможностью редактировать текст, настройками для публикации, изображений, комментариев, а также редактор пользовательских полей.</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=850/wp/authors/legacy/soumitra/2012/10/18/11.jpg" alt="Руководство по пользовательским типам записей: создание, выведение и дополнительные поля...." title="Руководство по пользовательским типам записей: создание, выведение и дополнительные поля...." width="50" height="50"></div> <h3> <span>Шаг 8</span>: Добавляем новую запись</h3> <p>Выберите <strong>Добавить новую</strong>, чтобы открыть панель редактирования пользовательского типа записи. Добавьте название фильма, текст обзора, а также выберите миниатюру  изображения.</p> <h3> <span>Шаг 9</span>: Публикуем</h3> <p>Опубликуйте запись и нажмите <strong>View Movie Review</strong>, чтобы увидеть созданный кинообзор.</p> <hr><h2>Создание дополнительных полей для пользовательских типов записей</h2> <p>Механизм дополнительных полей (метабоксов) использует встроенную в WordPress систему дополнительных полей. Это помогает добавлять поля, предназначенные исключительно для пользовательских типов записей, не используя в редакторе пользовательских полей по умолчанию.</p> <h3> <span>Шаг 1</span>: Регистрируем пользовательскую функцию</h3> <p>Откройте файл <strong>Movie-Reviews.php</strong> и добавьте следующий код перед тегом закрытия. Этот код регистрирует функцию, которая будет вызываться при посещении панели администратора WordPress.</p> <pre class="brush: php noskimlinks noskimwords">add_action( "admin_init", "my_admin" );</pre> <h3> <span>Шаг 2</span>: Выполняем пользовательскую функцию</h3> <p>Добавьте выполнение функции <code>my_admin</code>, которая регистрирует дополнительные поля и связывает их с пользовательским типом записи <code>movie_reviews</code>.</p> <pre class="brush: php noskimlinks noskimwords">function my_admin() {add_meta_box( "movie_review_meta_box","Movie Review Details","display_movie_review_meta_box","movie_reviews", "normal", "high");}</pre> <p>В данном случае функция <code>add_meta_box</code> используется для добавления дополнительных полей к пользовательскому типу записей. Об атрибутах:</p> <ul><li> <code>movie_review_meta_box</code> необходимый атрибут для HTML <code>id</code> </li> <li> <code>Movie Review Details</code> текст, которые будет виден в заголовке дополнительного поля</li> <li> <code>display_movie_review_meta_box</code> функция обратного вызова которая отображает содержимое дополнительных полей</li> <li> <code>movie_review</code> имя пользовательского типа записи, где будут отображаться дополнительные поля</li> <li> <code>normal</code> определяет где на странице будет показан блок редактирования</li> <li> <code>high</code> определяет приоритет отображаемых полей</li> </ul><h3> Шаг 3: Выполняем функцию <code>display_movie_review_meta_box</code></h3> <pre class="brush: php noskimlinks noskimwords">&lt;?phpfunction display_movie_review_meta_box( $movie_review ) {// Retrieve current name of the Director and Movie Rating based on review ID$movie_director = esc_html( get_post_meta( $movie_review-&gt;ID, "movie_director", true ) );$movie_rating = intval( get_post_meta( $movie_review-&gt;ID, "movie_rating", true ) );?&gt;&lt;table&gt;&lt;tr&gt;&lt;td style="width: 100%"&gt;Movie Director&lt;/td&gt;&lt;td&gt;&lt;input type="text" size="80" name="movie_review_director_name" value="&lt;?php echo $movie_director; ?&gt;" /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style="width: 150px"&gt;Movie Rating&lt;/td&gt;&lt;td&gt;&lt;select style="width: 100px" name="movie_review_rating"&gt;&lt;?php// Generate all items of drop-down listfor ( $rating = 5; $rating &gt;= 1; $rating -- ) {?&gt;&lt;option value="&lt;?php echo $rating; ?&gt;" &lt;?php echo selected( $rating, $movie_rating ); ?&gt;&gt;&lt;?php echo $rating; ?&gt; stars &lt;?php } ?&gt;&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;?php}?&gt;</pre> <p>Этот код выводит содержимое дополнительных полей. Здесь используется объектная переменная, которая содержит информацию о каждом из показанных на панели редактирования кинообзоров. Используя этот объект мы получили <strong>ID записи</strong> и использовали его, чтобы сделать запрос в базу данных для получения имени режиссера и рейтинга, что в свою очередь выведется в полях на экране. При добавлении новой записи, функция <code>get_post_meta</code> возвратит пустую строку, и в итоге дополнительные поля будут пустыми.</p> <h3> <span>Шаг 4</span>: Регистрируем функцию сохранения записи</h3> <pre class="brush: php noskimlinks noskimwords">add_action( "save_post", "add_movie_review_fields", 10, 2 );</pre> <p>Эта функция вызывается при сохранении записи в базе данных.</p> <h3> <span>Шаг 5</span>: Выполняем функцию <code>add_movie_review_fields</code></h3> <pre class="brush: php noskimlinks noskimwords">function add_movie_review_fields( $movie_review_id, $movie_review ) {// Check post type for movie reviewsif ( $movie_review-&gt;post_type == "movie_reviews" ) {// Store data in post meta table if present in post dataif ( isset( $_POST["movie_review_director_name"] ) &amp;&amp; $_POST["movie_review_director_name"] != "" ) {update_post_meta( $movie_review_id, "movie_director", $_POST["movie_review_director_name"] );}if ( isset( $_POST["movie_review_rating"] ) &amp;&amp; $_POST["movie_review_rating"] != "" ) {update_post_meta( $movie_review_id, "movie_rating", $_POST["movie_review_rating"] );}}}</pre> <p>Эта функция выполняется когда записи сохраняются или удаляются в панели администратора. В данном случае, тип получаемой записи проверяется, и, в том случае, если запись является пользовательской, вновь проводится проверка, есть ли у дополнительных полей какие-либо значения, и далее эти значения в этих полях сохраняются.</p> <h3> <span>Шаг 6</span>: Отключаем стандартные пользовательские поля</h3> <p>Создавая пользовательский тип записи, мы задали функцию <code>create_movie_review</code>. Удалите элемент <code>custom-fields</code> из массива <code>supports</code>, поскольку он нам больше не понадобиться. Теперь, если вы сохраните файл и откроете панель редактирования <strong>Movie Reviews</strong>, вы увидите два поля в дополнительных полях: <strong>Movie Author</strong> и <strong>Movie Rating</strong>. Вы можете добавить другие элементы тем же способом.</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=850/wp/authors/legacy/soumitra/2012/10/19/11.jpg" alt="Руководство по пользовательским типам записей: создание, выведение и дополнительные поля...." title="Руководство по пользовательским типам записей: создание, выведение и дополнительные поля...." width="50" height="50"></div> <hr><h2>Создание шаблона для пользовательского типа записи</h2> <p>Правильным будет для каждого типа пользовательских записей использовать свои шаблоны для отображения данных. В нашем случае мы создадим шаблон, которые выводит все кинообзоры, которые были добавлены с использованием пользовательского типа записи <strong>Movie Review</strong>.</p> <h3> <span>Шаг 1</span>: Регистрируем функцию запуска шаблона</h3> <p>Откройте файл <strong>Movie-Reviews.php</strong> и перед тегом закрытия добавьте следующий код. Этот код регистрирует функцию, которая будет вызываться при посещении панели администратора WordPress.</p> <pre class="brush: php noskimlinks noskimwords">add_filter( "template_include", "include_template_function", 1 );</pre> <h3> <span>Шаг 2</span>: Выполняем функцию</h3> <pre class="brush: php noskimlinks noskimwords">function include_template_function( $template_path ) {if ( get_post_type() == "movie_reviews" ) {if ( is_single() ) {// checks if the file exists in the theme first,// otherwise serve the file from the pluginif ( $theme_file = locate_template( array ( "single-movie_reviews.php" ) ) ) {$template_path = $theme_file;} else {$template_path = plugin_dir_path( __FILE__ ) . "/single-movie_reviews.php";}}}return $template_path;}</pre> <p>Здесь проверяется, есть ли в текущей папке темы шаблон типа <strong>single-(post-type-name).php</strong>. Если его там нет, то проверяется наличие шаблона в папке с плагином, куда мы и поместим наш шаблон, как часть плагина. Событийный обработчик (хук) <code>template_include</code> используется, чтобы изменить обычное выполнение программы и принудительно запустить специальный шаблон.</p> <h3> <span>Шаг 3</span>: Создаем файл шаблона Single Page</h3> <p>Сохранив ранее открытый файл с плагином, создайте другой файл с именем <strong>single-movie_reviews.php</strong> и вставьте в него следующий код.</p> <pre class="brush: php noskimlinks noskimwords">&lt;?php /*Template Name: New Template */get_header(); ?&gt;&lt;div id="primary"&gt;&lt;div id="content" role="main"&gt;&lt;?php$mypost = array( "post_type" =&gt; "movie_reviews", );$loop = new WP_Query( $mypost );?&gt;&lt;?php while ( $loop-&gt;have_posts() ) : $loop-&gt;the_post();?&gt;&lt;article id="post-&lt;?php the_ID(); ?&gt;" &lt;?php post_class(); ?&gt;&gt;&lt;header class="entry-header"&gt;&lt;!-- Display featured image in right-aligned floating div --&gt;&lt;div style="float: right; margin: 10px"&gt;&lt;?php the_post_thumbnail( array( 100, 100 ) ); ?&gt;&lt;/div&gt;&lt;!-- Display Title and Author Name --&gt;&lt;strong&gt;Title: &lt;/strong&gt;&lt;?php the_title(); ?&gt;&lt;br /&gt;&lt;strong&gt;Director: &lt;/strong&gt;&lt;?php echo esc_html( get_post_meta( get_the_ID(), "movie_director", true ) ); ?&gt;&lt;br /&gt;&lt;!-- Display yellow stars based on rating --&gt;&lt;strong&gt;Rating: &lt;/strong&gt;&lt;?php$nb_stars = intval( get_post_meta( get_the_ID(), "movie_rating", true ) );for ( $star_counter = 1; $star_counter &lt;= 5; $star_counter++ ) {if ( $star_counter &lt;= $nb_stars ) {echo "&lt;img src="" . plugins_url( "Movie-Reviews/images/icon.png" ) . "" /&gt;";} else {echo "&lt;img src="" . plugins_url( "Movie-Reviews/images/grey.png" ). "" /&gt;";}}?&gt;&lt;/header&gt;&lt;!-- Display movie review contents --&gt;&lt;div class="entry-content"&gt;&lt;?php the_content(); ?&gt;&lt;/div&gt;&lt;/article&gt;&lt;?php endwhile; ?&gt;&lt;/div&gt;&lt;/div&gt;&lt;?php wp_reset_query(); ?&gt;&lt;?php get_footer(); ?&gt;</pre> <p>В данном случае мы создали базовый шаблон страницы с использованием цикла. Функция <code>query_posts</code> получает элементы пользовательского типа записей и отображает их используя цикличность. Это конечно совсем простой цикл, вы можете менять его, как вам необходимо. Вы также можете использовать необходимые CSS стили, чтобы поменять внешнее оформление.</p> <div class="tip-shortcode"> <strong>Внимание</strong>: необходимо создать новую страницу из панели управления используя созданный шаблон.</div> <h3> Шаг 4: Изображения</h3> <p>Сохраните два изображения с иконками для звездочек размером 32x32 пикселя в вашу папку с плагином. Назовите их соответственно <strong>icon.png</strong> и <strong>grey.png</strong>. Вот и все, теперь кинообзоры показываются на отдельной странице и отсортированы по дате.</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=703/wp/authors/legacy/soumitra/2012/10/20/Untitled.jpg" alt="Руководство по пользовательским типам записей: создание, выведение и дополнительные поля...." title="Руководство по пользовательским типам записей: создание, выведение и дополнительные поля...." width="50" height="50"></div> <p>В следующем уроке я опишу другие возможности пользовательских типов записей, такие как создание архивных страниц, собственных таксономий и колонок, и т.д. Не стесняйтесь поделиться своими предложениями.</p> 

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825616-rukovodstvo-po-polzovatelskim-tipam-zapisej-sozdanie-vyvedenie-i-dopolnitelnye-polya" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Plugins" href="https://norma-studio.github.io/article5/220825616-rukovodstvo-po-polzovatelskim-tipam-zapisej-sozdanie-vyvedenie-i-dopolnitelnye-polya" class="tm-article-body__tags-item-link">Plugins</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
33900</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
504</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
