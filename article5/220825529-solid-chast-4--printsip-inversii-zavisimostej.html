
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>SOLID: часть 4 - Принцип инверсии зависимостей... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="SOLID: часть 4 - Принцип инверсии зависимостей... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="SOLID: часть 4 - Принцип инверсии зависимостей... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="SOLID: часть 4 - Принцип инверсии зависимостей... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Принцип единственной ответственности (SPR), открытости/закрытости(OCP), подстановки Лисков, множественности интерфейсов и инверсии зависимостей.- Пять гибких принципов, которыми вы должны руководствоваться каждый раз, когда пишете код....">
<meta property="og:description" content="Принцип единственной ответственности (SPR), открытости/закрытости(OCP), подстановки Лисков, множественности интерфейсов и инверсии зависимостей.- Пять гибких принципов, которыми вы должны руководствоваться каждый раз, когда пишете код....">
<meta name="twitter:description" content="Принцип единственной ответственности (SPR), открытости/закрытости(OCP), подстановки Лисков, множественности интерфейсов и инверсии зависимостей.- Пять гибких принципов, которыми вы должны руководствоваться каждый раз, когда пишете код....">
<meta property="aiturec:description" content="Принцип единственной ответственности (SPR), открытости/закрытости(OCP), подстановки Лисков, множественности интерфейсов и инверсии зависимостей.- Пять гибких принципов, которыми вы должны руководствоваться каждый раз, когда пишете код....">
<meta property="og:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2014/02/html-php-sql-cross-dependencies.png">
<meta property="aiturec:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2014/02/html-php-sql-cross-dependencies.png">
<meta name="twitter:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2014/02/html-php-sql-cross-dependencies.png">
<meta property="vk:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2014/02/html-php-sql-cross-dependencies.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2014/02/html-php-sql-cross-dependencies.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825529-solid-chast-4--printsip-inversii-zavisimostej.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825529-solid-chast-4--printsip-inversii-zavisimostej.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825529-solid-chast-4--printsip-inversii-zavisimostej.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825529-solid-chast-4--printsip-inversii-zavisimostej.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825529-solid-chast-4--printsip-inversii-zavisimostej.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825529-solid-chast-4--printsip-inversii-zavisimostej.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825529-solid-chast-4--printsip-inversii-zavisimostej.html" title="SOLID: часть 4 - Принцип инверсии зависимостей... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="SOLID: часть 4 - Принцип инверсии зависимостей... | envatomarket.ru | norma-studio.github.io" title="SOLID: часть 4 - Принцип инверсии зависимостей... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/645343435.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825529-solid-chast-4--printsip-inversii-zavisimostej.html" class="tm-user-info__username" title="
Н. Аяцков" aria-label="
Н. Аяцков">
Н. Аяцков</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>SOLID: часть 4 - Принцип инверсии зависимостей...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825529-solid-chast-4--printsip-inversii-zavisimostej" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="PHP" href="https://norma-studio.github.io/article5/220825529-solid-chast-4--printsip-inversii-zavisimostej" class="tm-article-snippet__hubs-item-link"><span>PHP</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825529-solid-chast-4--printsip-inversii-zavisimostej.html" />
    <link itemprop="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2014/02/html-php-sql-cross-dependencies.png">
    <meta itemprop="headline name" content="SOLID: часть 4 - Принцип инверсии зависимостей... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Принцип единственной ответственности (SPR), открытости/закрытости(OCP), подстановки Лисков, множественности интерфейсов и инверсии зависимостей.- Пять гибких принципов, которыми вы должны руководствоваться каждый раз, когда пишете код....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Принцип единственной ответственности (SPR), открытости/закрытости(OCP), подстановки Лисков, множественности интерфейсов и инверсии зависимостей.- Пять гибких принципов, которыми вы должны руководствоваться каждый раз, когда пишете код....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p><span>Принцип единственной ответственности (SPR)</span>, <span>открытости/закрытости(OCP)</span>, <span>подстановки Лисков</span>, <em>множественности</em> интерфейсов и инверсии зависимостей.  Пять гибких принципов, которыми вы должны руководствоваться каждый раз, когда пишете код.</p><p>Было бы несправедливо сказать вам, что какой-либо из SOLID принципов является более важным, чем другой. Однако возможно ни один из других принципов не имеет такого назамедлительного и глубокого влияния на ваш код, как принцип инверсии зависимостей, или сокращенно DIP. Если вы сочтете другие принципы тяжелыми для понимания и применения, то следует начать с этого и затем применять остальные к коду, который уже соблюдает принцип инверсии зависимостей.</p> <h2>Определение</h2> <blockquote> <p>A. Модули высокого уровня не должны зависеть от модулей более низкого уровня. Все они должны зависеть от абстракций.<br> B. Абстракции не должны зависеть от деталей. Детали должны зависеть от абстракций.</p> </blockquote> <p>Этот принцип был определен <span>Робертом C. Мартином</span> в его книге <span>Agile Software Development, Principles, Patterns, and Practices</span>, а позже переиздан в C# версии книги <span>Agile Principles, Patterns, and Practices in C#</span>, и является последним из пяти SOLID принципов.</p> <h2>DIP в реальном мире</h2> <p>Перед тем как мы начнем писать код, я бы хотел рассказать вам историю. В Syneto мы были не всегда так внимательны к нашему коду. Несколько лет назад мы знали гораздо меньше, хотя и старались делать лучшее, на что были способны, не все наши проекты были такими блестящими. Мы прошли через ад и вернулись назад, но при этом мы выучили много ошибок.</p> <p>Принципы SOLID и принципы чистой архитектуры Дядюшки Боба (Роберта C. Мартина) трансформировали наш стиль кодирования такими разными способами, которые тяжело описать. Я постараюсь проиллюстрировать, несколько основных архитектурных решений, введенных с помощью DIP, которые оказали большое влияние на наши проекты.</p> <p>Большинство веб-проектов состоят из трех основых технологий: HTML, PHP и SQL. Определенные версии приложений, о которых мы говорим, или какую версию SQL вы используете, совсем не важно.  Дело в том, что информация из HTML-формы должна в конечном итоге оказаться в базе данных. Связующим звеном между ними может стать PHP.</p> <p>Важно понять то, как красиво эти три технологии представляют собой три разных архитектурных слоя: пользовательский интерфейс, бизнес-логика и хранилище. Мы поговорим о последствиях этих слоёв через минуту. Теперь давайте остановимся на некоторых странных, но часто встречающихся решениях заставить эти технологии работать вместе.</p> <p>Много раз я видел проекты, которые используют SQL запросы внутри PHP тегов в HTML файле, или PHP код, который выводит HTML страницу и напрямую обрабатывает глобальные переменные <code>$_GET</code> или <code>$_POST</code>. Но почему это плохо?</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2014/02/html-php-sql-cross-dependencies.png" alt="SOLID: часть 4 - Принцип инверсии зависимостей..." title="SOLID: часть 4 - Принцип инверсии зависимостей..." width="50" height="50"><br></figure><p>Изображения выше представляют сырую версию того, что мы описали в предыдущем параграфе. Стрелки обозначают разные зависимости, и как мы можем судить, по сути все зависит от всего. Если нам необходимо поменять таблицу в базе данных, то в итоге нужно будет изменить HTML файл. Или же если мы поменяем поле в HTML, то нам потребуется изменить имя колонки в SQL запросе. Или если мы взглянем на вторую схему, нам скорее всего потребуются изменения в PHP, если изменится HTML, или в самом худшем случае, когда мы генерируем весь HTML контент внутри PHP файла, нам обязательно придется внести изменения в PHP, чтобы изменить содержимое HTML. Таким образом, нет никаких сомнений, что зависимости жестко переплетены между классами и модулями. Но это еще не все. Вы еще мажете хранить процедуры; PHP код в SQL таблицах.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2014/02/html-php-sql-stored-procedures.png" alt="SOLID: часть 4 - Принцип инверсии зависимостей..." title="SOLID: часть 4 - Принцип инверсии зависимостей..." width="50" height="50"><br></figure><p>На схеме выше запросы к SQL базе возвращают PHP код, cгенерированный данными из таблиц. Эти PHP функции или классы выполняют другие SQL запросы, которые в свою очередь возвращают новый PHP код, и так по кругу, пока в конце концов не будет получена вся необходимая информация.</p> <p>Я знаю, это может показаться возмутительным для многих из вас, но если вы еще не работали с проектом, который работает таким образом, то это безусловно еще будет в вашей будущей карьере. Большинство существующих проектов, независимо от используемого языка программирования, написаны с использованием старых принципов программистами, которые не заботились о том, чтобы сделать что-то лучше. Если вы читаете эти статьи, вы вероятнее всего на уровень выше чем они. Вы уважаете свою профессию, и стараетесь все делать как можно лучше.</p> <p>Другой же вариант может быть в том, чтобы повторять ошибки ваших предшественников и жить с последствиями. В Syneto один из наших проектов достиг почти такого состояния, когда его уже невозможно было поддерживать из-за его старой сильно связанной архитектуры и мы решили оставить его навсегда и никогда больше не идти по такому пути. С тех пор мы стремились к чистой архитектуре, к соблюдению SOLID принципов, и больше всего к инверсии зависимостей.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2014/02/HighLevelDesign.png" alt="SOLID: часть 4 - Принцип инверсии зависимостей..." title="SOLID: часть 4 - Принцип инверсии зависимостей..." width="50" height="50"><br></figure><p>Самое удивительно в этой архитектуре то, куда указывают зависимости:</p> <ul><li>Пользовательский интерфейс (в большинстве случаев это MVC фреймворк) или любой другой механизм в вашем приложении будет зависеть от бизнес-логики. Бизнес-логика является довольно абстрактной. Пользовательский интерфейс довольно конкретный. Таким образом пользовательский интерфейс является деталью или уточнением проекта, и он может часто меняться. Ничто не должно зависеть от пользовательского интерфейса, ничто не должно зависеть от вашего MVC фреймворка.</li> <li>Мы можем сделать еще одно интересное наблюдение об уровне хранения, базе данных, MySQL или PostgreSQL, в зависимости от вашей логики. Бизнес логика не должна зависеть от базы данных. Это позволяет по желанию переключаться между хранилищами. Если завтра вам нужно будет сменить MySQL на PostgreSQL или даже простые текстовые файлы, вы сможете это сделать. Вам конечно же потребуется реализовать определенный уровень хранения для нового хранилища, но вам не нужно будет изменять ни одной строчки в бизнес логике. Вы можете прочитать более детальное объяснение темы хранения данных в статье <span>Движение в Строну Слоя Хранения Данных</span>. </li> <li>Наконец справа от бизнес-логики, вне ее, у нас есть все классы, которые создают классы бизнес-логики. Это фабрики и классы, созданные точкой входа в наше приложение. Много людей склонны думать, что эти классы принадлежат к бизнес логике, так как они создают классы бизнес логики, это основная причина их существования. Но это просто классы, которые помогают нам создавать другие классы. Бизнес объекты и логика, которая в них содержится, не зависят от этих фабрик. Мы можем использовать разные шаблоны, как например Простая фабрика, Абстрактная фабрика или строитель или даже простое создание объектов. Это не имеет значения. Как только бизнес объекты были созданы, они могут начать выполнять свою работу.</li> </ul><h2>Покажите мне код</h2> <p>Применить принцип инверсии зависимостей на архитектурном уровне достаточно просто если вы используете шаблоны проектирования. Применение его внутри бизнес-логики также является довольно простым и даже веселым занятием. Представим, что у нас есть приложение, которое читает электронные книги.</p> <pre class="brush: php noskimlinks noskimwords">class Test extends PHPUnit_Framework_TestCase {  function testItCanReadAPDFBook() {$b = new PDFBook();$r = new PDFReader($b);$this-&gt;assertRegExp("/pdf book/", $r-&gt;read());}}class PDFReader {private $book;function __construct(PDFBook $book) {$this-&gt;book = $book;}function read() {return $this-&gt;book-&gt;read();}}class PDFBook {function read() {return "reading a pdf book.";}}</pre> <p>Начнем с реализации чтения книг в формате PDF. Пока все в порядке. У нас есть класс <code>PDFReader</code>, который использует <code>PDFBook</code>. Метод <code>read()</code> читателя дерегирует выполнение методу <code>read()</code> книги. Мы просто проверяем это, выполнив проверку регулярным выражением после ключевой части строки, возвращаемой методом <code>reader()</code> класса <code>PDFBook</code>.</p> <p>Пожалуйста, имейте в виду, что это всего лишь пример. Мы не будем реализовывать логику чтения PDF файлов или других форматов. Вот почему наши тесты просто проверяют некоторые основные строки. Если бы мы собирались написать реальное приложение, то разница была бы только в том, как мы тестируем разные форматы файлов. Схема зависимостей будет очень похожа на наш пример.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2014/02/pdfreader-pdfbook.png" alt="SOLID: часть 4 - Принцип инверсии зависимостей..." title="SOLID: часть 4 - Принцип инверсии зависимостей..." width="50" height="50"><br></figure><p>PDF читатель, который использует PDF книгу, может быть решением для ограниченного приложения. Но если бы нашей задачей было написать не только PDF читателя, то данное решение абсолютно нам не подходит. Но мы хотим написать универсальную читалку, которая будет поддерживать несколько форматов, среди которых будет наша уже реализованная версия PDF. Так что давайте переименуем наш класс читателя.</p> <pre class="brush: php noskimlinks noskimwords">class Test extends PHPUnit_Framework_TestCase {function testItCanReadAPDFBook() {$b = new PDFBook();$r = new EBookReader($b);$this-&gt;assertRegExp("/pdf book/", $r-&gt;read());}}class EBookReader {private $book;function __construct(PDFBook $book) {$this-&gt;book = $book;}function read() {return $this-&gt;book-&gt;read();}}class PDFBook {function read() {return "reading a pdf book.";}}</pre> <p>Переименование не создаст никаких функциональных эффектов. Тесты по-прежнему проходят.</p> <p>Testing started at 1:04 PM ...<br> PHPUnit 3.7.28 by Sebastian Bergmann.<br> Time: 13 ms, Memory: 2.50Mb<br> OK (1 test, 1 assertion)<br> Process finished with exit code 0</p> <p>Но это будет иметь значимый эффект в архитектуре.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2014/02/ebookreader-pdfbook.png" alt="SOLID: часть 4 - Принцип инверсии зависимостей..." title="SOLID: часть 4 - Принцип инверсии зависимостей..." width="50" height="50"><br></figure><p>Наш читатель стал более абстрактным. Гораздо более обобщенным. Мы имеем общего <code>EBookReader</code>, который может работать со специфичным форматом книги <code>PDFBook</code>. Абстракция зависит от детали. Тот факт, что наша книга имеет тип PDF является деталью, и ни что не должно зависеть от него.</p> <pre class="brush: php noskimlinks noskimwords">class Test extends PHPUnit_Framework_TestCase {function testItCanReadAPDFBook() {$b = new PDFBook();$r = new EBookReader($b);$this-&gt;assertRegExp("/pdf book/", $r-&gt;read());}}interface EBook {function read();}class EBookReader {private $book;function __construct(EBook $book) {$this-&gt;book = $book;}function read() {return $this-&gt;book-&gt;read();}}class PDFBook implements EBook{function read() {return "reading a pdf book.";}}</pre> <p>Наиболее общее и часто используемое решением является инверсия зависимости, чтобы представить более абстрактный модуль в нашем дизайне. "Самым абстрактным элементом в ООП является интерфейс. Таким образом любой другой класс может зависеть интерфейса и по-прежнему соблюдать DIP".</p> <p>Мы создали интерфейс <em>для нашего читателя</em>. Интерфейс называется <code>EBook</code> и представляет интересы класса <code>EBookReader</code>. Это прямое следствие соблюдения принципа разделения интерфейсов, который продвигает идею о том, что интерфейсы должны отражать потребности клиентов. Интерфейсы принадлежат клиентам, поэтому им и дают такие имена, которые отражают типы и объекты, в которых клиенты нуждаются, и также содержат методы, которые клиенты хотят использовать. Вполне естественно, что <code>EBookReader</code> будет использовать использовать метод <code>read()</code> у <code>EBooks</code>.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2014/02/ebookreader-ebookinterface-pdfbook.png" alt="SOLID: часть 4 - Принцип инверсии зависимостей..." title="SOLID: часть 4 - Принцип инверсии зависимостей..." width="50" height="50"><br></figure><p>Вместо одной зависимости, мы здесь теперь имеем две.</p> <ul><li>Первая зависимость указывает от <code>EBookReader</code> к <code>EBook</code> интерфейcу, и обозначает тип использования. <code>EBookReader</code> использует <code>EBooks</code>.</li> <li>Вторая зависимость другая. Она указывает от <code>PDFBook</code> к тому же <code>EBook</code> интерфейсу, он это уже тип реализации. Класс <code>PDFBook</code> является лишь уточнением <code>EBook</code>, и поэтому реализует этот интерфейс, чтобы удовлетворить запросам клиента.</li> </ul><p>Неудивительно, что это решение также позволяет нам подключать различные типы электронных книг в нашу читалку. Единственным условием для всех этих книг будет - соблюдать <code>EBook</code> интерфейс и реализовать его.</p> <pre class="brush: php noskimlinks noskimwords">class Test extends PHPUnit_Framework_TestCase {function testItCanReadAPDFBook() {$b = new PDFBook();$r = new EBookReader($b);$this-&gt;assertRegExp("/pdf book/", $r-&gt;read());}function testItCanReadAMobiBook() {$b = new MobiBook();$r = new EBookReader($b);$this-&gt;assertRegExp("/mobi book/", $r-&gt;read());}}interface EBook {function read();}class EBookReader {private $book;function __construct(EBook $book) {$this-&gt;book = $book;}function read() {return $this-&gt;book-&gt;read();}}class PDFBook implements EBook {function read() {return "reading a pdf book.";}}class MobiBook implements EBook {function read() {return "reading a mobi book.";}}</pre> <p>Что в свою очередь подводит нас к <span>принципу открытости/закрытости</span>, и круг замыкается.</p> <p>Принцип инверсии зависимостей помогает нам в итоге подойти к соблюдению всех остальных принципов. Соблюдение принципа инверсии зависимостей:</p> <ul><li>Подтолкнет к соблюдение принципа открытости/закрытости.</li> <li>Позволит разделить обязанности.</li> <li>Позволит правильно использовать подтипы.</li> <li>Даст возможность разделить интерфейсы.</li> </ul><h2>Заключительные мысли</h2> <p>Вот и все. Мы это сделали. Все статьи о SOLID принципах закончены. Для меня лично, открытие этих принципов и реализация проектов с соблюдением этих принципов, было огромным прорывом. Я полностью поменял свой способ мышления об архитектуре и дизайне, и могу сказать что после этого все проекты, над которыми я работал стали гораздо проще в обслуживании и понимании.</p> <p>Я считаю, что SOLID принципы являются одной из основных концепций в объектно-ориентированном дизайне. Эти концепции должны указывать нам путь в улучшении нашего кода, и наша жизнь, как программиста, станет гораздо легче. Программистам гораздо легче понять правильно организованный код. Компьютеры умны, они поймут любой код, не смотря на его сложность. А вот люди с другой стороны имеют ограниченное количество вещей, на которых они могут сфокусироваться. Говоря более конкретно количество таких вещей является <span>магическом числом семь, плюс или минус два.</span></p> <p>Нам следует стремиться организовывать наш код, основываясь на этих цифрах, и вот несколько техник, которые могут в этом помочь. Максимальная длина функций должна быть не более чем четыре строчки (пять вместе с заголовком), таким образом они полностью могут поместиться у нас в уме. Отступы должны углубляться не более чем на пять уровней. Классы не более чем с пятью методами. В шаблонах проектирования количество используемых классов обычно варьируется от пяти до девяти. Наша архитектура высокого уровня выше содержит от четырех до пяти концепций. Существует пять SOLID принципов, каждый из которых требует от пяти до девяти концепций/модулей/классов для примеров. Идеальный размер команды разработчиков между пятью и девятью. Идеальное количество команд в компании также между пятью и девятью.</p> <p>Как видите, магическое число семь, плюс минус два встречается повсюду, так почему же ваш код должен отличаться.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825529-solid-chast-4--printsip-inversii-zavisimostej" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="PHP" href="https://norma-studio.github.io/article5/220825529-solid-chast-4--printsip-inversii-zavisimostej" class="tm-article-body__tags-item-link">PHP</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
31814</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
606</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
