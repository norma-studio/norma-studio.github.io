
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Введение в Cookies... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Введение в Cookies... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Введение в Cookies... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Введение в Cookies... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Возможно, вы слышали о cookie-файлах, но что именно они такое и что мы можем на самом деле делать с ними? В этом руководстве мы сосредоточимся на основах файлов cookie и узнаем об их функциональности в различных веб-приложениях и сайтах. Мы также узнаем, как использовать их в наших проектах PHP и JavaScript, уделяя при этом особое внимание вопросам...">
<meta property="og:description" content="Возможно, вы слышали о cookie-файлах, но что именно они такое и что мы можем на самом деле делать с ними? В этом руководстве мы сосредоточимся на основах файлов cookie и узнаем об их функциональности в различных веб-приложениях и сайтах. Мы также узнаем, как использовать их в наших проектах PHP и JavaScript, уделяя при этом особое внимание вопросам...">
<meta name="twitter:description" content="Возможно, вы слышали о cookie-файлах, но что именно они такое и что мы можем на самом деле делать с ними? В этом руководстве мы сосредоточимся на основах файлов cookie и узнаем об их функциональности в различных веб-приложениях и сайтах. Мы также узнаем, как использовать их в наших проектах PHP и JavaScript, уделяя при этом особое внимание вопросам...">
<meta property="aiturec:description" content="Возможно, вы слышали о cookie-файлах, но что именно они такое и что мы можем на самом деле делать с ними? В этом руководстве мы сосредоточимся на основах файлов cookie и узнаем об их функциональности в различных веб-приложениях и сайтах. Мы также узнаем, как использовать их в наших проектах PHP и JavaScript, уделяя при этом особое внимание вопросам...">
<meta property="og:image" content="//www.gravatar.com/avatar/9b754a80e7628aa0126b7e441023c1c8?s=200&d=https%3A%2F%2Fassets.tutsplus.com%2Fimages%2Fhub%2Favatar_default.png&r=PG">
<meta property="aiturec:image" content="//www.gravatar.com/avatar/9b754a80e7628aa0126b7e441023c1c8?s=200&d=https%3A%2F%2Fassets.tutsplus.com%2Fimages%2Fhub%2Favatar_default.png&r=PG">
<meta name="twitter:image" content="//www.gravatar.com/avatar/9b754a80e7628aa0126b7e441023c1c8?s=200&d=https%3A%2F%2Fassets.tutsplus.com%2Fimages%2Fhub%2Favatar_default.png&r=PG">
<meta property="vk:image" content="//www.gravatar.com/avatar/9b754a80e7628aa0126b7e441023c1c8?s=200&d=https%3A%2F%2Fassets.tutsplus.com%2Fimages%2Fhub%2Favatar_default.png&r=PG">
<meta property="og:type" content="article">
<link image_src="image" href="//www.gravatar.com/avatar/9b754a80e7628aa0126b7e441023c1c8?s=200&d=https%3A%2F%2Fassets.tutsplus.com%2Fimages%2Fhub%2Favatar_default.png&r=PG">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825719-vvedenie-v-cookies.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825719-vvedenie-v-cookies.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825719-vvedenie-v-cookies.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825719-vvedenie-v-cookies.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825719-vvedenie-v-cookies.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825719-vvedenie-v-cookies.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825719-vvedenie-v-cookies.html" title="Введение в Cookies... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Введение в Cookies... | envatomarket.ru | norma-studio.github.io" title="Введение в Cookies... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/31231313312.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825719-vvedenie-v-cookies.html" class="tm-user-info__username" title="
Д. Грунин" aria-label="
Д. Грунин">
Д. Грунин</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Введение в Cookies...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825719-vvedenie-v-cookies" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="PHP" href="https://norma-studio.github.io/article5/220825719-vvedenie-v-cookies" class="tm-article-snippet__hubs-item-link"><span>PHP</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825719-vvedenie-v-cookies.html" />
    <link itemprop="image" href="//www.gravatar.com/avatar/9b754a80e7628aa0126b7e441023c1c8?s=200&d=https%3A%2F%2Fassets.tutsplus.com%2Fimages%2Fhub%2Favatar_default.png&r=PG">
    <meta itemprop="headline name" content="Введение в Cookies... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Возможно, вы слышали о cookie-файлах, но что именно они такое и что мы можем на самом деле делать с ними? В этом руководстве мы сосредоточимся на основах файлов cookie и узнаем об их функциональности в различных веб-приложениях и сайтах. Мы также узнаем, как использовать их в наших проектах PHP и JavaScript, уделяя при этом особое внимание вопросам...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Возможно, вы слышали о cookie-файлах, но что именно они такое и что мы можем на самом деле делать с ними? В этом руководстве мы сосредоточимся на основах файлов cookie и узнаем об их функциональности в различных веб-приложениях и сайтах. Мы также узнаем, как использовать их в наших проектах PHP и JavaScript, уделяя при этом особое внимание вопросам...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Возможно, вы слышали о cookie-файлах, но что именно они такое и что мы можем на самом деле делать с ними? В этом руководстве мы сосредоточимся на основах файлов cookie и узнаем об их функциональности в различных веб-приложениях и сайтах. Мы также узнаем, как использовать их в наших проектах PHP и JavaScript, уделяя при этом особое внимание вопросам безопасности, которые могут возникнуть при их использовании. Прочитав это, вы приобретете необходимый набор навыков для безопасного внедрения файлов cookie в ваши собственные веб-приложения.</p><p><!--more--></p> <hr><h2> <span>Шаг 1.</span> Понимание файлов cookie</h2> <p>Первый шаг в нашем путешествии - узнать, что на самом деле представляют собой эти файлы cookie! Даже если вы уже работали с ними, вы все равно можете найти эту часть весьма полезной - так что оставайтесь со мной!</p> <h3>Абстрактно</h3> <p>Вы можете легко представить файлы cookie как текстовые файлы, которые сохраняются на вашем компьютере. По запросу веб-сервера ваш браузер создает такой файл. После этого веб-сервер может читать и записывать содержимое из этого файла и обратно. Хотя это кажется опасной функцией - в конце концов, никто не любит, когда другие люди пишут файлы на свой компьютер, но есть несколько ограничений, чтобы сделать этот процесс максимально безопасным.</p> <ul><li>Веб-серверы могут получать доступ только к файлам cookie, которые настроены для их собственного домена. Этот домен устанавливается браузером, когда веб-сервер запрашивает новый файл cookie, и может быть только доменом или поддоменом веб-сервера (веб-сервер может выбрать поддомен, если он этого хочет). Это означает, что файлы cookie, которые были установлены, например, google.com, не могут быть прочитаны mozilla.com, и наоборот.</li> <li>Согласно протоколу HTTP, размер файлов cookie не может превышать 4096 байт (4 КБ) каждый.</li> <li>Существует ограничение на количество файлов cookie на домен. Количество зависит от браузера, однако обычно используется ограничение в двадцать файлов cookie. Это сделано для того, чтобы один домен не занимал место на диске клиента.</li> <li>Существует ограничение на общее количество файлов cookie на жестком диске клиента. Это число также отличается для каждого браузера, но обычно оно ограничено тремя сотнями файлов cookie. Когда это число превышено, старый файл куки удаляется перед созданием нового.</li> </ul><p>Куки имеют срок годности. Эта дата установлена, чтобы браузер мог удалять старые куки, когда они больше не нужны веб-серверу. Если срок годности пуст, cookie будет удален при закрытии соединения с сервером. Это происходит, когда пользователь закрывает окно или вкладку сайта или когда пользователь закрывает весь браузер. Эти куки, иногда называемые сеансовыми куки, в основном используются для хранения временных настроек.</p> <h3>Техническая сторона</h3> <p>Давайте выясним, как эти вещи выглядят на техническом уровне. Файлы cookie передаются по <span>протоколу HTTP</span>. Это протокол, используемый браузерами для получения и отправки файлов на сервер. После того, как cookie был запрошен, он отправляется на сервер каждый раз, когда браузер выбирает новый элемент на веб-странице. Ниже мы сможем увидеть фрагмент сервера, запрашивающего новый файл cookie (этот фрагмент является частью HTTP-ответа).</p> <pre class="brush: php noskimlinks noskimwords">Set-Cookie: Name=content data; expires=Fri, 31-Dec-2010 23:59:59 GMT; path=/; domain=.example.net</pre> <p>Теперь не пугайтесь, это все очень понятно! </p> <ul><li> <b>Set-Cookie:</b> позволяет браузеру узнать, что сервер хочет создать новый cookie. </li> <li> <b>Имя</b> - это имя файла cookie. Каждый файл cookie в домене должен иметь свое имя, поэтому браузер может хранить все файлы cookie отдельно. После имени следует <b>=content data</b>, где "content data" - это данные, которые должны содержаться в файле cookie. Эти данные могут быть текстовой строкой или числом и, как сказано ранее, могут быть размером до 4 КБ. </li> <li> <b>expires=</b> - это команда для даты истечения срока действия. Дата окончания срока действия указана в формате «Wdy, DD-Mon-YYYY HH:MM:SS GMT» (не спрашивайте меня, почему он был определен для этого смешного формата, потому что я тоже не знаю. Никто из пользователей не видит дату истечения срока действия, так зачем тратить память, пространство на жестком диске и пропускную способность на длинные даты?). Не беспокойтесь об этом, потому что большинство языков программирования имеют простые в использовании функции, доступные вам. Браузер автоматически удаляет куки с датой истечения в прошлом.</li> <li><b>domain</b> и <b>path</b> требуют более глубокого объяснения. <b>domain</b> - это домен, в котором cookie будет активен. Если доменом является "ads.google.com", файл cookie будет отправляться только на сервер этого домена, а если доменом является "google.com", файл cookie будет отправляться на любой сервер любого из поддоменов домена Google, включая сам google.com.</li> <li><b>path</b> - это путь домена, в который отправляется файл cookie. Это означает, что если для пути задано значение "/images/", а для домена задано "ads.google.com", файл cookie будет отправляться на сервер только в том случае, если браузер запрашивает файл у "ads.google.com/images/". Если для пути задано значение "/", файл cookie будет отправлен на сервер независимо от местоположения запрошенного файла на сервере.</li> </ul><p>На следующем шаге мы рассмотрим, как эти свойства можно использовать в языках программирования.</p> <hr><h2> <span>Шаг 2.</span> Как создавать и читать файлы cookie</h2> <p>Файлы cookie могут быть созданы разными способами, но для целей данного руководства мы сосредоточимся на PHP и JavaScript.</p> <h3>PHP</h3> <p>При создании cookie в PHP важно помнить, что вы должны установить все cookie, <b>прежде чем отправлять какие-либо данные в браузер</b>. Это означает, что вы должны <b>всегда</b> инициализировать новые куки <b>перед</b> любым выводом. Это включает в себя команды echo() или print() и теги &lt;html&gt; или &lt;body&gt;. Конечно, есть некоторые исключения, но это общее правило.</p> <pre class="brush: php noskimlinks noskimwords">&lt;?php/***Creating a cookie***/$name = "clientname";$value = "Peter Griffin";//time() gives current time in seconds, and we add 60 seconds * 30 = 30 minutes//so this cookie expires in 30 minutes.//You may notice that the expire date is in seconds, PHP translates this to//the correct format internally!$expireDate = time() + 60 * 30;$path = "/example/";$domain = "test.envato.com";$secure = false; //only transmit the cookie if a HTTPS connection is established$httponly = true; //make cookie available only for the HTTP protocol (and not for JavaScript)setcookie( $name, $value, $expireDate, $path, $domain, $secure, $httponly);&lt;html&gt;.... //all content etc goes here?&gt;</pre> <p>Это должно показаться знакомым, за исключением <b>$secure</b> и <b>$httponly</b>. "secure" используется для того, чтобы файл cookie передавался только в том случае, если установлено соединение HTTPS, если установлено значение «true», и обычно оно должно быть установлено на «false». «httponly» делает куки доступными только по протоколу HTTP, а это означает, что клиентские языки, такие как JavaScript и VBscript, не могут получить доступ к кукам. Это помогает предотвратить неприятные вещи, такие как <span>межсайтовый скриптинг</span>, и должно быть установлено в true, если у вас нет намерений редактировать клиентские куки таким языком, как JavaScript. Кроме того, чтобы предотвратить недопонимание надо заметить, что «httponly» не означает, что куки не могут быть отправлены через HTTPS, на самом деле это возможно. Тем не менее, обратите внимание, что приведенный выше фрагмент кода может быть значительно меньше (и должен быть):</p> <pre class="brush: php noskimlinks noskimwords">&lt;?phpsetcookie( "clientname", "Peter Griffin", time()+60*30, "/example/", "test.envato.com", false,true);?&gt;</pre> <p>Отлично! Теперь мы можем создавать cookie-файлы, но мы также должны их читать. К счастью для нас, PHP делает это очень легко, когда cookie уже создан. В PHP есть переменная окружения $_COOKIE[], которую можно использовать для извлечения значения cookie. Чтобы использовать ее, просто вставьте имя куки в скобки [] примерно так:</p> <pre class="brush: php noskimlinks noskimwords">&lt;?php$cookieValue = $_COOKIE["name of the cookie"];?&gt;</pre> <p>Эта переменная окружения может использоваться как любая другая. Точно так же, как $_GET[] и $_POST[], она может обрабатываться напрямую как обычная переменная (если вы проверили, действительно ли cookie существует).</p> <p>Если вы хотите изменить дату истечения срока действия, путь или домен, вы должны перезаписать существующий файл cookie с помощью setcookie(), используя то же имя, что и исходный файл cookie. Если вы измените дату истечения срока на прошедшую (например, time()-30*60), cookie будет удален.</p> <h3>JavaScript</h3> <p>Файлы cookie могут быть прочитаны и написаны на стороне клиента. Несмотря на то, что JavaScript не предлагает хорошее решение для чтения и записи файлов cookie, оно возможно и широко используется. JavaScript использует объект document.cookie для манипулирования файлами cookie, как показано в следующем фрагменте:</p> <pre class="brush: js noskimlinks noskimwords">//get current datevar expiredate = new Date();//increase date by 5 hoursexpiredate.setHours( expiredate.getHours() + 5);document.cookie = "cookiename=cookievalue; expires="  + expiredate.toUTCString() + "path=/example/; domain=test.envato.com";</pre> <p>Как вы могли заметить, этот синтаксис очень похож на нотацию протокола HTTP. Преимущество этого состоит в лучшем контроле, но также создаются некоторые потенциальные проблемы. Ниже приведен &lt;painful&gt; фрагмент  для чтения файла cookie.</p> <pre class="brush: js noskimlinks noskimwords">var cookieName = "testcookiename";var textArray = document.cookie.split(";"); //put all the parts of the string in an arrayfor(var i = 0; i &lt; textArray.length; i++){ // loop though all string piecesvar textPiece = textArray[i]; //contains 1 string piece //filter beginning spaceswhile(textPiece(0)==" ") textPiece = textPiece.substring(1,textPiece.length);//if the textpiece contains our cookies nameif (textPiece.indexOf(cookieName)== 0){  //return whats after the cookies namereturn textPiece.substring(cookieName.length,c.length);}}</pre> <p>Я знаю, я знаю; это боль. К счастью для вас, ребята, я публикую ниже некоторые заранее написанные функции (вы можете захотеть создать свои собственные функции для целей обучения, и вам следует сделать это!).</p> <pre class="brush: js noskimlinks noskimwords">function writeCookie(cookieName, cookieValue, expireHours, path, domain){var date =  new Date();date.setHours(date.getHours + expireHours);document.cookie = cookieName + "=" + cookieValue + "; expires=" + date + "; path=" + path + "; domain=" + domain;}function readCookie(cookieName){var textArray = document.cookie.split(";");for(var i = 0; i &lt; textArray.length; i++){var textPiece = textArray[i]; while(textPiece(0)==" ") textPiece = textPiece.substring(1,textPiece.length);if (textPiece.indexOf(cookieName)== 0) return textPiece.substring(cookieName.length,c.length);}}</pre> <p>Помните, что эти фрагменты не содержат проверки ошибок.</p> <hr><h2> <span>Шаг 3.</span> Что делать с Cookies</h2> <blockquote> <p>Знаете ли вы? -<br>Файлы cookie были изобретены Netscape, который хотел использовать их для создания корзины покупок для интернет-магазина. Благодаря cookie-файлам люди могли хранить товары в своей корзине даже после отключения от магазина.</p> </blockquote> <p>В настоящее время мы используем файлы cookie практически для всех целей, о которых вы только можете подумать. Вы можете использовать их для сохранения пользовательских настроек, таких как имя, язык, местоположение или размер экрана. Это может улучшить качество сервиса, который вы хотите предоставить клиенту, потому что вы можете оптимизировать сервис для клиента и помнить эту оптимизацию в будущем. Например, вы можете сохранить предпочтительный язык клиента в файле cookie, а затем показывать содержимое вашего сайта на предпочитаемом языке каждый раз, когда клиент посещает ваш сайт.</p> <p>Конечно, с cookie-файлами можно сделать гораздо больше забавных вещей, чем это! На следующем шаге я покажу вам пример классного фрагмента кода.</p> <hr><h2> <span>Шаг 4.</span> Написание классного материала</h2> <p>И наконец! Теперь мы можем начать писать отличный код! Ниже в качестве бонуса приведен фрагмент, который использует куки для создания механизма повторного входа.</p> <h3>"Запомнить меня" в форме входа</h3> <p>Прежде чем мы начнем, этот фрагмент содержит некоторый код MySQL. Если вы не знакомы с MySQL, не паникуйте. Несмотря на то, что этот фрагмент немного сложен, он должен быть понятен с базовыми знаниями PHP и cookie.</p> <p>Чтобы создать реализацию «запомнить меня», у нас должно быть несколько вещей. Во-первых, нам нужна таблица базы данных, содержащая имя пользователя, пароль и поле идентификации. Во-вторых, нам нужна уникальная строка или номер для безопасной идентификации клиентов с помощью файлов cookie (это идентификация в таблице базы данных). В этом фрагменте в качестве идентификатора мы будем использовать дайджест SHA-1, который является просто строкой. При правильном использовании это обеспечивает превосходную безопасность.<br></p><blockquote> <p> Большинство людей просто вставляют имя пользователя и пароль в куки и отправляют его на сервер автоматически. <b>Этого следует избегать всегда!</b> Куки-файлы обычно отправляются через незащищенное соединение, поэтому их могут легко увидеть любые потенциальные злоумышленники.</p> </blockquote> <pre class="brush: php noskimlinks noskimwords">&lt;?php//this assumes that the user has just logged in/****Creating an identification string****/$username; //normally the username would be known after login//create a digest from two random values and the username$digest = sha1(strval(rand(0,microtime(true)) + $username + strval(microtime(true)); //save to database (assuming connection is already made)mysql_query("UPDATE users SET reloginDigest="".$digest."" WHERE username="".$username.""");  //set the cookiesetcookie( "reloginID", $digest, time()+60*60*24*7,"/", "test.example.com", false, true); //this assumes that the user is logged out and cookie is set/****Verifying users through the cookie****/$digest = $_COOKIE["reloginID"];$digest = mysql_real_escape_string($digest); //filter any malicious content//check database for digest$result = mysql_query("SELECT username FROM users WHERE reloginDigest="".$digest.""");//check if a digest was foundif(mysql_num_rows($result) == 1){  $userdata  = mysql_fetch_object($result);$username = $userdata-&gt;username;//here you should set a new digest for the next relogin using the above code!echo "You have successfully logged in, ".$username;} else{//digest didn"t exist (or more of the same digests were found, but that"s not going to happen)echo "failed to login!";}?&gt;</pre> <p>При использовании дайджеста, как мы сделали, шансы получить два одинаковых дайджеста ничтожны. Дайджест - это строка из сорока символов, которая, по идее, всегда должна обеспечивать полностью случайный вывод при изменении ввода. На практике вы должны добавить ограничение по времени в коде на стороне сервера, чтобы дайджест не действовал через X минут. Это не позволяет злоумышленникам копировать чьи-то куки и использовать их для входа в систему.</p> <hr><h2> <span>Шаг 5.</span> Лучшие практики</h2> <p>Мы почти достигли конца этого урока. В заключение я хотел бы обобщить некоторые лучшие практики:</p> <ul><li>Никогда не вставляйте конфиденциальные данные в cookie. Клиент может использовать общедоступный компьютер, поэтому не оставляйте личную информацию.</li> <li>Никогда не доверяйте данным, поступающим из куки. Всегда фильтруйте строки и числа! Злоумышленник может записать вредоносные данные в файл cookie, чтобы сделать то, что вы бы не хотели, чтобы ваш сервис делал.</li> <li>Попробуйте оценить, как долго должен быть действителен cookie, и соответственно установить дату истечения срока действия. Вы не хотите загружать компьютер клиента старыми файлами cookie, срок действия которых истекает через сто лет.</li> <li>Всегда устанавливайте secure и httponly для удовлетворения требований вашего приложения. Если ваше приложение не редактирует куки с помощью JavaScript, включите httponly. Если у вас всегда есть HTTPS-соединение, включите secure. Это улучшает целостность и конфиденциальность данных.</li> </ul><hr><h2>Заключение</h2> <p> Я надеюсь, что вы немного узнали из сегодняшнего урока Nettuts+. Если у вас есть какие-либо вопросы, не стесняйтесь оставить комментарий или сказать привет в <span>Twitter</span>.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825719-vvedenie-v-cookies" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="PHP" href="https://norma-studio.github.io/article5/220825719-vvedenie-v-cookies" class="tm-article-body__tags-item-link">PHP</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
36732</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
637</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
