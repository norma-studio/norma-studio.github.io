
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Создание много-страничного сайта с помощью Meteor... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Создание много-страничного сайта с помощью Meteor... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Создание много-страничного сайта с помощью Meteor... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Создание много-страничного сайта с помощью Meteor... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Как и в любом веб-приложении, для создания многостраничных сайтов требуется специализированный набор инструментов. В этой статье мы рассмотрим разработку библиотеки, которая не только может различать различные URI, но и использовать основные функции Meteor....">
<meta property="og:description" content="Как и в любом веб-приложении, для создания многостраничных сайтов требуется специализированный набор инструментов. В этой статье мы рассмотрим разработку библиотеки, которая не только может различать различные URI, но и использовать основные функции Meteor....">
<meta name="twitter:description" content="Как и в любом веб-приложении, для создания многостраничных сайтов требуется специализированный набор инструментов. В этой статье мы рассмотрим разработку библиотеки, которая не только может различать различные URI, но и использовать основные функции Meteor....">
<meta property="aiturec:description" content="Как и в любом веб-приложении, для создания многостраничных сайтов требуется специализированный набор инструментов. В этой статье мы рассмотрим разработку библиотеки, которая не только может различать различные URI, но и использовать основные функции Meteor....">
<meta property="og:image" content="https://cdn.tutsplus.com/net/uploads/2013/05/3428OSMeteorBook.png">
<meta property="aiturec:image" content="https://cdn.tutsplus.com/net/uploads/2013/05/3428OSMeteorBook.png">
<meta name="twitter:image" content="https://cdn.tutsplus.com/net/uploads/2013/05/3428OSMeteorBook.png">
<meta property="vk:image" content="https://cdn.tutsplus.com/net/uploads/2013/05/3428OSMeteorBook.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cdn.tutsplus.com/net/uploads/2013/05/3428OSMeteorBook.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825567-sozdanie-mnogo-stranichnogo-sajta-s-pomoschyu-meteor.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825567-sozdanie-mnogo-stranichnogo-sajta-s-pomoschyu-meteor.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825567-sozdanie-mnogo-stranichnogo-sajta-s-pomoschyu-meteor.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825567-sozdanie-mnogo-stranichnogo-sajta-s-pomoschyu-meteor.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825567-sozdanie-mnogo-stranichnogo-sajta-s-pomoschyu-meteor.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825567-sozdanie-mnogo-stranichnogo-sajta-s-pomoschyu-meteor.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825567-sozdanie-mnogo-stranichnogo-sajta-s-pomoschyu-meteor.html" title="Создание много-страничного сайта с помощью Meteor... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Создание много-страничного сайта с помощью Meteor... | envatomarket.ru | norma-studio.github.io" title="Создание много-страничного сайта с помощью Meteor... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/543234456.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825567-sozdanie-mnogo-stranichnogo-sajta-s-pomoschyu-meteor.html" class="tm-user-info__username" title="
А. Гаврилов" aria-label="
А. Гаврилов">
А. Гаврилов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Создание много-страничного сайта с помощью Meteor...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825567-sozdanie-mnogo-stranichnogo-sajta-s-pomoschyu-meteor" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825567-sozdanie-mnogo-stranichnogo-sajta-s-pomoschyu-meteor" class="tm-article-snippet__hubs-item-link"><span>Web Development</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825567-sozdanie-mnogo-stranichnogo-sajta-s-pomoschyu-meteor.html" />
    <link itemprop="image" href="https://cdn.tutsplus.com/net/uploads/2013/05/3428OSMeteorBook.png">
    <meta itemprop="headline name" content="Создание много-страничного сайта с помощью Meteor... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Как и в любом веб-приложении, для создания многостраничных сайтов требуется специализированный набор инструментов. В этой статье мы рассмотрим разработку библиотеки, которая не только может различать различные URI, но и использовать основные функции Meteor....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Как и в любом веб-приложении, для создания многостраничных сайтов требуется специализированный набор инструментов. В этой статье мы рассмотрим разработку библиотеки, которая не только может различать различные URI, но и использовать основные функции Meteor....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Как и в любом веб-приложении, для создания многостраничных сайтов требуется специализированный набор инструментов. В этой статье мы рассмотрим разработку библиотеки, которая не только может различать различные URI, но и использовать основные функции <span>Meteor</span>.</p> <p><!--more--></p> <hr><h2>Предпочитаемые функции библиотеки</h2> <p>Всякий раз, когда мне приходится разрабатывать конкретную и целенаправленную библиотеку, подобную этой, мне нравится начинать с того, как я хочу, чтобы это просто работало?</p> <p>Итак, мы можем начать с записи некоторых функций, которые мы хотели бы иметь:</p> <ul><li>Возможность загрузки разных страниц в соответствии с URI</li> <li>Чтение параметров из URI (заполнители)</li> <li>Сохранение динамических страниц в соответствии со стандартом Meteor</li> </ul><p>Это выглядит неплохо. Теперь, просмотрев эти функции, вы можете подумать, что они очень похожи на библиотеку типа «маршрутизатор», и я с вами соглашусь. Итак, давайте посмотрим, как наша библиотека «router» будет работать:</p> <pre class="brush: js noskimlinks noskimwords">Router.addRoute("/home", "homeTemplate");Router.addRoute("/user/:username", "profileTemplate");Router.addRoute("/contact", "contactTemplate");Router.run();</pre> <p>В дизайне у вас есть такие понятия, как «form-follow-function», в котором используется идея сначала выложить все и конструировать его позже.</p> <p>В коде я часто нахожу обратное более полезным. Мы, как разработчики, можем работать по многим направлениям и иметь рабочий пример того, как должен выглядеть дизайн, что делает нас целенаправленными и эффективными.</p> <p>Теперь, когда я знаю, что я собираюсь делать, это просто вопрос реализации. Итак, давайте еще раз взглянем на наши функции, которые мы писали выше; мы хотим иметь возможность добавлять маршруты, и чтобы Meteor предоставлял шаблон для этого маршрута. Конечно, отображения Метеор по умолчанию отделены от шаблонов handlebar, поэтому я принял решение сделать это достоинством нашего маршрутизатора.</p> <h3>Анализ</h3> <p>Затем давайте разложим проект на разные разделы, чтобы мы знали, с какими функциями мы должны работать.</p> <ul><li>Мы начнем с получения URI текущей страницы, поскольку нам нужно сопоставить с чем-то маршруты. Это можно сделать достаточно легко, используя переменную <code>window.location.pathname</code>, предоставляемую браузером.</li> <li>Затем нам нужно добавить маршруты. Это также довольно просто сейчас, когда мы сделали некоторый пример кода; мы будем иметь функцию <code>addRoute</code>, которая примет шаблон маршрута и имя шаблона. Эта функция затем должна будет хранить все эти объекты маршрута внутри какого-либо массива.</li> <li>С текущим URI и массивом сохраненных маршрутов нам понадобится какой-то метод, чтобы увидеть, совпадают ли они.</li> <li>И последнее, но не в последнюю очередь, нам нужно будет выполнить совпавший маршрут и отобразить прикрепленный к нему шаблон.</li> </ul><p>Надеюсь, вы увидите, что, изложив требования, это действительно помогает оптимизировать этап планирования. Теперь мы готовы приступить.</p> <hr><h2>Настройка</h2> <p>Чтобы начать работу, давайте создадим новый проект Meteor, я назову свой «<code>routerdemo</code>». Теперь внутри мы создадим папку с именем «<code>lib</code>» внутри другой папки с именем «<code>client</code>»:</p> <pre class="brush: bash noskimlinks noskimwords">meteor create routerdemocd routerdemomkdir -p client/lib</pre> <p>Затем создайте файл с именем "<code>router.js</code>" внутри вновь созданной папки <code>lib</code>. Причина, по которой мы не положили его в "<code>client</code>", заключается в том, что сервер не имеет доступа к переменной <code>window.location.pathname</code> и как таковой не будет работать с нашим маршрутизатором. Ввод содержимого внутри папки с именем "<code>client</code>" гарантирует, что они будут выполняться только на стороне клиента.</p> <p>Теперь внутри файла <code>router.js</code>, который вы только что создали, давайте введем некоторые леса:</p> <pre class="brush: js noskimlinks noskimwords">//////////////////////////// Router//////////////////////////Router = {  uri: /*Current URL*/,routes: [],addRoute: /* function to add a route */,getMatchingRoute: /* function to get matching route */,run: /* function to display the matched route"s template */};</pre> <p>Я думаю, что это довольно хороший каркас, я даже заполнил код для массива маршрутов и добавил некоторые комментарии (прогресс!). Теперь, чтобы продолжить развитие нашей библиотеки, нам нужно обсудить, как мы будем сочетать эти маршруты вместе.</p> <hr><h2>Соответствие маршрутов</h2> <p>Это не так просто, как <code>currentRoute === route</code>, поскольку мы имеем дело с динамическими заполнителями. Мы хотим, чтобы маршрут <code>/user/:id</code> соответствовал URI <code>/user/42</code> и т.д.</p> <p>Для этого нам придется разбить URI и сделать более подробный анализ. Теперь некоторые могут подумать о том, чтобы использовать регулярное выражение, но, если вы спросите меня на этот счет, то я считаю что это немного перебор. Гораздо проще было бы разделить сегменты и убедиться, что два маршрута имеют одинаковое количество сегментов, а также убедитесь, что части маршрута, которые не являются заполнителями, совпадают.</p> <p>Это может быть легко достигнуто путем разделения URI, где всегда есть косая черта ("/"), используя метод <code>.split</code>. Таким образом, наша первая проверка обеспечит, чтобы два маршрута имели одинаковое количество сегментов.</p> <p>Если маршрут <code>/user/:id</code>, и мы получаем URI <code>/profile/42/foo/bar</code>, то нам даже не нужно делать никаких дальнейших проверок, у одного есть два сегмента, а у другого есть четыре, так что это кажется хорошей первичной проверкой. Следующее, что мы можем сделать, это фильтрация через списки чтобы убедиться, что каждая часть, которая не является заполнителем, совпадает. Если эти две проверки верны, мы знаем, что маршруты совпадают.</p> <h3>Установка переменной URI</h3> <p>Итак, давайте начнем с установки переменной <code>uri</code>:</p> <pre class="brush: js noskimlinks noskimwords">uri: _.compact(window.location.pathname.split("/")),</pre> <p>В приведенном выше коде мы разбиваем массив на косые черты и превращаем строку в массив сегментов. Затем мы используем функцию Underscore <code>compact</code> для удаления любых пустых элементов из списка, это может быть вызвано косой чертой в начале или кем-то, использующим две косые черты по ошибке. Делая это, мы делаем нашу систему гораздо более лояльной.</p> <h3>Добавление маршрутов</h3> <p>Затем нам нужно создать функцию для добавления маршрута, это довольно похожий процесс, но поскольку мы собираемся позже сопоставлять заполнители, мы собираемся хранить не только сегменты и имя шаблона, но и индексы для заполнителей.</p> <p>Вот завершенная функция:</p> <pre class="brush: js noskimlinks noskimwords">addRoute: function(route, template) {var segments =  _.compact(route.split("/"));var placeholders = _.reduce(segments, function(currentArr, piece, index) {if (piece.substr(0, 1) === ":") {currentArr.push(index);segments[index] = piece.substr(1);}return currentArr;}, []);this.routes.push({route: segments,template: template,placeholderIndexes: placeholders});},</pre> <p>Начнем с разделения маршрута на сегменты, как и для URI, но на этот раз нам также нужно сохранить индексы заполнителей для дальнейшего использования, используя метод Underscore <code>reduce</code>.</p> <p>Для тех, кто не в курсе, функция <code>reduce</code> похожа на <code>each</code> метод, она также циклически проходит через все элементы списка, причем разница состоит в том, что она передает в каждую итерацию следующий элемент, в конечном итоге возвращая результаты в данную переменную. Мы начинаем с пустого массива (третий параметр), и мы добавляем каждый индекс, когда мы их находим, и передаем этот массив, пока, наконец, не вернемся к переменной <code>placeholders</code>.</p> <p>Следующее, что вы увидите здесь, заключается в том, что мы переименовываем сегменты, которые являются заполнителями и удаляем двоеточие. Мы делаем это исключительно по эстетическим соображениям, а позже это упростит ссылку в шаблонах.</p> <p>Наконец, мы добавляем новые данные в наш массив маршрутов, который мы создали ранее.</p> <h3>Сопоставление маршрута с URI</h3> <p>Следующим шагом будет фильтрация по списку и поиск маршрута, который соответствует текущему URI.</p> <p>Вот полная функция:</p> <pre class="brush: js noskimlinks noskimwords">getMatchingRoute: function(){     for (var i in this.routes) {         var route = this.routes[i];         var data = {};         if (route.segments.length === this.uri.length) {             var match = _.every(route.segments, function(seg, i){                  if (_.contains(route.placeholderIndexes, i)) {                       data[seg] = this.uri[i];                       return true;                  } else {                       return seg === this.uri[i];                  }             }, this);             if (match) {                  return {                      data: data,                      template: route.template                  }             }        }    }    //no matches (add 404 or default template maybe?)    return false;},</pre> <p>Здесь мы много чего делаем, поэтому давайте пройдемся по коду. Начнем с циклу по массиву маршрутов, и мы назначим текущий маршрут переменной, а также пустой объект данных для хранения заполнителей.</p> <p>Затем мы делаем первоначальную проверку того, что два маршрута имеют одинаковое количество сегментов, иначе мы просто переходим к следующему маршруту. Если они имеют одинаковое количество компонентов, мы должны проверить, соответствуют ли сегменты, это можно сделать с помощью функции <code>_.every</code> Underscore. Эта функция снова похожа на метод <code>_.each</code>, за исключением того, что она возвращает логическое значение. Это работает так: для каждого элемента в массиве запускается функция, если все они вернут true, функция вернет true, иначе она вернет false, поэтому она идеально подходит для таких действий, когда нам нужно проверить каждый сегмент.</p> <p>Теперь проверка, которую мы выполняем, довольно проста, если это заполнитель, то она автоматически подходит, так как местозаполнитель может быть равен любому значению. Если это не местозаполнитель, мы просто убеждаемся, что два сегмента соответствуют, довольно просто.</p> <p>Чтобы проверить, является ли это заполнителем, мы передаем индекс текущих сегментов (хранящихся в «<code>i</code>») в функцию <code>_.contains</code> Underscore, которая проверяет ее значение.</p> <p>Теперь вам может быть интересно, что делает первая строка внутри этого оператора «<code>if</code>», ну, он хранит сегмент в массиве данных под данным именем заполнителя. Итак, скажем, например, у вас был маршрут "<code>/user/:name</code>", а текущий URI - "<code>/user/bob</code>", тогда эта строка добавит свойство к объекту данных с именем "<code>name</code>" и передаст ему значение <code>bob</code>.</p> <p>Остальное довольно очевидно, мы передаем true или false, в зависимости от обстоятельств, и результат сохраняется в «<code>match</code>». Если match истинно, мы возвращаем данные вместе с именем шаблонов, и если совпадения не было, мы возвращаем false. И это все что касается нашего метода <code>getMatchingRoute</code>.</p> <p>Пока мы можем получить текущий URI, мы можем добавлять маршруты, и мы можем найти подходящий маршрут, осталось только отобразить правильный маршрут, и для этого нам нужно написать метод «<code>run</code>».</p> <hr><h2>Отображение шаблона</h2> <p>Meteor использует handlebars для шаблонов и хранит все шаблоны в переменной, соответственно названной «<code>Template</code>». Теперь, если вы знакомы с дескрипторами, вы знаете, что эти шаблоны - это просто функции, и, вызывая их (необязательно, передавая некоторые данные), мы возвращаем HTML-код шаблона.</p> <p>Теперь вызов этих функций для получения HTML-кода шаблона будет работать нормально, но он не очень похож на Метеор, поскольку в итоге мы получим обычный статический веб-сайт. К счастью, добавление динамического поведения проще, чем вы думаете, все, что нам нужно сделать, это обернуть вызов функции в «<code>Meteor.render</code>», вызов. Ввод его внутрь этой функции заставит его реагировать на изменения данных и сохранить их «живыми».</p> <h3>Метод run</h3> <p>Благодаря этому запуск маршрутизатора очень прост, давайте создадим метод run:</p> <pre class="brush: js noskimlinks noskimwords">run: function(){    var route = this.getMatchingRoute();    if (route) {        var fragment = Meteor.render(function() {            if (Template[route.template] !== undefined) {                 return Template[route.template](route.data);            }        });        document.body.appendChild(fragment);    } else {        //404    }}</pre> <p>Мы начнем с получения совпаденного маршрута, используя функцию <code>getMatchingRoute</code>, которую мы только что написали, затем убедимся, что есть совпадение, и, наконец, мы используем инструкцию <code>else</code> для обработки отображения 404.</p> <p>Внутри оператора if мы вызываем <code>Meteor.render</code> и внутри, мы проверяем и вызываем возвращенный шаблон, передавая ему данные из заполнителей. Эта функция вернет фрагмент HTML, который мы можем просто добавить в тело документа.</p> <p>Итак, около 60 строк кода, мы завершили наш маршрутизатор.</p> <h3>Тестирование</h3> <p>Следующий шаг - нужно его протестировать. Я собираюсь использовать тот же код, который мы писали ранее, когда планировали этот проект, так как это будет хорошей мерой того, достигли ли мы того, чего мы хотели или нет. Давайте добавим файл с именем <code>main.js</code> внутри папки <code>client</code> и добавим следующее:</p> <pre class="brush: js noskimlinks noskimwords">Meteor.startup(function(){    Router.addRoute("/home", "homeTemplate");    Router.addRoute("/user/:username", "profileTemplate");    Router.addRoute("/contact", "contactTemplate");    Router.run();});</pre> <p>В приведенном выше коде нам сначала нужно убедиться, что наши шаблоны и тело будут доступны до того, как мы попробуем работать с нашим маршрутизатором. Мы делаем это, обертывая весь наш код внутри вызова метода <code>Meteor.startup</code>. Это гарантирует, что все будет готово, и внутри метода <code>startup</code> мы сможем добавить наши маршруты и запустить маршрутизатор.</p> <h3>Создание наших шаблонов</h3> <p>Теперь давайте создадим пару шаблонов, это можно сделать в любом месте, вы можете создать подпапку внутри папки <code>client</code> с именем templates и создать для каждого отдельный HTML-файл, но поскольку это будут короткие шаблоны и только для примера, я собираюсь для их объединения внутри файла с именем «<code>templates.html</code>» внутри папки «<code>client</code>»:</p> <pre class="brush: html noskimlinks noskimwords">&lt;template name="homeTemplate"&gt;    &lt;h1&gt;This is the Home Page&lt;/h1&gt;&lt;/template&gt;&lt;template name="profileTemplate"&gt;    &lt;h1&gt;Profile Page&lt;/h1&gt;    &lt;p&gt;Welcome back {{username}}&lt;/p&gt;&lt;/template&gt;&lt;template name="contactTemplate"&gt;    &lt;h1&gt;Contact Page&lt;/h1&gt;    &lt;p&gt;Contact me on twitter at {{twitterName}}&lt;/p&gt;&lt;/template&gt;</pre> <p>Первый шаблон довольно простой, он просто содержит небольшой HTML код для заголовка домашней страницы. Второй шаблон очень похож на первый шаблон, но на этот раз мы используем параметр маршрута - <code>username</code>. В последнем шаблоне также используется заполнитель, но на его маршруте нет сегмента <code>twitterName</code>. Это связано с тем, что стандартные метеорные заполнители будут по-прежнему работать.</p> <p>Вернитесь в папку <code>client</code>, давайте теперь создадим файл с именем «<code>templates.js</code>», чтобы объявить заполнитель contact.</p> <pre class="brush: js noskimlinks noskimwords">Template.contactTemplate.twitterName = function (){    Session.setDefault("twitter_name", "@gabrielmanricks");    return Session.get("twitter_name");}</pre> <p>Вы могли бы просто вернуть строку, но я хотел показать, что все по-прежнему реактивно. Последний шаг - удалить файлы html и js по умолчанию из корневого каталога (в моем случае они называются routerdemo.html и routerdemo.js) После этого запустите сервер Meteor и перейдите к заданным маршрутам.</p> <p>Попытайтесь перейти к <code>/home</code> или<code> user/gmanricks</code> или <code>/contact</code>, и все они будут работать для вас, как и ожидалось. Другое дело, поскольку мы сохранили имя твиттера в сеансе, мы можем просто открыть консоль браузера на странице контактов и ввести:</p> <pre class="brush: js noskimlinks noskimwords">Session.set("twitter_name", "@nettuts");</pre> <p>И вы увидите, что страница будет обновляться в режиме реального времени!</p> <hr><h2>Заключение</h2> <p>В этой статье мы построили базовую библиотеку маршрутизатора, в то же время предоставляя ей Meteor. Мы рассмотрели множество основных концепций, и, как оказалось, много концепций Underscore.</p> <p>В конце концов, я надеюсь, что у меня появилось впечатление того, что здесь нет настоящей «магии». Это действительно все о том, что вам нужно, в отличие от того, что вы можете.</p> <p>Спасибо за чтение, надеюсь, вам понравилось. Как всегда, если у вас есть какие-либо вопросы, вы можете оставить их ниже или спросить меня в IRT NetTuts или в моем Twitter.</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" original="https://cdn.tutsplus.com/net/uploads/2013/05/3428OSMeteorBook.png" data-src="https://cdn.tutsplus.com/net/uploads/2013/05/3428OSMeteorBook.png" class="lazy07" alt="Создание много-страничного сайта с помощью Meteor..." title="Создание много-страничного сайта с помощью Meteor..." width="50" height="50"><p><strong>Примечание</strong>. Если вам интересно узнать больше о Meteor, я только что выпустил свою новую книгу, в которой подробно описывается процесс создания приложения из его концепции и планирования для обеспечения безопасности и развертывания. Вы можете приобрести книгу как в формате ebook, так и в мягкой обложке на <span>Amazon</span>.</p> </div>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825567-sozdanie-mnogo-stranichnogo-sajta-s-pomoschyu-meteor" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825567-sozdanie-mnogo-stranichnogo-sajta-s-pomoschyu-meteor" class="tm-article-body__tags-item-link">Web Development</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
38407</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
562</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
