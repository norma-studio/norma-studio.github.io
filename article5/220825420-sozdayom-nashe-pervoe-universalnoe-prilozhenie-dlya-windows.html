
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Создаём наше первое универсальное приложение для Windows... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Создаём наше первое универсальное приложение для Windows... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Создаём наше первое универсальное приложение для Windows... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Создаём наше первое универсальное приложение для Windows... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Универсальные приложения Windows позволяют задействовать различные устройства Windows с помощью единого решения. Вы пишете код, распределяете его большую часть и используете для Windows, Windows Phone или Xbox....">
<meta property="og:description" content="Универсальные приложения Windows позволяют задействовать различные устройства Windows с помощью единого решения. Вы пишете код, распределяете его большую часть и используете для Windows, Windows Phone или Xbox....">
<meta name="twitter:description" content="Универсальные приложения Windows позволяют задействовать различные устройства Windows с помощью единого решения. Вы пишете код, распределяете его большую часть и используете для Windows, Windows Phone или Xbox....">
<meta property="aiturec:description" content="Универсальные приложения Windows позволяют задействовать различные устройства Windows с помощью единого решения. Вы пишете код, распределяете его большую часть и используете для Windows, Windows Phone или Xbox....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/484/posts/23122/image/universal-app-hex-clock.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/484/posts/23122/image/universal-app-hex-clock.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/484/posts/23122/image/universal-app-hex-clock.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/484/posts/23122/image/universal-app-hex-clock.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/484/posts/23122/image/universal-app-hex-clock.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825420-sozdayom-nashe-pervoe-universalnoe-prilozhenie-dlya-windows.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825420-sozdayom-nashe-pervoe-universalnoe-prilozhenie-dlya-windows.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825420-sozdayom-nashe-pervoe-universalnoe-prilozhenie-dlya-windows.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825420-sozdayom-nashe-pervoe-universalnoe-prilozhenie-dlya-windows.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825420-sozdayom-nashe-pervoe-universalnoe-prilozhenie-dlya-windows.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825420-sozdayom-nashe-pervoe-universalnoe-prilozhenie-dlya-windows.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825420-sozdayom-nashe-pervoe-universalnoe-prilozhenie-dlya-windows.html" title="Создаём наше первое универсальное приложение для Windows... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Создаём наше первое универсальное приложение для Windows... | envatomarket.ru | norma-studio.github.io" title="Создаём наше первое универсальное приложение для Windows... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/45343254534.jpg" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825420-sozdayom-nashe-pervoe-universalnoe-prilozhenie-dlya-windows.html" class="tm-user-info__username" title="
С. Баранов" aria-label="
С. Баранов">
С. Баранов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Создаём наше первое универсальное приложение для Windows...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825420-sozdayom-nashe-pervoe-universalnoe-prilozhenie-dlya-windows" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Windows" href="https://norma-studio.github.io/article5/220825420-sozdayom-nashe-pervoe-universalnoe-prilozhenie-dlya-windows" class="tm-article-snippet__hubs-item-link"><span>Windows</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825420-sozdayom-nashe-pervoe-universalnoe-prilozhenie-dlya-windows.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/484/posts/23122/image/universal-app-hex-clock.jpg">
    <meta itemprop="headline name" content="Создаём наше первое универсальное приложение для Windows... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Универсальные приложения Windows позволяют задействовать различные устройства Windows с помощью единого решения. Вы пишете код, распределяете его большую часть и используете для Windows, Windows Phone или Xbox....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Универсальные приложения Windows позволяют задействовать различные устройства Windows с помощью единого решения. Вы пишете код, распределяете его большую часть и используете для Windows, Windows Phone или Xbox....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Универсальные приложения Windows позволяют задействовать различные устройства Windows с помощью единого решения. Вы пишете код, распределяете его большую часть и используете для Windows, Windows Phone или Xbox.</p><p>Суть состоит в том, чтобы максимизировать повторное использование кода. Вы можете повсеместно использовать код, элементы управления, стили, строки и другие активы между проектами Windows Phone и Windows 8 с помощью Visual Studio. Это уменьшает усилия, необходимые для создания и поддержки приложения для каждого типа устройств.</p><h2>Введение</h2><p>С точки зрения разработчика универсальное приложение Windows - это не один бинарный файл, который работает на нескольких платформах. Скорее, оно принимает форму решения Visual Studio, содержащего несколько проектов: один проект для каждой платформы в дополнение к совместному проекту, содержащему код и ресурсы, распределённому между платформами. Большая часть кода может быть распределена между проектами, так как Windows Phone 8.1 использует API-интерфейс WinRT, реализованный в Windows 8.1.</p><p>Вы можете создать приложение для Windows Phone с использованием среды Silverlight (версия 8.0 или 8.1) или среды WinRT (одно из универсальных приложений для Windows). Среда WinRT позволяет создать одно приложение, которое будет работать на Windows, Windows Phone и даже на Xbox One.</p><p>Мы будем использовать фреймворк XAML чтобы разработать приложение для нескольких платформ В текущей версии конвергенция API составляет 90%, но все еще существует небольшое количество несовместимого кода. Функции Windows Phone, доступные только в среде Silverlight, следующие:</p><ul><li>Поддержка Объективов</li> <li>Поддержка VoIP</li> <li>Задача захвата камеры</li> <li>API для буфера обмена</li> <li>API для обоев экрана заставки</li> </ul><p>В нашем уроке я буду использовать универсальный шаблон приложения Windows для того, чтобы создать приложение Hex Clock, точные шестнадцатеричные часы. Они покажут весь диапазон цветов в течении 24 часов, от <strong>#000000</strong> до <strong>#235959</strong>. При каждом тиканье часов фон приложения будет изменяться на цвет, соответствующий текущему времени, преобразованному в шестнадцатеричный формат. Он будет использовать ту же реализацию, что и <span>Hex Color JS Clock</span>, для генерации шестнадцатеричного кода текущего времени.</p><p>Источником вдохновения является <span>урок по созданию приложения для Windows Phone 7 на Tuts+</span>. Пока приложение часов предназначено только для Windows Phone, мы используем его дизайн, чтобы создать аналогичное приложение для Windows Phone 8.1 и Windows 8.1 Следующий скриншот показывает то, что мы собираемся построить.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/484/posts/23122/image/universal-app-hex-clock.jpg" alt="Создаём наше первое универсальное приложение для Windows..." title="Создаём наше первое универсальное приложение для Windows..." width="50" height="50"></figure><p>В этом уроке мы обсудим следующие темы, которые имеют отношение к разработке универсальных приложений для Windows:</p><ul><li>структура универсальных приложений Windows</li> <li>переключение проектов в Visual Studio</li> <li>контекстный коммутатор для универсальных приложений Windows в редакторе Visual Studio</li> <li>как создать кроссплатформенный код в общем проекте</li> <li>как добавить поддержку Windows или Windows Phone к существующему проекту.</li> <li>создание универсального приложения Windows с нуля</li> </ul><h2> <span class="sectionnum">1. Структура универсальных приложений Windows</span></h2><p>Универсальное приложение Windows представляет собой набор из трех проектов, размещённую в дополнительную папку решений. Проекты Windows и Windows Phone платформенные и отвечают за создание пакетов приложений (.appx), предназначенных для соответствующих платформ. Эти проекты содержат данные, необходимые для конкретной платформы.</p><p>Общий проект - это контейнер для кода, который работает на обеих платформах. У него нет двоичного кода, а их содержимое импортируется платформенными проектами как и используются как часть процесса сборки для создания пакетов приложений (.appx).</p><p>Скриншот показывает решение, которое создаст Visual Studio, если вы выберете шаблон Blank App (Universal Apps).</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/484/posts/23122/image/univeral-app-project-structure.PNG" alt="Создаём наше первое универсальное приложение для Windows..." title="Создаём наше первое универсальное приложение для Windows..." width="50" height="50"></figure><p><span>Visual Studio 2013 Update 2</span> предоставляет новую функцию - универсальное приложение Windows. Загрузите и установите это обновление перед началом создания универсальных приложений Windows.<br></p><h2> <span class="sectionnum">2. Переключение проектов</span></h2><p>Когда вы создаете решение, проект, который выполняется, является стартовым. Чтобы установить стартовый проект, щелкните правой кнопкой мыши над проектом в <strong>обозревателе решений</strong> и выберите параметр «<strong>Установить как стартовый проект</strong>». Вы можете быстро переключить стартовый проект из выпадающего меню «<strong>Отладка</strong>», который теперь содержит все проекты решения.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/484/posts/23122/image/univeral-app-switch-startup-project.png" alt="Создаём наше первое универсальное приложение для Windows..." title="Создаём наше первое универсальное приложение для Windows..." width="50" height="50"></figure><p>Выбранный проект выделен жирным шрифтом в <strong>обозревателе решений</strong>. Доступные параметры отладки изменяются при переключении стартовых проектов.</p><ul><li>Когда проект Windows стартовый, в выпадающем меню «<strong>Отладка</strong>» отображаются параметры для <strong>симулятора</strong> Windows или <strong>локальной машины</strong>.</li> <li>Когда проект Windows Phone является стартовым проектом, в выпадающем меню отображаются параметры для <strong>устройства</strong>, а также различные эмуляторы.</li> </ul><h2> <span class="sectionnum">3. Контекстный переключатель в редакторе кода</span></h2><p>При написании кода в распределённом проекте вы можете использовать переключатель контекста проекта на панели навигации, чтобы выбрать платформу, на которой вы будете его использовать, что, в свою очередь, изменит настройки IntelliSense в редакторе кода.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/484/posts/23122/image/univeral-app-context-switch-2.png" alt="Создаём наше первое универсальное приложение для Windows..." title="Создаём наше первое универсальное приложение для Windows..." width="50" height="50"></figure><p>Если вы используете API в распределённом коде, который не поддерживается на обеих платформах, сообщение об ошибке определит это API при создании проекта. Вам не нужно компилировать проект, пока вы не убедитесь, что используете кроссплатформенные API.</p><p>Следующий скриншот показывает пример уведомлений в IntelliSense для случая, уведомлений для приложений Windows Phone.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/484/posts/23122/image/univeral-app-platform-specific-code-warning-2.png" alt="Создаём наше первое универсальное приложение для Windows..." title="Создаём наше первое универсальное приложение для Windows..." width="50" height="50"></figure><h2> <span class="sectionnum">4. Кроссплатформенный код в общем проекте</span></h2><p>В распределённом проекте вы обычно пишете код для обеих платформ. Чтобы отделить части кода, специфичные для каждой платформы, используйте директиву <code class="inline">#ifdef</code>. Константы <code class="inline">WINDOWS_APP</code> и <code class="inline">WINDOWS_PHONE_APP</code> определены.</p><p>Ниже приведены константы условной компиляции, которые вы можете использовать для написания кода, специфичного для платформы:</p><table><tbody><tr><td>C#</td> <td>WINDOWS_APP<br></td> <td>WINDOWS_PHONE_APP<br></td> </tr><tr><td>C++<br></td> <td>WINAPI_FAMILY_PC_APP<br></td> <td>WINAPI_FAMILY_PHONE_APP</td> </tr></tbody></table><p>Когда вы пишете код в общем проекте, редактор кода Visual Studio использует контекст, который направлен на ту или иную платформу. В C# IntelliSense, который вы видите при написании кода, специфичен для контекста редактора кода, то есть для Windows или Windows Phone.</p><h2> <span class="sectionnum">5. Добавление поддержки для Windows / Windows Phone</span></h2><p>Если у вас уже есть приложение Windows 8.1, вы можете использовать команду <strong>Add Windows Phone 8.1</strong> чтобы добавить новый проект Windows Phone 8.1 и распределённый проект в решение. Аналогичный вариант доступен, если у вас есть приложение Windows Phone 8.1, и вы хотите добавить поддержку для Windows 8.1.</p><p>Чтобы добавить поддержку типа устройства в <strong>Обозревателе решений</strong> щелкните правой кнопкой мыши проект и выберите <strong>Добавить Windows Phone 8.1</strong> или <strong>Добавить Windows 8.1</strong>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/484/posts/23122/image/universal-app-add-windows-app-to-existing-project.png" alt="Создаём наше первое универсальное приложение для Windows..." title="Создаём наше первое универсальное приложение для Windows..." width="50" height="50"></figure><p>Visual Studio добавляет в решение новый проект Windows Phone или Windows. Распределённый проект также будет автоматически создан.</p><p>Следующий скриншот показывает решение после добавления проекта Windows Phone в существующий проект. Распределённый проект, добавленный в решение, изначально пуст.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/484/posts/23122/image/univeral-app-add-windows-app-to-existing-project.png" alt="Создаём наше первое универсальное приложение для Windows..." title="Создаём наше первое универсальное приложение для Windows..." width="50" height="50"></figure><p>Заметьте, что если вы создаете приложение с использованием универсального шаблона приложения Windows, рспределённый проект уже содержит файл <strong>App.xaml</strong>.</p><h3>Шаг 1: Перенос файлов в распределённый проект</h3><p>Вы можете перемещать любой код, который вы хотите распределить между приложениями, в общий проект. Например, вы можете переместить папки <strong>Common</strong>, <strong>DataModel</strong> и <strong>Strings</strong> в общий проект. Вы даже можете переместить туда <strong>App.xaml</strong>.</p><p>Однако вы можете увидеть некоторые ошибки компилятора для кода, который вы переносите в общий проект. Вы можете исправить эти ошибки, настроив новый проект приложения на тот же набор ссылок, как это было в вашем первоначальном проекте.</p><p>Следующий скриншот показывает на ссылку, добавленную в оба проекта.<br></p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/484/posts/23122/image/universal-app-assembly-reference-added-to-both-projects.png" alt="Создаём наше первое универсальное приложение для Windows..." title="Создаём наше первое универсальное приложение для Windows..." width="50" height="50"></figure><p>Если ваш общий код использует API, специфичные для Windows, используйте директиву <code class="inline">#ifdef</code> с константой <code class="inline">WINDOWS_APP</code>, чтобы отделить эту часть кода. Используйте константу <code class="inline">WINDOWS_PHONE_APP</code>, чтобы отделить части кода, специфичные для Windows Phone 8.1.</p><h3>Шаг 2: Распределение App.xaml</h3><p>Когда вы создаете новое решение для универсального приложения Windows, Visual Studio помещает<strong> App.xaml</strong> в общий проект. Если вы конвертируете существующий проект в универсальное приложение Windows, вы можете переместить <strong>App.xaml</strong> в общий проект вручную. После перемещения файла вам нужно будет изменить свойство action для сборки на <strong>ApplicationDefinition</strong>. Ниже приведены наши шаги:</p><ul><li>В <strong>обозревателе решений</strong> в общем проекте выберите файл <strong>App.xaml</strong>.</li> <li>Выберите окно «<strong>Вид</strong>» <strong>&gt;</strong> «<strong>Свойства</strong>».</li> <li>В окне «<strong>Свойства</strong>» в выпадающем списке <strong>Action</strong> выберите <strong>ApplicationDefinition</strong>.</li> </ul><p>Вы также можете выбрать, как вы хотите открыть первую страницу своего приложения. Если вы распределённо используете файл <strong>App.xaml</strong> и хотите использовать разную стартовую страницу для каждого приложения, вам нужно добавить директивы <code class="inline">#ifdef</code>, как показано ниже.</p><pre class="brush: csharp noskimlinks noskimwords">#if WINDOWS_APPif (!rootFrame.Navigate(typeof(HubPage)))#endif#if WINDOWS_PHONE_APPif (!rootFrame.Navigate(typeof(WindowsPhoneStartPage)))#endif{    throw new Exception("Failed to create initial page");}</pre><h2> <span class="sectionnum">6. Начинаем написание универсального приложения Windows App</span></h2><h3>Шаг 1: Настройка проекта</h3><p>Для начала, выберите шаблон проекта для универсального приложения Windows в диалоговом окне «<strong>Новый проект</strong>». На следующем скриншоте показаны универсальные шаблоны проектов приложений Windows, которые в настоящее время доступны для C#.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/484/posts/23122/image/universal-app-project-template.PNG" alt="Создаём наше первое универсальное приложение для Windows..." title="Создаём наше первое универсальное приложение для Windows..." width="50" height="50"></figure><p>Напишите название проекта. Я напишу <b>Hex Clock Pro</b> для своего проекта.</p><h3>Шаг 2: Создание пользовательского интерфейса</h3><p>По большей части работа с пользовательским интерфейсом выполняется в проектах, специфичных для платформы, и это позволяет создавать пользовательский интерфейс, который отлично смотрится на ПК, планшетах и телефонах, но они имеют общие данные, ресурсы, компоненты и даже модели.</p><p>Вместо создания отдельных пользовательских интерфейсов для версий Windows Phone 8.1 и Windows 8.1 Hex Clock Pro я определяю общий дизайн в распределённом проекте. Мне просто нужно внести несколько изменений в файл XAML <span>приложения часов на Tuts+</span>, чтобы он работал на обеих платформах.</p><pre class="brush: xml noskimlinks noskimwords">&lt;Canvas x:Name="ContentPanel" Margin="12,0,620,0" HorizontalAlignment="Center" Grid.Row="1" RenderTransformOrigin="0.5,0.5"&gt;    &lt;Canvas.RenderTransform&gt;        &lt;CompositeTransform Rotation="-30"/&gt;    &lt;/Canvas.RenderTransform&gt;    &lt;Canvas x:Name="TimeText" Height="315" Canvas.Left="-18" Canvas.Top="288" Width="496" RenderTransformOrigin="0.5,0.5" Opacity="0"&gt;        &lt;Canvas.RenderTransform&gt;            &lt;CompositeTransform/&gt;        &lt;/Canvas.RenderTransform&gt;        &lt;TextBlock x:Name="TimeHours" TextWrapping="Wrap" Text="12" Canvas.Top="24" Style="{StaticResource TimeTextStyle}" Canvas.Left="-67" Width="267" TextAlignment="Right"/&gt;        &lt;TextBlock x:Name="TimeDots" Canvas.Left="204" TextWrapping="Wrap" Text=":" Style="{StaticResource TimeTextStyle}"/&gt;        &lt;TextBlock x:Name="TimeMinutes" Canvas.Left="263" TextWrapping="Wrap" Text="59" Canvas.Top="24" Style="{StaticResource TimeTextStyle}" Width="257"/&gt;    &lt;/Canvas&gt;    &lt;Rectangle x:Name="HorizontalSeparator" Height="4" Canvas.Left="-400" Canvas.Top="295" Width="1020" Fill="White"/&gt;    &lt;Rectangle x:Name="VerticalSeparator" Fill="White" Height="469" Canvas.Left="213" Canvas.Top="489" Width="4"/&gt;    &lt;TextBlock x:Name="ApplicationTitle" TextWrapping="Wrap" Text="HEX CLOCK PRO" Canvas.Top="271" Foreground="White" FontSize="16" Canvas.Left="18"/&gt;    &lt;TextBlock x:Name="SecondsLabel" Height="36" Canvas.Left="23" TextWrapping="Wrap" Text="seconds" Canvas.Top="475" Width="166" TextAlignment="Right" Style="{StaticResource SmallTextStyle}" Margin="0"/&gt;    &lt;TextBlock x:Name="TimeSeconds" Height="205" Canvas.Left="3" TextWrapping="Wrap" Text="59" Canvas.Top="505" Width="210" FontSize="186.667" RenderTransformOrigin="0.5,0.5" Opacity="0"&gt;        &lt;TextBlock.RenderTransform&gt;            &lt;CompositeTransform/&gt;        &lt;/TextBlock.RenderTransform&gt;    &lt;/TextBlock&gt;    &lt;TextBlock x:Name="DateText" Height="39" Canvas.Left="208" TextWrapping="Wrap" Text="2012/12/31" Canvas.Top="258" Width="143" FontSize="29.333" Opacity="0"/&gt;&lt;/Canvas&gt; </pre><h3>Шаг 3: Совместное использование Code</h3><p>Как упоминалось ранее, код, который является общим для обеих платформ, может быть помещен в распределённый проект. Код, который использует специфичные для платформы API, должен быть помещен в один из проектов, ориентированных на конкретную платформу. Вы также можете использовать директивы <code class="inline">#ifdef</code> для включения кода, специфичного для каждой платформы, в общем файле.</p><p>Поскольку приложение Hex Clock Pro не использует API-интерфейсы, специфичные для платформы, Я могу поместить весь код в общий проект.</p><h4>Прячем Status Bar</h4><p>В файле <strong>MainPage.xaml.cs</strong> в общем проекте, мы использовали директиву <code class="inline">#ifdef</code> для того, чтобы выделить код, специфичный для Windows Phone. Код, заключенный в <code class="inline">#ifdef</code>, скрывает строку состояния на Windows Phone.</p><pre class="brush: csharp noskimlinks noskimwords">public MainPage(){    this.InitializeComponent();    #if WINDOWS_PHONE_APP    ApplicationView.GetForCurrentView().SetDesiredBoundsMode(ApplicationViewBoundsMode.UseCoreWindow);    #endif}</pre><h4>Отображение текущего времени</h4><p>Я использовал класс <code class="inline">DispatcherTimer</code> для вызова начального тиканья при загрузке <code class="inline">LayoutRoot</code>. Объект <code class="inline">timer</code> вызывает функцию <code class="inline">timer_Tick</code> которая выполняется при каждом тиканье часов. </p><pre class="brush: csharp noskimlinks noskimwords">try{    DispatcherTimer timer = new DispatcherTimer();    timer.Tick += timer_Tick;    timer.Interval = new TimeSpan(0, 0, 0, 1);    timer.Start();    timer_Tick(null, null);             //Call an initial tick}catch { }</pre><p>Функция <code class="inline">timer_Tick</code> обновляет отображаемое время в приложении и в то же самое время обновляет цвет фона.</p><h4>Обновление цвета фона</h4><p>Цвет фона устанавливается в виде шестнадцатеричного цвета, который соответствует текущему времени. </p><pre class="brush: csharp noskimlinks noskimwords">HexColour color = new HexColour(hexTime);SolidColorBrush bgBrush = new SolidColorBrush(Color.FromArgb(color.A, color.R, color.G, color.B));LayoutRoot.Background = bgBrush;</pre><p>Объект класса <code class="inline">HexColour</code> инициализируется текущим временем, возвращая соответствующие значения RGB. Конструктор класса <code class="inline">HexColour</code> задает значения A, R, G, B для указанного цвета.</p><pre class="brush: csharp noskimlinks noskimwords">public HexColour(string hexCode){    if (hexCode == null)    {        throw new ArgumentNullException("hexCode");    }    if (!Regex.IsMatch(hexCode, HEX_PATTERN))    {        throw new ArgumentException("Format must be #000000 or #FF000000 (no extra whitespace)", "hexCode");    }    // shave off "#" symbol    hexCode = hexCode.TrimStart("#");    // if no alpha value specified, assume no transparency (0xFF)    if (hexCode.Length != LENGTH_WITH_ALPHA)        hexCode = String.Format("FF{0}", hexCode);    _color = new Color();    _color.A = byte.Parse(hexCode.Substring(0, 2), NumberStyles.AllowHexSpecifier);    if (_color.A &lt; 50)        _color.A = 50;    _color.R = byte.Parse(hexCode.Substring(2, 2), NumberStyles.AllowHexSpecifier);    _color.G = byte.Parse(hexCode.Substring(4, 2), NumberStyles.AllowHexSpecifier);    _color.B = byte.Parse(hexCode.Substring(6, 2), NumberStyles.AllowHexSpecifier);}</pre><h4>Добавление анимаций и эффектов</h4><p>Я повторил начальную анимацию, используемую в <span>предыдущем приложении часов на Tuts+</span>, и она инициализируется при загрузке <code class="inline">LayoutRoot</code>.</p><pre class="brush: csharp noskimlinks noskimwords">Storyboard sb = (Storyboard)this.Resources["IntialAnimation"];sb.BeginTime = TimeSpan.FromSeconds(0.1);sb.Begin();</pre><p>Это все, что нам нужно для создания приложения Hex Clock Pro. Приложение использует 100% распределённый код. Вам просто нужно создать отдельные сборки приложений для обеих платформ. Приложение выглядит очень похоже на приложение Windows Phone и использует один и тот же код XAML для своего пользовательского интерфейса.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/484/posts/23122/image/universal-app-hex-clock-phone.png" alt="Создаём наше первое универсальное приложение для Windows..." title="Создаём наше первое универсальное приложение для Windows..." width="50" height="50"></figure><p>Заметьте, что я добавил весь код XAML и C # в общий проект, но при развертывании приложения Windows или Приложения Windows Phone, код в общем проекте объединен внутри с проектами, специфичными для платформы.</p><h2>Заключение</h2><p>Большинство кода для приложения Windows и приложения Windows Phone является распределённым, и, хотя пользовательские интерфейсы разделены, они достаточно похожи, чтобы создать оба потребуется меньше усилий, чем создание двух пользовательских интерфейсов с нуля.</p><p>Если бы я разработал версию Windows Hex Clock Pro для Windows Phone 7 или 8, это было бы намного дольше, поскольку Windows Phone 7 не содержит WinRT API и Windows Phone 8 содержит только небольшую часть API.</p><p>В Windows 10 мы увидим больше конвергенции, что означает один API-интерфейс WinRT API для нескольких платформ и высокую степень соответствия между элементами пользовательского интерфейса для каждой платформы, которая не исключает применение элементов, специфичных для отдельных платформ, чтобы представить самые лучшие возможности для каждого устройства. Не стесняйтесь и скачивайте исходные файлы учебника для использования в качестве примера. Hex Clock Pro также доступен на marketplace для <span>Windows Phone 8.1</span> и <span>Windows 8.1</span>.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825420-sozdayom-nashe-pervoe-universalnoe-prilozhenie-dlya-windows" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Windows" href="https://norma-studio.github.io/article5/220825420-sozdayom-nashe-pervoe-universalnoe-prilozhenie-dlya-windows" class="tm-article-body__tags-item-link">Windows</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
35636</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
402</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
