
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Автоматизация тестирования пользовательского интерфейса на Android... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Автоматизация тестирования пользовательского интерфейса на Android... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Автоматизация тестирования пользовательского интерфейса на Android... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Автоматизация тестирования пользовательского интерфейса на Android... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Библиотека поддержки тестирования Android включает в себя фреймворк UIAutomator, который может использоваться для автоматического тестирования черного ящика в приложениях для Android. Внедренный в API-уровне 18, фреймворк позволяет разработчикам моделировать действия пользователей над виджетами, составляющими пользовательский интерфейс приложения....">
<meta property="og:description" content="Библиотека поддержки тестирования Android включает в себя фреймворк UIAutomator, который может использоваться для автоматического тестирования черного ящика в приложениях для Android. Внедренный в API-уровне 18, фреймворк позволяет разработчикам моделировать действия пользователей над виджетами, составляющими пользовательский интерфейс приложения....">
<meta name="twitter:description" content="Библиотека поддержки тестирования Android включает в себя фреймворк UIAutomator, который может использоваться для автоматического тестирования черного ящика в приложениях для Android. Внедренный в API-уровне 18, фреймворк позволяет разработчикам моделировать действия пользователей над виджетами, составляющими пользовательский интерфейс приложения....">
<meta property="aiturec:description" content="Библиотека поддержки тестирования Android включает в себя фреймворк UIAutomator, который может использоваться для автоматического тестирования черного ящика в приложениях для Android. Внедренный в API-уровне 18, фреймворк позволяет разработчикам моделировать действия пользователей над виджетами, составляющими пользовательский интерфейс приложения....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/362/posts/23969/image/uia2.png">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/362/posts/23969/image/uia2.png">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/362/posts/23969/image/uia2.png">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/362/posts/23969/image/uia2.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/362/posts/23969/image/uia2.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825382-avtomatizatsiya-testirovaniya-polzovatelskogo-interfejsa-na-android.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825382-avtomatizatsiya-testirovaniya-polzovatelskogo-interfejsa-na-android.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825382-avtomatizatsiya-testirovaniya-polzovatelskogo-interfejsa-na-android.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825382-avtomatizatsiya-testirovaniya-polzovatelskogo-interfejsa-na-android.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825382-avtomatizatsiya-testirovaniya-polzovatelskogo-interfejsa-na-android.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825382-avtomatizatsiya-testirovaniya-polzovatelskogo-interfejsa-na-android.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825382-avtomatizatsiya-testirovaniya-polzovatelskogo-interfejsa-na-android.html" title="Автоматизация тестирования пользовательского интерфейса на Android... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Автоматизация тестирования пользовательского интерфейса на Android... | envatomarket.ru | norma-studio.github.io" title="Автоматизация тестирования пользовательского интерфейса на Android... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/636534636.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825382-avtomatizatsiya-testirovaniya-polzovatelskogo-interfejsa-na-android.html" class="tm-user-info__username" title="
С. Новичков" aria-label="
С. Новичков">
С. Новичков</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Автоматизация тестирования пользовательского интерфейса на Android...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825382-avtomatizatsiya-testirovaniya-polzovatelskogo-interfejsa-na-android" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Mobile Development" href="https://norma-studio.github.io/article5/220825382-avtomatizatsiya-testirovaniya-polzovatelskogo-interfejsa-na-android" class="tm-article-snippet__hubs-item-link"><span>Mobile Development</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825382-avtomatizatsiya-testirovaniya-polzovatelskogo-interfejsa-na-android.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/362/posts/23969/image/uia2.png">
    <meta itemprop="headline name" content="Автоматизация тестирования пользовательского интерфейса на Android... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Библиотека поддержки тестирования Android включает в себя фреймворк UIAutomator, который может использоваться для автоматического тестирования черного ящика в приложениях для Android. Внедренный в API-уровне 18, фреймворк позволяет разработчикам моделировать действия пользователей над виджетами, составляющими пользовательский интерфейс приложения....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Библиотека поддержки тестирования Android включает в себя фреймворк UIAutomator, который может использоваться для автоматического тестирования черного ящика в приложениях для Android. Внедренный в API-уровне 18, фреймворк позволяет разработчикам моделировать действия пользователей над виджетами, составляющими пользовательский интерфейс приложения....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<h2>Введение<br></h2><p>Библиотека поддержки тестирования Android включает в себя фреймворк <strong>UIAutomator</strong>, который может использоваться для автоматического тестирования черного ящика в приложениях для Android. Внедренный в API-уровне 18, фреймворк позволяет разработчикам моделировать действия пользователей над виджетами, составляющими пользовательский интерфейс приложения.<br></p><p>В этом уроке я расскажу вам, как использовать фреймворк для создания и запуска теста базового пользовательского интерфейса для приложения калькулятора.<br></p><h2>Предпосылки<br></h2><p>Чтобы следовать уроку, вам нужно:<br></p><ul><li>последняя версия <span>Android Studio</span><br></li> <li>устройство или эмулятор, работающий под управлением Android 4.3 или выше</li> <li>базовое понимание <span>JUnit</span><br></li> </ul><h2> <span class="sectionnum">1.</span> Установка зависимостей</h2><p>Чтобы использовать фреймворк UI Automator в вашем проекте, отредактируйте файл <strong>build.gradle</strong> в каталоге <strong>app</strong> вашего проекта, добавив следующие зависимости:</p><pre class="brush: groovy noskimlinks noskimwords">androidTestCompile "com.android.support.test:runner:0.2"androidTestCompile "com.android.support.test:rules:0.2"androidTestCompile "com.android.support.test.uiautomator:uiautomator-v18:2.1.0"</pre><p>Теперь кнопка <strong>Sync Now</strong> должна появиться на экране. Когда вы нажмете на нее, вы должны увидеть следующую ошибку:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/362/posts/23969/image/uia2.png" alt="Автоматизация тестирования пользовательского интерфейса на Android..." title="Автоматизация тестирования пользовательского интерфейса на Android..." width="50" height="50"></figure><p>Нажмите ссылку <strong>Установить репозиторий и синхронизировать проект</strong>, чтобы установить <strong>Android Support Repository</strong>.<br></p><p>Если вы используете библиотеку <strong>appcompat-v7</strong> версии <strong>22.1.1</strong>, вам нужно добавить следующую зависимость, чтобы убедиться, что приложение и его тесты используют одну и ту же версию <code class="inline">com.android.support:support-annotations</code>:<br></p><pre class="brush: groovy noskimlinks noskimwords">androidTestCompile "com.android.support:support-annotations:22.1.1"</pre><p>Далее, из-за <span>ошибки</span> в Android Studio, вам нужно исключить файл с именем <strong>LICENSE.txt</strong> с помощью <code class="inline">packagesOptions</code>. Если вы не сделаете этого, это приведет к следующей ошибке при попытке запустить тест:</p><pre class="brush: plain noskimlinks noskimwords">Execution failed for task ":app:packageDebugAndroidTest".Duplicate files copied in APK LICENSE.txtFile 1: ~/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-core/1.1/860340562250678d1a344907ac75754e259cdb14/hamcrest-core-1.1.jarFile 2: ~/.gradle/caches/modules-2/files-2.1/junit/junit-dep/4.10/64417b3bafdecd366afa514bd5beeae6c1f85ece/junit-dep-4.10.jar</pre><p>Добавьте следующий фрагмент внизу файла <strong>build.gradle</strong>:</p><pre class="brush: groovy noskimlinks noskimwords">android {    packagingOptions {        exclude "LICENSE.txt"    }}</pre><h2> <span class="sectionnum">2. </span>Создайте тестовый класс</h2><p>Создайте новый тестовый класс <code class="inline">CalculatorTester</code>, создав файл с именем <strong>CalculatorTester.java </strong>внутри каталога <strong>androidTest</strong>. Чтобы создать тест UI Automator, ваш класс должен наследоваться от <code class="inline">InstrumentationTestCase</code>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/362/posts/23969/image/uia5.png" alt="Автоматизация тестирования пользовательского интерфейса на Android..." title="Автоматизация тестирования пользовательского интерфейса на Android..." width="50" height="50"></figure><p>Нажмите <strong>Alt + Insert</strong>, а затем нажмите <strong>SetUp Method</strong>, чтобы переопределить метод <code class="inline">setUp</code>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/362/posts/23969/image/setUp.png" alt="Автоматизация тестирования пользовательского интерфейса на Android..." title="Автоматизация тестирования пользовательского интерфейса на Android..." width="50" height="50"></figure><p>Нажмите <strong>Alt + Insert</strong> еще раз и нажмите <strong>Test Method</strong>, чтобы создать новый тестовый метод. Назовите этот метод <code class="inline">testAdd</code>. Класс <code class="inline">CalculatorTester</code> теперь должен выглядеть следующим образом:</p><pre class="brush: java noskimlinks noskimwords">public class CalculatorTester extends InstrumentationTestCase{    @Override    public void setUp() throws Exception {    }    public void testAdd() throws Exception {    }}</pre><h2> <span class="sectionnum">3.</span> Расмотрим пользовательский интерфейс Launcher<br></h2><p>Подключите Android-устройство к компьютеру и нажмите кнопку «домой» на вашем устройстве, чтобы перейти на главный экран.<br></p><p>Вернитесь на свой компьютер и используйте свой проводник или терминал для поиска в каталоге, где установлен Android SDK. Затем перейдите в каталог <strong>tools</strong> внутри него и запустите <strong>uiautomatorviewer</strong>. Это запустит <strong>UI Automater Viewer</strong>. Вам должен быть представлен экран, который выглядит следующим образом:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/362/posts/23969/image/uiaB.png" alt="Автоматизация тестирования пользовательского интерфейса на Android..." title="Автоматизация тестирования пользовательского интерфейса на Android..." width="50" height="50"></figure><p>Нажмите кнопку, похожую на телефон, чтобы сделать снимок экрана вашего устройства Android. Обратите внимание, что снятый снимок экрана является интерактивным. Нажмите значок «Приложения» внизу. В разделе <strong>Детали узла</strong> справа вы можете увидеть различные детали вашего выбора, как показано ниже.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/362/posts/23969/image/uia6.jpg" alt="Автоматизация тестирования пользовательского интерфейса на Android..." title="Автоматизация тестирования пользовательского интерфейса на Android..." width="50" height="50"></figure><p>Чтобы взаимодействовать с элементами на экране, фреймворк тестирования UI Automator должен иметь возможность однозначно идентифицировать их. В этом учебнике вы будете использовать либо <code class="inline">text</code>, и <code class="inline">content-desc</code>, либо <code class="inline">class</code> элемента, чтобы однозначно идентифицировать его.</p><p>Как вы можете видеть, значок Приложения не имеет <code class="inline">text</code>, но у него есть <code class="inline">content-desc</code>. Запишите его значение, потому что вы будете использовать его на следующем шаге.<br></p><p>Выберите Android-устройство и нажмите значок «Приложения», чтобы перейти к экрану, на котором отображаются приложения, установленные на устройстве. Вернитесь в <strong>UI Automator Viewer</strong> и сделайте еще один снимок экрана. Поскольку вы будете писать тест для приложения Calculator, щелкните его значок, чтобы просмотреть его детали.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/362/posts/23969/image/uia7.jpg" alt="Автоматизация тестирования пользовательского интерфейса на Android..." title="Автоматизация тестирования пользовательского интерфейса на Android..." width="50" height="50"></figure><p>На этот раз <code class="inline">content-desc</code> пустой, но <code class="inline">text</code> содержит значение <strong>Calculator</strong>. Запомните это.<br></p><p>Если на вашем Android-устройстве запущен другой ланчер или другая версия Android, экраны и детали узла будут разными. Это также означает, что вам придется внести некоторые изменения в свой код в соответствии с операционной системой.</p><h2> <span class="sectionnum">4. </span>Подготовка тестовой среды</h2><p>Вернитесь в Android Studio, чтобы добавить код в метод <code class="inline">setUp</code>. Как следует из его названия, метод <code class="inline">setUp</code> должен использоваться для подготовки тестовой среды. Другими словами, здесь вы указываете, что нужно сделать, прежде чем запускать фактический тест.<br></p><p>Теперь вы будете писать код, чтобы имитировать то, что вы сделали на своем устройстве Android на предыдущем шаге:<br></p><ol><li>Нажмите кнопку home, чтобы перейти на главный экран.</li> <li>Нажмите значок «Приложения», чтобы просмотреть все приложения.</li> <li>Запустите приложение «Калькулятор», нажав на его значок.<br></li> </ol><p>В своем классе объявите поле типа <code class="inline">UiDevice</code> и назовите его <code class="inline">device</code>. Это поле представляет собой Android-устройство, и вы будете использовать его для имитации взаимодействия с пользователем.</p><pre class="brush: java noskimlinks noskimwords">private UiDevice device;</pre><p>В методе <code class="inline">setUp</code> инициализируйте <code class="inline">device</code>, вызвав метод <code class="inline">UiDevice.getInstance</code>, передав экземпляр <code class="inline">Instrumentation</code>, как показано ниже.</p><pre class="brush: java noskimlinks noskimwords">device = UiDevice.getInstance(getInstrumentation());</pre><p>Чтобы имитировать нажатие кнопки home на устройстве, вызовите метод <code class="inline">pressHome</code>.</p><pre class="brush: java noskimlinks noskimwords">device.pressHome();</pre><p>Затем вам нужно смоделировать событие click на значке Apps. Вы не можете сделать это немедленно, потому что Android-устройству потребуется время, чтобы перейти на главный экран. Попытка щелкнуть значок «Приложения» до того, как он будет виден на экране, вызовет исключение во время выполнения.<br></p><p>Чтобы подождать, чтобы что-то произошло, вам нужно вызвать метод <code class="inline">wait</code> у экземпляра <code class="inline">UiDevice</code>. Чтобы дождаться появления значка Apps на экране, используйте метод <code class="inline">Until.hasObject</code>.<br></p><p>Чтобы определить значок приложения, используйте метод <code class="inline">By.desc</code> и передайте ему значение <strong>Apps</strong>. Вам также необходимо указать максимальную продолжительность ожидания в миллисекундах. Установите его на <strong>3000</strong>. Это приводит к следующему коду:</p><pre class="brush: java noskimlinks noskimwords">// Wait for the Apps icon to show up on the screendevice.wait(Until.hasObject(By.desc("Apps")), 3000);</pre><p>Чтобы получить ссылку на значок «Приложения», используйте метод <code class="inline">findObject</code>. После того, как у вас есть ссылка на значок Приложения, вызовите метод <code class="inline">click</code> для имитации щелчка.</p><pre class="brush: java noskimlinks noskimwords">UiObject2 appsButton = device.findObject(By.desc("Apps"));appsButton.click();</pre><p>Как и раньше, нам нужно подождать, пока значок Калькулятора появится на экране. На предыдущем шаге вы видели, что значок калькулятора можно однозначно идентифицировать по его полю <code class="inline">text</code>. Мы вызываем метод <code class="inline">By.text</code>, чтобы найти значок, передавая <code class="inline">Calculator</code>.</p><pre class="brush: java noskimlinks noskimwords">// Wait for the Calculator icon to show up on the screendevice.wait(Until.hasObject(By.text("Calculator")), 3000);</pre><p>Используйте методы <code class="inline">findObject</code> и <code class="inline">click</code>, чтобы получить ссылку на значок калькулятора и эмулировать клик.</p><pre class="brush: java noskimlinks noskimwords">UiObject2 calculatorApp = device.findObject(By.text("Calculator"));calculatorApp.click();</pre><h2> <span class="sectionnum">5.</span> Инспектируем пользовательский интерфейс калькулятора</h2><p>Запустите приложение «Калькулятор» на своем устройстве Android и используйте <strong>UI Automater Viewer</strong>, чтобы инспектировать его. После захвата снимка экрана щелкните кнопки, чтобы увидеть, как вы можете однозначно идентифицировать их.<br></p><p>Для этого тестового примера вы заставим калькулятор вычислить значение <strong>9 + 9 =</strong> и проверим, показывает ли он <strong>18</strong> в качестве результата. Это означает, что вам нужно знать, как идентифицировать кнопки с метками <strong>9</strong>, <strong>+</strong> и <strong>=</strong>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/362/posts/23969/image/uia9.jpg" alt="Автоматизация тестирования пользовательского интерфейса на Android..." title="Автоматизация тестирования пользовательского интерфейса на Android..." width="50" height="50"></figure><p>На моем устройстве я собрал следующее из инспекции:</p><ul><li>Кнопки, содержащие цифры, имеют соответствующие значения <code class="inline">text</code>.</li> <li>Кнопки, содержащие символы <strong>+</strong> и <strong>=</strong>, имеют значения <code class="inline">content-desc</code>, установленные как <strong>plus</strong> и <strong>equals</strong> соответственно.</li> <li>Результат показан в виджетах <code class="inline">EditText</code>.</li> </ul><p>Обратите внимание, что эти значения могут отличаться на вашем устройстве, если вы используете другую версию приложения Calculator.<br></p><h2> <span class="sectionnum">6. </span>Создаем тест</h2><p>На предыдущих шагах вы уже узнали, что вы можете использовать метод <code class="inline">findObject</code> вместе с <code class="inline">By.text</code> или <code class="inline">By.desc</code>, чтобы получить ссылку на любой объект на экране. Вы также знаете, что вам нужно использовать метод <code class="inline">click</code> для имитации клика на объекте. Следующий код использует эти методы для выполнения вычисления <strong>9 + 9 =</strong>. Добавьте его в метод <code class="inline">testAdd</code> класса <code class="inline">CalculatorTester</code>.<br></p><pre class="brush: java noskimlinks noskimwords">// Wait till the Calculator"s buttons are on the screendevice.wait(Until.hasObject(By.text("9")), 3000);// Select the button for 9UiObject2 buttonNine = device.findObject(By.text("9"));buttonNine.click();// Select the button for +UiObject2 buttonPlus = device.findObject(By.desc("plus"));buttonPlus.click();// Press 9 again as we are calculating 9+9buttonNine.click();// Select the button for =UiObject2 buttonEquals = device.findObject(By.desc("equals"));buttonEquals.click();</pre><p>На этом этапе вам нужно подождать результата. Однако вы не можете здесь использовать <code class="inline">Until.hasObject</code>, потому что <code class="inline">EditText</code>, содержащий результат, уже находится на экране. Вместо этого вы должны использовать метод <code class="inline">waitForIdle</code>, чтобы дождаться завершения вычисления. Опять же, максимальная продолжительность ожидания может составлять 3000 мс.</p><pre class="brush: java noskimlinks noskimwords">device.waitForIdle(3000);</pre><p>Получите ссылку на объект <code class="inline">EditText</code> с помощью методов <code class="inline">findObject</code> и <code class="inline">By.clazz</code>. Когда у вас есть ссылка, вызовите метод <code class="inline">getText</code>, чтобы определить результат вычисления.</p><pre class="brush: java noskimlinks noskimwords">UiObject2 resultText = device.findObject(By.clazz("android.widget.EditText"));String result = resultText.getText();</pre><p>Наконец, используйте <code class="inline">assertTrue</code>, чтобы проверить, что результат равен <strong>18</strong>.</p><pre class="brush: java noskimlinks noskimwords">assertTrue(result.equals("18"));</pre><p>Теперь ваш тест завершен.<br></p><h2> <span class="sectionnum">6.</span> Запуск теста</h2><p>Чтобы запустить тест, на панели инструментов Android Studio выберите класс <code class="inline">CalculatorTester</code> из раскрывающегося списка и нажмите кнопку play справа.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/362/posts/23969/image/uiaC.png" alt="Автоматизация тестирования пользовательского интерфейса на Android..." title="Автоматизация тестирования пользовательского интерфейса на Android..." width="50" height="50"></figure><p>После завершения сборки тест должен быть выполнено и успешно завершен. Во время теста вы сможете увидеть автоматизацию пользовательского интерфейса на вашем устройстве Android.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/362/posts/23969/image/testPass.png" alt="Автоматизация тестирования пользовательского интерфейса на Android..." title="Автоматизация тестирования пользовательского интерфейса на Android..." width="50" height="50"></figure><h2>Заключение<br></h2><p>В этом уроке вы узнали, как использовать фреймворк тестирования Automator UI и UI Automater Viewer для создания тестов пользовательского интерфейса. Вы также видели, как легко запускать тесты с помощью Android Studio. Несмотря на то, что мы протестировали довольно простое приложение, вы можете применить концепции, которые вы здесь изучили, для тестирования практически любого приложения для Android.<br></p><p>Вы можете узнать больше об библиотеке поддержки тестирования на<span> веб-сайте разработчиков Android</span>.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825382-avtomatizatsiya-testirovaniya-polzovatelskogo-interfejsa-na-android" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Mobile Development" href="https://norma-studio.github.io/article5/220825382-avtomatizatsiya-testirovaniya-polzovatelskogo-interfejsa-na-android" class="tm-article-body__tags-item-link">Mobile Development</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
31404</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
435</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
