
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Пишем свой стартап: основы безопасности... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Пишем свой стартап: основы безопасности... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Пишем свой стартап: основы безопасности... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Пишем свой стартап: основы безопасности... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Этот учебник является частью серии Пишем свой стартап на PHP на Envato Tuts +. В этой серии я показываю вам запуск приложения от самой концепции до реального приложения, используя приложение «Планировщик встреч» в качестве примера. На каждом шаге я буду выкладывать код планировщика собраний в качестве примеров с открытым исходным кодом. Я также рас...">
<meta property="og:description" content="Этот учебник является частью серии Пишем свой стартап на PHP на Envato Tuts +. В этой серии я показываю вам запуск приложения от самой концепции до реального приложения, используя приложение «Планировщик встреч» в качестве примера. На каждом шаге я буду выкладывать код планировщика собраний в качестве примеров с открытым исходным кодом. Я также рас...">
<meta name="twitter:description" content="Этот учебник является частью серии Пишем свой стартап на PHP на Envato Tuts +. В этой серии я показываю вам запуск приложения от самой концепции до реального приложения, используя приложение «Планировщик встреч» в качестве примера. На каждом шаге я буду выкладывать код планировщика собраний в качестве примеров с открытым исходным кодом. Я также рас...">
<meta property="aiturec:description" content="Этот учебник является частью серии Пишем свой стартап на PHP на Envato Tuts +. В этой серии я показываю вам запуск приложения от самой концепции до реального приложения, используя приложение «Планировщик встреч» в качестве примера. На каждом шаге я буду выкладывать код планировщика собраний в качестве примеров с открытым исходным кодом. Я также рас...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26702/final_image/featured.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26702/final_image/featured.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26702/final_image/featured.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26702/final_image/featured.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26702/final_image/featured.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825080-pishem-svoj-startap-osnovy-bezopasnosti.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825080-pishem-svoj-startap-osnovy-bezopasnosti.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825080-pishem-svoj-startap-osnovy-bezopasnosti.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825080-pishem-svoj-startap-osnovy-bezopasnosti.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825080-pishem-svoj-startap-osnovy-bezopasnosti.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825080-pishem-svoj-startap-osnovy-bezopasnosti.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825080-pishem-svoj-startap-osnovy-bezopasnosti.html" title="Пишем свой стартап: основы безопасности... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Пишем свой стартап: основы безопасности... | envatomarket.ru | norma-studio.github.io" title="Пишем свой стартап: основы безопасности... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/636534636.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825080-pishem-svoj-startap-osnovy-bezopasnosti.html" class="tm-user-info__username" title="
С. Новичков" aria-label="
С. Новичков">
С. Новичков</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Пишем свой стартап: основы безопасности...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825080-pishem-svoj-startap-osnovy-bezopasnosti" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Yii" href="https://norma-studio.github.io/article5/220825080-pishem-svoj-startap-osnovy-bezopasnosti" class="tm-article-snippet__hubs-item-link"><span>Yii</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825080-pishem-svoj-startap-osnovy-bezopasnosti.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26702/final_image/featured.jpg">
    <meta itemprop="headline name" content="Пишем свой стартап: основы безопасности... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Этот учебник является частью серии Пишем свой стартап на PHP на Envato Tuts +. В этой серии я показываю вам запуск приложения от самой концепции до реального приложения, используя приложение «Планировщик встреч» в качестве примера. На каждом шаге я буду выкладывать код планировщика собраний в качестве примеров с открытым исходным кодом. Я также рас...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Этот учебник является частью серии Пишем свой стартап на PHP на Envato Tuts +. В этой серии я показываю вам запуск приложения от самой концепции до реального приложения, используя приложение «Планировщик встреч» в качестве примера. На каждом шаге я буду выкладывать код планировщика собраний в качестве примеров с открытым исходным кодом. Я также рас...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p><em>Этот учебник является частью серии</em> <span><em>Пишем свой стартап на PHP</em></span> <em>на Envato Tuts +. В этой серии я показываю вам запуск приложения от самой концепции до реального приложения, используя приложение</em> <span><em>«Планировщик встреч»</em></span> <em>в качестве примера.</em> На каждом шаге я буду выкладывать код планировщика собраний в качестве примеров с открытым исходным кодом. Я также рассмотрю связанные с запуском бизнес-вопросы по мере их возникновения.</p><p>Рабочий сервер для Планировщика собраний в настоящее время работает в <span>Digital Ocean</span> (см. <span>другие уроки о нем</span> в Envato Tuts +.) В сегодняшнем эпизоде мы погрузимся в основы безопасности веб-сервера. Я расскажу о том, как обеспечить поддержку Linux VPS Meeting Planner и о некоторой базовой безопасности Yii. В следующем эпизоде я буду больше погружаться в программную защиту приложений Yii.</p><p>Я участвую в комментариях ниже, поэтому, пожалуйста, поделитесь своими отзывами. Пожалуйста, дайте мне знать, если остались темы безопасности, которые я пропустил. Я также открыт для новых идей и предложений для будущих учебников.</p><p>Напомним, что весь код Планировщика собраний написан на Yii2 Framework для PHP. Если вы хотите узнать больше о Yii2, ознакомьтесь с нашей параллельной серией Программирование с Yii2.</p><p>Если вы еще этого не сделали, попробуйте планировщик собраний прямо сейчас, <span>запланировав свою первую встречу</span>. Не стесняйтесь публиковать отзывы о своем опыте в комментариях ниже. </p><h2>Хостинг и безопасность VPS</h2><h3>Общие ресурсы</h3><p>Если вы используете общий Linux VPS, вы можете просмотреть мой предыдущий учебник Envato Tuts + <span>«Защита вашего входа на сервер»</span>. Он охватывает ряд шагов, которые мы рассмотрим сегодня, включая безопасность SSH и брандмауэры.</p><p>Digital Ocean также является отличным ресурсом для практики безопасности. <span>Введение в обеспечение безопасности вашего Linux VPS</span> - один из лучших обзоров, которые они предлагают. Кроме того, у них отличная графика.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26702/image/do-security.jpg" alt="Пишем свой стартап: основы безопасности..." title="Пишем свой стартап: основы безопасности..." width="50" height="50"><figcaption>7 мер безопасности <span>Digital Ocean для защиты ваших серверов</span></figcaption></figure><p>Вот три других статьи, которые они предлагают и которые я использовал в этом уроке:</p><ul><li><span>7 мер безопасности для защиты ваших серверов</span></li> <li><span>Основы UFW: общие правила и команды брандмауэра</span></li> <li> <span>Как защитить сервер Apache с помощью Fail2Ban на Ubuntu 14.04</span><br></li> </ul><h3>Обновление сервера</h3><p>Во-первых, очень важно, чтобы ваш сервер обновлялся с регулярными обновлениями. Это интегрирует исправления безопасности от поставщиков программного обеспечения (и с открытым исходным кодом), которые вы используете.</p><p>Вот основные шаги - вы, вероятно, будете с ними знакомы:</p><pre class="brush: bash noskimlinks noskimwords">$ sudo apt-get updateGet:1 http://security.ubuntu.com trusty-security InRelease [65.9 kB]Get:2 http://security.ubuntu.com trusty-security/main Sources [118 kB]        Get:3 http://security.ubuntu.com trusty-security/universe Sources [38.0 kB]    ...Ign http://mirrors.digitalocean.com trusty/universe Translation-en_US          Fetched 5,298 kB in 10s (526 kB/s)                                             Reading package lists... Done</pre><p>Функция dist-upgrade использует некоторые сведения для управления взаимозависимостями обновленных пакетов:</p><pre class="brush: bash noskimlinks noskimwords">$ sudo apt-get dist-upgradeReading package lists... DoneBuilding dependency tree       Reading state information... DoneCalculating upgrade... DoneThe following packages were automatically installed and are no longer required:  linux-headers-3.13.0-85 linux-headers-3.13.0-85-generic  linux-headers-3.13.0-86 linux-headers-3.13.0-86-generic ...Setting up cloud-init (0.7.5-0ubuntu1.19) ...Leaving "diversion of /etc/init/ureadahead.conf to /etc/init/ureadahead.conf.disabled by cloud-init"Processing triggers for libc-bin (2.19-0ubuntu6.9) ...</pre><p>Чтобы убедиться, что изменения вступает в полную силу, вам может потребоваться перезагрузка. Я всегда останавливаю свою базу данных, а затем перезапускаю:</p><pre class="brush: bash noskimlinks noskimwords">$ sudo service mysql stopmysql stop/waiting$ sudo reboot$Broadcast message from meetingplanner.io    (/dev/pts/0) at 13:51 ...The system is going down for reboot NOW!Connection to meetingplanner.io closed by remote host.Connection to meetingplanner.io closed.</pre><p>Когда у Планировщика собраний больше пользователей, могут потребоваться более сложные механизмы перезапуска.</p><h3>Настройка входа в SSH</h3><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26702/image/ssh-key-auth.jpg" alt="Пишем свой стартап: основы безопасности..." title="Пишем свой стартап: основы безопасности..." width="50" height="50"><figcaption><span>Система безопасности Digital Ocean"s 7 для защиты ваших серверов</span></figcaption></figure><p>У вас есть возможность использовать свой секретный ключ при создании дроплета Digital Ocean. Когда я настраивал Планировщик собраний, я повторил шаги, которые я изложил здесь: <span>Защита входа на сервер</span>.<br></p><p>Я также перевел SSH-логин на пользовательский порт, вместо обычного порта 22.</p><h3>Настройка брандмауэра</h3><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26702/image/firewall.jpg" alt="Пишем свой стартап: основы безопасности..." title="Пишем свой стартап: основы безопасности..." width="50" height="50"><figcaption><span>Система безопасности Digital Ocean"s 7 для защиты ваших серверов</span></figcaption></figure><p>Затем я установил UFW, несложный брандмауэр:</p><pre class="brush: bash noskimlinks noskimwords">$ sudo ufw enableCommand may disrupt existing ssh connections. Proceed with operation (y|n)?</pre><p>Однако я не ответил «да» на эту просьбу. Предупреждение напомнило мне дважды проверить все мои требования SSH.</p><p>Например, я отключил порт SSH по умолчанию и включил тот, который я использую:</p><pre class="brush: bash noskimlinks noskimwords">$sudo ufw allow 31345$sudo ufw deny 22</pre><p>Затем я установил sudo-запрос на будущее, чтобы отключить UFW, если мои настройки были неправильными:</p><pre class="brush: bash noskimlinks noskimwords">$sudo at now +5 minuteswarning: commands will be executed using /bin/shat&gt; sudo ufw disableat&gt; &lt;EOT&gt;job 9 at Mon Jul 18 16:14:00 2016</pre><p>Затем я включил UFW и выполнил оставшиеся настройки:</p><pre class="brush: bash noskimlinks noskimwords">$sudo ufw default deny incoming$sudo ufw default allow outgoing$sudo ufw allow http$sudo ufw allow https$sudo ufw deny mysql$sudo ufw enableCommand may disrupt existing ssh connections. Proceed with operation (y|n)? yFirewall is active and enabled on system startup</pre><p>Вот результаты:</p><pre class="brush: bash noskimlinks noskimwords">$ sudo ufw statusStatus: activeTo                         Action      From--                         ------      ----31345                      ALLOW       Anywhere80                         ALLOW       Anywhere443                        ALLOW       Anywhere22                         DENY        Anywhere3306                       DENY        Anywhere31345 (v6)                 ALLOW       Anywhere (v6)80 (v6)                    ALLOW       Anywhere (v6)443 (v6)                   ALLOW       Anywhere (v6)22 (v6)                    DENY        Anywhere (v6)3306 (v6)                  DENY        Anywhere (v6)</pre><p><em><strong>Примечание</strong></em>. <em>Поскольку моя база данных в настоящее время работает на том же сервере, что и веб-службы Планировщика собраний, я могу заблокировать порт 3306.</em> Однако, поскольку использование для сайта масштабируется до нескольких серверов, потребуются изменения.</p><p>Я также отредактировал конфигурацию UFW, чтобы включить брандмауэр при перезапуске сервера:</p><pre class="brush: bash noskimlinks noskimwords">$sudo nano  /etc/ufw/ufw.confenabled = on</pre><p>Из-за команды delayed disable  через пять минут мне пришлось снова включить UFW.</p><p>В дополнение к моей статье о <span>защите вашего входа на сервер</span>, руководство Digital Ocean<span> UFW Essentials: общие правила и команды брандмауэра</span> и <span>настройка брандмауэра с помощью UFW на облачном сервере Ubuntu и Debian</span> полезны при настройке UFW.</p><h3>Настройка SSL</h3><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/26702/image/letsencrypt%20-%20ssl.jpg" alt="Пишем свой стартап: основы безопасности..." title="Пишем свой стартап: основы безопасности..." width="50" height="50"></figure><p>Для безопасности людей, использующих Планировщик встреч, я также настроил SSL, как описано в «<span>Использование шифрования SSL с вашим проектом WordPress</span>».</p><p>И, вы можете заметить, я разрешил доступ https на порт 443 при настройке брандмауэра выше. Запросы на <span>http://meetingplanner.io</span> автоматически перенаправляются на <span>https://meetingplanner.io</span>.</p><h2>Начало работы с безопасностью приложений Yii2</h2><p>Помимо основы безопасности Linux, нам также необходимо задуматься о защите Yii Framework поверх PHP. Вы можете прочитать <span>Программирование с Yii2: Безопасность</span>, большинство из этого мы рассмотрим в следующем эпизоде.</p><p><strong></strong>Однако сегодня мы реализуем некоторые основные функции контроля доступа для Планировщика собраний.<br></p><h3><b>Контроль доступа</b></h3><p><strong></strong>Одним из первых преимуществ использования фреймворка PHP MVC является то, что все запросы на страницы маршрутизируются через один файл index.php. Как я описал в <span>Программирование с Yii2: Маршрутизация и создание URL</span>, Yii тщательно управляет входящими запросами на страницы и направляет их к соответствующим контроллерам и методам действий.</p><p>Кроме того, наша задача - защищать запросы контроллера, когда они входят в приложение. В первую очередь, кто этот человек и имеет ли он право доступа к этой странице?</p><p>Как описано в <span>учебнике по безопасности Yii2</span>, Yii имеет множество вариантов управления доступом. Планировщик встреч в основном использует возможности контроля доступа.</p><h4>Обеспечение запросов на внешнюю заявку</h4><p>Вот пример трафика, поступающего в контроллер собрания, к которому пользователи обычно обращаются:</p><pre class="brush: php noskimlinks noskimwords">class MeetingController extends Controller{  public function behaviors()  {    return [    ...    "access" =&gt; [        "class" =&gt; \common\filters\MeetingControl::className(), // \yii\filters\AccessControl::className(),        "only" =&gt; ["index","view","create","update","delete", "decline","cancel","command","download","wizard","trash","late"],        "rules" =&gt; [          // allow authenticated users           [               "allow" =&gt; true,               "actions"=&gt;["create","index","view","update","delete", "decline","cancel","command","download","wizard","trash","late"],               "roles" =&gt; ["@"],           ],          [              "allow" =&gt; true,              "actions"=&gt;["command"],              "roles" =&gt; ["?"],          ],          // everything else is denied        ],    ],  ];  }</pre><p>Поведение доступа защищает все методы, указанные в <code class="inline">"only"</code>. <code class="inline">actions</code>, перечисленные в <code class="inline">roles</code> <code class="inline">"@"</code>, требуют аутентифицированных пользователей, другими словами, только те пользователи, которые вошли в систему, могут видеть эти страницы. Пользователи, которые не вошли в систему, по умолчанию перенаправляются на главную страницу. Однако страницы с <code class="inline">roles</code> <code class="inline">"?"</code> полностью открыты.</p><p>Так, например, только аутентифицированный пользователь может <code class="inline">create</code> собрание, но каждый может войти в приложение через URL meeting/command. Это потому, что мы широко используем URL-адрес команды в электронных письмах, и у него есть еще один уровень аутентификации, описанный в учебнике <span>«Доставка приглашений»</span>. </p><p>URL-адрес команды позволяет пользователям, которые не вошли в систему (и даже встречаются с участниками, которые никогда не были на сайте раньше), безопасно обращаться к определенным страницам.</p><h4>Защита запросов Back-End</h4><p>Для внутренней системы Планировщика собраний доступ к этим страницам могут получить только администраторы. Поскольку администраторы обозначены в нашей таблице пользователей специальным, специфичным для приложения способом, мне пришлось создать настраиваемое правило доступа для их проверки. Основные роли Yii поддерживают только аутентифицированные <code class="inline">@</code> и неаутентифицированные<code class="inline">?</code>.</p><p>Давайте посмотрим на встроенный MessageController для отправки обновлений по всему сайту нашим пользователям:</p><pre class="brush: php noskimlinks noskimwords">class MessageController extends Controller{    /**     * @inheritdoc     */    public function behaviors()    {      return [        "access" =&gt; [          "class" =&gt; AccessControl::className(),                   "rules" =&gt; [            [              "allow" =&gt; true,              "matchCallback" =&gt; function ($rule, $action) {                  return (!\Yii::$app-&gt;user-&gt;isGuest                    &amp;&amp; \common\models\User::findOne(Yii::$app-&gt;user-&gt;getId())-&gt;isAdmin());                }            ],          ],        ],</pre><p>Пользовательское правило гарантирует, что пользователь не является гостем и передает <code class="inline">isAdmin()</code>, прежде чем перенаправлять их на правильное действие. Другие пользователи перенаправляются на главную страницу входа в систему.</p><p>Сегодня мы многого достигли, но многое еще предстоит сделать.</p><h2>Заглядывая вперед</h2><p>Если вы запустите сервер, вы, вероятно, оценили сегодняшний обзор базовой безопасности Linux и хостинга. В следующем эпизоде мы рассмотрим шаги, связанные с безопасностью, более тесно связанные с Yii Framework и приложением Planner Meeting.</p><p>Следите за предстоящими учебными пособиями в разделе «<span>Пишем свой стартап на PHP</span>». Есть еще несколько больших функций.<br></p><h2>Ссылки по теме</h2><ul><li><span>Планировщик встреч</span></li> <li><span>Подпишитесь на профиль финансирования планировщика собраний</span></li> <li> <span>Защита входа на сервер</span><br></li> <li> <span>Серия Программирование с помощью Yii2 (Envato Tuts +)</span> </li> <li><span>Yii2 Developer Exchange</span></li> </ul>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825080-pishem-svoj-startap-osnovy-bezopasnosti" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Yii" href="https://norma-studio.github.io/article5/220825080-pishem-svoj-startap-osnovy-bezopasnosti" class="tm-article-body__tags-item-link">Yii</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
36787</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
651</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
