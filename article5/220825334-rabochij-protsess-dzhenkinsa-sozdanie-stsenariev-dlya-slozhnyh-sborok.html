
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Рабочий процесс Дженкинса: создание сценариев для сложных сборок... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Рабочий процесс Дженкинса: создание сценариев для сложных сборок... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Рабочий процесс Дженкинса: создание сценариев для сложных сборок... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Рабочий процесс Дженкинса: создание сценариев для сложных сборок... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="В этой второй и заключительной части этой серии мы рассмотрим плагин Jenkins Workflow в качестве решения для создания более сложных конвейеров Jenkins....">
<meta property="og:description" content="В этой второй и заключительной части этой серии мы рассмотрим плагин Jenkins Workflow в качестве решения для создания более сложных конвейеров Jenkins....">
<meta name="twitter:description" content="В этой второй и заключительной части этой серии мы рассмотрим плагин Jenkins Workflow в качестве решения для создания более сложных конвейеров Jenkins....">
<meta property="aiturec:description" content="В этой второй и заключительной части этой серии мы рассмотрим плагин Jenkins Workflow в качестве решения для создания более сложных конвейеров Jenkins....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads%2Fusers%2F383%2Fposts%2F24207%2Fimage-1434332927295.png">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads%2Fusers%2F383%2Fposts%2F24207%2Fimage-1434332927295.png">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads%2Fusers%2F383%2Fposts%2F24207%2Fimage-1434332927295.png">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads%2Fusers%2F383%2Fposts%2F24207%2Fimage-1434332927295.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads%2Fusers%2F383%2Fposts%2F24207%2Fimage-1434332927295.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825334-rabochij-protsess-dzhenkinsa-sozdanie-stsenariev-dlya-slozhnyh-sborok.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825334-rabochij-protsess-dzhenkinsa-sozdanie-stsenariev-dlya-slozhnyh-sborok.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825334-rabochij-protsess-dzhenkinsa-sozdanie-stsenariev-dlya-slozhnyh-sborok.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825334-rabochij-protsess-dzhenkinsa-sozdanie-stsenariev-dlya-slozhnyh-sborok.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825334-rabochij-protsess-dzhenkinsa-sozdanie-stsenariev-dlya-slozhnyh-sborok.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825334-rabochij-protsess-dzhenkinsa-sozdanie-stsenariev-dlya-slozhnyh-sborok.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825334-rabochij-protsess-dzhenkinsa-sozdanie-stsenariev-dlya-slozhnyh-sborok.html" title="Рабочий процесс Дженкинса: создание сценариев для сложных сборок... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Рабочий процесс Дженкинса: создание сценариев для сложных сборок... | envatomarket.ru | norma-studio.github.io" title="Рабочий процесс Дженкинса: создание сценариев для сложных сборок... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/31231313312.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825334-rabochij-protsess-dzhenkinsa-sozdanie-stsenariev-dlya-slozhnyh-sborok.html" class="tm-user-info__username" title="
Д. Грунин" aria-label="
Д. Грунин">
Д. Грунин</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Рабочий процесс Дженкинса: создание сценариев для сложных сборок...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825334-rabochij-protsess-dzhenkinsa-sozdanie-stsenariev-dlya-slozhnyh-sborok" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Testing" href="https://norma-studio.github.io/article5/220825334-rabochij-protsess-dzhenkinsa-sozdanie-stsenariev-dlya-slozhnyh-sborok" class="tm-article-snippet__hubs-item-link"><span>Testing</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825334-rabochij-protsess-dzhenkinsa-sozdanie-stsenariev-dlya-slozhnyh-sborok.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads%2Fusers%2F383%2Fposts%2F24207%2Fimage-1434332927295.png">
    <meta itemprop="headline name" content="Рабочий процесс Дженкинса: создание сценариев для сложных сборок... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="В этой второй и заключительной части этой серии мы рассмотрим плагин Jenkins Workflow в качестве решения для создания более сложных конвейеров Jenkins....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">В этой второй и заключительной части этой серии мы рассмотрим плагин Jenkins Workflow в качестве решения для создания более сложных конвейеров Jenkins....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>В этой второй и заключительной части этой серии мы рассмотрим плагин <span>Jenkins Workflow</span> в качестве решения для создания более сложных конвейеров Jenkins.</p><p>Мы продолжим там, где <span>часть первой из серии</span> прекратилась. В первой части <span>Джефф Рейфман</span> провел вас через создание экземпляра Jenkins в Digital Ocean и создание вашей первой сборки Jenkins. Если вы еще этого не читали, я предлагаю сделать это, прежде чем продолжить. Все в порядке - я буду ждать. Я могу быть очень терпеливым ...</p> <p>... Все догнали? Отличное! Давайте сделаем это.</p> <h2>Что такое рабочий процесс Дженкинса?</h2> <p><span>Jenkins Workflow</span> - это плагин для <span>Jenkins</span>. После установки появляется новый тип элемента: «Workflow». Проекты Workflow могут использоваться для тех же целей, что и обычные проекты «Freestyle» Jenkins, но они также могут организовать гораздо более крупные задачи, которые могут охватывать несколько проектов, и даже создавать и управлять несколькими рабочими пространствами <span>в одном рабочем процессе</span>. Более того, все это управление может быть организовано в один скрипт, а не распространено через коллекцию конфигураций, проектов и шагов.</p> <h2>Предварительный процесс</h2> <p>Прежде чем мы начнем создавать Workflow, нам нужно установить плагин Jenkins Workflow. На панели инструментов Jenkins выберите «<strong>Управление Jenkins</strong>», затем «<strong>Управление плагинами</strong>». Перейдите на вкладку «<strong>Доступные</strong>» и найдите «Рабочий процесс».</p> <p>Установите флажок для <strong>плагина Workflow</strong>, затем <strong>Установить без перезагрузки</strong>.</p> <p>Теперь, готово. Существует несколько плагинов с именем «Workflow Plugin», поэтому вам нужно будет повторить вышеуказанные шаги несколько раз. Кроме того, вы также можете щелкнуть несколько флажков или установить плагин агрегатора рабочего процесса.</p> <p>После того, как в списке доступных плагинов больше не отображается «Workflow Plugin»,  запустите Jenkins, перейдя в <code class="inline">/restart</code> и нажав «<strong>Да</strong>».</p> <h2>Простой поток</h2> <p>Давайте сделаем наш Workflow. Мы возьмем проект Jeff, созданный в первой части, и построим его как Workflow.</p> <p>Для начала зайдите в панель инструментов Jenkins и нажмите «<strong>Новый элемент</strong>». Назовите новый элемент «Shell Test (Workflow)» и выберите тип <strong>Workflow</strong>.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads%2Fusers%2F383%2Fposts%2F24207%2Fimage-1434332927295.png" alt="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." title="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." width="50" height="50"></figure><p>Нажмите «<strong>ОК</strong>», чтобы создать новый проект. Вы попадете на страницу конфигурации проекта.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads%2Fusers%2F383%2Fposts%2F24207%2Fimage-1442134739243.png" alt="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." title="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." width="50" height="50"></figure><p>Вы заметите, что параметры конфигурации отличаются от стандартных проектов Jenkins. Больше не существует вариантов добавления репозитория GitHub, создания шагов или действий после сборки. Вместо этого есть новый раздел <strong>Workflow</strong>.</p> <p>В разделе «Рабочий поток» находится текстовое поле с надписью «<strong>Сценарий</strong>». Именно здесь вы будете определять сценарий Workflow, который будет выполняться Jenkins, когда он инициализирует сборку проекта.</p> <p>«Какой тип сценария?» Спросите вы. Отличный вопрос. Плагин Jenkins Workflow использует для скриптов язык <span>Groovy</span>. Groovy - это универсальный скриптовый язык для JVM. Не волнуйтесь, вам не нужно знать Groovy или Java, чтобы заставить все работать - плагин Jenkins Workflow использует небольшую <span>DSL</span> поверх Groovy, и очень легко комбинировать команды для создания рабочего процесса вашего проекта.</p> <p>Идем дальше и добавляем в окно сценария следующее:</p> <pre class="brush: java noskimlinks noskimwords">node {  git "https://github.com/redhotvengeance/hello-jenkins.git"  sh "uptime"}</pre> <p>Так что здесь происходит?</p> <p>Прежде всего, мы открываем блок <code class="inline">node</code>. Node - это место, где происходят действия Workflow. При назначении <code class="inline">node</code> создается новое рабочее пространство (контекст / папка). Весь код внутри блока <code class="inline">node</code> выполняется внутри этого рабочего пространства. Это помогает гарантировать, что шаги сборки не загрязняют друг друга.</p> <p>Затем мы запускаем команду Git <code class="inline">git "https://github.com/redhotvengeance/hello-jenkins.git"</code>. Эта команда клонирует Git репозиторий в наше рабочее пространство.</p> <p>Наконец, мы говорим Workflow о выполнении команды оболочки <code class="inline">uptime</code> с <code class="inline">sh" uptime</code>.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads%2Fusers%2F383%2Fposts%2F24207%2Fimage-1442134892237.png" alt="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." title="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." width="50" height="50"></figure><p>Нажмите «<strong>Сохранить</strong>», и вы попадете на целевую страницу проекта. В левом меню находится кнопка «<strong>Собрать сейчас</strong>». Нажмите на нее, чтобы начать сборку.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads%2Fusers%2F383%2Fposts%2F24207%2Fimage-1434333273914.png" alt="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." title="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." width="50" height="50"></figure><p>Как только сборка будет завершена, нажмите на сборку <strong>#1</strong>, найденную в разделе «<strong>История сборки</strong>». Затем нажмите «<strong>Консольный вывод</strong>» в левом меню.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads%2Fusers%2F383%2Fposts%2F24207%2Fimage-1434333330224.png" alt="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." title="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." width="50" height="50"></figure><p>Здесь мы можем увидеть все, что было записано во время сборки. Она началась с выделения node в рабочей области «Shell Test (Workflow)». Затем он стунял Git репозиторий. Наконец, он выполнил команду <code class="inline">uptime</code>, которая печатала статистику времени безотказной работы сервера.</p> <p>Вот и все! Мы теперь воссоздали те же шаги, что и обычная настройка проекта Jenkins в первой части, за исключением того, что это был рабочий процесс. Теперь давайте использовать те же самые концепции, чтобы сделать что-то более сложное.</p> <h2>Подделайте это, пока не сделаете это</h2> <p>Прежде чем мы сможем создать наш сложный Workflow, нам нужна работа, которая пройдет через него. Поддельный проект (ы) на помощь!</p> <p>Поскольку мы уже используем Groovy для написания нашего Workflow, давайте использовать <span>Gradle</span> для наших поддельных проектов. Gradle - это система сборки, которая использует Groovy (удивительно, я знаю!). Чтобы использовать Gradle, нам нужно установить его на нашем сервере. SSH на ваш сервер (проверьте <span>часть Джеффа</span>, если что-то забыли) и запустите:</p> <pre class="brush: shell noskimlinks noskimwords">sudo apt-get install gradle</pre> <p>Двигаемся дальше.</p> <p>Мы будем использовать два репозитория в нашем новом Workflow. Первый - <span>строитель</span>. Наш проект строителя очень прост: в нем есть скрипт сборки Gradle со следующим кодом:</p> <pre class="brush: groovy noskimlinks noskimwords">task createBuild &lt;&lt; {  new File("built.txt").write("You cannot pass.\n")}</pre> <p>Так что здесь происходит? Gradle работает, выполняя «задачи», а скрипт сборки Gradle определяет эти задачи. Мы определили задачу, называемую <code class="inline">createBuild</code>, и что она делает, это создать текстовый файл с именем <code class="inline">build.txt</code> со следующим содержимым:</p> <blockquote> <p>Вы не пройдете.</p> </blockquote> <p>Это оно. (Хорошо, я говорил, что это было просто!)</p> <p>Второй Git-репо - наш <span>упаковщик</span>. У упаковщика также есть скрипт сборки Gradle, но он немного сложнее:</p> <pre class="brush: groovy noskimlinks noskimwords">task createPackage &lt;&lt; {  String packageText = "I am a servant of the Secret Fire, wielder of the flame of Anor. You cannot pass. The dark fire will not avail you, flame of Udûn. Go back to the Shadow!"  String builtText = new File("built.txt").text  new File("package.txt").write(packageText + "\n\n" + builtText)}</pre> <p>Задача <code class="inline">createPackage</code> также создает текстовый файл (называемый <code class="inline">package.txt</code>), но он рассчитывает использовать контент из файла <code class="inline">build.txt</code>, которого нет в репозитории упаковщика. Если в репо существовал <code class="inline">build.txt</code>, сгенерированный файл <code class="inline">package.txt</code> содержал бы:</p> <blockquote> <p>Я слуга Секретного Огня, обладателя пламени Анора. Вы не можете пройти. Темный огонь не поможет вам, пламя Удэна. Вернитесь к Тени!</p> <p>Вы не можете пройти.</p> </blockquote> <p>Если <code class="inline">build.txt</code> отсутствует, наша задача <code class="inline">createPackage</code> выдает ошибку.</p> <p>Поэтому каждый раз, когда мы создаем наш упаковщик, нам нужно сначала запустить наш построитель и сделать полученный <code class="inline">build.txt</code> доступным для упаковщика, чтобы он мог создавать <code class="inline">package.txt</code>.</p> <p>И это именно то, для чего мы будем создавать Jenkins Workflow!</p> <h2>Пусть поток работ через вас</h2> <p>Подойдите к панели инструментов Jenkins, нажмите «<strong>Новый элемент</strong>», назовите его «Ассемблер», выберите «<strong>Рабочий процесс</strong>» и нажмите «<strong>ОК</strong>».</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads%2Fusers%2F383%2Fposts%2F24207%2Fimage-1434333487865.png" alt="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." title="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." width="50" height="50"></figure><p>Давайте начнем писать сценарии. Во-первых, как и раньше мы откроем блок <code class="inline">node</code>:</p> <pre class="brush: java noskimlinks noskimwords">node {}</pre> <p>Затем давайте склонируем репозиторий нашего строителя:</p> <pre class="brush: java noskimlinks noskimwords">node {  git "https://github.com/redhotvengeance/jenkins-workflow-build.git"}</pre> <p>Теперь нам нужно запустить скрипт сборки Gradle для создания файла <code class="inline">build.txt</code>:</p> <pre class="brush: java noskimlinks noskimwords">node {  git "https://github.com/redhotvengeance/jenkins-workflow-build.git"  sh "gradle createBuild"}</pre> <p>Наконец, надо удостовериться, что все работает так, как мы ожидаем. Мы добавим <code class="inline">cat</code>, чтобы распечатать содержимое файла <code class="inline">build.txt</code>:</p> <pre class="brush: java noskimlinks noskimwords">node {  git "https://github.com/redhotvengeance/jenkins-workflow-build.git"  sh "gradle createBuild"  sh "cat ./built.txt"}</pre> <p>Нажмите «<strong>Сохранить</strong>», а затем запустите сборку. Как только это будет сделано, взгляните на <strong>вывод консоли</strong>.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads%2Fusers%2F383%2Fposts%2F24207%2Fimage-1442133017097.png" alt="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." title="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." width="50" height="50"></figure><p>Отлично! Мы успешно клонируем репозиторий, запускаем задачу <code class="inline">createBuild</code> и подтверждаем, что содержимое <code class="inline">build.txt</code> содержит строку <code class="inline">You cannot pass.</code>. Теперь об упаковщике.</p> <p>Как и у строителя, нам нужно клонировать наш репозиторий. Давайте добавим код упаковщика:</p> <pre class="brush: java noskimlinks noskimwords">node {  git "https://github.com/redhotvengeance/jenkins-workflow-build.git"  sh "gradle createBuild"  sh "cat ./built.txt"}node {  git "https://github.com/redhotvengeance/jenkins-workflow-package.git"  sh "gradle createPackage"  sh "cat ./package.txt"}</pre> <p>Поскольку мы явно не создавали новое рабочее пространство, задача <code class="inline">createPackage</code> будет работать в том же рабочем пространстве, что и задание <code class="inline">createBuild</code>, что означает, что файл <code class="inline">build.txt</code>, ожидаемый от него, будет доступен для него.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads%2Fusers%2F383%2Fposts%2F24207%2Fimage-1442134052691.png" alt="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." title="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." width="50" height="50"></figure><p>Идем дальше, а нажимаем <strong>Сохранить</strong> и <strong>Собрать сейчас</strong>, а затем просмотрим <strong>вывод консоли</strong>.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=603/uploads%2Fusers%2F383%2Fposts%2F24207%2Fimage-1442132665734.png" alt="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." title="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." width="50" height="50"></figure><p>Все выполнилоась, как ожидалось, - наш строитель был клонирован и выполнился, и наш упаковщик был клонирован и тоже выполнился. И если мы посмотрим на результат - вот оно! «Балрог Моргот» был полностью Гэндальфом.</p> <h2>Круто! но разве это немного не ...</h2> <p>Надумано? Вероятнее всего.</p> <p>Но сложная концепция - это всего лишь куча простых концепций, сплетенных вместе. На поверхности мы собрали речь Гэндальфа на мосту Хазад-дем. Но на самом деле мы взяли сборку одного проекта и ввели его в сборку другого проекта.</p> <p>Что, если вместо диалога Гэндальфа выходы сборки были исполняемыми файлами из отдельных кодовых баз, которые все должны собираться вместе для программного обеспечения, которое вы отправляете? Вы должны использовать тот же рабочий процесс, который мы создали здесь: клонирование, создание, копирование и упаковка. С плагином Jenkins Workflow все, что нужно, это несколько строк Groovy. И в качестве бонуса все содержится в одном скрипте!</p> <p>Существуют также другие инструменты для управления и визуализации рабочего процесса Jenkins. CloudBees предлагает функцию просмотра рабочего процесса на своей корпоративной <span>платформе Jenkins</span>.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads%2Fusers%2F383%2Fposts%2F24207%2Fimage-1442134394795.png" alt="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." title="Рабочий процесс Дженкинса: создание сценариев для сложных сборок..." width="50" height="50"></figure><p>Мы лишь поверхностно коснулись того, что можно сделать с помощью плагина Jenkins Workflow. Обязательно ознакомьтесь с приведенными ниже ссылками, чтобы узнать больше.</p> <p>Удачи с вашими процессами!</p> <h3>Ссылки по теме</h3> <ul><li><span>Сайт Дженкинса</span></li> <li><span>Страница плагина рабочего процесса Jenkins</span></li> <li><span>Плагин рабочего процесса Jenkins GitHub</span></li> <li><span>Учебное пособие по Jenkins Workflow Plugin</span></li> <li><span>Документация плагина Workflow CloudBees Jenkins</span></li> <li><span>Видео по интерфейсу Jenkins Workflow</span></li> </ul>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825334-rabochij-protsess-dzhenkinsa-sozdanie-stsenariev-dlya-slozhnyh-sborok" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Testing" href="https://norma-studio.github.io/article5/220825334-rabochij-protsess-dzhenkinsa-sozdanie-stsenariev-dlya-slozhnyh-sborok" class="tm-article-body__tags-item-link">Testing</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
39523</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
692</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
