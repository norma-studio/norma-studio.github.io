
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Дизайн пользовательского интерфейса Android: работа с фрагментами... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Дизайн пользовательского интерфейса Android: работа с фрагментами... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Дизайн пользовательского интерфейса Android: работа с фрагментами... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Дизайн пользовательского интерфейса Android: работа с фрагментами... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Новый API-интерфейс Fragment для Android, представленный в Android 3.0, позволяет упростить создание динамичного интерфейса. В этом учебном пособии вы узнаете, как преобразовать двухэкранный ListView и WebView в одноэранный вид, предназначенный для больших экранов, например, для планшетов....">
<meta property="og:description" content="Новый API-интерфейс Fragment для Android, представленный в Android 3.0, позволяет упростить создание динамичного интерфейса. В этом учебном пособии вы узнаете, как преобразовать двухэкранный ListView и WebView в одноэранный вид, предназначенный для больших экранов, например, для планшетов....">
<meta name="twitter:description" content="Новый API-интерфейс Fragment для Android, представленный в Android 3.0, позволяет упростить создание динамичного интерфейса. В этом учебном пособии вы узнаете, как преобразовать двухэкранный ListView и WebView в одноэранный вид, предназначенный для больших экранов, например, для планшетов....">
<meta property="aiturec:description" content="Новый API-интерфейс Fragment для Android, представленный в Android 3.0, позволяет упростить создание динамичного интерфейса. В этом учебном пособии вы узнаете, как преобразовать двухэкранный ListView и WebView в одноэранный вид, предназначенный для больших экранов, например, для планшетов....">
<meta property="og:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=640/mobile/uploads/legacy/Android-SDK-Fragments/MT-Fragments-Fig1.png">
<meta property="aiturec:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=640/mobile/uploads/legacy/Android-SDK-Fragments/MT-Fragments-Fig1.png">
<meta name="twitter:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=640/mobile/uploads/legacy/Android-SDK-Fragments/MT-Fragments-Fig1.png">
<meta property="vk:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=640/mobile/uploads/legacy/Android-SDK-Fragments/MT-Fragments-Fig1.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=640/mobile/uploads/legacy/Android-SDK-Fragments/MT-Fragments-Fig1.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825697-dizajn-polzovatelskogo-interfejsa-android-rabota-s-fragmentami.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825697-dizajn-polzovatelskogo-interfejsa-android-rabota-s-fragmentami.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825697-dizajn-polzovatelskogo-interfejsa-android-rabota-s-fragmentami.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825697-dizajn-polzovatelskogo-interfejsa-android-rabota-s-fragmentami.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825697-dizajn-polzovatelskogo-interfejsa-android-rabota-s-fragmentami.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825697-dizajn-polzovatelskogo-interfejsa-android-rabota-s-fragmentami.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825697-dizajn-polzovatelskogo-interfejsa-android-rabota-s-fragmentami.html" title="Дизайн пользовательского интерфейса Android: работа с фрагментами... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Дизайн пользовательского интерфейса Android: работа с фрагментами... | envatomarket.ru | norma-studio.github.io" title="Дизайн пользовательского интерфейса Android: работа с фрагментами... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/45343254534.jpg" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825697-dizajn-polzovatelskogo-interfejsa-android-rabota-s-fragmentami.html" class="tm-user-info__username" title="
С. Баранов" aria-label="
С. Баранов">
С. Баранов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Дизайн пользовательского интерфейса Android: работа с фрагментами...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825697-dizajn-polzovatelskogo-interfejsa-android-rabota-s-fragmentami" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Android SDK" href="https://norma-studio.github.io/article5/220825697-dizajn-polzovatelskogo-interfejsa-android-rabota-s-fragmentami" class="tm-article-snippet__hubs-item-link"><span>Android SDK</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825697-dizajn-polzovatelskogo-interfejsa-android-rabota-s-fragmentami.html" />
    <link itemprop="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=640/mobile/uploads/legacy/Android-SDK-Fragments/MT-Fragments-Fig1.png">
    <meta itemprop="headline name" content="Дизайн пользовательского интерфейса Android: работа с фрагментами... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Новый API-интерфейс Fragment для Android, представленный в Android 3.0, позволяет упростить создание динамичного интерфейса. В этом учебном пособии вы узнаете, как преобразовать двухэкранный ListView и WebView в одноэранный вид, предназначенный для больших экранов, например, для планшетов....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Новый API-интерфейс Fragment для Android, представленный в Android 3.0, позволяет упростить создание динамичного интерфейса. В этом учебном пособии вы узнаете, как преобразовать двухэкранный ListView и WebView в одноэранный вид, предназначенный для больших экранов, например, для планшетов....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Новый API-интерфейс Fragment для Android, представленный в Android 3.0, позволяет упростить создание динамичного интерфейса. В этом учебном пособии вы узнаете, как преобразовать двухэкранный ListView и WebView в одноэранный вид, предназначенный для больших экранов, например, для планшетов.<br><!--more--></p><div class="changed-shortcode"> <strong>Изменения в техниках и программном обеспечении</strong> <p>Некоторые аспекты приложений или методов, используемых в этом руководстве, изменились с тех пор, как они были опубликованы. Это может затруднить выполнение нашей задачи. Мы рекомендуем посмотреть эти более новые уроки:</p> <ul><li><span>Android SDK: использование фрагментов</span></li> </ul></div> <p>Шаги этого учебника будут более краткие, чем некоторые из наших предыдущих учебников; вам, возможно, придется просмотреть некоторые другие обучающие материалы для Android на этом сайте или даже в <span>справочнике Android SDK</span>, если вы не знакомы с какими-либо базовыми концепциями и классами Android, обсуждаемыми в этом руководстве. Окончательный образец кода, который идет вместе с этим уроком, доступен для загрузки в качестве открытого кода на <span>Google</span>.</p> <h2>Представляем фрагменты</h2> <p>Прежде чем мы начнем, давайте определим, что такое фрагмент. Фрагмент - это, как правило, часть пользовательского интерфейса с его собственным жизненным циклом. Если это звучит очень похоже на Activity, это потому, что оно <i>похоже</i> на него. Однако фрагмент отличается от Activity, поскольку он существует внутри него. Фрагмент не должен быть сопряжен с одним и тем же Activity каждый раз, когда он создается, что дает ему некоторую гибкость. Также как Activity, фрагмент не содержит элементов пользовательского интерфейса.</p> <h2> <span>Шаг 0:</span> Начало работы</h2> <p>В этом учебном пособии предполагается, что вы начнете работу с нашего <span>урока по ListView</span>. Вы можете загрузить код и начать работать с ним, хотя некоторые задания могут быть вам непонятны или вы можете загрузить код  этого урока и следовать всем инструкциям в нём.</p> <h2> <span>Шаг 1:</span> Редизайн экранов</h2> <p>На следующем рисунке показано наше приложение Mobiletuts+ для чтения статей (урок ListView) до того, как был рассмотрен и применен дизайн фрагмента:</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=640/mobile/uploads/legacy/Android-SDK-Fragments/MT-Fragments-Fig1.png" alt="Дизайн пользовательского интерфейса Android: работа с фрагментами..." title="Дизайн пользовательского интерфейса Android: работа с фрагментами..." width="50" height="50"></div> <p>Эта разметка отлично работает на относительно небольшом экране телефона. Однако на большом экране, например, на 10-дюймовом экране Motorola Xoom на экране ListView очень много свободного места. Экран WebView выглядит хорошо, но немного пусто.</p> <p>Здесь и появляются фрагменты: на больших экранах мы могли бы предоставить более эффективный пользовательский интерфейс, если бы мы могли отображать ListView на том же экране, что и WebView. Когда пользователь нажимает на определенный элемент ListView на панели слева, WebView с правой стороны обновляется, чтобы отобразить соответствующий контент. Этот тип разметки часто используется в программах для чтения электронной почты или документов. На следующем рисунке показан редизайн:</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=640/mobile/uploads/legacy/Android-SDK-Fragments/MT-Fragments-Fig2.png" alt="Дизайн пользовательского интерфейса Android: работа с фрагментами..." title="Дизайн пользовательского интерфейса Android: работа с фрагментами..." width="50" height="50"></div> <h2> <span>Шаг 2:</span> Преобразование в дизайн на основе фрагментов</h2> <p>Теперь, мы знаем, как будет работать новая разметка экрана, мы также знаем, что два текущих действия необходимо будет преобразовать в фрагменты. Мы выполним преобразование в несколько этапов. Первый шаг заключается в том, чтобы оставить экраны визуально без изменений, но модифицировать каждый экран для использования фрагмента. Один фрагмент будет содержать текущий ListView, а другой будет содержать WebView. Затем мы перейдем к единственной реализации на экране, которая включает в себя обмен данными между элементами ListView и WebView, превращенными в фрагменты.</p> <p>Во-первых, измените Project Build Target вашего приложения на Android 3.0. Чтобы сделать это в Eclipse, щелкните правой кнопкой мыши проект и выберите «Свойства». Перейдите в раздел Android и установите флажок рядом с Android 3.0. Мы не используем какие-либо API Google, поэтому достаточно версии Android Open Source Project. Затем нажмите кнопку «ОК».</p> <p>Теперь у вас будет доступ к новым API, включая API фрагментов.</p> <p>Примечание: В следующем уроке мы поговорим об использовании нового уровня совместимости, чтобы технологии, такие как API-интерфейс Fragment, работали в более ранних версиях Android. Пока же им потребуется устройство с Android 3.0, Honeycomb.</p> <h2> <span>Шаг 3:</span> Создание классов фрагментов</h2> <p>Создайте два новых класса Java для представления двух фрагментов: экранов ListView и WebView. Назовите их TutListFragment и TutViewerFragment. TutListFragment расширит класс ListFragment, а TutViewerFragment просто расширит класс Fragment.</p> <p>В классе TutListFragment нам необходимо переопределить два метода: onListItemClick() и onCreate(). Содержание этих методов должно выглядеть вам знакомым; они похожи на те, что мы видели ранее в классе TutListActivity. Мы их скоро изменим, но пока не все. Вот список класса TutListFragment:</p> <pre class="brush: Java noskimlinks noskimwords">@Overridepublic void onListItemClick(ListView l, View v, int position, long id) {    String[] links = getResources().getStringArray(R.array.tut_links);    String content = links[position];    Intent showContent = new Intent(getActivity().getApplicationContext(),            TutViewerActivity.class);    showContent.setData(Uri.parse(content));    startActivity(showContent);}@Overridepublic void onCreate(Bundle savedInstanceState) {    super.onCreate(savedInstanceState);    setListAdapter(ArrayAdapter.createFromResource(getActivity()            .getApplicationContext(), R.array.tut_titles,            R.layout.list_item));}</pre> <p>Класс TutViewerFragment немного проще. Мы используем тот факт, что фрагмент работает под тем же activity, которым он пользовался, и получает данные непосредственно из класса Fragment. Добавьте метод переопределения для метода onCreateView(). Теперь эти методы должны выглядеть так:</p> <pre class="brush: Java noskimlinks noskimwords">@Overridepublic View onCreateView(LayoutInflater inflater, ViewGroup container,        Bundle savedInstanceState) {    Intent launchingIntent = getActivity().getIntent();    String content = launchingIntent.getData().toString();    WebView viewer = (WebView) inflater.inflate(R.layout.tut_view, container, false);    viewer.loadUrl(content);        return viewer;}</pre> <p>Возможность непосредственного доступа к экземпляру активности полезна, но позже создаст проблему. Что делать, если этот фрагмент находится на экране с фрагментом списка? В этом случае не произойдёт получения URL-адреса. Аналогично, в TutListFragment мы запускаем новое действие непосредственно, когда пользователь щелкает элемент в списке. Что делать, если TutViewFragment существовал в рамках одного activity? Если это так, запуск нового не имеет смысла. Мы вернемся и решим эти проблемы чуть позже в этом уроке.</p> <h2> <span>Шаг 4:</span> Добавление ресурсов макета фрагмента</h2> <p>Теперь создайте новый файл макета, называемый tutlist_fragment.xml, для фрагмента, содержащего список статей. Ресурс макета фрагмента использует тег и ссылается на созданный вами класс фрагментов.</p> <pre class="brush: xml noskimlinks noskimwords">&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;fragment    xmlns:android="http://schemas.android.com/apk/res/android"    android:name="com.mamlambo.tutorial.tutlist.TutListFragment"    android:layout_width="match_parent"    android:layout_height="match_parent"    android:id="@+id/tutlist_fragment"&gt;&lt;/fragment&gt;</pre> <p>Затем создайте аналогичный файл макета с именем tutview_fragment.xml:</p> <pre class="brush: xml noskimlinks noskimwords">&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;fragment    xmlns:android="http://schemas.android.com/apk/res/android"    android:name="com.mamlambo.tutorial.tutlist.TutViewerFragment"    android:layout_width="match_parent"    android:layout_height="match_parent"    android:id="@+id/tutview_fragment"&gt;&lt;/fragment&gt;</pre> <h2> <span>Шаг 5:</span> Обновление классов Activity</h2> <p>Теперь должны обновляться классы TutListActivity и TutViewerActivity. Класс TutListActivity имеет единственный метод onCreate(), который теперь должен быть обновлен для загрузки соответствующего ресурса макета фрагмента, созданного на предыдущем шаге, например:</p> <pre class="brush: Java noskimlinks noskimwords">@Overridepublic void onCreate(Bundle savedInstanceState) {    super.onCreate(savedInstanceState);    setContentView(R.layout.tutlist_fragment);}</pre> <p>Кроме того, следует отметить, что TutListActivity должен наследовать класс Activity, а не ListActivity.</p> <p>Класс TutViewerActivity требует аналогичного изменения. Его метод onCreate() теперь должен выглядеть следующим образом:</p> <pre class="brush: Java noskimlinks noskimwords">@Overridepublic void onCreate(Bundle savedInstanceState) {    super.onCreate(savedInstanceState);    setContentView(R.layout.tutview_fragment);}</pre> <h2> <span>Шаг 6:</span> Проверка вашего прогресса</h2> <p>Попробуйте запустить приложение сейчас. Вы заметите, что оно делает именно то, что и раньше делало. Не очень интересно, не так ли? Однако весь пользовательский интерфейс теперь выполняется с использованием фрагментов. Это позволит сделать следующие изменения, которые нужно сделать, чтобы плавно перестроить всё, поскольку мы добавляем новый макет, который объединит два фрагмента на больших дисплеях. Однако, как вы могли заметить, связь между фрагментами обрабатывается идентично тому, как мы взаимодействуем между activity. Фактически, мы использовали знание о том, что активность каждого фрагмента в паре оставалась неизменной. Этого не будет, если у нас есть одно действие, которое содержит и управляет обоими фрагментами. Давайте исправим это в первую очередь.</p> <h2> <span>Шаг 7:</span> Изменение связи для TutListFragment</h2> <p>Как вы поняли на шаге 3, запуск активности непосредственно из объекта TutListFragment больше не имеет смысла. Пользовательский интерфейс WebView может, по сути, быть частью того же самого действия, что и List - это наше решение для больших экранов. В этом случае мы просто хотим обновить URL-адрес WebView во втором фрагменте.</p> <p>Чтобы сделать это изменение, нам нужно сделать несколько вещей. Во-первых, сделаем фрагменты независимыми от активности, в которой они находятся. Для этого добавьте интерфейс обработчика в класс TutListFragment:</p> <pre class="brush: Java noskimlinks noskimwords">public interface OnTutSelectedListener {    public void onTutSelected(Uri tutUri);}</pre> <p>А затем активируйте его, обновив метод onListItemClickListener() следующим образом:</p> <pre class="brush: Java noskimlinks noskimwords">@Overridepublic void onListItemClick(ListView l, View v, int position, long id) {    String[] links = getResources().getStringArray(R.array.tut_links);    String content = links[position];    tutSelectedListener.onTutSelected(Uri.parse(content));}</pre> <p>Затем, класс TutListActivity реализует интерфейс OnTutSelectedListener, например:</p> <pre class="highlight: [2]; brush: Java noskimlinks noskimwords">public class TutListActivity extends Activity implements        TutListFragment.OnTutSelectedListener {...@Overridepublic void onTutSelected(Uri tutUri) {    Intent showContent = new Intent(getApplicationContext(),            TutViewerActivity.class);    showContent.setData(tutUri);    startActivity(showContent);}</pre> <p>Итак, теперь у нас есть функциональность, разделенная между фрагментом, который обрабатывает действия пользовательского интерфейса, и активность, которая может быть контроллером, передавая данные на следующую активность. Мы изменим метод onTutSelected() позже, чтобы решить, следует ли запускать новый экземпляр Activity или обновлять существующий экземпляр фрагмента.</p> <h2> <span>Шаг 8:</span> Изменение связи для TutViewerFragment</h2> <p>Теперь перейдем к классу TutViewerFragment, который также необходимо обновить. Вместо того, чтобы узнать, какой URL для загрузки, фрагмент будет ожидать, нужно узнать, какой URL-адрес загружается. Таким образом, мы можем обновлять WebView напрямую и не воссоздавать фрагмент с каждой загрузкой.</p> <p>Во-первых, измените класс TutViewerFragment на новый метод под названием updateUrl():</p> <pre class="brush: Java noskimlinks noskimwords">public void updateUrl(String newUrl) {    if (viewer != null) {        viewer.loadUrl(newUrl);    }}</pre> <p>Затем удалите все функции из метода onCreateView(), за исключением вызова inflate(). Над классом TutViewerActivity, добавьте функциональные возможности для извлечения Intent и затем вызовите метод updateUrl(), например:</p> <pre class="brush: Java noskimlinks noskimwords">@Overridepublic void onCreate(Bundle savedInstanceState) {    super.onCreate(savedInstanceState);    setContentView(R.layout.tutview_fragment);    Intent launchingIntent = getIntent();    String content = launchingIntent.getData().toString();    TutViewerFragment viewer = (TutViewerFragment) getFragmentManager()            .findFragmentById(R.id.tutview_fragment);        viewer.updateUrl(content);}</pre> <p>На этом этапе поведение приложения остается неизменным. Однако фрагменты могут существовать в пределах одного и того же действия или отдельных без дополнительных изменений кода.</p> <h2> <span>Шаг 9:</span> Добавление макета с двумя фрагментами</h2> <p>Теперь давайте создадим макет с обоими фрагментами, для использования в определенных ситуациях. В папке layout-land (которую вам может понадобиться создать) добавьте копию файла tutlist_fragment.xml. Это обеспечит разную ориентацию на любом экране. Портретный режим останется неизменным. Отредактируйте файл, чтобы выглядеть следующим образом с обоими фрагментами:</p> <pre class="brush: xml noskimlinks noskimwords">&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;LinearLayout    xmlns:android="http://schemas.android.com/apk/res/android"    android:layout_width="match_parent"    android:layout_height="match_parent"    android:orientation="horizontal"&gt;    &lt;fragment        android:name="com.mamlambo.tutorial.tutlist.TutListFragment"        android:layout_width="0dp"        android:layout_height="match_parent"        android:id="@+id/tutlist_fragment"        android:layout_weight="45"&gt;    &lt;/fragment&gt;    &lt;fragment        android:name="com.mamlambo.tutorial.tutlist.TutViewerFragment"        android:layout_width="0dp"        android:layout_height="match_parent"        android:id="@+id/tutview_fragment"        android:layout_weight="55"&gt;    &lt;/fragment&gt;&lt;/LinearLayout&gt;</pre> <p>Это будет разделять экран по горизонтали между обоими фрагментами.</p> <h2> <span>Шаг 10:</span> Добавление динамического выбора</h2> <p>Теперь мы можем добавить в приложение некоторую простую логику для выбора между запуском нового действия (двух рабочий процесс экрана) и обновлением  существующего фрагмента (рабочий процесс одного экрана).</p> <p>Для этого обновите метод onTutSelected() в классе TutListActivity следующим образом:</p> <pre class="brush: Java noskimlinks noskimwords">@Overridepublic void onTutSelected(String tutUrl) {    TutViewerFragment viewer = (TutViewerFragment) getFragmentManager()            .findFragmentById(R.id.tutview_fragment);    if (viewer == null || !viewer.isInLayout()) {        Intent showContent = new Intent(getApplicationContext(),                TutViewerActivity.class);        showContent.setData(Uri.parse(tutUrl));        startActivity(showContent);    } else {        viewer.updateUrl(tutUrl);    }}</pre> <p>Все это делает захват фрагмента и проверяет, является ли он частью существующего макета для Activity. Если нет, запускается активность просмотра, в противном случае вместо этого обновляется существующий фрагмент.</p> <h2> <span>Шаг 11:</span> Запуск приложения с добавлением новых фрагментов</h2> <p>На данный момент приложение будет работать в двух разных режимах: портрет не изменяется, а в ландшафте отображается ListView слева от WebView. На данный момент можно сделать несколько улучшений, но они относятся к настройке, оптимизации и других опций, в основном для красоты. Например, если вы находитесь в портретном режиме  WebView и поворачиваете экран, в результате будет виден только экран WebView. Вы должны нажать назад, чтобы перейти к двойному виду. Оформление выходит за рамки данного руководства, но вы можете увидеть, как с помощью использования макетов и небольшого количества логики activity вы можете добиться мощных, но адаптивных экранов для различных устройств.</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=640/mobile/uploads/legacy/Android-SDK-Fragments/MT-Fragments-Fig3.png" alt="Дизайн пользовательского интерфейса Android: работа с фрагментами..." title="Дизайн пользовательского интерфейса Android: работа с фрагментами..." width="50" height="50"></div> <h2>Заключение</h2> <p>API-интерфейс фрагмента помогает организовать компоненты интерфейса, так чтобы их можно было повторно использовать в разных activity. Таким образом, приложение может динамически корректировать свой макет и пользовательский интерфейсы с относительно небольшими усилиями в плане кодирования. Вы также видели, что приложение, которое создано с помощью фрагментов, легче реорганизовать. Еще лучше, чтобы любое приложение смогло использовать фрагменты через библиотеку совместимости, предоставляемую Google, которая совместима еще в Android 1.6.<br> Фрагментируйте пользовательский интерфейс приложений и создавайте удивительные пользовательские интерфейсы для каждого размера и формы экрана!</p> <h3>Об авторах</h3> <p>Разработчики мобильных устройств Лорен Дарси и Шейн Кондер совместно со своими коллегами разработали несколько книг по разработке Android: углубленную книгу по программированию под названием <em><span>Разработка приложений для Android Wireless</span></em> и <em><span>самоучитель Сэма для разработки приложений Android за 24 часа</span></em>. Пока они не начали писать, они разрабатывали мобильное ПО в своей компании и предоставляли консультационные услуги. Их можно найти написав по электронной почте <span>androidwirelessdev+mt@gmail.com</span> через свой блог на <span>androidbook.blogspot.com</span> и на Twitter <span>@androidwireless</span>.<br></p><h3>Нужна дополнительная помощь? Написание приложений для Android? Ознакомьтесь с самыми новыми книгами и ресурсами!</h3> <p><span> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://mamlambo.com/himg/awad.jpg" class="lazy07" alt="Дизайн пользовательского интерфейса Android: работа с фрагментами..." title="Дизайн пользовательского интерфейса Android: работа с фрагментами..." width="50" height="50"></span> <span><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://mamlambo.com/himg/sams-aad.jpg" class="lazy07" alt="Дизайн пользовательского интерфейса Android: работа с фрагментами..." title="Дизайн пользовательского интерфейса Android: работа с фрагментами..." width="50" height="50"></span> <span> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" data-src="https://mamlambo.com/himg/CCad.png" class="lazy07" alt="Дизайн пользовательского интерфейса Android: работа с фрагментами..." title="Дизайн пользовательского интерфейса Android: работа с фрагментами..." width="50" height="50"></span></p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825697-dizajn-polzovatelskogo-interfejsa-android-rabota-s-fragmentami" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Android SDK" href="https://norma-studio.github.io/article5/220825697-dizajn-polzovatelskogo-interfejsa-android-rabota-s-fragmentami" class="tm-article-body__tags-item-link">Android SDK</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
44881</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
534</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
