
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Как настроить командную строку... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Как настроить командную строку... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Как настроить командную строку... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Как настроить командную строку... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="В последнее время мне часто задаю этот вопрос: «Как вы настроили свой терминал, чтобы он так выглядел?» Если вы заметили мой терминал и вам интересно, как я его настроил, это учебник для вас! Конечно, того, что вы узнаете здесь, будет достаточно, чтобы начать создавать собственный стиль командной строки!...">
<meta property="og:description" content="В последнее время мне часто задаю этот вопрос: «Как вы настроили свой терминал, чтобы он так выглядел?» Если вы заметили мой терминал и вам интересно, как я его настроил, это учебник для вас! Конечно, того, что вы узнаете здесь, будет достаточно, чтобы начать создавать собственный стиль командной строки!...">
<meta name="twitter:description" content="В последнее время мне часто задаю этот вопрос: «Как вы настроили свой терминал, чтобы он так выглядел?» Если вы заметили мой терминал и вам интересно, как я его настроил, это учебник для вас! Конечно, того, что вы узнаете здесь, будет достаточно, чтобы начать создавать собственный стиль командной строки!...">
<meta property="aiturec:description" content="В последнее время мне часто задаю этот вопрос: «Как вы настроили свой терминал, чтобы он так выглядел?» Если вы заметили мой терминал и вам интересно, как я его настроил, это учебник для вас! Конечно, того, что вы узнаете здесь, будет достаточно, чтобы начать создавать собственный стиль командной строки!...">
<meta property="og:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=570/net/uploads/legacy/1137_terminal/terminal.png">
<meta property="aiturec:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=570/net/uploads/legacy/1137_terminal/terminal.png">
<meta name="twitter:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=570/net/uploads/legacy/1137_terminal/terminal.png">
<meta property="vk:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=570/net/uploads/legacy/1137_terminal/terminal.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=570/net/uploads/legacy/1137_terminal/terminal.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825656-kak-nastroit-komandnuyu-stroku.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825656-kak-nastroit-komandnuyu-stroku.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825656-kak-nastroit-komandnuyu-stroku.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825656-kak-nastroit-komandnuyu-stroku.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825656-kak-nastroit-komandnuyu-stroku.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825656-kak-nastroit-komandnuyu-stroku.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825656-kak-nastroit-komandnuyu-stroku.html" title="Как настроить командную строку... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Как настроить командную строку... | envatomarket.ru | norma-studio.github.io" title="Как настроить командную строку... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/54332343.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825656-kak-nastroit-komandnuyu-stroku.html" class="tm-user-info__username" title="
В. Бухтеев" aria-label="
В. Бухтеев">
В. Бухтеев</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Как настроить командную строку...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825656-kak-nastroit-komandnuyu-stroku" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Tools &amp; Tips" href="https://norma-studio.github.io/article5/220825656-kak-nastroit-komandnuyu-stroku" class="tm-article-snippet__hubs-item-link"><span>Tools &amp; Tips</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825656-kak-nastroit-komandnuyu-stroku.html" />
    <link itemprop="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=570/net/uploads/legacy/1137_terminal/terminal.png">
    <meta itemprop="headline name" content="Как настроить командную строку... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="В последнее время мне часто задаю этот вопрос: «Как вы настроили свой терминал, чтобы он так выглядел?» Если вы заметили мой терминал и вам интересно, как я его настроил, это учебник для вас! Конечно, того, что вы узнаете здесь, будет достаточно, чтобы начать создавать собственный стиль командной строки!...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">В последнее время мне часто задаю этот вопрос: «Как вы настроили свой терминал, чтобы он так выглядел?» Если вы заметили мой терминал и вам интересно, как я его настроил, это учебник для вас! Конечно, того, что вы узнаете здесь, будет достаточно, чтобы начать создавать собственный стиль командной строки!...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>В последнее время мне часто задаю этот вопрос: «Как вы настроили свой терминал, чтобы он так выглядел?» Если вы <span>заметили мой терминал</span> и вам интересно, как я его настроил, это учебник для вас! Конечно, того, что вы узнаете здесь, будет достаточно, чтобы начать создавать собственный стиль командной строки!</p><p><!--more--></p> <hr><blockquote> <p>Прежде чем мы начнем, я хочу кое-что прояснить. Я, конечно, энтузиаст командной строки, но я вовсе не профессионал. Я чувствую себя как дома в терминале, но я далек от знания всего. Итак, сделаем следующим образом: я покажу вам, как я настроил свой терминал, но это не значит, что я смогу объяснить каждую строку кода, которую мы увидим. Будут некоторые вещи представлены так, как есть, потому что они просто работают ... и я не всегда на 100% знаю, почему. </p> </blockquote> <p>И теперь, отказавшись от ответственности, давайте посмотрим, что мы будем делать.</p> <hr><h2>Встреча с готовым продуктом</h2> <p>Вот как выглядит мое приветствие командной строки:</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=570/net/uploads/legacy/1137_terminal/terminal.png" alt="Как настроить командную строку..." title="Как настроить командную строку..." width="50" height="50"></div> <p>Если вы не уверены в том, что вы здесь видите, позвольте мне объяснить:</p> <ul><li>В бирюзовом цвете мы имеем имя компьютера; в моем случае это <code>mothership</code>. Затем следует двоеточие.</li> <li>Затем у нас есть рабочий каталог, представленный в желто-оранжевом.</li> <li>Если мы находимся в репозитории git, у нас есть информация об этом. Главное здесь - название ветки (<code>master</code> или <code>tilt_in_post_class</code> на скриншоте). Кроме того, если рабочий каталог чист, этот текст отображается зеленым цветом; в противном случае он отображается красным цветом.</li> <li>Наконец, у нас есть индикатор батареи. Если десять треугольников зеленые и заполнены, батарея заряжена. Когда моя батарея опустеет, треугольники опустеют и в конечном итоге станут красными. Конечно, если вы не на ноутбуке, как я, это не будет так полезно для вас.</li> </ul><hr><h2>Подготовка среды</h2> <p>Давайте теперь сделаем несколько предварительных действий, прежде чем начнем писать сценарии оболочки.</p> <p>Во-первых, есть цветовая схема. Вы можете распознать его как <span>цветовая схема Solarized Этана Шуновера</span>. Она довольно симпатичная, и я использовал ее как в терминале, так и в Vim с тех пор, как я ее обнаружил. Если вы хотите использовать ее в терминале, вам нужно будет установить тему. Терминал в Snow Leopard не поддерживает xterm-256color, поэтому вам нужно будет следовать <span>некоторым специальным указаниям</span> на странице Solarized GitHub, чтобы она заработала, если вы все еще находитесь на этой ОС.</p> <p>Если вы перешли к Lion, вы можете просто установить файлы <code>.terminal</code>, которые вы найдете в папке <span>xterm-256color</span>. После того, как вы установите их (просто дважды щелкните их), вы сможете выбрать тему, которую захотите в настройках терминала. Не забудьте установить ее как схему по умолчанию.</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cdn.tutsplus.com/net/uploads/legacy/1137_terminal/defaults.png" class="lazy07" alt="Как настроить командную строку..." title="Как настроить командную строку..." width="50" height="50"></div> <p>Следующее, что нужно знать, это то, что я не использую оболочку bash по умолчанию в моем терминале. Вместо этого я переключился на zsh, который в основном совместим с bash, но имеет несколько приятных дополнений, например, лучшее автодополнение по табу. Вот как это сделать: откройте настройки системы Mac и перейдите к «Пользователи и группы». Разблокируйте панель, щелкнув блокировку внизу и введя свой пароль. Затем щелкните правой кнопкой мыши на вашем пользователе в списке и выберите «Дополнительные параметры». В поле «Входная оболочка» перейдите из <code>/bin/bash</code> в <code>/bin/zsh</code>. Это так просто.</p> <h3>Шрифты</h3> <p>Следующий шаг: получите правильный шрифт. Я использую <span>Inconsolata</span> в 15pt. Это бесплатный моноширинный шрифт, на который мне нравится смотреть в течение всего дня. (Помимо использования его в терминале, я использую его в Vim и TextEdit.) Вы можете установить шрифт по умолчанию из настроек терминала, прямо там, где вы выбираете цветовую схему.</p> <p>Еще одна небольшая вещь - размер вашего окна: Откройте «Настройки терминала»&gt; «Настройки» и перейдите на вкладку «Окно»; проскрольте вниз, вы можете выбрать количество столбцов и строк, которые вы хотите; Я использую 130 столбцов на 30 строк.</p> <h3>Аккумулятор </h3> <p>Помните индикатор уровня заряда батареи? Ну, для этого требуется небольшой скрипт от <span>разработчика Стива Лоша</span>; просто скопируйте это в файл и сохраните его как файл python; поскольку <code>~/bin</code> находится в <code>PATH</code> моего терминала, я сохранил файл в <code>~/bin/batcharge.py</code>. Как он отмечает, этот скрипт будет работать только в Mac OS X, поэтому, если вы запускаете zsh в другой системе, вам придется пропустить эту часть.</p> <h3>Zsh</h3> <p>Наконец, но, конечно же, не в последнюю очередь - oh-my-zsh. Согласно <span>репозиторию Github</span>, это всего лишь «Несколько функций, помощников с автодополнением и прочее, что заставляет вас кричать« OH MY ZSHELL! »» </p> <p>Зачем использовать его? Для меня я решил попробовать в какой-то момент, и я оставил его установленным. Если вы пользуетесь терминалом много, немного окунитесь вокруг oh-my-zsh, когда у вас есть время. Вы можете быть удивлены тем, что обнаружите. Установка oh-my-zsh довольно проста: просто <span>следуйте инструкциям по установке в README</span>; они довольно прямолинейны.</p> <p>Теперь у нас есть все что необходимо. Мы готовы начать создавать пользовательский терминал.</p> <hr><h2>Создание файлов</h2> <p>Когда вы установили oh-my-zsh, он был установлен в <code>~/.oh-my-zsh</code>. Откройте эту папку. Вы увидите две папки <code>themes</code> и <code>templates</code>. Внутри <code>templates</code> вы найдете файл с именем <code>zshrc.zsh-template</code>. Это шаблон для файла <code>~/.zshrc</code>. Если вы уже настраивали свой терминал раньше, вы знаете, что файл <code>.bashrc </code>- это то место, где хранятся ваши настройки, когда вы используете оболочку bash. <code>.zshrc</code> - это то же самое, только уже для оболочки zsh. Поэтому откройте этот файл шаблона; вам не нужно знать, что именно происходит; в конце концов, в файле есть много комментариев, которые могут не иметь смысла. Здесь важно одно. Обратите внимание на строку, в которой говорится следующее:</p> <pre class="brush: bash noskimlinks noskimwords">ZSH_THEME="robbyrussell"</pre> <p>Это название темы, которую использует ваш терминал. Посмотрите в папку <code>themes</code>: вы увидите файл r<code>obbyrussel.zsh-theme</code>. Мы собираемся создать собственную тему, поэтому вы можете заменить эту строку именем нашего нового файла. Я неоднократно называл мою «doubleend», потому что она идет по обе стороны терминала.</p> <p>Любые другие настройки, которые вы хотите внести в среду zsh, могут быть сделаны в этом файле. Если вы постоянно используете терминал, проверьте плагины <code>oh-my-zsh</code> (в папке <code>plugins</code>): там есть масса полезных вещей.</p> <p>Не забудьте скопировать в <code>zshrc.zsh-template</code> в свой домашний каталог и переименовать его в <code>.zshrc</code>, прежде чем вносить изменения. Теперь в папке <code>themes</code> создайте файл с именем темы, заданным в файле <code>.zshrc</code>. Убедитесь, что вы добавили расширение <code>.zsh-theme</code>. Мы готовы создать собственную тему.</p> <hr><h2>Создание пользовательской темы</h2> <p>Самая важная вещь в вашем файле темы - это переменная <code>PROMPT</code>. Это содержимое командной строки. Чтобы получить представление об этом, начните с этого в файле темы:</p> <pre class="brush: bash noskimlinks noskimwords">PROMPT="myPrompt=&gt;"</pre> <p>Откройте новое окно терминала, и вы увидите следующее:</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cdn.tutsplus.com/net/uploads/legacy/1137_terminal/myPrompt.png" class="lazy07" alt="Как настроить командную строку..." title="Как настроить командную строку..." width="50" height="50"></div> <p>Хорошо, давай приступим к работе. Нам нужно будет написать несколько функций, но мы начнем с переменной <code>PROMPT</code>. Это может быть не заметно при просмотре терминала, но в моей подсказке есть три строки. Первая - пустая строка, просто чтобы дать мне передышку. Вторая имеет всю информацию, а третья - стрелку. В этой третьей строке вы набираете команду. Итак, вот наш старт:</p> <pre class="brush: bash noskimlinks noskimwords">PROMPT="$reset_color→ "</pre> <p>Да, вы можете делать многострочные строки, которые легко выполняются в сценариях оболочки. Но для чего <code>$reset_color</code>? Это переменная, которую oh-my-zsh определяет для нас; она сбрасывает цвет вывода. Для этого требуется небольшое отступление, чтобы обсудить, как мы раскрашиваем разные слова в подсказке. Вы видите, есть код - серия символов, которые переключают следующий текст в цвет. Очевидно, есть код для каждого доступного цвета. Не беспокойтесь, есть другие переменные для других цветов; вам не нужно изучать коды. К тому времени, когда мы дойдем до третьей строки, мы хотим сбросить ее до цвета текста по умолчанию; поэтому мы используем переменную <code>$reset_color</code>.</p> <p>Если вам интересен символ стрелки, это стрелка вправо Unicode (U + 2192, &amp; rarr;). Вот и все.</p> <p>Итак, теперь наше приглашение выглядит так:</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cdn.tutsplus.com/net/uploads/legacy/1137_terminal/arrow.png" class="lazy07" alt="Как настроить командную строку..." title="Как настроить командную строку..." width="50" height="50"></div> <p>Взгляд стройный. Теперь добавим имя компьютера и рабочий каталог. Это все для этой второй строки нашей переменной <code>PROMPT</code>.</p> <pre class="brush: bash noskimlinks noskimwords">$fg[cyan]%m: $fg[yellow]$(get_pwd)</pre> <p>Начнем с установки цвета текста в синий цвет; кажется, что мы получаем этот цветовой код из ассоциативного массива или хэша; в то время как я его не использую, есть хеш <code>$bg</code>, который меняет цвет фона вместо цвета переднего плана (текста).</p> <p>После установки цвета у нас идет <code>%m</code>, который выводит имя компьютера. После двоеточия и пробела мы переключаем цвет текста на желтый. Затем мы используем знак доллара и parens, чтобы добавить результат функции <code>get_pwd</code>. Это выведет наш текущий рабочий каталог. Если я в домашнем каталоге, я не хочу видеть <code>/Users/andrew</code>, я хочу видеть <code>~</code> вместо этого. Итак, вот эта функция:</p> <pre class="brush: bash noskimlinks noskimwords">function get_pwd() {  echo "${PWD/$HOME/~}"}</pre> <p>Оболочка функции довольно проста, если вы уже знакомы с JavaScript. Я не уверен, откуда возник синтаксис для поиска и замены, но выглядит очень похоже на синтаксис поиска и замены Vim: если <code>PWD</code> содержит текст <code>$HOME</code> (системная переменная для вашего домашнего каталога), замените его на <code>~</code>.</p> <p>Теперь вот что:</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cdn.tutsplus.com/net/uploads/legacy/1137_terminal/home.png" class="lazy07" alt="Как настроить командную строку..." title="Как настроить командную строку..." width="50" height="50"></div> <p>Хорошо! Теперь наступает сложная часть. Видите ли, я хочу выровнять справа информацию о git и индикатор батареи. Поскольку на самом деле нет правильного выравнивания, нам нужно подсчитать количество символов текста, которое нам нужно, вычесть его из ширины окна и добавить этот интервал. Это выглядит как хак, и код довольно грязный, но это все, что я смог найти, что на самом деле работает.</p> <p>Готовы? Мы вставляем интервал с функцией, которую я называю <code>get_spacing</code>. Поэтому добавьте <code>$(get_spacing)</code> до конца второй строки, так что теперь она выглядит так:</p> <pre class="brush: bash noskimlinks noskimwords">$fg[cyan]%m: $fg[yellow]$(get_pwd)$(put_spacing)</pre> <p>Теперь эта функция. Конечно, вот оболочка:</p> <pre class="brush: bash noskimlinks noskimwords">function put_spacing() {}</pre> <p>Внутри есть четыре части. Вот первая.</p> <pre class="brush: bash noskimlinks noskimwords">local git=$(git_prompt_info)if [ ${#git} != 0 ]; then    ((git=${#git} - 10))else    git=0fi</pre> <p>Начнем с получения результата из функции <code>git_prompt_info</code> и сохранения его в локальной переменной <code>git</code>. Затем, если длина этой строки не равна 0, мы изменяем <code>git</code> так, чтобы теперь была длина строки минус 10. В противном случае мы сбросим <code>git</code> до 0. Это, похоже, не имеет особого смысла, пока вы не поймете, что мы пытаемся здесь сделать. Мы хотим узнать, сколько символов «слотов» занимает информация о git.  Сложная часть состоит в том, что мы повторно используем переменную <code>git</code>: сначала она содержит строку, затем она содержит число, представляющее количество символов, которые мы имеем в git-информации. Если <code>git</code> равно нулю символов, мы устанавливаем <code>git</code> в 0; если это не так (означает, что мы находимся в репозитории git), мы устанавливаем <code>git</code> на количество символов в строке, минус 10. Это связано с тем, что число символов в строке содержит цветовые коды, которые на самом деле не видны, поэтому они не занимают ширину. Двойные скобки? О, они используются для вычислений.</p> <p>Мы делаем то же самое для вывода батареи:</p> <pre class="brush: bash noskimlinks noskimwords">local bat=$(battery_charge)if [ ${#bat} != 0 ]; then    ((bat = ${#bat} - 18))else    bat=0fi</pre> <p>В третьей части мы выясним, сколько пробелов нам понадобится:</p> <pre class="brush: bash noskimlinks noskimwords">local termwidth(( termwidth = ${COLUMNS} - 3 - ${#HOST} - ${#$(get_pwd)} - ${bat} - ${git} ))</pre> <p>Еще больше математики: мы начинаем с <code>COLUMNS</code>, число символов равное ширине терминала. Мы вычитаем все соответствующие значения (3 для двух пробелов и двоеточие), и в итоге получим <code>termwidth</code> , которое нам нужно рассчитать как количество пробелов между левой и правой частями подсказки.</p> <p>Теперь давайте создадим строку <code>termwidth</code> с числом пробелов:</p> <pre class="brush: bash noskimlinks noskimwords">local spacing=""for i in {1..$termwidth}; do    spacing="${spacing} " doneecho $spacing</pre> <p>Простой цикл for-in позволяет нам создавать строку; затем мы ее возвращаем.</p> <p>Вы не можете сказать, что пробел был добавлен, поэтому я добавил некоторый фиктивный текст, чтобы вы могли видеть, что он добавлен.</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1137_terminal/space.png" alt="Как настроить командную строку..." title="Как настроить командную строку..." width="50" height="50"></div> <p>Далее, информация Git. Мы добавляем <code>$(git_prompt_info)</code> в конец строки подсказки 2; как вы знаете, это вызов функции.</p> <pre class="brush: bash noskimlinks noskimwords">$fg[cyan]%m: $fg[yellow]$(get_pwd)$(put_spacing)$(git_prompt_info)</pre> <p>Обратите внимание, что мы не изменяем цвет перед загрузкой информации Git: функция позаботится об этом, потому что это зависит от статуса репозитория.</p> <p>И вот сама функция:</p> <pre class="brush: bash noskimlinks noskimwords">function git_prompt_info() {  ref=$(git symbolic-ref HEAD 2&gt; /dev/null) || return  echo "$(parse_git_dirty)$ZSH_THEME_GIT_PROMPT_PREFIX$(current_branch)$ZSH_THEME_GIT_PROMPT_SUFFIX"}</pre> <p>Первая строка просто проверяет, находимся ли мы в репозитории Git. Если нет мы <code>return</code>. Если да, следующая строка <code>echo</code> правильную информацию. Обратите внимание на две вещи здесь: во-первых, мы используем две переменные: <code>$ZSH_THEME_GIT_PROMPT_PREFIX</code> и <code>$ZSH_THEME_GIT_PROMPT_SUFFIX</code>. Скоро я покажу вам, как они определяются. Другая вещь - две другие функции, которые вызываются. Они предоставляются oh-my-zsh. Функция <code>current_branch</code> возвращает текущую ветку. Однако <code>parse_git_dirty</code> интереснее. Если текущая ветвь загрязнена (имеет незафиксированные изменения), функция выведет <code>$ZSH_THEME_GIT_PROMPT_DIRTY</code>; иначе она выведет <code>$ZSH_THEME_GIT_PROMPT_CLEAN</code>.</p> <p>У меня эти четыре переменные определены так:</p> <pre class="brush: bash noskimlinks noskimwords">ZSH_THEME_GIT_PROMPT_PREFIX="[git:"ZSH_THEME_GIT_PROMPT_SUFFIX="]$reset_color"ZSH_THEME_GIT_PROMPT_DIRTY="$fg[red]+"ZSH_THEME_GIT_PROMPT_CLEAN="$fg[green]"</pre> <p>Основываясь на этих переменных, репозиторий на чистой ветке мастера выводит <code>[git: master]</code> зеленым цветом; будет выведена грязная ветвь master <code>+ [git: master]</code>.</p> <p>И, наконец, мы вызываем функцию <code>battery_charge</code>:</p> <pre class="brush: bash noskimlinks noskimwords">$fg[cyan]%m: $fg[yellow]$(get_pwd)$(put_spacing)$(git_prompt_info) $(battery_charge)</pre> <p>Вот функция <code>battery_charge</code>:</p> <pre class="brush: bash noskimlinks noskimwords">function battery_charge() {    if [ -e ~/bin/batcharge.py ]    then        echo `python ~/bin/batcharge.py`    else        echo "";    fi}</pre> <p>Если файл существует, мы запускаем этот файл и повторяем вывод. Обратите внимание, что мы используем обратные тики вокруг запуска файла (это не одинарные кавычки): это позволяет нам выполнить строку кода, как если бы она была в терминале. Если файл не существует, мы просто повторяем пустую строку.</p> <p>И с этим мы закончили! Вот что мы получили в итоге:</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1137_terminal/done.png" alt="Как настроить командную строку..." title="Как настроить командную строку..." width="50" height="50"></div> <hr><h2>Заключение</h2> <p>Ну, вот как выглядит мой терминал. Я форкнул проект oh-my-zsh на GitHub и добавил эту тему, чтобы <span>вы могли ее найти</span>. Если вы заинтересованы в том, чтобы увидеть мои другие dotfiles, они так же <span>есть на GitHub</span>.</p> <p>Тем не менее, я еще не закончил настройку командной строки. Хотя я не вносил никаких изменений в какое-то время, я думаю о включении имени текущего пользователя (потому что я использую ту же тему на своем сервере), а также некоторую информацию RVM. Кроме того, я не уверен, зачем мне слово <code>git</code>; Я предполагаю, что у меня первоначально была установка, которая работала с несколькими системами управления версиями ... В любом случае, все дело в том, что это то, что вы постоянно будете настраивать. Когда я вношу изменения, я обязательно заливаю их на GitHub, так что вы сможете увидеть их там.</p> <p>Позвольте мне оставить вам несколько ссылок, которые будут вам полезны при изменении командной строки:</p> <ul><li><span>7 простых и полезных подсказок командной строки | Nettuts +</span></li> <li><span>10 команд терминала, которые повысят производительность | Nettuts +</span></li> <li><span>Как настроить командную строку | Nettuts +</span></li> <li><span>Ускорьте свой рабочий процесс в терминале | Nettuts + Premium</span></li> <li><span>Стив Лош: Моя экстравагантная Zsh-подсказка</span></li> <li><span>Пост в блоге Peepcode: подсказка командной строки</span></li> <li><span>Peepcode: встречайте командную строку ($12)</span></li> <li><span>Peepcode: расширенная командная строка ($12)</span></li> <li><span>Zsh подсказка Фила</span></li> <li><span>Bash Prompt HOWTO</span></li> <li> <span>Страница wiki тем Oh-my-zsh</span> (вы можете ссылаться на эти изображения при просмотре тем в папке <code>themes</code>, и вы получите некоторые полезные советы.)</li> <li>Конечно, поиск в Интернете таких терминов, как «bash if statement» или «bash for loop», принесет полезные результаты, если вы просто учитесь. Помните, поскольку zsh в значительной степени полностью совместим с bash, любые используемые вами фрагменты bash-скрипта должны работать в командной строке zsh.</li> </ul><p>Хорошенько повеселитесь!</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825656-kak-nastroit-komandnuyu-stroku" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Tools &amp; Tips" href="https://norma-studio.github.io/article5/220825656-kak-nastroit-komandnuyu-stroku" class="tm-article-body__tags-item-link">Tools &amp; Tips</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
33283</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
672</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
