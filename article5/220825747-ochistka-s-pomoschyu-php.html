
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Очистка с помощью PHP... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Очистка с помощью PHP... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Очистка с помощью PHP... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Очистка с помощью PHP... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Безопасность данных важна и часто недооценивается разработчиками, разработчиками и клиентами. Начиная с PHP 5.2.0, санитизация и валидация данных были значительно упрощены благодаря внедрению фильтрации данных. Сегодня мы рассмотрим эти фильтры, как их использовать и создадим несколько пользовательских функций....">
<meta property="og:description" content="Безопасность данных важна и часто недооценивается разработчиками, разработчиками и клиентами. Начиная с PHP 5.2.0, санитизация и валидация данных были значительно упрощены благодаря внедрению фильтрации данных. Сегодня мы рассмотрим эти фильтры, как их использовать и создадим несколько пользовательских функций....">
<meta name="twitter:description" content="Безопасность данных важна и часто недооценивается разработчиками, разработчиками и клиентами. Начиная с PHP 5.2.0, санитизация и валидация данных были значительно упрощены благодаря внедрению фильтрации данных. Сегодня мы рассмотрим эти фильтры, как их использовать и создадим несколько пользовательских функций....">
<meta property="aiturec:description" content="Безопасность данных важна и часто недооценивается разработчиками, разработчиками и клиентами. Начиная с PHP 5.2.0, санитизация и валидация данных были значительно упрощены благодаря внедрению фильтрации данных. Сегодня мы рассмотрим эти фильтры, как их использовать и создадим несколько пользовательских функций....">
<meta property="og:image" content="https://net.tutsplus.com/wp-content/themes/nettuts/site_images/button_src_nm.jpg">
<meta property="aiturec:image" content="https://net.tutsplus.com/wp-content/themes/nettuts/site_images/button_src_nm.jpg">
<meta name="twitter:image" content="https://net.tutsplus.com/wp-content/themes/nettuts/site_images/button_src_nm.jpg">
<meta property="vk:image" content="https://net.tutsplus.com/wp-content/themes/nettuts/site_images/button_src_nm.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://net.tutsplus.com/wp-content/themes/nettuts/site_images/button_src_nm.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825747-ochistka-s-pomoschyu-php.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825747-ochistka-s-pomoschyu-php.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825747-ochistka-s-pomoschyu-php.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825747-ochistka-s-pomoschyu-php.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825747-ochistka-s-pomoschyu-php.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825747-ochistka-s-pomoschyu-php.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825747-ochistka-s-pomoschyu-php.html" title="Очистка с помощью PHP... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Очистка с помощью PHP... | envatomarket.ru | norma-studio.github.io" title="Очистка с помощью PHP... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/64535356345.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825747-ochistka-s-pomoschyu-php.html" class="tm-user-info__username" title="
В. Чендылов" aria-label="
В. Чендылов">
В. Чендылов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Очистка с помощью PHP...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825747-ochistka-s-pomoschyu-php" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="PHP" href="https://norma-studio.github.io/article5/220825747-ochistka-s-pomoschyu-php" class="tm-article-snippet__hubs-item-link"><span>PHP</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825747-ochistka-s-pomoschyu-php.html" />
    <link itemprop="image" href="https://net.tutsplus.com/wp-content/themes/nettuts/site_images/button_src_nm.jpg">
    <meta itemprop="headline name" content="Очистка с помощью PHP... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Безопасность данных важна и часто недооценивается разработчиками, разработчиками и клиентами. Начиная с PHP 5.2.0, санитизация и валидация данных были значительно упрощены благодаря внедрению фильтрации данных. Сегодня мы рассмотрим эти фильтры, как их использовать и создадим несколько пользовательских функций....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Безопасность данных важна и часто недооценивается разработчиками, разработчиками и клиентами. Начиная с PHP 5.2.0, санитизация и валидация данных были значительно упрощены благодаря внедрению фильтрации данных. Сегодня мы рассмотрим эти фильтры, как их использовать и создадим несколько пользовательских функций....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Безопасность данных важна и часто недооценивается разработчиками, разработчиками и клиентами. Начиная с PHP 5.2.0, санитизация и валидация данных были значительно упрощены благодаря внедрению фильтрации данных. Сегодня мы рассмотрим эти фильтры, как их использовать и создадим несколько пользовательских функций.</p><p><!--more--></p> <h3>Детали урока</h3> <ul><li> <b>Язык программирования</b>: PHP </li> <li> <b>Версия</b>: 5.2.0+</li> <li> <b>Сложность</b>: Новичок</li> <li> <b>Ориентировочное время завершения</b>: 20 минут</li> </ul><div class="tutorial_image"> <span><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://net.tutsplus.com/wp-content/themes/nettuts/site_images/button_src_nm.jpg" class="lazy07" alt="Очистка с помощью PHP..." title="Очистка с помощью PHP..." width="50" height="50"></span> </div> <h3>Введение</h3> <p>Я всегда чувствовал, что легко писать код на PHP, и даже проще писать плохой код в PHP. Распространению PHP в Интернете действительно помогли его использование в популярных программных пакетах с открытым исходным кодом, таких как WordPress, Drupal и Magento, а также в крупных веб-приложениях, таких как Facebook; поскольку PHP используется во множестве разнообразных экземпляров (динамические веб-сайты, углубленные веб-приложения, платформы для ведения блогов, системы управления контентом и электронная коммерция, являющиеся лишь подмножеством многих приложений PHP), возможности для <em>грязных</em> данных и ненадежных систем многочисленны. В этом учебном пособии я объясню некоторые методы <strong>Очистки с помощью PHP: санитизация данных и валидация</strong>, сосредоточив внимание на нескольких различных форматах ввода данных и способах использования фильтров PHP и пользовательских функций.</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/437_gettingClean/images/forms_to_clean.png" alt="Очистка с помощью PHP..." title="Очистка с помощью PHP..." width="50" height="50"></div> <h3>Зачем очищать и проверять?</h3> <p>В этом уроке мы действительно сосредоточены на вводе данных, которые могут предоставить пользователи или внешние источники. Это означает, что мы не контролируем данные, которые мы получаем. Все, что мы можем сделать, это контролировать то, что с ним происходит после получения. Существуют всевозможные угрозы, связанные с безопасностью данных с пользовательских входов и сторонних данных.</p> <p>Некоторые <em>не</em>общеизвестные угрозы безопасности данных:</p> <ul><li> <strong>Межсайтовый скриптинг (XSS)</strong>: форма ввода кода, где скрипт вводится на веб-сайт с совершенно другого веб-сайта. Это, безусловно, самая распространенная уязвимость в Интернете. Два последних, очень выдающихся примера этого метода - это <span>Stalk Daily и Mikeyy Twitter Worms</span>, ранее использовавшиеся в начале этого года, которые использовали плохо обработанные материалы для запуска Javascript через «зараженный» веб-интерфейс Twitter.</li> <li> <strong>SQL Injection</strong>: вторая наиболее распространенная уязвимость в Интернете, это еще одна форма ввода кода, в которой скрипт используется для участия в одном из многочисленных видов поведения, в том числе (но не ограничиваясь ими), подвергая и / или налагая несанкционированный доступ к данным, изменяя данные внутри базы данных или просто вводят код, который должен быть визуализирован или выполнен на веб-сайте, тем самым нарушая или изменяя веб-сайт.</li> <li> <strong>Cross-Site Request Forgery (CSRF/XSRF)</strong>: менее распространенный эксплойт, который больше полагается на источники данных, такие как cookie браузера и сессий, а не на плохо очищенные и проверенные данные, CSRF (произносится как «sea-surf») может использоваться для выполнения команд на веб-сайт без разрешения пользователя. Один популярный метод CSRF использует неверно сформированное значение URI данных изображения или значение src для выполнения сценария вместо отображения изображения.</li> <li> <strong>Improper Data</strong>: <em>Неважная</em> «уязвимость системы безопасности», неправильные данные могут вызвать проблемы с хостом для владельца веб-сайта или администратора базы данных. Часто неправильные данные могут ломать плохо кодированные веб-сайты или крашить автоматические системы. Примером этого была возможность изменять все страницы профиля MySpace, публикуя всевозможные хакеры HTML/CSS (Примечание: это может все еще работать, я не использовал MySpace в течение длительного времени).</li> </ul><div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/437_gettingClean/images/exploits_of_a_mom.png" alt="Очистка с помощью PHP..." title="Очистка с помощью PHP..." width="50" height="50"><div><em>Источник изображения: <span>XKCD</span></em></div> </div> <p>В наших целях мы сосредоточимся только на серверных методах повышения безопасности данных с помощью PHP, поэтому давайте посмотрим, как определяются термины «санитизация» и «валидация» применительно к PHP. Согласно <span>руководству PHP</span>:</p> <blockquote> <p>Валидация используется для проверки того, соответствуют ли данные определенным требованиям. Например, передача в FILTER_VALIDATE_EMAIL будет определять, является ли данные допустимым адресом электронной почты, но не будет изменять сами данные.</p> <p>Санитизация будет очищать данные, поэтому она может изменить их, удалив нежелательные символы. Например, передача в FILTER_SANITIZE_EMAIL приведет к удалению символов, которые не подходят для адреса электронной почты, который должен содержать. Тем не менее, он не подтверждает данные.</p> </blockquote> <p>По сути, если ваш веб-сайт является ночным клубом, в который все хотят попасть, валидация проверяет список гостей и идентификаторы в дверях, в то время как санитизация действует как вышибала, которая отбрасывает какие-либо нежелательные явления, которые пытаются пройти. Имея это в виду, давайте взглянем на расширение PHP Filters.</p> <h3>Какие фильтры у меня есть?</h3> <p>Все установки PHP не созданы равными. В то время как PHP 5.2.0 - это внедрение фильтров, не все установки имеют одинаковый набор фильтров в своем расширении Filters. Большинство установок будут иметь все фильтры, которые мы собираемся использовать, но чтобы немного рассказать о расширении фильтров, мы узнаем, что у вас есть на вашем сервере. В исходной загрузке я включил файл <em>getfilters.php</em>, который после установки и запуска на вашем сервере отобразит все ваши фильтры (оба фильтра данных доступны через функцию <strong>filter_var</strong> и потоковые фильтры, доступные через <strong>stream_filter_append</strong>).</p> <pre class="brush: php noskimlinks noskimwords"> echo "&lt;h1&gt;Data Filters&lt;/h1&gt;\n&lt;table&gt;\n&lt;tr&gt;\n"; echo "&lt;td&gt;&lt;strong&gt;Filter ID&lt;/strong&gt;&lt;/td&gt;\n"; echo "&lt;td&gt;&lt;strong&gt;Filter Name&lt;/strong&gt;&lt;/td&gt;\n&lt;/tr&gt;"; foreach(filter_list() as $id =&gt;$filter) {   echo "&lt;tr&gt;&lt;td&gt;$filter&lt;/td&gt;&lt;td&gt;".filter_id($filter)."&lt;/td&gt;&lt;/tr&gt;\n"; } echo "&lt;/table&gt;\n";</pre> <p>Во-первых, мы получаем массив, содержащий список всех доступных фильтров с <strong>фильтром-списком</strong>, затем мы прокручиваем массив и выводим имя фильтра, узнаем назначенный ему фильтр и выводим его идентификатор.</p> <h3>Как использовать фильтр?</h3> <p>Фильтры PHP для проверки и очистки активируются путем передачи по меньшей мере двух значений функции фильтра фильтров PHP <em>filter_var</em>. В качестве примера воспользуемся фильтром Sanitize для числа Integer следующим образом:</p> <pre class="brush: php noskimlinks noskimwords">$value = "123abc456def";echo filter_var($value, FILTER_SANITIZE_NUMBER_INT);</pre> <p>В примере у нас есть переменная <em>$value</em>, которая передается через функцию фильтра фильтров <em>filter_var</em> с использованием фильтра <em>FILTER_SANITIZE_NUMBER_INT</em>. Это приводит к следующему результату:</p> <pre class="brush: html noskimlinks noskimwords">123456</pre> <p>Фильтр Sanitize для целочисленного числа удаляет все нецелые символы из вывода и производит чистое целое число. В исходном коде загрузки вы можете попробовать различные входы, и он применит к вашему входному значению ряд общих фильтров. Я включил несколько различных строк примеров, которые вы можете проверить.</p> <h3>Что делают разные фильтры?</h3> <p>Список ниже не является полным, но он содержит большинство фильтров, которые входят в стандартную комплектацию с установками 5.2.0+. Пользовательские фильтры и те, которые добавлены из пользовательских расширений, здесь не включены.</p> <p><strong>FILTER_VALIDATE_BOOLEAN</strong>: проверяет, являются ли данные, переданные фильтру, логическим значением <em>TRUE</em> или <em>FALSE</em>. Если значение является небулевым значением, оно вернет <em>FALSE</em>. В приведенном ниже скрипте будет отображаться «TRUE» для примера данных <em>$value01</em>, но будет выведено «FALSE» для примера данных <em>$value02</em>:</p> <pre class="brush: php noskimlinks noskimwords">$value01 = TRUE;if(filter_var($value01,FILTER_VALIDATE_BOOLEAN)) { echo "TRUE";} else { echo "FALSE";}echo "&lt;br /&gt;&lt;br /&gt;"$value02 = TRUE;if(filter_var($value02,FILTER_VALIDATE_BOOLEAN)) { echo "TRUE";} else { echo "FALSE";}</pre> <p><strong>FILTER_VALIDATE_EMAIL</strong>: Проверяет, являются ли передаваемые в фильтр данные потенциально допустимым адресом электронной почты. Он не проверяет, действительно ли существует адрес электронной почты, только что формат адреса электронной почты действителен. В приведенном ниже скрипте будет отображаться «TRUE» для примера <em>$value01</em>, но будет выведено «FALSE» для примера <em>$value02</em> (потому что во втором не хватает требуемой части @domain.tld адреса электронной почты):</p> <pre class="brush: php noskimlinks noskimwords">$value01 = "test@example.com";if(filter_var($value01,FILTER_VALIDATE_EMAIL)) { echo "TRUE";} else { echo "FALSE";}echo "&lt;br /&gt;&lt;br /&gt;"$value02 = "nettuts";if(filter_var($value02,FILTER_VALIDATE_EMAIL)) { echo "TRUE";} else { echo "FALSE";}</pre> <p><strong>FILTER_VALIDATE_FLOAT</strong>: проверяет, являются ли данные, переданные фильтру, допустимым значением float. В приведенном ниже скрипте будет отображаться «TRUE» для примера данных <em>$value01</em>, но будет выведено «FALSE» для примера <em>$value02</em> (поскольку разделители запятой не допускаются в значениях float):</p> <pre class="brush: php noskimlinks noskimwords">$value01 = "1.234";if(filter_var($value01,FILTER_VALIDATE_FLOAT)) { echo "TRUE";} else { echo "FALSE";}echo "&lt;br /&gt;&lt;br /&gt;"$value02 = "1,234";if(filter_var($value02,FILTER_VALIDATE_FLOAT)) { echo "TRUE";} else { echo "FALSE";}</pre> <p><strong>FILTER_VALIDATE_INT</strong>: проверяет, являются ли данные, переданные фильтру, допустимым целочисленным значением. В приведенном ниже скрипте будет отображаться «TRUE» для примера <em>$value01</em>, но будет выведено «FALSE» для примера данных <em>$value02</em> (поскольку дробные числа/десятичные числа не являются целыми):</p> <pre class="brush: php noskimlinks noskimwords">$value01 = "123456";if(filter_var($value01,FILTER_VALIDATE_INT)) { echo "TRUE";} else { echo "FALSE";}echo "&lt;br /&gt;&lt;br /&gt;"$value02 = "123.456";if(filter_var($value02,FILTER_VALIDATE_INT)) { echo "TRUE";} else { echo "FALSE";}</pre> <p><strong>FILTER_VALIDATE_IP</strong>: проверяет, являются ли передаваемые в фильтр данные потенциально допустимым IP-адресом. Он не проверяет, отвечает ли IP-адрес, только что он соответствует требуемой структуре данных для IP-адресов. В приведенном ниже скрипте будет отображаться «TRUE» для примера <em>$value01</em>, но будет выведено «FALSE» для примера данных <em>$value02</em>:</p> <pre class="brush: php noskimlinks noskimwords">$value01 = "192.168.0.1";if(filter_var($value01,FILTER_VALIDATE_IP)) { echo "TRUE";} else { echo "FALSE";}echo "&lt;br /&gt;&lt;br /&gt;"$value02 = "1.2.3.4.5.6.7.8.9";if(filter_var($value02,FILTER_VALIDATE_IP)) { echo "TRUE";} else { echo "FALSE";}</pre> <p><strong>FILTER_VALIDATE_URL</strong>: проверяет, являются ли данные, переданные фильтру, потенциально допустимым URL. Он не проверяет, будет ли URL-адрес рабочим, просто чтобы он соответствовал требуемой структуре данных для URL-адресов. В приведенном ниже скрипте будет отображаться «TRUE» для примера <em>$value01</em>, но будет выведено «FALSE» для примера данных <em>$value02</em>:</p> <pre class="brush: php noskimlinks noskimwords">$value01 = "http://net.tutsplus.com";if(filter_var($value01,FILTER_VALIDATE_URL)) { echo "TRUE";} else { echo "FALSE";}echo "&lt;br /&gt;&lt;br /&gt;"$value02 = "nettuts";if(filter_var($value02,FILTER_VALIDATE_URL)) { echo "TRUE";} else { echo "FALSE";}</pre> <p><strong>FILTER_SANITIZE_STRING</strong>: по умолчанию этот фильтр удаляет любые данные из строки, которая недопустима или не разрешена в этой строке. Например, это приведет к удалению любых тегов HTML, таких как <em>&lt;script&gt;</em> или <em>&lt;strong&gt;</em> из переданной строки: или  из строки ввода:</p> <pre class="brush: php noskimlinks noskimwords">$value = "&lt;script&gt;alert("TROUBLE HERE");&lt;/script&gt;";echo filter_var($value, FILTER_SANITIZE_STRING);</pre> <p>Этот скрипт удалит теги и вернет следующее:</p> <pre class="brush: html noskimlinks noskimwords">alert("TROUBLE HERE");</pre> <p><strong>FILTER_SANITIZE_ENCODED</strong>: Многие программисты используют функцию <em>urlencode()</em> PHP для обработки URL. Этот фильтр по существу делает то же самое. Например, он будет кодировать любые пробелы и / или специальные символы из входной строки:</p> <pre class="brush: php noskimlinks noskimwords">$value = "&lt;script&gt;alert("TROUBLE HERE");&lt;/script&gt;";echo filter_var($value, FILTER_SANITIZE_ENCODED);</pre> <p>Этот скрипт будет кодировать знаки препинания, пробелы и скобки, а затем вернет следующее:</p> <pre class="brush: html noskimlinks noskimwords">%3Cscript%3Ealert%28%27TROUBLE%20HERE%27%29%3B%3C%2Fscript%3E</pre> <p><strong>FILTER_SANITIZE_SPECIAL_CHARS</strong>: Этот фильтр по умолчанию будет кодировать специальные символы HTML, такие как кавычки, амперсанды и скобки (в дополнение к символам со значением ASCII менее 32). Хотя демонстрационная страница не делает ее совершенно прозрачной, не просматривая источник (поскольку специальные символы, закодированные в HTML, будут интерпретироваться и отображаться), если вы посмотрите на исходный код, вы увидите, что кодировка работает:</p> <pre class="brush: php noskimlinks noskimwords">$value = "&lt;script&gt;alert("TROUBLE HERE");&lt;/script&gt;";echo filter_var($value, FILTER_SANITIZE_SPECIAL_CHARS);</pre> <p>Он преобразует специальные символы в свои HTML-кодированные сущности:</p> <pre class="brush: html noskimlinks noskimwords">&amp;#60;script&amp;#62;alert(&amp;#39;TROUBLE HERE&amp;#39;);&amp;#60;/script&amp;#62;</pre> <p><strong>FILTER_SANITIZE_EMAIL</strong>: Этот фильтр делает именно то, что можно было бы подумать. Он удаляет любые символы, которые недействительны в адресах электронной почты (например, скобки, треугольные скобки, двоеточия и т. д.). Например, допустим, вы случайно добавили круглые скобки вокруг буквы вашего адреса электронной почты (не спрашивайте, как, используйте свое воображение):</p> <pre class="brush: php noskimlinks noskimwords">$value = "t(e)st@example.com";echo filter_var($value, FILTER_SANITIZE_EMAIL);</pre> <p>Он удаляет эти круглые скобки и возвращает ваш красивый адрес электронной почты:</p> <pre class="brush: html noskimlinks noskimwords">test@example.com</pre> <p>Это отличный фильтр для использования в формах электронной почты совместно с FILTER_VALIDATE_EMAIL, чтобы уменьшить ошибку пользователя или предотвратить атаки, связанные с XSS (поскольку некоторые прошлые атаки XSS связаны с возвратом исходных данных, предоставленных в незащищенном поле электронной почты, непосредственно в браузер).</p> <p><strong>FILTER_SANITIZE_URL</strong>: Подобно фильтру очистки адреса электронной почты, этот фильтр делает именно то, что можно было бы подумать. Он удаляет любые символы, которые недействительны в URL (например, некоторые символы UTF-8 и т. д.). Например, предположим, что вы случайно добавили «®» в URL вашего сайта (опять же, не спрашивайте, как, притворись, что велоцираптор сделал это):</p> <pre class="brush: php noskimlinks noskimwords">$value = "http://net.tuts®plus.com";echo filter_var($value, FILTER_SANITIZE_URL);</pre> <p>Он удаляет нежелательные «®», и вы получаете свой красивый URL:</p> <pre class="brush: html noskimlinks noskimwords">http://net.tutsplus.com</pre> <p><strong>FILTER_SANITIZE_NUMBER_INT</strong>: Этот фильтр похож на FILTER_VALIDATE_INT, но вместо того, чтобы просто проверять, является ли он целым или нет, он фактически удаляет все не целое число из значения! Удобно, действительно, для досадных spambots и tricksters в некоторых формах ввода:</p> <pre class="brush: php noskimlinks noskimwords">$value01 = "123abc456def";echo filter_var($value01, FILTER_SANITIZE_NUMBER_INT);echo "&lt;br /&gt;";$value02 = "1.2.3.4.5.6.7.8.9";echo filter_var($value02, FILTER_SANITIZE_NUMBER_INT);</pre> <p>Эти глупые буквы и десятичные знаки сразу бросаются в глаза:</p> <pre class="brush: html noskimlinks noskimwords">123456123456789</pre> <p><strong>FILTER_SANITIZE_NUMBER_FLOAT</strong>: этот фильтр похож на FILTER_VALIDATE_INT, но вместо того, чтобы просто проверять, является ли он целым или нет, он фактически удаляет все не целое число из значения! Удобно, действительно, для досадных spambots и tricksters в некоторых формах ввода:</p> <pre class="brush: php noskimlinks noskimwords">$value01 = "123abc456def";echo filter_var($value01, FILTER_SANITIZE_NUMBER_FLOAT);echo "&lt;br /&gt;";$value02 = "1.2.3.4.5.6.7.8.9";echo filter_var($value02, FILTER_SANITIZE_NUMBER_FLOAT);</pre> <p>Опять же, все эти глупые буквы и десятичные знаки сразу бросаются в глаза:</p> <pre class="brush: html noskimlinks noskimwords">123456123456789</pre> <p>Но что, если вы хотите сохранить десятичный знак, как в следующем примере:</p> <pre class="brush: php noskimlinks noskimwords">$value = "1.23";echo filter_var($value, FILTER_SANITIZE_NUMBER_FLOAT);</pre> <p>Он все равно удалит его и вернет:</p> <pre class="brush: html noskimlinks noskimwords">123</pre> <p>Одной из основных причин, по которым FILTER_SANITIZE_NUMBER_FLOAT и FILTER_SANITIZE_INT являются отдельными фильтрами, является наличие специального флага «FILTER_FLAG_ALLOW_FRACTION», который добавляется как третье значение, переданное <em>filter_var</em>:</p> <pre class="brush: php noskimlinks noskimwords">$value = "1.23";echo filter_var($value, FILTER_SANITIZE_NUMBER_FLOAT, FILTER_FLAG_ALLOW_FRACTION);</pre> <p>Он сохранил бы десятичное значение и вернул бы:</p> <pre class="brush: html noskimlinks noskimwords">1.23</pre> <h3>Опции, флаги и элементы управления массивом</h3> <p>Флаг в этом последнем примере является лишь одним из многих дополнительных параметров, флагов и элементов управления массивом, которые позволяют вам более детально контролировать, какие типы данных обрабатываются, определения разделителей, как массивы обрабатываются фильтрами и т. д. Подробнее об этих флажках и других связанных с фильтрами функциях вы можете найти в <span>разделе Расширения фильтров</span> в руководстве по PHP.</p> <h3>Другие методы очистки данных с помощью PHP</h3> <p>Теперь мы рассмотрим несколько ключевых дополнительных методов очистки данных с помощью PHP, чтобы предотвратить «грязным данным» создать хаоса в ваших системах. Они особенно полезны для приложений, все еще работающих на PHP 4, поскольку они были доступны, когда они были выпущены.</p> <p><strong>htmlspecialchars</strong>: Эта функция PHP преобразует 5 специальных символов в соответствующие им сущности HTML:</p> <ul><li>"&amp;" (ampersand) становится "&amp;amp;"</li> <li>""" (double quote) становится "&amp;quot;" - когда ENT_NOQUOTES не установлено.</li> <li>""" (single quote) становится "&amp;#039;" - только когда ENT_QUOTES установлено.</li> <li>"&lt;" (less than) становится "&amp;lt;"</li> <li>"&gt;" (greater than) становится "&amp;gt;"</li> </ul><p>Он используется как любая другая строковая функция PHP:</p> <pre class="brush: php noskimlinks noskimwords">echo htmlspecialchars("$string");</pre> <p><strong>htmlentities</strong>: Подобно htmlspecialchars, эта функция PHP преобразует символы в соответствующие HTML сущности. Большая разница заключается в том, что <strong>ВСЕ</strong> символы, которые могут быть преобразованы, будут преобразованы. Это полезный метод обфускации адресов электронной почты от некоторых ботов, которые собирают адреса электронной почты, так как они не запрограммированы на чтение htmlentities.</p> <p>Она используется как любая другая строковая функция PHP:</p> <pre class="brush: php noskimlinks noskimwords">echo htmlentities("$string");</pre> <p><strong>mysql_real_escape_string</strong>: Эта функция MySQL помогает защитить от атак SQL-инъекций. Считается лучшей практикой (или даже обязательной практикой) передавать все данные, которые отправляются в запрос MySQL через эту функцию. Она экранирует любые специальные символы, которые могут быть проблематичными и могут уничтожить чью-либо базу данных.</p> <pre class="brush: php noskimlinks noskimwords">$query = "SELECT * FROM table WHERE value=".mysql_real_escape_string("$string")." LIMIT 1,1";$runQuery = mysql_query($query);</pre> <h3>Пользовательские функции</h3> <p>Для многих людей эти встроенные фильтры и функции недостаточно хороши. Валидация некоторых данных, таких как номера телефонов, почтовые индексы или даже электронные письма, часто требует более строгой проверки и маскировки. Для этого многие люди создают пользовательские функции для проверки, и их данные чистые. Примером этого может быть, использование MySQL-запроса для поиска данных в базе данных с такими известными значениями:</p> <pre class="brush: php noskimlinks noskimwords">function checkZipCode($value) {$zipcheck = "SELECT COUNT(*) FROM `database`.`zipcodes` WHERE value="".filter_var(mysql_real_escape_string($value),FILTER_SANITIZE_NUMBER_INT).""";$count = mysql_query($zipcheck);if($count==1) {return TRUE;} else {return FALSE;}}</pre> <p>Могут быть созданы другие пользовательские функции, которые не полагаются на базы данных известных значений и могут быть созданы путем проверки магических кавычек, удаления слэшей и экранирования для вставки в базу данных:</p> <pre class="brush: php noskimlinks noskimwords">function cleanString($string) {$detagged = strip_tags($string);if(get_magic_quotes_gpc()) {$stripped = stripslashes($detagged);$escaped = mysql_real_escape_string($stripped);} else {$escaped = mysql_real_escape_string($detagged);}return $escaped;}</pre> <p>Возможности бесконечны, особенно если вы интегрируете регулярные выражения, но в большинстве случаев расширение PHP Filters должно быть достаточным.</p> <ul class="webroundup"><li>Следуйте за нами в <span>Twitter</span> или подписаться на <span>Nettuts + RSS Feed</span> для получения ежедневных веб-разработок и статей.</li> </ul><p> <br></p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825747-ochistka-s-pomoschyu-php" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="PHP" href="https://norma-studio.github.io/article5/220825747-ochistka-s-pomoschyu-php" class="tm-article-body__tags-item-link">PHP</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
35845</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
567</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
