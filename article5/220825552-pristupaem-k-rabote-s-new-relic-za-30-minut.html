
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Приступаем к работе с New Relic за 30 минут... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Приступаем к работе с New Relic за 30 минут... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Приступаем к работе с New Relic за 30 минут... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Приступаем к работе с New Relic за 30 минут... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Я помню, как несколько лет назад я работал над-Rails-риложением, и кто-то предложил идею использовать эту новую службу, которая еще только появилась. Она называлась New Relic, и они обещали дать вам больше информации о производительности вашего приложения Rails, чем вы когда-либо могли получить. Мы решили попробовать, и это было впечатляюще, что ещ...">
<meta property="og:description" content="Я помню, как несколько лет назад я работал над-Rails-риложением, и кто-то предложил идею использовать эту новую службу, которая еще только появилась. Она называлась New Relic, и они обещали дать вам больше информации о производительности вашего приложения Rails, чем вы когда-либо могли получить. Мы решили попробовать, и это было впечатляюще, что ещ...">
<meta name="twitter:description" content="Я помню, как несколько лет назад я работал над-Rails-риложением, и кто-то предложил идею использовать эту новую службу, которая еще только появилась. Она называлась New Relic, и они обещали дать вам больше информации о производительности вашего приложения Rails, чем вы когда-либо могли получить. Мы решили попробовать, и это было впечатляюще, что ещ...">
<meta property="aiturec:description" content="Я помню, как несколько лет назад я работал над-Rails-риложением, и кто-то предложил идею использовать эту новую службу, которая еще только появилась. Она называлась New Relic, и они обещали дать вам больше информации о производительности вашего приложения Rails, чем вы когда-либо могли получить. Мы решили попробовать, и это было впечатляюще, что ещ...">
<meta property="og:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2013/09/newrelic_start.png">
<meta property="aiturec:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2013/09/newrelic_start.png">
<meta name="twitter:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2013/09/newrelic_start.png">
<meta property="vk:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2013/09/newrelic_start.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2013/09/newrelic_start.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825552-pristupaem-k-rabote-s-new-relic-za-30-minut.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825552-pristupaem-k-rabote-s-new-relic-za-30-minut.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825552-pristupaem-k-rabote-s-new-relic-za-30-minut.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825552-pristupaem-k-rabote-s-new-relic-za-30-minut.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825552-pristupaem-k-rabote-s-new-relic-za-30-minut.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825552-pristupaem-k-rabote-s-new-relic-za-30-minut.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825552-pristupaem-k-rabote-s-new-relic-za-30-minut.html" title="Приступаем к работе с New Relic за 30 минут... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Приступаем к работе с New Relic за 30 минут... | envatomarket.ru | norma-studio.github.io" title="Приступаем к работе с New Relic за 30 минут... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/e_09402063.jpg" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825552-pristupaem-k-rabote-s-new-relic-za-30-minut.html" class="tm-user-info__username" title="
А. Карпов" aria-label="
А. Карпов">
А. Карпов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Приступаем к работе с New Relic за 30 минут...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825552-pristupaem-k-rabote-s-new-relic-za-30-minut" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Ruby" href="https://norma-studio.github.io/article5/220825552-pristupaem-k-rabote-s-new-relic-za-30-minut" class="tm-article-snippet__hubs-item-link"><span>Ruby</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825552-pristupaem-k-rabote-s-new-relic-za-30-minut.html" />
    <link itemprop="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2013/09/newrelic_start.png">
    <meta itemprop="headline name" content="Приступаем к работе с New Relic за 30 минут... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Я помню, как несколько лет назад я работал над-Rails-риложением, и кто-то предложил идею использовать эту новую службу, которая еще только появилась. Она называлась New Relic, и они обещали дать вам больше информации о производительности вашего приложения Rails, чем вы когда-либо могли получить. Мы решили попробовать, и это было впечатляюще, что ещ...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Я помню, как несколько лет назад я работал над-Rails-риложением, и кто-то предложил идею использовать эту новую службу, которая еще только появилась. Она называлась New Relic, и они обещали дать вам больше информации о производительности вашего приложения Rails, чем вы когда-либо могли получить. Мы решили попробовать, и это было впечатляюще, что ещ...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Я помню, как несколько лет назад я работал над Rails риложением, и кто-то предложил идею использовать эту новую службу, которая еще только появилась. Она называлась <span>New Relic</span>, и они обещали дать вам больше информации о производительности вашего приложения Rails, чем вы когда-либо могли получить. Мы решили попробовать, и это было впечатляюще, что еще важнее, что это действительно была необходимая для экосистемы веб-разработки Ruby система.</p><p></p> <div> <strong>Спонсируемый контент</strong> <p>Данный контент был заказан <span>New Relic</span> и было написан и/или отредактирован командой Tuts +. Цель спонсируемого контента - публиковать актуальные и объективные обучающие материалы, тематические исследования и вдохновляющие интервью, которые предлагают настоящую образовательную ценность для наших читателей и позволяют нам финансировать создание более полезного контента.</p> </div> <p>А теперь мы быстро перенесемся вперед, и вам будет трудно найти веб-приложение Ruby, в котором не подключен New Relic. New Relic как компания продолжает предоставлять инструменты для мониторинга ваших Ruby приложений, но они также разветвлены на многие другие языки, такие как <span>Java</span>, <span>Python</span> и даже <span>.Net</span>. Но, конечно, по мере того, как растет количество функций, которые вы предоставляете, так же растет и сложность и объем документации. Трудно понять, с чего начать, особенно если вы еще не эксперт.</p> <p>Сегодня я думал, что мы можем вернуться к истокам New Relic и посмотреть, как мы можем начать работу с сервисом для мониторинга <span>Rails</span> приложения.</p> <hr><h2>Базовое Rails Приложение</h2> <p>Чтобы использовать New Relic, нам нужно что-то контролировать, поэтому давайте создадим базовое Rails приложение «Hello World».</p> <p>Приложение, которое мы создаем, будет распологаться под дерикторией <code>~/projects/tmp/newrelic</code> и будет называться <code>newrelic_rails1</code>. Я предполагаю, что у вас уже установлен Rails:</p> <pre class="brush: bash noskimlinks noskimwords">cd ~/projects/tmp/newrelicrails new newrelic_rails1cd newrelic_rails1</pre> <p>Нам не так много нужно сделать, чтобы создать наше приложение «Hello World». Нам нужен новый контроллер:</p> <pre class="brush: bash noskimlinks noskimwords">rails g controller hello</pre> <p>Теперь нам нужен только маршрут, чтобы корневой путь приложения указывал на наш контроллер. Нам также нужно отображение со словами «Hello World». Учитывая все это, наш <code>config/routes.rb</code> должен выглядеть следующим образом:</p> <pre class="brush: ruby noskimlinks noskimwords">NewrelicRails1::Application.routes.draw do  root "hello#index"end</pre> <p>Наш контроллер (<code>app/controller/hello_controller.rb</code>) будет выглядеть следующим образом:</p> <pre class="brush: ruby noskimlinks noskimwords">class HelloController &gt; ApplicationController  def index  endend</pre> <p>И наше отображение (<code>app/views/hello/index.html.erb</code>) будет похоже на:</p> <pre class="brush: ruby noskimlinks noskimwords">&lt;h1&gt;Hello World!&lt;/h1&gt;</pre> <p>Теперь мы можем запустить наш сервер:</p> <pre class="brush: bash noskimlinks noskimwords">rails s</pre> <p>Когда мы запросим с помощью <span>curl</span> <code>localhost:3000</code>, мы получим:</p> <pre class="brush: html noskimlinks noskimwords">&lt;!DOCTYPE html&gt;&lt;html&gt;...&lt;body&gt;&lt;h1&gt;Hello World!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;</pre> <p>Все работает!</p> <hr><h2>Присоединение к New Relic</h2> <p>С Ruby это сделать очень просто. Мы добавляем gem в наш <code>Gemfile</code>, запускаем <code>bundle install</code>, кладем конфигурационный файл в папку config, и у нас есть все, что нам нужно. На самом деле, в New Relic очень хорошо все это расписано. Все, что вам нужно сделать, это войти в свою учетную запись, и если вы еще не развернули агент Relic Relic, и дальше все будет довольно очевидно:</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2013/09/newrelic_start.png" alt="Приступаем к работе с New Relic за 30 минут..." title="Приступаем к работе с New Relic за 30 минут..." width="50" height="50"></figure><p>Во-первых, мы устанавливаем gem New Relic, добавляя его в наш <code>Gemfile</code> согласно инструкциям:</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2013/09/newrelic_install_gem.png" alt="Приступаем к работе с New Relic за 30 минут..." title="Приступаем к работе с New Relic за 30 минут..." width="50" height="50"></figure><p>Теперь наш <code>Gemfile</code> будет выглядеть следующим образом:</p> <pre class="brush: ruby noskimlinks noskimwords">source "https://rubygems.org"gem "rails", "4.0.0"gem "sqlite3"gem "sass-rails", "~&gt; 4.0.0"gem "uglifier", "&gt;= 1.3.0"gem "coffee-rails", "~&gt; 4.0.0"gem "jquery-rails"gem "turbolinks"gem "jbuilder", "~&gt; 1.2"group :doc do  gem "sdoc", require: falseendgem "newrelic_rpm"</pre> <p>Всякий раз, когда мы добавляем что-либо в <code>Gemfile</code>, нам нужно запускать:</p> <pre class="brush: bash noskimlinks noskimwords">bundle install</pre> <p>Нам также нужен <code>newrelic.yml</code>, который вы можете скачать из New Relic:</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2013/09/newrelic_config_download.png" alt="Приступаем к работе с New Relic за 30 минут..." title="Приступаем к работе с New Relic за 30 минут..." width="50" height="50"></figure><p>Он будет предварительно настроен с вашим лицензионным ключом. Мы должны поместить этот файл в <code>config/newrelic.yml</code>.</p> <p>На этом этапе, если мы запустили наше приложение в боевом или стейдж режиме, мы уже получили данные в нашей учетной записи New Relic. Итак, давайте сделаем так:</p> <pre class="brush: bash noskimlinks noskimwords">RAILS_ENV=production rails s</pre> <p>На этот раз, когда мы дергаем curl"ом  <code>localhost:3000</code>, то получаем:</p> <pre class="brush: html noskimlinks noskimwords">&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;script type=&amp;quot;text/javascript&amp;quot;&gt;var NREUMQ=NREUMQ||[];NREUMQ.push([&amp;quot;mark&amp;quot;,&amp;quot;firstbyte&amp;quot;,new Date().getTime()]);&lt;/script&gt;  &lt;title&gt;NewrelicRails1&lt;/title&gt;  &lt;link data-turbolinks-track=&amp;quot;true&amp;quot; href=&amp;quot;/stylesheets/application.css&amp;quot; media=&amp;quot;all&amp;quot; rel=&amp;quot;stylesheet&amp;quot; /&gt;  &lt;script data-turbolinks-track=&amp;quot;true&amp;quot; src=&amp;quot;/javascripts/application.js&amp;quot;&gt;&lt;/script&gt;  &lt;meta content=&amp;quot;authenticity_token&amp;quot; name=&amp;quot;csrf-param&amp;quot; /&gt;&lt;meta content=&amp;quot;i5rBPaG52bzM5Kn0SJwIbq6Qz0dG0KsIlcd8tb9vMV8=&amp;quot; name=&amp;quot;csrf-token&amp;quot; /&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Hello World!&lt;/h1&gt;&lt;script type=&amp;quot;text/javascript&amp;quot;&gt;if (typeof NREUMQ !== &amp;quot;undefined&amp;quot;) { if (!NREUMQ.f) { NREUMQ.f=function() {NREUMQ.push([&amp;quot;load&amp;quot;,new Date().getTime()]);var e=document.createElement(&amp;quot;script&amp;quot;);e.type=&amp;quot;text/javascript&amp;quot;;e.src=((&amp;quot;http:&amp;quot;===document.location.protocol)?&amp;quot;http:&amp;quot;:&amp;quot;https:&amp;quot;) + &amp;quot;//&amp;quot; +  &amp;quot;js-agent.newrelic.com/nr-100.js&amp;quot;;document.body.appendChild(e);if(NREUMQ.a)NREUMQ.a();};NREUMQ.a=window.onload;window.onload=NREUMQ.f;};NREUMQ.push([&amp;quot;nrfj&amp;quot;,&amp;quot;beacon-3.newrelic.com&amp;quot;,&amp;quot;b9119aa82e&amp;quot;,&amp;quot;2507356&amp;quot;,&amp;quot;cglYTRENCF4ERBtZB10KWRYKDABXGQ==&amp;quot;,0,21,new Date().getTime(),&amp;quot;&amp;quot;,&amp;quot;&amp;quot;,&amp;quot;&amp;quot;,&amp;quot;&amp;quot;,&amp;quot;&amp;quot;]);}&lt;/script&gt;&lt;p&gt;&lt;/body&gt;&lt;/html&gt;</pre> <p>На наши страницы добавлена куча JavaScript, так что New Relic может контролировать время браузера. Это один из способов сказать, что наша интеграция с New Relic работает. Но это не единственный способ: New Relic также создает файл лога:</p> <pre class="brush: bash noskimlinks noskimwords">% cat log/newrelic_agent.logLogfile created on 2013-09-22 16:23:13 +1000 by logger.rb/36483[09/22/13 16:23:13 +1000 skorks-envato (12424)] INFO : Starting the New Relic agent in &amp;quot;production&amp;quot; environment.[09/22/13 16:23:13 +1000 skorks-envato (12424)] INFO : To prevent agent startup add a NEWRELIC_ENABLE=false environment variable or modify the &amp;quot;production&amp;quot; section of your newrelic.yml.[09/22/13 16:23:13 +1000 skorks-envato (12424)] INFO : Reading configuration from config/newrelic.yml[09/22/13 16:23:13 +1000 skorks-envato (12424)] INFO : Enabling the Request Sampler.[09/22/13 16:23:13 +1000 skorks-envato (12424)] INFO : Environment: production[09/22/13 16:23:13 +1000 skorks-envato (12424)] INFO : Dispatcher: webrick[09/22/13 16:23:13 +1000 skorks-envato (12424)] INFO : Application: My Application[09/22/13 16:23:13 +1000 skorks-envato (12424)] INFO : Installing ActiveRecord 4 instrumentation[09/22/13 16:23:13 +1000 skorks-envato (12424)] INFO : Installing Net instrumentation[09/22/13 16:23:13 +1000 skorks-envato (12424)] INFO : Installing deferred Rack instrumentation[09/22/13 16:23:13 +1000 skorks-envato (12424)] INFO : Installing Rails 4 Controller instrumentation[09/22/13 16:23:13 +1000 skorks-envato (12424)] INFO : Installing Rails 4 view instrumentation[09/22/13 16:23:13 +1000 skorks-envato (12424)] INFO : Installing Rails4 Error instrumentation[09/22/13 16:23:13 +1000 skorks-envato (12424)] INFO : Finished instrumentation[09/22/13 16:23:13 +1000 skorks-envato (12424)] INFO : Doing deferred dependency-detection before Rack startup[09/22/13 16:23:16 +1000 skorks-envato (12424)] INFO : Reporting to: https://rpm.newrelic.com/accounts/303380/applications/2507356</pre> <p>Мы также можем проверить нашу учетную запись New Relic, чтобы убедиться, что появилось новое приложение для мониторинга :</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2013/09/newrelic_monitored_application.png" alt="Приступаем к работе с New Relic за 30 минут..." title="Приступаем к работе с New Relic за 30 минут..." width="50" height="50"></figure><p>Однако есть несколько неприятных моментов:</p> <ul><li>Наше приложение называется «Мое приложение»,</li> <li>Мы приняли все значения конфигурации по умолчанию, которые могут и не соответствовать нашему приложению</li> <li>Нам пришлось запустить наш сервер в боевом режиме (что возможно только потому, что это совершенно новое приложение, которое не полагается на какую-либо внешнюю инфраструктуру)</li> </ul><p>Давайте посмотрим на наш файл <code>newrelic.yml</code> немного подробнее, чтобы увидеть, как мы можем отслеживать производительность нашего приложения в точности так, как мы сами этого хотим.</p> <hr><h2>Погружаемся в конфигурацию New Relic</h2> <p>Прежде всего, файл конфигурации New Relic очень хорошо прокомментирован, и я рекомендую вам прочитать комментарии для различных параметров конфигурации, чтобы понять, что они делают.</p> <p>Во-вторых, конфигурация New Relic осведомлена об окружении, а конфигурация для всех окружений определена в одном файле <code>newrelic.yml</code>, это очень похоже на то, как работает файл Rails <code>database.yml</code>. Мы определяем совокупность общих значений конфигурации, а затем переопределяем соответствующие значения в конкретных блоках окружения, например:</p> <pre class="brush: plain noskimlinks noskimwords">common: &amp;amp;default_settings  license_key: "&lt;your licence key&gt;"  app_name: My Application  monitor_mode: true  ...development:  &lt;&lt;: *default_settings  monitor_mode: falsetest:  &lt;&lt;: *default_settings  monitor_mode: falseproduction:  &lt;&lt;: *default_settings  monitor_mode: truestaging:  &lt;&lt;: *default_settings  monitor_mode: true</pre> <p>Сразу можно заметить то, как мы можем исправить некоторые из пунктов, которые были упомянуты выше. Если мы не хотим запускать наше приложение в боевом режиме, пока мы настраиваем нашу конфигурацию, все, что нам нужно сделать, это включить мониторинг в режиме разработки (нам нужно будет помнить о том, чтобы отключить это, когда сделаем нашу конфигурацию, поскольку мы не хотим, чтобы данные разработки загромождали нашу учетную запись New Relic).</p> <pre class="brush: plain noskimlinks noskimwords">development:  &lt;&lt;: *default_settings  monitor_mode: true</pre> <p>Мы также должны переопределить наше имя приложения для каждого окружения, которое у нас есть, чтобы убедиться, что они контролируются отдельно, и имя приложения имеет смысл:</p> <pre class="brush: plain noskimlinks noskimwords">  common: &amp;amp;default_settings    license_key: "&lt;your licence key&gt;"    app_name: newrelic_rails1    monitor_mode: true    ...  development:    &lt;&lt;: *default_settings    monitor_mode: true    app_name: newrelic_rails1 (Development)  test:    &lt;&lt;: *default_settings    monitor_mode: false    app_name: newrelic_rails1 (Test)  production:    &lt;&lt;: *default_settings    monitor_mode: true    app_name: newrelic_rails1 (Production)  staging:    &lt;&lt;: *default_settings    monitor_mode: true    app_name: newrelic_rails1 (Staging)</pre> <p>С помощью этих настроек, когда мы запускаем наш сервер в режиме разработки и вызываем <code>curl localhost: 3000</code>:</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2013/09/newrelic_monitor_development.png" alt="Приступаем к работе с New Relic за 30 минут..." title="Приступаем к работе с New Relic за 30 минут..." width="50" height="50"></figure><p>Теперь мы отслеживаем наше приложение в режиме разработки, а наше имя приложения - это то, что мы ожидаем. Если ваше приложение говорит, что оно не получает никаких данных, дайте ей минуту, для получения данных потребуется немного времени.</p> <p>Следующим наиболее интересным (и часто самым запутанным) значением конфигурации является значение Apdex T. В отличие от большинства других параметров конфигурации это значение не расположено в файле <code>newrelic.yml</code>, но вместо этого находится в настройках приложения в New Relic:</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2013/09/newrelic_apdex.png" alt="Приступаем к работе с New Relic за 30 минут..." title="Приступаем к работе с New Relic за 30 минут..." width="50" height="50"></figure><p>Если вы хотите настроить значение Apdex T, вам нужно сделать это здесь, но что это за параметр и каково его правильное значение? New Relic объясняет его следующим образом:</p> <blockquote><p>Значение Apdex T вашего приложения  установлено на 0,5 секунды. Это означает, что запросы, отвечающие менее чем за 0,5 секунды, удовлетворяют пользователя (s), ответив от 0,5 секунды до 2,0 секунд, пользователи терпят (t), а более чем за 2 секунды реагируют разочарованием (f).</p></blockquote> <p>По сути, New Relic использует значение Apdex для оценки работоспособности вашего приложения в зависимости от производительности, поэтому, если многие запросы, которые отслеживаются New Relic, занимают больше времени, чем ваше значение Apdex, New Relic посчитает, что ваше приложение работает плохо, и если вы настроили оповещения, уведомит вас об этом. В принципе, вам нужно выяснить то, как быстро вы хотите, чтобы каждый запрос на сервер выполнялся вашим приложением, поэтому, если бэкэнд-запрос, занимающий две секунды вас не сильно беспокоит, то можете установить значение Apdex равным 2.0, но если вам нужны ответы, которые будет возвращены в течение 100 мс, тогда вы должны установить значение Apdex равным 0,1.</p> <p>Если у вас есть новое приложение, вы можете установить значение Apdex на ту производительность, которую вы хотите получить от своего приложения. Если ваше приложение является уже существующим, у вас могут быть некоторые показатели относительно того, насколько быстро оно/должно выполняться, и вы можете руководствоваться этими данными. Все запросы, которые выполняются сервером меньше, чем значение Apdex T, New Relic будет считать хорошими. Все запросы, выполненные в Apdex * 4 секунды, будут считаться допустимыми (т. е. пользователи могут это терпеть). Все ответы, которые занимают больше времени, чем Apdex * 4, будут считаться разочаровывающими (разочарованные пользователи не склонны возвращаться на ваш сайт). Таким образом, установите значение Apdex T таким образом, чтобы на самом деле получить из него полезную информацию, фактическое значение зависит от вашей предметной области и того, чего вы хотите достичь (с точки зрения производительности), нет правильного или неправильного ответа.</p> <p>Мы установим наше значение Apdex T-100ms (0.1), так как все, что у нас есть, - это приложение Hello World, и оно должно иметь возможность быстро вернуть ответ (даже в режиме разработки).</p> <hr><h2>Еще немного настроек New Relic</h2> <p>Было немного забавно, что большая часть конфигурации содержится в файле <code>newrelic.yml</code>, но значение Apdex T находится в настройках приложения, поэтому New Relic теперь позволяет переместить все значения конфигурации из файла YAML в New Relic:</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=494/net/uploads/2013/09/newrelic_move_configuration.png" alt="Приступаем к работе с New Relic за 30 минут..." title="Приступаем к работе с New Relic за 30 минут..." width="50" height="50"></figure><p>Преимущество этого заключается в том, что вам не нужно выкатывать свое приложение каждый раз, когда вы хотите поменять свои значения конфигурации, поэтому это определенно заслуживает рассмотрения. На данный момент мы будем придерживаться YAML файла.</p> <p>Итак, какие еще есть полезные параметры New Relic, о которых мы должны знать?</p> <p>Ну, есть набор параметров, касающихся файла лога New Relic агента:</p> <pre class="brush: plain noskimlinks noskimwords">log_level: infolog_file_path: "log"log_file_name: "newrelic_agent.log"</pre> <p>У них есть значения по умолчанию, но если мы хотим, чтобы файл лога был в определенном месте, или если мы хотим видеть больше или меньше информации в файле, мы можем легко контролировать это. Поскольку мы просто настраиваем New Relic, мы устанавливаем уровень лога в <strong>debug</strong>, чтобы убедиться, что мы не пропустили какую-либо важную информацию (при развертывании мы можем захотеть установить уровень в <strong>warn</strong> или даже <strong>error</strong>).</p> <p>Теперь мы получаем огромное количество информации в логах, которая (если читать внимательно) может дать нам много информации о том, как работает New Relic:</p> <pre class="brush: bash noskimlinks noskimwords">% cat log/newrelic_agent.log&lt;/p&gt;[09/22/13 17:23:39 +1000 skorks-envato (12925)] INFO : Starting the New Relic agent in &amp;quot;development&amp;quot; environment.[09/22/13 17:23:39 +1000 skorks-envato (12925)] INFO : To prevent agent startup add a NEWRELIC_ENABLE=false environment variable or modify the &amp;quot;development&amp;quot; section of your newrelic.yml.[09/22/13 17:23:39 +1000 skorks-envato (12925)] INFO : Reading configuration from config/newrelic.yml[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Not in Rake environment so skipping blacklisted_rake_tasks check: uninitialized constant Rake[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Updating config (add) from NewRelic::Agent::Configuration::YamlSource. Results:[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : {...}[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Not in Rake environment so skipping blacklisted_rake_tasks check: uninitialized constant Rake[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Updating config (add) from NewRelic::Agent::Configuration::ManualSource. Results:[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : {...}[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Not in Rake environment so skipping blacklisted_rake_tasks check: uninitialized constant Rake[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Installed New Relic Browser Monitoring middleware[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Installed New Relic Agent Hooks middleware[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Agent is configured to use SSL[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Using JSON marshaller[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Transaction tracing threshold is 2.0 seconds.[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Ignoring errors of type "ActionController::RoutingError"[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Ignoring errors of type "Sinatra::NotFound"[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Errors will be sent to the New Relic service.[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Ignoring errors of type "ActionController::RoutingError"[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Ignoring errors of type "Sinatra::NotFound"[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : RequestSampler max_samples set to 1200[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Resetting RequestSampler[09/22/13 17:23:39 +1000 skorks-envato (12925)] INFO : Enabling the Request Sampler.[09/22/13 17:23:39 +1000 skorks-envato (12925)] INFO : Environment: development[09/22/13 17:23:39 +1000 skorks-envato (12925)] INFO : Dispatcher: webrick[09/22/13 17:23:39 +1000 skorks-envato (12925)] INFO : Application: newrelic_rails1 (Development)[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : EnvironmentReport failed to retrieve value for &amp;quot;Plugin List&amp;quot;: undefined method `plugins" for #&lt;Rails::Application::Configuration:0x007fb232401a00&gt;[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : EnvironmentReport failed to retrieve value for &amp;quot;JRuby version&amp;quot;: uninitialized constant NewRelic::EnvironmentReport::JRUBY_VERSION[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : EnvironmentReport failed to retrieve value for &amp;quot;Java VM version&amp;quot;: uninitialized constant NewRelic::EnvironmentReport::ENV_JAVA[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : EnvironmentReport ignoring value for &amp;quot;Rails threadsafe&amp;quot; which came back falsey: nil[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Creating Ruby Agent worker thread.[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Creating New Relic thread: Worker Loop[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : New Relic Ruby Agent 3.6.7.152 Initialized: pid = 12925[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Connecting Process to New Relic: bin/rails[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Not in Rake environment so skipping blacklisted_rake_tasks check: uninitialized constant Rake[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Created net/http handle to collector.newrelic.com:443[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Sending request to collector.newrelic.com:443/agent_listener/12/1f69cbd2a641bde79bdb5eb4c86a0ab32360e1f8/get_redirect_host?marshal_format=json[09/22/13 17:23:39 +1000 skorks-envato (12925)] INFO : Installing ActiveRecord 4 instrumentation[09/22/13 17:23:39 +1000 skorks-envato (12925)] INFO : Installing Net instrumentation[09/22/13 17:23:39 +1000 skorks-envato (12925)] INFO : Installing deferred Rack instrumentation[09/22/13 17:23:39 +1000 skorks-envato (12925)] INFO : Installing Rails 4 Controller instrumentation[09/22/13 17:23:39 +1000 skorks-envato (12925)] INFO : Installing Rails 4 view instrumentation[09/22/13 17:23:39 +1000 skorks-envato (12925)] INFO : Installing Rails4 Error instrumentation[09/22/13 17:23:39 +1000 skorks-envato (12925)] INFO : Finished instrumentation[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Registered NewRelic::Agent::Samplers::CpuSampler for harvest time sampling.[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : Registered NewRelic::Agent::Samplers::MemorySampler for harvest time sampling.[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : NewRelic::Agent::Samplers::ObjectSampler not supported on this platform.[09/22/13 17:23:39 +1000 skorks-envato (12925)] DEBUG : NewRelic::Agent::Samplers::DelayedJobSampler not supported on this platform.[09/22/13 17:23:39 +1000 skorks-envato (12925)] INFO : Doing deferred dependency-detection before Rack startup[09/22/13 17:23:40 +1000 skorks-envato (12925)] DEBUG : Uncompressed content returned[09/22/13 17:23:40 +1000 skorks-envato (12925)] DEBUG : Created net/http handle to collector-1.newrelic.com:443[09/22/13 17:23:40 +1000 skorks-envato (12925)] DEBUG : Sending request to collector-1.newrelic.com:443/agent_listener/12/1f69cbd2a641bde79bdb5eb4c86a0ab32360e1f8/connect?marshal_format=json[09/22/13 17:23:42 +1000 skorks-envato (12925)] DEBUG : Uncompressed content returned[09/22/13 17:23:42 +1000 skorks-envato (12925)] DEBUG : Server provided config: {...}[09/22/13 17:23:42 +1000 skorks-envato (12925)] DEBUG : Not in Rake environment so skipping blacklisted_rake_tasks check: uninitialized constant Rake[09/22/13 17:23:42 +1000 skorks-envato (12925)] DEBUG : Updating config (add) from NewRelic::Agent::Configuration::ServerSource. Results:[09/22/13 17:23:42 +1000 skorks-envato (12925)] DEBUG : {...}[09/22/13 17:23:42 +1000 skorks-envato (12925)] DEBUG : Wiring up Cross Application Tracing to events after finished configuring[09/22/13 17:23:42 +1000 skorks-envato (12925)] DEBUG : Connected to New Relic Service at collector-1.newrelic.com[09/22/13 17:23:42 +1000 skorks-envato (12925)] DEBUG : Agent Run       = 575257565.[09/22/13 17:23:42 +1000 skorks-envato (12925)] DEBUG : Connection data = {...}[09/22/13 17:23:42 +1000 skorks-envato (12925)] INFO : Reporting to: https://rpm.newrelic.com/accounts/303380/applications/2507376[09/22/13 17:23:42 +1000 skorks-envato (12925)] DEBUG : Browser timing header: &amp;quot;&lt;script type=\&amp;quot;text/javascript\&amp;quot;&gt;var NREUMQ=NREUMQ||[];NREUMQ.push([\&amp;quot;mark\&amp;quot;,\&amp;quot;firstbyte\&amp;quot;,new Date().getTime()]);&lt;/script&gt;&amp;quot;[09/22/13 17:23:42 +1000 skorks-envato (12925)] DEBUG : Browser timing static footer: &amp;quot;if (!NREUMQ.f) { NREUMQ.f=function() {\nNREUMQ.push([\&amp;quot;load\&amp;quot;,new Date().getTime()]);\nvar e=document.createElement(\&amp;quot;script\&amp;quot;);\ne.type=\&amp;quot;text/javascript\&amp;quot;;\ne.src=((\&amp;quot;http:\&amp;quot;===document.location.protocol)?\&amp;quot;http:\&amp;quot;:\&amp;quot;https:\&amp;quot;) + \&amp;quot;//\&amp;quot; +\n  \&amp;quot;js-agent.newrelic.com/nr-100.js\&amp;quot;;\ndocument.body.appendChild(e);\nif(NREUMQ.a)NREUMQ.a();\n};\nNREUMQ.a=window.onload;window.onload=NREUMQ.f;\n};\n&amp;quot;[09/22/13 17:23:42 +1000 skorks-envato (12925)] DEBUG : Real User Monitoring is using JSONP protocol[09/22/13 17:23:42 +1000 skorks-envato (12925)] DEBUG : Reporting performance data every 60 seconds.[09/22/13 17:23:42 +1000 skorks-envato (12925)] DEBUG : Running worker loop[09/22/13 17:23:50 +1000 skorks-envato (12925)] DEBUG : Attempting to insert RUM header at beginning of head.</pre> <p>Например, мы можем видеть, что:</p> <ul><li>Мы можем отключить мониторинг, даже если он включен в файле конфигурации, установив переменную среды <code>NEWRELIC_ENABLE = false</code> </li> <li>Мы видим, что New Relic вставляет кучу промежуточного ПО Rack</li> <li>Мы используем Webrick в качестве сервера, который, очевидно, находится в режиме разработки, но в производстве было бы хорошо подтвердить, что New Relic распознает сервер, который мы используем</li> <li>New Relic отправляет данные на <code>collector.newrelic.com:443</code> </li> <li>New Relic отправляет данные каждые 60 секунд</li> <li>Реальный мониторинг пользователей осуществляется с помощью <span>JSONP</span> </li> </ul><p>Очень полезная информация, когда вы пытаетесь понять, как все взаимодействует.</p> <p>Большинство других параметров конфигурации довольно очевидны, например:</p> <pre class="brush: plain noskimlinks noskimwords">browser_monitoring:  auto_instrument: truecapture_params: false</pre> <p>Единственный параметр, о котором стоит задуматься, это:</p> <pre class="brush: plain noskimlinks noskimwords">transaction_tracer:  transaction_threshold: apdex_f</pre> <p>Трассировщик транзакций фиксирует подробные данные о запросах, которые занимают слишком много времени. Порог транзакции обычно является кратным (x4) значения Apdex, но часто бывает полезно развести эти значения друг от друга. Вы можете быть довольны оценкой Apdex в одну секунду, но вы можете захотеть получить подробные данные о запросах, которые занимают 1,5 секунды или дольше (вместо четырех секунд или дольше, которые будут логироваться по умолчанию). Таким образом, вы можете установить этот параметр отдельно:</p> <pre class="brush: plain noskimlinks noskimwords">transaction_tracer:  transaction_threshold: 1.5</pre> <hr><h2>Режим разработки New Relic</h2> <p>Одно из значений конфигурации, которое вы, возможно, заметили, было:</p> <pre class="brush: plain noskimlinks noskimwords">developer_mode: true</pre> <p>Это должно быть включено только при разработке (или вообще всегда выключено). В режиме разработки агент New Relic будет хранить данные о производительности за последние 100 запросов в памяти. Вы можете просмотреть эти данные в любое время, открыв ендпоинт  <code>/newrelic</code> вашего запущенного приложения:</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2013/09/newrelic_developer_mode.png" alt="Приступаем к работе с New Relic за 30 минут..." title="Приступаем к работе с New Relic за 30 минут..." width="50" height="50"></figure><p>Я почти никогда не использую его, но помните что он там есть, если вам это нужно.</p> <hr><h2>Уведомляем New Relic о развертываниях</h2> <p>Всякий раз, когда вы работаете над производительностью вашего приложения, всегда хорошо знать, оказало ли какое-либо конкретное развертывание положительное или отрицательное влияние на производительность. С этой целью вы можете уведомлять New Relic каждый раз, когда вы выполняете развертывание. Таким образом, если производительность ухудшится или улучшится, вы сможете увидеть, какое развертывание стало тому виновником. New Relic предоставляет <span>Capistrano</span> для этого, но я предпочитаю командную строку:</p> <pre class="brush: bash noskimlinks noskimwords">% newrelic deployments -a "newrelic_rails1 (Development)" -e "development" -u "skorks" -r "abc123"Recorded deployment to "newrelic_rails1 (Development)" (2013-09-22 18:19:13 +1000)</pre> <p>Главное - правильно указать имя приложения, настроенное в файле <code>newrelic.yml</code>.</p> <p>Мы получим красивые линии на соответствующих графиках New Relic, которые будут указывать, когда произошло развертывание.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2013/09/newrelic_deployment.png" alt="Приступаем к работе с New Relic за 30 минут..." title="Приступаем к работе с New Relic за 30 минут..." width="50" height="50"></figure><hr><h2>Вывод</h2> <p>Теперь вы много знаете о том, как работает New Relic и как начать использовать его для мониторинга Rails приложения. Но правильная настройка - это всего лишь половина работы, какие метрики будут захватывать для вас New Relic? И как вы можете использовать их для повышения производительности вашего приложения? Мы рассмотрим некоторые из них в следующей статье. На данный момент вы можете настроить New Relic для своего приложения Rails, и если у вас есть какие-либо вопросы, не забудьте оставить свой комментарий.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825552-pristupaem-k-rabote-s-new-relic-za-30-minut" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Ruby" href="https://norma-studio.github.io/article5/220825552-pristupaem-k-rabote-s-new-relic-za-30-minut" class="tm-article-body__tags-item-link">Ruby</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
44571</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
659</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
