
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Как использовать новые Relic-Insights, чтобы узнать больше о ваших клиентах... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Как использовать новые Relic-Insights, чтобы узнать больше о ваших клиентах... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Как использовать новые Relic-Insights, чтобы узнать больше о ваших клиентах... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Как использовать новые Relic-Insights, чтобы узнать больше о ваших клиентах... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Со дня на день большая работа по управлению программным бизнесом сводится к тому, чтобы задавать вопросы и отвечать на них и пытаться принимать правильные решения на их основе....">
<meta property="og:description" content="Со дня на день большая работа по управлению программным бизнесом сводится к тому, чтобы задавать вопросы и отвечать на них и пытаться принимать правильные решения на их основе....">
<meta name="twitter:description" content="Со дня на день большая работа по управлению программным бизнесом сводится к тому, чтобы задавать вопросы и отвечать на них и пытаться принимать правильные решения на их основе....">
<meta property="aiturec:description" content="Со дня на день большая работа по управлению программным бизнесом сводится к тому, чтобы задавать вопросы и отвечать на них и пытаться принимать правильные решения на их основе....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut1.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut1.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut1.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut1.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut1.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825320-kak-ispolzovat-novye-relic-insights-chtoby-uznat-bolshe-o-vashih-klientah.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825320-kak-ispolzovat-novye-relic-insights-chtoby-uznat-bolshe-o-vashih-klientah.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825320-kak-ispolzovat-novye-relic-insights-chtoby-uznat-bolshe-o-vashih-klientah.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825320-kak-ispolzovat-novye-relic-insights-chtoby-uznat-bolshe-o-vashih-klientah.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825320-kak-ispolzovat-novye-relic-insights-chtoby-uznat-bolshe-o-vashih-klientah.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825320-kak-ispolzovat-novye-relic-insights-chtoby-uznat-bolshe-o-vashih-klientah.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825320-kak-ispolzovat-novye-relic-insights-chtoby-uznat-bolshe-o-vashih-klientah.html" title="Как использовать новые Relic-Insights, чтобы узнать больше о ваших клиентах... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Как использовать новые Relic-Insights, чтобы узнать больше о ваших клиентах... | envatomarket.ru | norma-studio.github.io" title="Как использовать новые Relic-Insights, чтобы узнать больше о ваших клиентах... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/64533gfdsgf.jpg" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825320-kak-ispolzovat-novye-relic-insights-chtoby-uznat-bolshe-o-vashih-klientah.html" class="tm-user-info__username" title="
А. Лукичев" aria-label="
А. Лукичев">
А. Лукичев</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Как использовать новые Relic-Insights, чтобы узнать больше о ваших клиентах...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825320-kak-ispolzovat-novye-relic-insights-chtoby-uznat-bolshe-o-vashih-klientah" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="New Relic" href="https://norma-studio.github.io/article5/220825320-kak-ispolzovat-novye-relic-insights-chtoby-uznat-bolshe-o-vashih-klientah" class="tm-article-snippet__hubs-item-link"><span>New Relic</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825320-kak-ispolzovat-novye-relic-insights-chtoby-uznat-bolshe-o-vashih-klientah.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut1.jpg">
    <meta itemprop="headline name" content="Как использовать новые Relic-Insights, чтобы узнать больше о ваших клиентах... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Со дня на день большая работа по управлению программным бизнесом сводится к тому, чтобы задавать вопросы и отвечать на них и пытаться принимать правильные решения на их основе....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Со дня на день большая работа по управлению программным бизнесом сводится к тому, чтобы задавать вопросы и отвечать на них и пытаться принимать правильные решения на их основе....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Со дня на день большая работа по управлению программным бизнесом сводится к тому, чтобы задавать вопросы и отвечать на них и пытаться принимать правильные решения на их основе.<br></p><p>Некоторые из вопросов являются техническими, например «Какой самый популярный веб-браузер среди наших высокооплачиваемых клиентов на этой неделе?» Другие, такие как «Какие самые популярные функции в нашем приложении?», Расскажут вам, когда вы пытаетесь спланировать, где ваши ресурсы разработчика имеют наибольшее значение.</p><p>Иногда нет правильного ответа, но чаще всего то, что стоит между вами и хорошо информированным решением, - это просто отсутствие качественных данных.</p><p><span>New Relic Insights</span> - это <em>инструмент расширенной аналитики</em> эффективности (APA), призванный помочь вам ответить на эти (и многие другие) вопросы, связанные с бизнесом. Для этого он объединяет показатели производительности с соответствующими бизнес-параметрами и параметрами приложения, делая все это доступным для запросов, комбинирования и визуализации красивым способом. </p><p>Раньше такие исследования проводились с помощью сложных запросов и сценариев, использующих данные истории, специалистами по данным. Теперь, используя Insights, <em>вы</em> можете проводить транзакции близко к реальному времени, используя реальные данные от фактических посетителей.</p><h2>В этом учебнике</h2><p>Этот учебник представляет собой практическое введение в использование New Relic Insights в реальной прикладной среде. Лучший способ испытать и изучить Insights - это попробовать самим - и поэкспериментировать. Поэтому, вместо того, чтобы тратить много времени на теорию, мы будем сразу приступим к делу и исследуем инструмент шаг за шагом, узнавая о том, когда мы идем. </p><p>Начнем с того, что мы кратко остановимся на установке New Relic Insights. Затем мы будем копаться в данных: как запросить его, как визуализировать его и как заставить ваш код проходить в некоторых параметрах приложения. Наконец, мы возьмем все то, что мы изучили, и создадим панель поддержки клиентов, которую вы можете использовать, чтобы быстро выявлять проблемы и помогать своим клиентам в их проблемах с вашим приложением.</p><p>После завершения учебного пособия вам будет удобно изучать данные в New Relic Insights и использовать его для создания информационных панелей для представления информации, относящейся к различным заинтересованным сторонам вашей организации, от менеджмента до инженерии. </p><p>Основное понимание разработки программного обеспечения, PHP и SQL поможет вам пройти через учебник. Я буду использовать свое собственное приложение в качестве примера, но большая часть того, что мы сделаем, применима к практически любому веб-бизнесу. Таким образом, чтобы получить максимальную отдачу от учебника, я предлагаю вам выбрать собственное приложение и использовать его для проверки запросов и настроек панели, когда мы будем через них проходить. </p><h2>Начало работы с Relic Insights</h2><h3>Шаг 1: Настройте Relic Insights</h3><p>Если вы уже используете <em>инструменты мониторинга New Relic</em>, начать работу с Insights будет просто. Приложение собирает свои данные из других продуктов New Relic, таких как APM и браузер, поэтому дальнейшая установка не требуется. Просто нажмите на пункт меню <strong>Insights</strong> в строке меню New Relic и начните использовать его для изучения ваших данных.<br></p><p><em>Если вы новый пользователь</em>, начните <span>с подписки на новую учетную запись пользователя Relic</span>. Insights недоступна в качестве бесплатной версии, но 14-дневный период бесплатной пробной версии отлично подходит для использования.</p><p>После создания вашей учетной записи вам необходимо установить средство мониторинга APM на вашем сервере. Я описал шаги по установке инструмента в деталях в более <span>раннем учебном пособии о New Relic Alerts</span>. Следуйте инструкциям по установке из этого учебника, а затем, с New Relic, собирающим информацию из вашего приложения, вернитесь к этому руководству и переходите к следующему шагу.</p><h3>Шаг 2. Запустите свой первый запрос.</h3><p>Первое, что вы видите при запуске New Relic Insights, - это страница «Запрос». </p><p>Сначала, когда окно запроса смотрит на вас в верхней части страницы, эта страница может немного напугать. Однако, как только вы знаете, с чего начать, вы быстро сможете со всем разобраться.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut1.jpg" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Чтобы дать вам представление о данных, доступных для вас в Insights, давайте начнем с первого запроса. </p><p>В окне запроса в верхней части страницы напишите следующий запрос:</p><pre class="brush: sql noskimlinks noskimwords">SELECT count(*) FROM PageView SINCE 1 day ago</pre><p>Этот запрос показывает количество событий <strong>PageView</strong>, зарегистрированных за последние 24 часа.</p><p>Как видно из вышеприведенного запроса, NRQL очень похож на SQL, с некоторыми ограничениями, а также с рядом специфических функций и ключевых слов New Relic. В оставшейся части этого учебника вы увидите довольно много разных запросов, но если в любой момент вам нужно будет изучить специфику языка запросов, вы также можете взглянуть на ссылку <span>NRQL Reference</span>.</p><p>Нажмите «<strong>Выполнить</strong>», чтобы запустить запрос и просмотреть его результаты. </p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut2.jpg" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Теперь вы выполнили свой первый запрос NRQL. Затем вы, вероятно, захотите ознакомиться с данными, которые New Reic предоставляет для ваших запросов.</p><p>Один из способов - просто написать другой запрос. Поле запроса поставляется с автозаполнением, поэтому это удобный способ посмотреть, какие результаты возникают из ваших запросов.</p><p>Другой вариант - изучить исходные данные.</p><h3>Шаг 3: Изучите данные</h3><p>Изучение данных, хранящихся в Insights, - это хороший способ узнать, какие поля данных доступны для ваших запросов, и получить общее представление о возможных значениях.</p><p>Для этого нажмите «<strong>Проводник данных</strong>» в меню слева. </p><p>На следующем экране вы сможете выбрать тип данных, которые хотите просмотреть.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut3.png" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>В этом списке отображаются только те типы событий, в которых есть данные, доступные в вашей учетной записи, в этом случае <strong>Transaction</strong> и <strong>PageView</strong>. </p><p>Ниже приведен полный список типов событий, предоставляемых Insights:</p><ul><li> <strong>Transaction</strong>: события на стороне сервера, собранные New Relic APM. В этих случаях вы найдете информацию о <span>функциях более низкого уровня</span>, таких как коды ответа HTTP и длительность запросов к базе данных.</li> <li> <strong>PageView</strong>: события загрузки страницы, собранные New Relic Browser. В этой группе событий вы найдете <span>информацию об опыте посетителя на странице</span>, будут доступны такие вещи, как используемый веб-браузер, продолжительность посещения и т.д. </li> <li> <strong>PageAction</strong>: настраиваемая группа связанных с браузером событий, которые можно заполнить, используя <span>Insights JavaScript API</span> для отправки событий о любых действиях, которые пользователь выполняет на странице (например, нажав кнопку, чтобы добавить элемент в свою корзину покупок).</li> <li> <strong>Mobile</strong>: события, <span>собранные из ваших мобильных приложений</span>, которые отслеживаются с помощью New Relic Mobile.</li> <li> <strong>SyntheticCheck и SyntheticRequest</strong>: события проверки доступности, отправленные с помощью инструмента Synthetics, <span>с информацией о доступности ваших сервисов</span>.</li> </ul><p>Поскольку многие из этих типов событий зависят от более сложных функций New Relic, мы не будем рассматривать их в этом уроке. Вместо этого мы продолжим работу с двумя первыми: <strong>Transaction</strong> и <strong>PageView</strong>. </p><p>Нажмите «<strong>PageView</strong>». </p><p><strong>Проводник PageView</strong> показывает вам список последних событий <strong>PageView</strong> из вашего приложения. Каждая строка представляет собой представление отдельной страницы пользователя. Не забудьте прокрутить страницу вправо; если у вас нет очень большого экрана, вы обнаружите, что доступно гораздо больше полей, чем на экране.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut4b.jpg" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Взгляните также на данные <strong>Transaction</strong>. </p><p>Затем, с общим пониманием данных, доступных в Insights, давайте использовать этот инструмент для создания эффективной панели мониторинга для легкого доступа к информации, которая поможет вашей службе поддержки быстрее и проще работать.</p><h2>Создание вашей первой приборной панели</h2><p>Когда вы получаете отчет об ошибке или запрос помощи от клиента, чаще всего, вам нужно сначала запросить дополнительную информацию. Используемый браузер, возможные сообщения об ошибках и действия, приводящие к ошибке, - это все части головоломки, которые пользователи редко думают о включении в свои электронные письма.</p><p>С помощью New Relic Insights вы можете использовать данные с вашего сервера, чтобы пропустить этот шаг и обеспечить лучший опыт работы с клиентами, в то время как ваша работа в качестве разработчика станет гораздо легче! </p><p>В оставшейся части учебника мы создадим простую панель инструментов поддержки клиентов, которая позволит вам сделать это, не копаясь в логах сервера.</p><h3>Шаг 1. Создание новой панели инструментов.</h3><p><strong>Панель мониторинга</strong> в Insights представляет собой набор виджетов или диаграмм, показывающих индивидуальную информацию о производительности вашего приложения, действиях ваших пользователей или их комбинации. Для их построения требуется некоторое понимание базовой технологии, но как только они будут готовы, их могут легко использовать нетехнические люди, такие как менеджеры, для изучения показателей продукта.</p><p>Для более сложных коллекций диаграмм и виджетов вы можете создать <strong>Data App</strong>, <em>набор панелей инструментов</em>, связанных друг с другом, чтобы сформировать опыт, похожий на приложение.</p><p>Панель инструментов поддержки клиентов, скорее всего, будет расти в будущем, поскольку вы добавляете в нее все больше и больше элементов, поэтому для ее подготовки рекомендуется начинать сборку панели непосредственно внутри нее. </p><p>Сначала нажмите <strong>Data Apps</strong> в меню слева. Поскольку у вас еще нет настроенного приложения данных, вы увидите следующий экран:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut5.jpg" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Нажмите «<strong>Создать приложение данных</strong>», чтобы создать приложение «Данные». </p><p>Всплывающее окно для ввода информации о приложении открывается в середине страницы:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut6.png" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Заполните информацию о своем новом приложении: <strong>значок</strong>, <strong>заголовок</strong> (например, «Служба поддержки клиентов») и «<strong>Описание</strong>». </p><p>Имейте в виду, что это верхний уровень: внутри приложения вы сможете создавать любое количество информационных панелей. Вы также сможете редактировать эти настройки позже, поэтому не беспокойтесь о них на данный момент. </p><p>После заполнения полей данных нажмите «<strong>Создать</strong>».<br></p><p>Теперь вы создали приложение. Insights автоматически добавляет к нему пустую панель. Дайте панели управления имя (например, «Обзор»), отредактировав текстовое поле слева, которое теперь указывает «<strong>Без названия</strong>». Вы также можете выбрать описательный значок из выпадающего меню с левой стороны, если хотите.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut7.jpg" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Панель инструментов выглядит пустой, поэтому давайте добавим в нее некоторый контент. </p><h3>Шаг 2: добавьте свой первый виджет панели управления</h3><p>Заполнение новой информационной панели полезной информацией о пользователях и их поведением при взаимодействии с вашими приложениями начинается с написания запроса NRQL. Спросите себя, что вы (или человек, использующий эту приборную панель) захотите узнать о производительности приложения. Затем напишите запрос для сбора этой информации. </p><p>Начнем с разбивки веб-браузеров, используемых вашими посетителями. </p><p>Введите следующий запрос в поле запроса вверху страницы:</p><pre class="brush: sql noskimlinks noskimwords">SELECT uniqueCount(session) from PageView FACET userAgentName SINCE 1 week ago</pre><p>Этот запрос: </p><ol><li> <em>Подсчитывает количество уникальных сеансов</em>. <code class="inline">session</code> - это атрибут нового сеанса доступа Relic пользователя, который длится до тех пор, пока пользователь не закроет окно браузера. <code class="inline">uniqueCount</code> - это функция NRQL, которая может использоваться для получения количества уникальных значений, записанных для атрибута.</li> <li> <em>Группирует сеансы с помощью используемого веб-браузера</em>. Это делается с использованием ключевого слова <code class="inline">FACET</code>, который принимает только один параметр, имя атрибута для группировки данных (<code class="inline">userAgentName</code>). </li> <li> <em>Ограничивает запрос данными, собранными на прошлой неделе</em>. Ключевое слово <code class="inline">SINCE</code> определяет начало временного диапазона и принимает дату, указанную в <span>широком диапазоне различных форматов</span>, например, <code class="inline">5 minutes ago</code>, <code class="inline">6 hours ago</code> или <code class="inline">YESTERDAY</code>.</li> </ol><p>Нажмите «<strong>Выполнить</strong>», чтобы выполнить запрос. Результаты отображаются прямо под окном запроса:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut8.png" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Это все еще похоже на то, что мы видели на первой странице, когда мы запустили наш первый запрос. Теперь, однако, мы сохраним запрос на панели инструментов, чтобы сэкономить себе задачу запуска запроса вручную каждый раз, когда мы хотим узнать его результаты.</p><p>В верхней части результатов вы найдете три вкладки для выбора презентации для результатов.</p><p>Нажмите на второй, чтобы отобразить разбивку браузера в виде гистограммы.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut9.png" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Введите <strong>заголовок</strong> для диаграммы и описание в поле «<strong>Примечания</strong>», если хотите. </p><p>Затем нажмите <strong>Добавить на эту панель</strong>. </p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut10.png" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Вот он, первый виджет на этой приборной панели. </p><p>Вы можете изменить размер виджета, перетаскивая его из синего треугольника в нижнем правом углу окна или перемещая его вокруг холста, перетаскивая его.</p><h3>Шаг 3: добавьте еще несколько виджетов панели мониторинга</h3><p>Мы скоро углубимся в ваше приложение и внесем некоторые данные, относящиеся к конкретным приложениям, в нашу панель инструментов Insights. Но прежде чем мы отправимся туда, давайте поиграем еще с данными, которые у нас есть, добавив несколько дополнительных виджетов панели.</p><p>В верхнем правом углу виджета <strong>Browser Breakdown</strong>, который вы только что добавили, вы найдете три значка. </p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut11.png" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Нажмите на средний, чтобы открыть запрос виджета для редактирования.</p><p>В дополнение к редактированию запроса виджетов это хороший способ перейти от одного запроса к его естественному виду. Например, теперь, когда вы знаете, что Safari является самым популярным браузером среди посетителей сайта, вы можете посмотреть, какую версию браузера используют посетители.<br></p><p>Чтобы получить эту информацию, отредактируйте запрос NRQL:</p><pre class="brush: sql noskimlinks noskimwords">SELECT uniqueCount(session) from PageView FACET userAgentVersion WHERE userAgentName = "Safari" SINCE 1 week ago</pre><p>В этом запросе вместо группировки (<code class="inline">FACET</code>) результатов по имени браузера (<code class="inline">userAgentName</code>) мы группируем их по версии браузера (<code class="inline">userAgentVersion</code>). </p><p>Мы также добавили SQL-подобное предложение <code class="inline">WHERE</code>, чтобы отфильтровать данные, чтобы включать события, в которых пользовательский агент является <code class="inline">Safari</code>.<br></p><p>Нажмите «<strong>Выполнить</strong>», чтобы просмотреть результаты.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut12.png" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Если вы редактировали существующий виджет, теперь вы можете нажать «<strong>Сохранить изменения</strong>», чтобы применить изменения, внесенные в запрос. </p><p>Однако не делайте этого на этот раз. </p><p>Вместо этого отредактируйте <strong>имя</strong> и <strong>заметки</strong>. Затем нажмите «<strong>Добавить копию</strong>». В раскрывающемся меню выберите «<strong>Текущая панель</strong>», чтобы сохранить результаты в виде нового виджета на текущей панели мониторинга.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut13.png" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Как видно из приведенных выше примеров, создание панели инструментов немного похоже на добычу золота. Когда вы запускаете один запрос, вы найдете что-то интересное, что приводит к возникновению нового вопроса в вашем сознании. Затем вы пишете запрос для него, что снова приведет вас к новым идеям.<br></p><p>Все ваши запросы могут не оказаться в панели управления, и вы можете удалить их через некоторое время, но все они дают вам новые идеи о том, как ваше приложение используется.</p><p>Вот еще несколько вопросов, которые нужно попробовать:</p><h4>Операционные системы</h4><pre class="brush: sql noskimlinks noskimwords">SELECT uniqueCount(session) FROM PageView SINCE 1 week ago FACET userAgentOS</pre><p>Этот запрос подсчитывает сеансы посетителей, группируя их по используемой операционной системе.</p><h4>Тип устройства</h4><pre class="brush: sql noskimlinks noskimwords">SELECT uniqueCount(session) FROM PageView SINCE 1 week ago FACET deviceType</pre><p>Этот запрос подсчитывает сеансы посетителей, группируя их по типу используемого устройства (Mobile / Desktop).</p><h4>Страны посетителя</h4><pre class="brush: sql noskimlinks noskimwords">SELECT uniqueCount(session) FROM PageView FACET countryCode SINCE 1 week ago</pre><p>Этот запрос подсчитывает сеансы посетителей, группируя их по стране, к которой они обращаются на вашем сайте.</p><h4>Самые популярные страницы</h4><pre class="brush: sql noskimlinks noskimwords">SELECT count(*) FROM PageView FACET pageUrl SINCE 1 week ago</pre><p>В этом запросе перечислены наиболее популярные страницы вашего сайта. Обратите внимание, что на этот раз мы используем <code class="inline">count (*)</code> вместо <code class="inline">uniqueCount (session)</code>, так как даже тот же посетитель, посещающий ту же страницу, снова является интересным источником информации.</p><h4>Просмотры страниц за сеанс</h4><pre class="brush: sql noskimlinks noskimwords">SELECT count(*)/uniqueCount(session) AS "Page Views Per Session" FROM PageView SINCE 1 week ago FACET deviceType</pre><p>Изучая данные из моих запросов, я подумал о шаблонах просмотра мобильных и настольных пользователей и, если они отличаются друг от друга. Итак, я создал этот запрос.</p><p>Запрос вычисляет долю просмотров страниц за сеанс, называя его «<code class="inline">Просмотры страниц за сеанс</code>». Затем он группирует их по типу устройства (<code class="inline">deviceType</code>) для сравнения, которое я имел в виду.</p><h4>Последние ошибки</h4><pre class="brush: sql noskimlinks noskimwords">SELECT errorMessage, errorType FROM Transaction WHERE errorMessage IS NOT NULL SINCE 1 week ago</pre><p>Этот запрос создает простой список сообщений об ошибках и типов, которые произошли на вашем сервере в последнее время. Если запрос возвращает пустой список, хорошо для вас! Если нет, вы нашли что-то исправить.</p><h4>Коды ответа HTTP</h4><pre class="brush: sql noskimlinks noskimwords">SELECT count(*) FROM Transaction SINCE 1 week ago FACET httpResponseCode</pre><p>Этот запрос подсчитывает транзакции, группируя их по HTTP-ответному коду.</p><p>Когда вы закончите работу с панелью управления, нажмите кнопку «<strong>Редактирование готово</strong>» в правом верхнем углу страницы.</p><p>После добавления этих запросов в виде виджетов (и удаления виджета версии Safari), вот как выглядит моя панель:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut20.jpg" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><h3>Шаг 4: добавьте фильтр, чтобы лучше анализировать данные</h3><p>Предположим теперь, что, глядя на виджет <strong>«Просмотры страниц за сеанс</strong>», вы начинаете задаваться вопросом, есть ли еще больше различий в том, как десктоп посетители и посетители с мобильных устройств просматривают ваш сайт.</p><p>Создание отдельного запроса для каждого сравнения было бы большим количеством работы и только привело бы к загроможденной информационной панели, отображающей информацию, которая вам нужна только изредка. Именно здесь удобна функция New Relic Insights для фильтрации данных приборной панели. </p><p>Давайте попробуем.</p><p>Нажмите кнопку «<strong>Изменить</strong>» в правом верхнем углу, чтобы вернуться в режим редактирования. Прямо над диаграммами появляется элемент, который говорит, что<strong> фильтр отключен</strong>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut21.png" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Нажмите на значок шестеренки, чтобы настроить фильтр. </p><p>В появившемся меню:</p><ol><li>Установите флажок <strong>Включить фильтр</strong>. </li> <li>В раскрывающемся списке «<strong>Типы событий</strong>» выберите «<strong>PageView</strong>». Здесь хранится информация о устройстве.</li> <li>В раскрывающемся списке <strong>Атрибуты</strong> выберите <strong>deviceType</strong> в качестве атрибута, который будет использоваться для фильтрации данных.</li> </ol><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut16.png" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Выпадающие списки «<strong>Типы событий</strong>» и «<strong>Атрибуты</strong>» позволяют выбирать несколько параметров. Поэтому, если в любой момент вы хотите добавить дополнительные фильтры в свою панель, вы можете сделать это, просто выбрав больше атрибутов.</p><p>Теперь нажмите кнопку «<strong>Готово</strong>», чтобы просмотреть данные и протестировать фильтр.</p><p>В верхней части страницы вы увидите окно поиска, в котором указано <strong>Search deviceType</strong>. Нажмите на поле и выберите опцию <strong>Mobile</strong>. </p><p>Затем изучите данные, чтобы увидеть, не заметите ли вы различий между мобильными и настольными пользователями. Например, по моим данным, использование мобильных устройств - большинство из них на устройствах Apple - объясняет высокий процент пользователей Safari: на настольных компьютерах Google Chrome гораздо более популярен.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut17.jpg" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><h2>Добавление параметров приложения к вашим транзакционным данным</h2><p>До сих пор в этом уроке мы работали с готовыми данными, предоставляемыми средствами браузера и APM. С помощью этих данных мы создали обзорную панель, которая дает нам полезную информацию о приложении в целом. </p><p>Однако, когда дело доходит до поиска данных, которые помогут вам ответить на вопросы поддержки клиентов конкретного пользователя, этого недостаточно. Таким образом, чтобы иметь возможность просверливать данные данного пользователя, мы продолжим, сделав контролируемое приложение передам некоторые параметры приложения для Insights.</p><p>Приложение, используемое в качестве примера в этом учебнике, является сайтом электронной коммерции на WordPress. Тем не менее, инструментарий очень прост, и вы можете применить эту идею практически для любого вашего приложения.</p><h3>Шаг 1. Добавление информации о пользователе в транзакции.</h3><p>Новый API-интерфейс <span>агента Relic PHP</span> предоставляет множество функций для управления данными, поскольку он хранится для использования в Insights и других инструментах New Relic.</p><p>Теперь мы сосредоточимся на одном из них: <code class="inline">newrelic_add_custom_parameter</code>, который можно использовать для добавления настраиваемого параметра в ваши события <strong>Transaction</strong>. Если вы используете какой-либо другой язык программирования, ознакомьтесь с <span>документацией New Relic</span> для используемой функции.</p><p>Функция принимает два параметра: <code class="inline">string</code> ключ и значение, которое может быть типа <code class="inline">string</code> или <code class="inline">float</code>.</p><p>Теперь давайте создадим функцию для ввода некоторых данных о пользователе.<br></p><p>Добавьте код ниже в кодовую базу вашего приложения в том месте, где его можно легко вызвать для каждого запроса. В приложении на основе WordPress это будет внутри плагина.</p><pre class="brush: php noskimlinks noskimwords">&lt;?php/** * Sends information about the current user/session to New Relic  * if New Relic monitoring is enabled */function inject_new_relic_user_information() {    if ( extension_loaded( "newrelic" ) ) {        if ( is_user_logged_in() ) {            $user = wp_get_current_user();            newrelic_add_custom_parameter( "email", $user-&gt;user_email );            newrelic_add_custom_parameter( "user_id", $user-&gt;ID );            newrelic_add_custom_parameter( "member_since", $user-&gt;user_registered );        }        newrelic_add_custom_parameter( "request_uri", $_SERVER["REQUEST_URI"] );    }}</pre><p>Во-первых, в строке 7 функция проверяет, что новое расширение Relic было загружено. Затем, если функции отчетности доступны, она продолжается добавлением нескольких параметров с использованием пользовательского объекта WordPress по умолчанию, <code class="inline">WP_User</code>:</p><ul><li> <code class="inline">email</code>: адрес электронной почты часто является самым простым способом идентификации конкретного пользователя. Однако при работе с электронными письмами вы должны быть осторожны, чтобы информация оставалась в безопасности.</li> <li> <code class="inline">user_id</code>: Если вам неудобно использовать адреса электронной почты для идентификации ваших пользователей в Insights, другим вариантом может быть числовой идентификатор пользователя. Поиск идентификатора пользователя перед поиском данных - дополнительный шаг, хотя ...</li> <li> <code class="inline">member_since</code>: пока не требуется идентификация пользователя, время регистрации пользователя может быть интересным для будущих запросов о поведении ваших пользователей.</li> <li> <code class="inline">request_uri</code>: По умолчанию данные транзакции не имеют параметра для определения страницы, к которой был осуществлен доступ. Итак, я решил добавить один для использования для запросов на страницы с ошибками <code class="inline">404</code>.</li> </ul><p>После того, как функция будет на своем месте, вы должны будете ее вызвать. Не забудьте вызвать функцию достаточно рано, чтобы все ваши события транзакции содержали только что добавленную информацию пользователя.</p><p>В плагине WordPress лучший способ сделать это - подключить функцию к действию, например <code class="inline">init</code>, которое называется ранним, но только после того, как пользовательские данные были инициализированы. </p><p>Сделайте это, добавив следующий код прямо под функцией:</p><pre class="brush: php noskimlinks noskimwords">add_action( "init", "inject_new_relic_user_information" );</pre><h3>Шаг 2. Передача пользовательских данных в новый Relic-браузер.</h3><p>Теперь вы добавили несколько настраиваемых параметров в свои <strong>Transaction</strong> события. </p><p>Однако, поскольку большинство наших виджетов панели инструментов основаны на запросах к событиям <strong>PageView</strong>, чтобы сделать их более полезными, вам также необходимо предоставить эту информацию для них. Для этого вам нужно будет настроить параметры агента PHP.</p><p>Сначала найдите файл конфигурации New Relic, <code class="inline">newrelic.ini</code>, на вашем сервере. Точное местоположение зависит от вашей установки PHP. На моем сервере Amazon Linux я нашел файл в <code class="inline">/etc/php-5.5.d/newrelic.ini</code>.</p><p>В файле конфигурации найдите строку, которая выглядит так: </p><pre class="brush: plain noskimlinks noskimwords">;newrelic.browser_monitoring.attributes.enabled = false</pre><p>Замените ее следующим:</p><pre class="brush: plain noskimlinks noskimwords">newrelic.browser_monitoring.attributes.enabled = true</pre><p>Затем сохраните изменения и перезапустите веб-сервер.</p><p>Атрибуты <strong>Transaction</strong> теперь автоматически включаются также в события <strong>PageView</strong>, собранные New Relic Browser. Дополнительные данные будут доступны только в событиях, собранных после изменений, поэтому вам нужно будет дать New Relic некоторое время для сбора некоторых событий, прежде чем двигаться дальше.</p><h3>Шаг 3: добавление нового виджета поддержки клиентов с использованием добавленных атрибутов</h3><p>Теперь, когда события Transaction и PageView содержат пользовательские переменные с информацией о пользователе, мы можем создавать новые, еще более интересные запросы.<br></p><p>Поскольку это панель управления клиентской поддержкой, которую мы создаем, давайте начнем со списка ошибок сервера, сгруппированных по адресу электронной почты пользователя.</p><p>Введите следующий запрос в поле запроса:</p><pre class="brush: sql noskimlinks noskimwords">SELECT count(*) AS "Transactions with errors" FROM Transaction WHERE errorType IS NOT NULL SINCE 1 week ago FACET email</pre><p>Подобно общему списку ошибок PHP, которые мы создали ранее, запрос подсчитывает события <strong>Transaction</strong>, где установлен параметр <code class="inline">errorType</code>, и группирует их по адресу электронной почты пользователя (<code class="inline">email</code>).</p><p>Нажмите «<strong>Выполнить</strong>», чтобы протестировать запрос (скорее всего, вы получите пустой список). Затем дайте виджету имя и добавьте его в панель управления <strong>Обзор</strong>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut22.png" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Теперь, если хотите, вы можете протестировать виджет, немного нарушив код сервера и, будучи пользователем, заходите на страницу с ошибкой.</p><p>Результаты должны выглядеть примерно так:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut23.png" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Теперь, когда клиент сталкивается с ошибкой сервера, вы заметите это, посмотрев на этот список и затем можете использовать адрес электронной почты, чтобы найти дополнительную информацию.</p><h3>Шаг 4. Создание информационной панели для отображения конкретного пользователя.</h3><p>Теперь, когда мы знаем адрес электронной почты пользователя, мы можем использовать его для фильтрации данных панели управления так же, как и с <code class="inline">DeviceType</code> ранее в учебнике.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut18.jpg" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Однако это не является оптимальным, поскольку данные, которые мы хотим отобразить для конкретного пользователя, не обязательно совпадают с данными, отображаемыми на панели инструментов <strong>Обзор</strong>.</p><p>Как я упоминал ранее в учебнике, приложение Data состоит из нескольких панелей мониторинга, которые могут быть связаны друг с другом. Итак, давайте создадим вторую панель мониторинга для отображения данных одного клиента и привяжем к ней виджет «<strong>Пользователи с ошибками сервера</strong>».</p><p>Во-первых, в режиме редактирования нажмите кнопку <strong>+ Добавить</strong> в верхней части окна панели инструментов, чтобы создать новую панель.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut24.png" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Назовите новую панель инструментов «Signed In User Details». Затем нажмите «<strong>Готово</strong>» и вернитесь на панель «<strong>Обзор</strong>». </p><p>Перейдите в режим редактирования, затем щелкните значок ссылки в верхней части виджета «<strong>Пользователи с ошибками сервера</strong>».</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut25.png" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Появится всплывающее окно для выбора панели. Нажмите «<strong>Выбрать целевую панель</strong>», а затем выберите раскрывающийся список <strong>Информация о пользователе</strong>, которую вы только что создали.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut26.png" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><p>Затем нажмите кнопку <strong>Link and update filter</strong>, чтобы сохранить изменения. </p><p>Нажмите «<strong>Готово</strong>» и вернитесь к виджету «<strong>Пользователи с ошибками сервера</strong>». Обратите внимание, что адрес электронной почты теперь является ссылкой. Нажав на нее, вы попадете на созданную панель, автоматически фильтруя ее по электронной почте.</p><h3>Шаг 5: добавьте некоторые виджеты в панель сведений о пользователе </h3><p>Теперь вы создали ссылку из списка пользователей панели управления <strong>Обзор</strong> с ошибками на новую панель мониторинга. Эта панель все еще пуста, поэтому давайте начнем ее строить, добавив некоторые виджеты, которые помогут нам узнать больше об ошибках и пользователе.</p><h4>Последние ошибки</h4><p>Сначала добавьте копию виджета «<strong>Последние ошибки</strong>» на вкладке «<strong>Обзор</strong>».</p><p>Для этого еще на вкладке «<strong>Обзор</strong>» перейдите в режим редактирования, затем прокрутите вниз до виджета и нажмите кнопку «<strong>Изменить</strong>». Прокрутите страницу до результатов запроса, затем нажмите «<strong>Добавить копию</strong>» и выберите новую раскрывающуюся панель в раскрывающемся списке.</p><p>Чтобы сделать данные более полезными для исправления ошибок, отредактируйте запрос, добавив к нему <code class="inline">request_uri</code>. Окончательный запрос выглядит так:</p><pre class="brush: sql noskimlinks noskimwords">SELECT errorMessage, errorType, request_uri FROM Transaction WHERE errorMessage IS NOT NULL SINCE 1 week ago</pre><p>Вот результат на новой панели мониторинга при доступе, нажав на мой адрес электронной почты:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut27.jpg" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><h4>Коды ответа HTTP</h4><p>Точно так же, как вы скопировали список вышеперечисленных ошибок, также скопируйте виджет <strong>HTTP Response Codes</strong> на личную панель пользователя.</p><p>Затем, чтобы узнать больше о запросах с ошибками, добавьте новый виджет, используя следующий запрос:</p><pre class="brush: sql noskimlinks noskimwords">SELECT request_uri, httpResponseCode from Transaction SINCE 1 week ago WHERE httpResponseCode &gt;= "400"</pre><p>После перемещения виджета вокруг и изменения размера, вот что теперь выглядит панель управления:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut28.png" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><h4>Информация о браузере и операционной системе</h4><p>Наконец, чтобы завершить эту первую версию панели поддержки клиентов, давайте добавим некоторую информацию о веб-браузере пользователя, типе устройства и операционной системе.</p><p>Мы уже создали виджеты для всех этих запросов на панели инструментов «<strong>Обзор</strong>», поэтому все, что вам нужно сделать, это скопировать их в новую панель управления и создать для них макет.</p><p>Что-то вроде этого, может быть? </p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/25104/image/tut29.jpg" alt="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." title="Как использовать новые Relic Insights, чтобы узнать больше о ваших клиентах..." width="50" height="50"></figure><h2>Заключение</h2><p>Теперь вы использовали New Relic Insights для создания простой, но мощной панели инструментов поддержки клиентов, которая поможет вам разобраться в причинах, с которыми сталкиваются ваши клиенты, когда они используют ваше приложение.</p><p>Это, однако, только начало. </p><p>Возможности для дальнейшего совершенствования приборной панели с использованием Insights почти бесконечны, и лучший способ понять их - попробовать самим. </p><p>Вот несколько идей, которые помогут вам:</p><ul><li>Если ваше приложение использует сеансы для посетителей, отправьте ключи сеанса в New Relic, чтобы найти информацию о незалогиненных пользователях.</li> <li>Добавьте инструментарий и сделайте панель инструментов лучше, чтобы учитывать требования бизнеса.</li> <li>Импортируйте больше событий из внешних служб.</li> <li>Создайте больше информационных панелей, чтобы углубиться в некоторые другие аспекты вашего приложения.</li> </ul><p>Теперь, повозитесь, используя информацию, которую вы получаете от изучения данных вашего приложения, чтобы лучше понять ваших пользователей.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825320-kak-ispolzovat-novye-relic-insights-chtoby-uznat-bolshe-o-vashih-klientah" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="New Relic" href="https://norma-studio.github.io/article5/220825320-kak-ispolzovat-novye-relic-insights-chtoby-uznat-bolshe-o-vashih-klientah" class="tm-article-body__tags-item-link">New Relic</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
31224</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
503</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
