
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Спор с Facebook... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Спор с Facebook... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Спор с Facebook... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Спор с Facebook... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="В этом руководстве мы создадим приложение, которое считывает и публикует данные в Facebook и из Facebook с помощью API Graph Facebook. Заинтересованы? Присоединяйся ко мне после скачивания!...">
<meta property="og:description" content="В этом руководстве мы создадим приложение, которое считывает и публикует данные в Facebook и из Facebook с помощью API Graph Facebook. Заинтересованы? Присоединяйся ко мне после скачивания!...">
<meta name="twitter:description" content="В этом руководстве мы создадим приложение, которое считывает и публикует данные в Facebook и из Facebook с помощью API Graph Facebook. Заинтересованы? Присоединяйся ко мне после скачивания!...">
<meta property="aiturec:description" content="В этом руководстве мы создадим приложение, которое считывает и публикует данные в Facebook и из Facebook с помощью API Graph Facebook. Заинтересованы? Присоединяйся ко мне после скачивания!...">
<meta property="og:image" content="https://cdn.tutsplus.com/net/uploads/legacy/1097_fbapi/oglogo.png">
<meta property="aiturec:image" content="https://cdn.tutsplus.com/net/uploads/legacy/1097_fbapi/oglogo.png">
<meta name="twitter:image" content="https://cdn.tutsplus.com/net/uploads/legacy/1097_fbapi/oglogo.png">
<meta property="vk:image" content="https://cdn.tutsplus.com/net/uploads/legacy/1097_fbapi/oglogo.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cdn.tutsplus.com/net/uploads/legacy/1097_fbapi/oglogo.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825662-spor-s-facebook.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825662-spor-s-facebook.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825662-spor-s-facebook.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825662-spor-s-facebook.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825662-spor-s-facebook.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825662-spor-s-facebook.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825662-spor-s-facebook.html" title="Спор с Facebook... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Спор с Facebook... | envatomarket.ru | norma-studio.github.io" title="Спор с Facebook... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/64533jghfdd.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825662-spor-s-facebook.html" class="tm-user-info__username" title="
Д. Слесарев" aria-label="
Д. Слесарев">
Д. Слесарев</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Спор с Facebook...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825662-spor-s-facebook" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="PHP" href="https://norma-studio.github.io/article5/220825662-spor-s-facebook" class="tm-article-snippet__hubs-item-link"><span>PHP</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825662-spor-s-facebook.html" />
    <link itemprop="image" href="https://cdn.tutsplus.com/net/uploads/legacy/1097_fbapi/oglogo.png">
    <meta itemprop="headline name" content="Спор с Facebook... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="В этом руководстве мы создадим приложение, которое считывает и публикует данные в Facebook и из Facebook с помощью API Graph Facebook. Заинтересованы? Присоединяйся ко мне после скачивания!...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">В этом руководстве мы создадим приложение, которое считывает и публикует данные в Facebook и из Facebook с помощью API Graph Facebook. Заинтересованы? Присоединяйся ко мне после скачивания!...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p> Вы когда-нибудь хотели узнать, как сделать ваши приложения более социальными с Facebook? Это намного проще, чем вы думаете! </p><p>В этом руководстве мы создадим приложение, которое считывает и публикует данные в Facebook и из Facebook с помощью API Graph Facebook. Заинтересованы? Присоединяйся ко мне после скачивания!</p> <p><!--more--></p> <hr><h2>Краткое введение в протокол Open Graph</h2> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cdn.tutsplus.com/net/uploads/legacy/1097_fbapi/oglogo.png" class="lazy07" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>Протокол открытого графика</small></p><p><small><span>Изображение предоставлено http://ogp.me</span></small> </p></div> <blockquote> <p>Протокол Open Graph позволяет любой веб-странице стать богатым объектом в социальном графе. Например, это используется в Facebook, чтобы любая веб-страница имела те же функции, что и любой другой объект в Facebook.</p> <p>Несмотря на то, что существует множество различных технологий и схем, которые можно объединить вместе, нет ни одной технологии, которая предоставляет достаточно информации для полноценного представления любой веб-страницы в социальном графе. Протокол Open Graph основан на этих существующих технологиях и дает разработчикам одну вещь для реализации. Простота разработки - ключевая цель протокола Open Graph, который послужил основой для многих технических решений.</p> </blockquote> <p>Короче говоря, протокол Open Graph превращает любую веб-страницу в объект в виде огромного графика. Каждый объект, по крайней мере, в графических объектах Facebook, может иметь множество других объектов, связанных с ним. Например, <code>страница Facebook</code> может иметь несколько объектов в<code> пост</code>, которые являются сообщения сделанные этой страницы. В свою очередь, к каждому объекту <code>Post</code> может быть прикреплено несколько объектов <code>Comment</code>, ссылающихся на комментарии, написанные людьми в сообщении. Эта связь между графическими объектами является основой для Graph API Facebook, что, в свою очередь, позволяет нам выполнять CRUD-операции над этими объектами.</p> <p>В этом уроке мы узнаем, как использовать и интегрировать API Graph Facebook в приложение. Мы также узнаем, как использовать данные из API Graph для выполнения таких операций, как вход пользователя в систему через его учетную запись Facebook. В конечном итоге мы создадим небольшое приложение, которое позволит людям создавать и читать сообщения с управляемой ими страницы Facebook, аналогично HootSuite или TweetDeck.</p> <hr><h2> <span>Шаг 1. Создайте приложение для Facebook</span></h2> <p>Первое, что вы должны сделать, когда планируете использовать API Graph Facebook, - это создать приложение Facebook. Это не обязательно означает, что мы будем размещать приложение на Facebook (хотя мы можем); нам просто нужно приложение Facebook (в частности, <code>APP ID</code> и <code>APP SECRET</code>) для доступа к API.</p> <p>Откройте <span>http://developers.facebook.com</span> и нажмите ссылку <code>«Приложения»</code> на панели навигации.</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=518/net/uploads/legacy/1097_fbapi/apps.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>Сайт разработчика Facebook</small> </p></div> <p>Вам будет предложено войти в систему (если вы этого не сделаете) и разрешить приложению <code>разработчика </code>получить доступ к вашей учетной записи. Просто нажмите <code>«Разрешить»</code>, и вы будете перенаправлены на домашнюю страницу <code>приложения для разработчиков</code>.</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1097_fbapi/request.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>Разрешить доступ приложения разработчика</small> </p></div> <p>На домашней странице приложения для разработчиков нажмите <code>«Создать новое приложение»</code> в правом верхнем углу страницы.</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1097_fbapi/devapp.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>Домашняя страница приложения разработчика</small> </p></div> <p>Вас встретит модальное окно, запрашивающее <code>отображаемое имя приложения</code> и <code>пространство имен приложения</code>. Укажите здесь все, что вы хотите, но для целей этого урока я буду использовать <code>Nettuts + Page Manager</code> и <code>nettuts-page-manager</code> соответственно. Нажмите на <code>продолжить</code>.</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1097_fbapi/modal.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>Рождение Nettuts + страницы менеджер</small> </p></div> <p>После некоторой обязательной проверки кода вы будете перенаправлены на страницу своего нового приложения. Здесь вы увидите <code>APP ID</code> и <code>APP SECRET</code>, которые нам нужны. Скопируйте и вставьте эти значения куда-нибудь для дальнейшего использования.</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1097_fbapi/settings.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>APP ID и APP  SECRET</small> </p></div> <p>Когда это будет сделано, перейдите в нижнюю часть страницы и нажмите на поле «Веб-сайт», а под ним должна появиться форма, запрашивающая <code>URL-адрес сайта</code>. Поскольку я просто использую свою локальную машину для сборки приложения, я буду использовать <code>http: // localhost / nettuts / pagemanager</code>. Когда вы закончите, нажмите на кнопку <code>Сохранить изменения</code> ниже.</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1097_fbapi/settings_2.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>Настройки Nettut + Page Manager</small> </p></div> <h2> <span>Шаг 2. Загрузите и настройте PHP SDK для Facebook</span></h2> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cdn.tutsplus.com/net/uploads/legacy/1097_fbapi/github.png" class="lazy07" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>Страница GitHub на Facebook</small> </p></div> <p>Наша следующая задача - загрузить и настроить PHP SDK для Facebook. Лучшее место для его получения - страница GitHub на Facebook, поскольку именно здесь будет находиться последняя и самая лучшая версия PHP SDK.</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1097_fbapi/download.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>Загрузка PHP SDK для Facebook</small> </p></div> <p>Направьте ваш браузер на<span> https://github.com/facebook/php-sdk</span> и нажмите на кнопку «ZIP». Это должно привести к загрузке последней версии SDK. Сохраните его где угодно.</p> <p>Теперь извлеките это в PHP<code> include_path</code>, чтобы сделать его доступным для любого приложения. В качестве альтернативы, если вы просто используете это для одного приложения, извлеките его в папку приложения - просто обязательно отметьте, где, так как позже мы должны будем включить <code>facebook.php</code> в наш код.</p> <hr><h2> <span>Шаг 3: чтение из Facebook через Graph API</span></h2> <p>Давайте начнем создавать наш проект и использовать API Graph Facebook для чтения информации из Facebook. Для начала создайте файл <code>index.php</code>, в который пользователь может войти через Facebook. Файл <code>index.php</code> должен содержать следующий код:</p> <pre class="brush: html noskimlinks noskimwords">&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;  &lt;title&gt;Nettuts+ Page Manager&lt;/title&gt;&lt;link rel="stylesheet" href="css/reset.css" type="text/css" /&gt;&lt;link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" /&gt;&lt;script src="js/jquery.min.js"&gt;&lt;/script&gt;&lt;style&gt;body {padding-top: 40px;}#main {margin-top: 80px;text-align: center;}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div class="topbar"&gt;&lt;div class="fill"&gt;&lt;div class="container"&gt;&lt;a class="brand" href="/"&gt;Nettuts+ Page Manager&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id="main" class="container"&gt;&lt;a href="connect.php" class="btn primary large"&gt;Login via Facebook&lt;/a&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</pre> <p>Если вам интересно,<code> reset.css</code> - это просто стандартный сброс таблицы стилей, а <code>bootstrap.min.css</code> - это <span>Twitter Bootstrap</span>. Я также добавил jQuery в микс, чтобы упростить работу на стороне клиента. Теперь, если вы обновите страницу, она должна выглядеть примерно так:</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1097_fbapi/demo_1.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><br><small>Nettuts + Page Manager Первый запуск</small> </div> <p>Теперь давайте создадим наш файл <code>connect.php</code>, который позволит нам подключить учетную запись пользователя Facebook и страницы, которыми он управляет. Давайте начнем с включения библиотеки Facebook, которую мы скачали ранее. Создайте его, используя <code>APP ID</code> и <code>APP SECRET</code>:</p> <pre class="brush: php noskimlinks noskimwords">//include the Facebook PHP SDKinclude_once "facebook.php";//instantiate the Facebook library with the APP ID and APP SECRET$facebook = new Facebook(array("appId" =&gt; "REPLACE WITH YOUR APP ID","secret" =&gt; "REPLACE WITH YOUR APP SECRET","cookie" =&gt; true));</pre> <p>Теперь переменная <code>$ facebook</code> может использоваться для вызова API в Facebook от имени приложения.</p> <ul><li>Параметр <code>appID</code> сообщает Facebook, какое приложение мы используем.</li> <li><code>Секретная</code> настройка «аутентифицирует» наши вызовы API, сообщая Facebook, что они поступили от кого-то, кто владеет приложением. Это <code>никогда</code> не должно показываться публике, поэтому оно называется «Секрет приложения».</li> <li>Параметр <code>cookie</code> указывает библиотеке сохранять сеанс пользователя с использованием файлов cookie. Без этого мы не сможем узнать, вошел ли пользователь через Facebook или нет.</li> </ul><p>Теперь мы проверяем, разрешил ли текущий пользователь доступ к приложению. Если нет, приложение должно перенаправить их на страницу «Разрешить разрешения» Facebook.</p> <pre class="brush: php noskimlinks noskimwords">//Get the FB UID of the currently logged in user$user = $facebook-&gt;getUser();//if the user has already allowed the application, you"ll be able to get his/her FB UIDif($user) {//do stuff when already logged in} else {//if not, let"s redirect to the ALLOW page so we can get access//Create a login URL using the Facebook library"s getLoginUrl() method$login_url_params = array("scope" =&gt; "publish_stream,read_stream,offline_access,manage_pages","fbconnect" =&gt;  1,"redirect_uri" =&gt; "http://".$_SERVER["HTTP_HOST"].$_SERVER["REQUEST_URI"]);$login_url = $facebook-&gt;getLoginUrl($login_url_params);//redirect to the login URL on facebookheader("Location: {$login_url}");exit();}</pre> <p>По сути это все, что происходит здесь:</p> <ul><li>Приложение выполняет простой вызов API, чтобы получить идентификатор пользователя Facebook (также известный как <code>FB UID</code>) с помощью метода <code>$ facebook-&gt; getUser ()</code>.</li> <li>Если переменная <code>$ user</code> имеет значение, это означает, что пользователь уже разрешил основные разрешения для приложения.</li> <li>Если нет, то это означает, что пользователь еще не разрешил разрешения для приложения, и приложение должно перенаправить на страницу разрешений Facebook, чтобы получить необходимые разрешения.</li> <li> Затем он генерирует <code>URL-адрес</code> для входа, куда приложение должно перенаправить пользователя, чтобы показать страницу разрешений Facebook для приложения. Метод <code>getLoginUrl ()</code> принимает следующие параметры: <ul><li> <code>область действия</code> - это список разделенных запятыми разрешений, необходимых приложению</li> <li> <code>fbconnect </code>- это должно быть <code>1</code>, чтобы сообщить Facebook, что приложение будет использовать Facebook для аутентификации пользователя</li> <li> <code>redirect_uri</code> - это страница, на которую перенаправляет Facebook после того, как пользователь прошел страницу разрешений Facebook</li> </ul><p>Вы можете прочитать больше о методе <code>getLoginUrl ()</code> здесь: <span>https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/</span> </p> </li> <li>После этого приложение перенаправляет пользователя на <code>URL-адрес</code> для входа, и пользователь видит страницу разрешений Facebook.</li> </ul><div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1097_fbapi/permissions.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>Страница разрешения Facebook</small> </p></div> <h3>Facebook разрешения</h3> <p>Давайте уделим минуту, чтобы поговорить о <span>разрешениях Facebook</span>. Как и при установке приложения на телефон Android, разрешения Facebook - это различные уровни доступа, которые приложение Facebook может делать от имени пользователя. Например, если нам нужен доступ к адресу электронной почты пользователя, мы можем добавить разрешение <code>электронной почты</code> к <code>настройке области</code>, которую мы используем для создания URL-адреса для входа.</p> <blockquote class="pullquote"><p> Помните, что с большой властью приходит большая ответственность, поэтому убедитесь, что вы используете только свои разрешения для добра, а не для зла. </p></blockquote> <p>Важно, чтобы ваше приложение запрашивало у пользователя только те разрешения, которые ему действительно необходимы. Если вам нужно только аутентифицировать пользователя через Facebook, вам даже не нужно спрашивать никаких разрешений! Помните, что с большой властью приходит большая ответственность, поэтому убедитесь, что вы используете только свои разрешения для добра, а не для зла.</p> <p>В приложении мы используем следующие разрешения:</p> <ul><li> <code>publish_stream</code> - позволяет приложению публиковать обновления в Facebook от имени пользователя</li> <li> <code>read_stream</code> - позволяет приложению читать из новостной ленты пользователя</li> <li> <code>offline_access</code> - конвертирует <code>access_token</code> в тот, который не имеет срока действия, позволяя приложению в любое время совершать вызовы API. Без этого <code>access_token</code> приложения истечет через несколько минут, что не идеально в этом случае</li> <li> <code>manage_pages</code> - позволяет приложению получать доступ к страницам Facebook пользователя. Поскольку приложение, которое мы создаем, имеет дело со страницами Facebook, оно нам тоже понадобится.</li> </ul><p>У Facebook гораздо больше разрешений на разные вещи. Вы можете прочитать все о них в документации<span> Facebook для разрешений</span>. </p><p>Возвращаясь к приложению, теперь, когда пользователь разрешил разрешения, требуемые приложением, мы можем сделать несколько вызовов API в Facebook! Поместите это в блок <code>if-else</code> из кода выше:</p> <pre class="brush: php noskimlinks noskimwords">&lt;pre&gt;//start the session if neededif( session_id() ) {} else {session_start();}//get the user"s access token$access_token = $facebook-&gt;getAccessToken();//check permissions list$permissions_list = $facebook-&gt;api("/me/permissions","GET",array("access_token" =&gt; $access_token));&lt;/pre&gt;</pre> <p>Первое, что мы делаем, это получаем <code>$ access_token</code> для пользователя, который только что аутентифицировал приложение. Это очень важно, так как приложению понадобится этот токен доступа почти для всего, что мы делаем. Чтобы получить его, мы используем метод <code>getAccessToken ()</code>. <code>$ Access_token</code> действует как «пароль» для пользователя. Он всегда уникален для каждого пользователя в каждом приложении, поэтому обязательно сохраняйте его при необходимости.</p> <p>После этого мы увидим, как выполнять API-вызовы в Facebook с помощью метода <code>api ()</code>. Этот метод принимает следующие параметры:</p> <ul><li> <code>$ graph_path</code> - это путь к графу Facebook, который по сути является «URL» к открытому объекту графа, к которому мы хотим получить доступ. Это может быть любой объект графа на Facebook, как <code>пост </code>(например «/&lt;post_id&gt;"), <code>комментарий</code> (например " /&lt;comment_id&gt;"), или даже <code>пользователю</code> ("/ me" это ярлык для текущего пользователя, которому принадлежит <code>$access_token</code>.&lt;/comment_id&gt; &lt;/post_id&gt; Это также может быть "/ &lt;имя_пользователя&gt;" или "/ ", но используемый вами <code>$ access_token</code> <code>должен</code> иметь доступ к этому пользователю, иначе вы сможете получить только общедоступную информацию пользователя).</li> <li> <code>$ method</code> - это метод, который вы хотите использовать. Обычно это <code>GET</code>, когда вы пытаетесь «получить» информацию, и <code>POST</code>, когда вы пытаетесь «публиковать» или обновлять информацию, и <code>DELETE</code>, если вы хотите удалить информацию. Если вы не уверены, в <span>документации Graph API</span> сообщается, какой метод использовать для конкретных вызовов API.</li> <li> <code>$ params</code> - это параметры, которые поставляются с вашим запросом API. Обычно для методов <code>GET</code> вам нужно только указать <code>$ access_token</code> пользователя. Однако для методов <code>POST</code> вам также потребуется указать другие параметры. Например, если вы хотите опубликовать новое обновление статуса, вы предоставите здесь сообщение об обновлении статуса.</li> </ul><p>В качестве альтернативы, мы также можем использовать метод <code>api ()</code> для выполнения запросов <code>FQL (Facebook Query Language)</code>, что позволяет нам получать данные на языке SQL. Это отлично подходит для получения информации, недоступной в Graph API, а также для выполнения нескольких запросов за один вызов. Например, мы можем получить имя пользователя и другие данные с помощью этого вызова FQL API:</p> <pre class="brush: php noskimlinks noskimwords">$fql = "SELECT name from user where uid = " . $fb_uid;$ret_obj = $facebook-&gt;api(array(   "method" =&gt; "fql.query",   "query" =&gt; $fql, ));</pre> <p>Нам это не понадобится в этом уроке, но хорошо иметь это в виду, когда вы сталкиваетесь с тем, что Graph API не может получить.</p> <p>Теперь, когда у нас есть список разрешений, которые пользователь разрешил для приложения, нам нужно проверить, дал ли пользователь приложению все необходимые права. Поскольку страница разрешений Facebook позволяет пользователям отзывать определенные разрешения, мы должны убедиться, что всем им разрешено работать с приложением. Если пользователь отозвал одно из разрешений, мы перенаправим их обратно на страницу разрешений.</p> <pre class="brush: php noskimlinks noskimwords">//check if the permissions we need have been allowed by the user//if not then redirect them again to facebook"s permissions page$permissions_needed = array("publish_stream", "read_stream", "offline_access", "manage_pages");foreach($permissions_needed as $perm) {if( !isset($permissions_list["data"][0][$perm]) || $permissions_list["data"][0][$perm] != 1 ) {$login_url_params = array("scope" =&gt; "publish_stream,read_stream,offline_access,manage_pages","fbconnect" =&gt;  1,"display"   =&gt;  "page","next" =&gt; "http://".$_SERVER["HTTP_HOST"].$_SERVER["REQUEST_URI"]);$login_url = $facebook-&gt;getLoginUrl($login_url_params);header("Location: {$login_url}");exit();}}</pre> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cdn.tutsplus.com/net/uploads/legacy/1097_fbapi/permission_list.png" class="lazy07" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small><code>var_dump ()</code> переменной <code>$ permissions_list</code></small> </p></div> <p>Когда это будет сделано, это означает, что мы все готовы и сможем без проблем запустить приложение. Давайте начнем с другого вызова API, на этот раз, чтобы получить список страниц Facebook, к которым у пользователя есть права администратора, и сохранить их в переменной сеанса. .После этого мы перенаправим пользователя на страницу <code>manage.php</code>, где будет находиться код управления страницей.</p> <pre class="brush: php noskimlinks noskimwords">//if the user has allowed all the permissions we need,//get the information about the pages that he or she managers$accounts = $facebook-&gt;api("/me/accounts","GET",array("access_token" =&gt; $access_token));//save the information inside the session$_SESSION["access_token"] = $access_token;$_SESSION["accounts"] = $accounts["data"];//save the first page as the default active page$_SESSION["active"] = $accounts["data"][0];//redirect to manage.phpheader("Location: manage.php");</pre> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cdn.tutsplus.com/net/uploads/legacy/1097_fbapi/account_list.png" class="lazy07" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small><code>var_dump ()</code> переменной <code>$ accounts</code></small> </p></div> <p>Путь к графу <code>/ me / accounts</code> дает нам список страниц, на которые у пользователя есть права администратора. Это возвращает массив всех страниц плюс определенные <code>$ access_tokens</code> для каждой из этих страниц. С этими <code>$ access_tokens</code> мы также сможем выполнять вызовы API от имени страницы Facebook!</p> <p>Сохраните их в массиве <code>$ _SESSION</code> и перенаправьте на страницу <code>manage.php</code>.</p> <p>Давайте начнем работать с нашим файлом <code>manage.php</code>. Помните, что мы сохранили список <code>$ accounts</code> пользователя в массиве <code>$ _SESSION</code>, а также установили первую учетную запись в списке в качестве активной страницы по умолчанию. Давайте <code>получим</code> новостную ленту этого аккаунта и покажем ее:</p> <pre class="brush: php noskimlinks noskimwords">//include the Facebook PHP SDKinclude_once "facebook.php";//start the session if necessaryif( session_id() ) {} else {session_start();}//instantiate the Facebook library with the APP ID and APP SECRET$facebook = new Facebook(array("appId" =&gt; "APP ID","secret" =&gt; "APP SECRET","cookie" =&gt; true));//get the news feed of the active page using the page"s access token$page_feed = $facebook-&gt;api("/me/feed","GET",array("access_token" =&gt; $_SESSION["active"]["access_token"]));</pre> <p>Опять же, приложение выполняет инициализацию библиотеки Facebook, а затем еще один вызов <code>api ()</code>, на этот раз в <code>/ me / feed</code>. Обратите внимание, что вместо <code>user"s access token</code>, использования  мы используем  <code>active page"s access token</code>  (через <code>$ _SESSION ["active"] ["access_token"]</code>). Это говорит Facebook, что мы хотим получать доступ к информации как к странице Facebook, а не как к пользователю.</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1097_fbapi/feed_list.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small><code>var_dump ()</code> переменной <code>$ page_feed</code></small> </p></div> <p>Вау, это много информации о <code>посте</code> в Facebook. Давайте рассмотрим один объект Facebook <code>Post</code> и посмотрим, из чего он сделан.</p> <h3>Объект <code>Post</code> Facebook</h3> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=495/net/uploads/legacy/1097_fbapi/post_breakdown.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>Facebook пост шпаргалка</small> </p></div> <ul><li> <code>ID</code> - это <code>пост</code> ID</li> <li> <code>from</code> - содержит информацию о пользователе, который разместил сообщение</li> <li> <code>message (красный)</code> - компонент сообщения из сообщения</li> <li> <code>картинка (оранжевая)</code> - ссылка на фото прикрепленная к посту</li> <li> <code>имя (синий)</code> - «название» Facebook должности</li> <li> <code>ссылка (также синий)</code> - ссылка где <code>имя</code> идет к щелчку</li> <li> <code>подпись (фиолетовая)</code> - несколько слов для описания ссылки</li> <li> <code>Описание (розовый)</code> - больше, чем несколько слов, чтобы описать связь</li> <li> <code>значок (серый)</code> - ссылка на изображения значка, используемого</li> <li> <code>действия</code> - действия на Facebook, которые вы можете выполнить с публикацией, например <code>«Нравится» </code>или <code>«Комментировать»</code>.</li> <li> <code>конфиденциальность</code> - конфиденциальности пост</li> <li> <code>Тип</code> - тип поста. Сообщение может быть <code>статус</code>, с<code>сылки</code>, <code>Фото</code> или <code>видео</code>.</li> <li> <code>created_time</code> - время, когда был создан пост</li> <li> <code>updated_time</code> - время, когда пост был обновлен</li> <li> <code>Комментарии </code>- замечания по должности</li> </ul><p>Было бы разумно сохранить копию шпаргалки выше, так как мы будем использовать ее снова, когда будем публиковать объекты <code>Post</code> в Facebook.</p> <p>Двигаясь дальше, давайте отображать новостную ленту в более приятной форме. Добавьте следующий HTML-код PHP код ниже:</p> <pre class="brush: html noskimlinks noskimwords">&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;Nettuts+ Page Manager&lt;/title&gt;&lt;link rel="stylesheet" href="css/reset.css" type="text/css" /&gt;&lt;link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" /&gt;&lt;script src="js/jquery.min.js"&gt;&lt;/script&gt;&lt;style&gt;body {padding-top: 40px;background-color: #EEEEEE;}img {vertical-align: middle;}#main {text-align: center;}.content {background-color: #FFFFFF;border-radius: 0 0 6px 6px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);margin: 0 -20px;padding: 20px;}.content .span6 {border-left: 1px solid #EEEEEE;margin-left: 0;padding-left: 19px;text-align: left;}.page-header {background-color: #F5F5F5;margin: -20px -20px 20px;padding: 20px 20px 10px;text-align: left;}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div id="main" class="container"&gt;&lt;div class="content"&gt;&lt;div class="page-header"&gt;&lt;h1&gt;&lt;img width="50" src="http://graph.facebook.com/&lt;?php echo $_SESSION["active"]["id"]; ?&gt;/picture" alt="&lt;?php echo $_SESSION["active"]["name"]; ?&gt;" /&gt;&lt;?php echo $_SESSION["active"]["name"]; ?&gt;&lt;small&gt;&lt;a href="http://facebook.com/profile.php?id=&lt;?php echo $_SESSION["active"]["id"]; ?&gt;" target="_blank"&gt;go to page&lt;/a&gt;&lt;/small&gt;&lt;/h1&gt;&lt;/div&gt;&lt;div class="row"&gt;&lt;div class="span10"&gt;&lt;ul id="feed_list"&gt;&lt;?php foreach($page_feed["data"] as $post): ?&gt;&lt;?php if( ($post["type"] == "status" || $post["type"] == "link") &amp;&amp; !isset($post["story"])): ?&gt;&lt;?php //do some stuff to display the post object ?&gt;&lt;?php endif; ?&gt;&lt;?php endforeach; ?&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div class="span6"&gt;&lt;h3&gt;Post a new update&lt;/h3&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</pre> <p>Здесь мы используем простой трюк Graph API: объект <code>Picture</code> Graph API. По сути, вы можете выбрать путь к графу любого объекта <code>«Пользователь</code>» или <code>«Страница»</code> (например, <code>http://graph.facebook.com/293518907333589</code>), добавьте / <code>picture</code> в конце, и вы получите 50x50 фото этого объекта. Например:</p> <p><code>HTTPS://Graph.Facebook.com/293518907333589/Picture</code></p> <p>Становится...</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://graph.facebook.com/293518907333589/picture" class="lazy07" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>Объект API демо картину графа</small> </p></div> <p>Возвращаясь, теперь, когда мы обновляем страницу <code>manage.php</code>, она должна выглядеть примерно так:</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1097_fbapi/demo_2.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"></div> <p>Добавьте этот внутри<code> &lt;? php foreach ($page_feed ["данные"]</code> как $post):? &gt; для отображения канала со страницы:</p> <pre class="brush: html noskimlinks noskimwords">&lt;?php if( ($post["type"] == "status" || $post["type"] == "link") &amp;&amp; !isset($post["story"])): ?&gt;&lt;li&gt;&lt;div class="post_photo"&gt;&lt;img src="http://graph.facebook.com/&lt;?php echo $post["from"]["id"]; ?&gt;/picture" alt="&lt;?php echo $post["from"]["name"]; ?&gt;"/&gt;&lt;/div&gt;&lt;div class="post_data"&gt;&lt;p&gt;&lt;a href="http://facebook.com/profile.php?id=&lt;?php echo $post["from"]["id"]; ?&gt;" target="_blank"&gt;&lt;?php echo $post["from"]["name"]; ?&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;?php echo $post["message"]; ?&gt;&lt;/p&gt;&lt;?php if( $post["type"] == "link" ): ?&gt;&lt;div&gt;&lt;div class="post_picture"&gt;&lt;?php if( isset($post["picture"]) ): ?&gt;&lt;a target="_blank" href="&lt;?php echo $post["link"]; ?&gt;"&gt;&lt;img src="&lt;?php echo $post["picture"]; ?&gt;" width="90" /&gt;&lt;/a&gt;&lt;?php else: ?&gt;&amp;nbsp;&lt;?php endif; ?&gt;&lt;/div&gt;&lt;div class="post_data_again"&gt;&lt;p&gt;&lt;a target="_blank" href="&lt;?php echo $post["link"]; ?&gt;"&gt;&lt;?php echo $post["name"]; ?&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;small&gt;&lt;?php echo $post["caption"]; ?&gt;&lt;/small&gt;&lt;/p&gt;&lt;p&gt;&lt;?php echo $post["description"]; ?&gt;&lt;/small&gt;&lt;/p&gt;&lt;/div&gt;&lt;div class="clearfix"&gt;&lt;/div&gt;&lt;/div&gt;&lt;?php endif; ?&gt;&lt;/div&gt;&lt;div class="clearfix"&gt;&lt;/div&gt;&lt;/li&gt;&lt;?php endif; ?&gt;</pre> <p>Когда вы снова обновите страницу, она должна выглядеть примерно так:</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1097_fbapi/demo_3.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"></div> <p>Выглядит хорошо, правда? Мы должны поблагодарить <code>Twitter Bootstrap</code> CSS за это!</p> <p>Теперь давайте добавим верхнюю панель навигации, чтобы помочь нам переключаться с одной страницы на другую. Добавьте следующий HTML-код после<code>&lt;body&gt;</code>тега и перед<code>&lt;div id="main" class="container"&gt;Тег:&lt;/div&gt;&lt;/body&gt;</code></p> <pre class="brush: html noskimlinks noskimwords">&lt;div class="topbar"&gt;&lt;div class="fill"&gt;&lt;div class="container"&gt;&lt;a class="brand" href="/"&gt;Nettuts+ Page Manager&lt;/a&gt;&lt;ul class="nav secondary-nav"&gt;&lt;li class="dropdown" data-dropdown="dropdown"&gt;&lt;a class="dropdown-toggle" href="#"&gt;Switch Page&lt;/a&gt;&lt;ul class="dropdown-menu"&gt;&lt;?php foreach($_SESSION["accounts"] as $page): ?&gt;&lt;li&gt;&lt;a href="switch.php?page_id=&lt;?php echo $page["id"]; ?&gt;"&gt;&lt;img width="25" src="http://graph.facebook.com/&lt;?php echo $page["id"]; ?&gt;/picture" alt="&lt;?php echo $page["name"]; ?&gt;" /&gt;&lt;?php echo $page["name"]; ?&gt;&lt;/a&gt;&lt;/li&gt;&lt;?php endforeach; ?&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</pre> <p>Не забудьте загрузить выпадающую библиотеку JavaScript со страницы JavaScript Bootstrap в Twitter. Вы можете скачать его <span>здесь</span>.</p> <pre class="brush: html noskimlinks noskimwords">&lt;script src="js/bootstrap-dropdown.js"&gt;&lt;/script&gt;&lt;script&gt;$(".topbar").dropdown()&lt;/script&gt;</pre> <p>Наконец, давайте создадим файл <code>switch.php</code>, где мы установим другую страницу в качестве активной страницы:</p> <pre class="brush: php noskimlinks noskimwords">&lt;?phpsession_start();$page_id = $_GET["page_id"];foreach($_SESSION["accounts"] as $page) {if( $page["id"] == $page_id ) {$_SESSION["active"] = $page;header("Location: manage.php");exit();}}exit();?&gt;</pre> <p>Обновите страницу <code>manage.php</code> еще раз, и вы должны увидеть что-то вроде этого:</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1097_fbapi/demo_4.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"></div> <p>И теперь, используя наш выпадающий переключатель, мы можем переключать страницы.</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1097_fbapi/switch.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"></div> <hr><h2> <span>Шаг 4. Публикация в Facebook через Graph API</span></h2> <p>Теперь мы готовы публиковать новые обновления на нашей странице! Прежде всего, давайте создадим HTML-форму, в которой мы можем указать, что мы будем публиковать. Добавьте это ниже<code>&lt;h3&gt;Разместить новое обновление&lt;/h3&gt;</code>HTML:</p> <pre class="brush: html noskimlinks noskimwords">&lt;img src="post_breakdown.png" alt="Facebook Post Cheat Sheet" width="340" /&gt;&lt;br /&gt;&lt;form method="POST" action="newpost.php" class="form-stacked"&gt;&lt;label for="message"&gt;Message:&lt;/label&gt;&lt;input class="span5" type="text" id="message" name="message" placeholder="Message of post" /&gt;&lt;label for="picture"&gt;Picture:&lt;/label&gt;&lt;input class="span5" type="text" id="picture" name="picture" placeholder="Picture of post" /&gt;&lt;label for="link"&gt;Link:&lt;/label&gt;&lt;input class="span5" type="text" id="link" name="link" placeholder="Link of post" /&gt;&lt;label for="name"&gt;Name:&lt;/label&gt;&lt;input class="span5" type="text" id="name" name="name" placeholder="Name of post" /&gt;&lt;label for="caption"&gt;Caption:&lt;/label&gt;&lt;input class="span5" type="text" id="caption" name="caption" placeholder="Caption of post" /&gt;&lt;label for="description"&gt;Description:&lt;/label&gt;&lt;input class="span5" type="text" id="description" name="description" placeholder="Description of post" /&gt;&lt;div class="actions"&gt;&lt;input type="submit" class="btn primary" value="Post" /&gt;&lt;input type="reset" class="btn" value="Reset" /&gt;&lt;/div&gt;&lt;/form&gt;</pre> <p>Обновить, чтобы увидеть, как это выглядит:</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=378/net/uploads/legacy/1097_fbapi/demo_5.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>Любящие стили форм Bootstrap по умолчанию</small> </p></div> <p>Шпаргалка <code>Post</code> должна пригодиться, когда мы выясним, что положить в поля. Теперь давайте создадим файл <code>newpost.php</code>, в котором мы фактически будем использовать API Graph Facebook для публикации в фиде страницы.</p> <p>Начните с создания файла и инициализации библиотеки Facebook, как мы делали для других страниц:</p> <pre class="brush: php noskimlinks noskimwords">&lt;?php//include the Facebook PHP SDKinclude_once "facebook.php";//start the session if necessaryif( session_id() ) {} else {session_start();}//instantiate the Facebook library with the APP ID and APP SECRET$facebook = new Facebook(array("appId" =&gt; "APP ID","secret" =&gt; "APP SECRET","cookie" =&gt; true));?&gt;</pre> <p>После этого давайте получим весь контент, который мы получили из запроса <code>POST</code>:</p> <pre class="brush: php noskimlinks noskimwords">//get the info from the form$parameters = array("message" =&gt; $_POST["message"],"picture" =&gt; $_POST["picture"],"link" =&gt; $_POST["link"],"name" =&gt; $_POST["name"],"caption" =&gt; $_POST["caption"],"description" =&gt; $_POST["description"]);</pre> <p>Давайте не забудем добавить <code>$ access_token</code> для страницы к параметрам:</p> <pre class="brush: php noskimlinks noskimwords">//add the access token to it$parameters["access_token"] = $_SESSION["active"]["access_token"];</pre> <p>Теперь, когда у нас есть массив <code>$ parameters</code>, давайте создадим и отправим наш запрос API Graph!</p> <pre class="brush: php noskimlinks noskimwords">//build and call our Graph API request$newpost = $facebook-&gt;api("/me/feed","POST",$parameters);</pre> <p>Обратите внимание на то, что может изменить<code> метод $</code>. Вызов API <code>GET</code> для <code>/ me / feed</code> возвращает ленту новостей этого конкретного объекта, но вызов API <code>POST</code> для <code>/ me / feed</code> опубликует новое обновление статуса объекта.</p> <p>Чтобы опубликовать новый объект <code>пост</code> на Facebook, приложению необходимо сделать вызов <code>/&lt;page_id or="" e=""&gt;/feed</code> граф путь, и он должен поставить в массиве <code>$parameters</code> следующее:&lt;/page_id&gt;</p> <ul><li> <code>access_token </code>- токен доступа учетной записи, для которой мы публикуем</li> <li> <code>сообщение</code> - сообщение для публикации</li> <li> <code>картинка</code> (необязательно) - ссылка на фото поста</li> <li> <code>имя</code> (необязательно) - «заголовок» поста</li> <li> <code>ссылка</code> (необязательно) - ссылка, по которой <code>имя</code> будет переходить при нажатии</li> <li> <code>заголовок</code> (необязательно) - несколько слов для описания ссылки / названия</li> <li> <code>описание</code> (необязательно) - более нескольких слов для описания ссылки / имени</li> </ul><p>Вы можете видеть, что единственные обязательные параметры - это <code>access_token</code> и параметры <code>сообщения</code>. Предоставляя только эти два, мы можем опубликовать простое сообщение о состоянии, например так:</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=475/net/uploads/legacy/1097_fbapi/status_update.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>Пример обновления статуса</small> </p></div> <p>Все остальное необязательно. Однако если вы предоставляете <code>имя</code>, <code>ссылку</code>, <code>заголовок </code>или <code>описание</code>, вы должны указать все четыре. Что касается <code>изображения</code>, если значение параметра не указано или недоступно, изображение сообщения будет пустым.</p> <p>Наконец, давайте попробуем опубликовать в Facebook с помощью приложения! Вернитесь на страницу <code>manage.php</code> и заполните форму, затем нажмите <code>Post</code>:</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=374/net/uploads/legacy/1097_fbapi/demo_6.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"></div> <p>После этого вы должны быть перенаправлены обратно на страницу<code> manage.php</code>, но в ленте должен быть новый пост!</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1097_fbapi/demo_7.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>Публикация в Facebook успешна!</small> </p></div> <p>Вы также можете проверить страницу Facebook. Вы должны увидеть новый пост там:</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=599/net/uploads/legacy/1097_fbapi/facebookpage.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>Публикация на странице Facebook</small> </p></div> <hr><h2>Заключение</h2> <p>К настоящему времени у вас уже должно быть четкое представление о том, как использовать API Graph Facebook для чтения и публикации в Facebook. В этом уроке мы рассмотрим только основы - вы можете сделать гораздо больше, используя Graph API. Такие вещи, как <code><span>обновления в режиме реального времени</span></code>, которые позволяют вам подписаться на события, которые происходят с пользователями вашего приложения (например, когда пользователь меняет свою фотографию профиля), или объект графика <code><span>Insights</span></code>, который позволяет получать статистику приложения, страницы или домен, к которому у пользователя есть доступ.</p> <p>Конечно, лучший ресурс для получения дополнительной информации о Graph API - это, несомненно, <span>документация Graph API от Facebook</span>, но я также предлагаю взглянуть на <span>FBDevWiki</span>, стороннюю размещенную вики для документации по разработке Facebook.</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1097_fbapi/fbdevwiki.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>FBDevWiki.com</small> </p></div> <p>Кроме того, есть также специальная версия StackOverflow для Facebook, которую вы можете посетить по адресу <span>http://facebook.stackoverflow.com.</span> Все вопросы касаются Facebook и Facebook Development, поэтому стоит посетить, если вам нужна помощь или у вас есть вопросы по этому вопросу.</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1097_fbapi/facebookso.png" alt="Спор с Facebook..." title="Спор с Facebook..." width="50" height="50"><p><small>Facebook StackOverflow</small> </p></div> <p>Надеемся, что из этого руководства вы узнали, как легко использовать <code>API Graph Facebook</code>, чтобы сделать ваши приложения более социальными.</p> <p>Использовали ли вы API Graph Facebook в предыдущем проекте или планируете использовать его сейчас? Расскажите мне все об этом в комментариях ниже и большое спасибо за чтение!</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825662-spor-s-facebook" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="PHP" href="https://norma-studio.github.io/article5/220825662-spor-s-facebook" class="tm-article-body__tags-item-link">PHP</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
45043</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
418</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
