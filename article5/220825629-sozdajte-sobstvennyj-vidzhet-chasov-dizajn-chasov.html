
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Создайте собственный виджет часов: дизайн часов... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Создайте собственный виджет часов: дизайн часов... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Создайте собственный виджет часов: дизайн часов... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Создайте собственный виджет часов: дизайн часов... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Разработка виджетов для платформы Android включает несколько иной набор задач, чем разработка стандартных приложений.  В этой серии руководств мы будем работать над процессом разработки настраиваемого виджета аналоговых часов.  Часы будут основаны на классе Android AnalogClock и настроены с вашей собственной графикой....">
<meta property="og:description" content="Разработка виджетов для платформы Android включает несколько иной набор задач, чем разработка стандартных приложений.  В этой серии руководств мы будем работать над процессом разработки настраиваемого виджета аналоговых часов.  Часы будут основаны на классе Android AnalogClock и настроены с вашей собственной графикой....">
<meta name="twitter:description" content="Разработка виджетов для платформы Android включает несколько иной набор задач, чем разработка стандартных приложений.  В этой серии руководств мы будем работать над процессом разработки настраиваемого виджета аналоговых часов.  Часы будут основаны на классе Android AnalogClock и настроены с вашей собственной графикой....">
<meta property="aiturec:description" content="Разработка виджетов для платформы Android включает несколько иной набор задач, чем разработка стандартных приложений.  В этой серии руководств мы будем работать над процессом разработки настраиваемого виджета аналоговых часов.  Часы будут основаны на классе Android AnalogClock и настроены с вашей собственной графикой....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/41477/images/41477_4e5f3fcbdad180f395e78a11db355d84.png">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/41477/images/41477_4e5f3fcbdad180f395e78a11db355d84.png">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/41477/images/41477_4e5f3fcbdad180f395e78a11db355d84.png">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/41477/images/41477_4e5f3fcbdad180f395e78a11db355d84.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/41477/images/41477_4e5f3fcbdad180f395e78a11db355d84.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825629-sozdajte-sobstvennyj-vidzhet-chasov-dizajn-chasov.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825629-sozdajte-sobstvennyj-vidzhet-chasov-dizajn-chasov.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825629-sozdajte-sobstvennyj-vidzhet-chasov-dizajn-chasov.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825629-sozdajte-sobstvennyj-vidzhet-chasov-dizajn-chasov.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825629-sozdajte-sobstvennyj-vidzhet-chasov-dizajn-chasov.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825629-sozdajte-sobstvennyj-vidzhet-chasov-dizajn-chasov.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825629-sozdajte-sobstvennyj-vidzhet-chasov-dizajn-chasov.html" title="Создайте собственный виджет часов: дизайн часов... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Создайте собственный виджет часов: дизайн часов... | envatomarket.ru | norma-studio.github.io" title="Создайте собственный виджет часов: дизайн часов... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/63456435436.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825629-sozdajte-sobstvennyj-vidzhet-chasov-dizajn-chasov.html" class="tm-user-info__username" title="
М. Старостенко" aria-label="
М. Старостенко">
М. Старостенко</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Создайте собственный виджет часов: дизайн часов...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825629-sozdajte-sobstvennyj-vidzhet-chasov-dizajn-chasov" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Android SDK" href="https://norma-studio.github.io/article5/220825629-sozdajte-sobstvennyj-vidzhet-chasov-dizajn-chasov" class="tm-article-snippet__hubs-item-link"><span>Android SDK</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825629-sozdajte-sobstvennyj-vidzhet-chasov-dizajn-chasov.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/41477/images/41477_4e5f3fcbdad180f395e78a11db355d84.png">
    <meta itemprop="headline name" content="Создайте собственный виджет часов: дизайн часов... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Разработка виджетов для платформы Android включает несколько иной набор задач, чем разработка стандартных приложений.  В этой серии руководств мы будем работать над процессом разработки настраиваемого виджета аналоговых часов.  Часы будут основаны на классе Android AnalogClock и настроены с вашей собственной графикой....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Разработка виджетов для платформы Android включает несколько иной набор задач, чем разработка стандартных приложений.  В этой серии руководств мы будем работать над процессом разработки настраиваемого виджета аналоговых часов.  Часы будут основаны на классе Android AnalogClock и настроены с вашей собственной графикой....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Разработка виджетов для платформы Android включает несколько иной набор задач, чем разработка стандартных приложений.  В этой серии руководств мы будем работать над процессом разработки настраиваемого виджета аналоговых часов.  Часы будут основаны на классе Android AnalogClock и настроены с вашей собственной графикой.<br><!--more--></p><hr><h2>Обзор серии</h2> <p>В этой серии руководств мы разрабатываем настраиваемый виджет аналоговых часов для Android с использованием класса AnalogClock и пользовательской графики.  В первой части серии мы создаем проект, готовим файл Manifest и другие ресурсы.  В этой части мы будем работать над дизайном виджета. Это будет включать создание графики для часового циферблата и стрелок, а также реализацию макета в XML. Мы будем создавать графику для устройств различной плотности.  В заключительной части серии мы собираемся реализовать возможность предоставления пользователю выбора из набора дизайнов для часов, поэтому мы создадим три варианта дизайна здесь.</p> <p>Это вторая часть нашей серии статей о создании настраиваемого виджета аналоговых часов для Android в течение четырех уроков:</p> <ul><li><span>Настройка проекта виджета Android</span></li> <li><span>Проектирование часов</span></li> <li><span>Получение обновлений и запуск</span></li> <li><span>Реализация конфигурации пользователя</span></li> </ul><p>Виджет Android AnalogClock использует три изображения: циферблат часов, минутную стрелку и часовую стрелку.  Поэтому мы создадим три элемента дизайна для каждой версии виджета часов, которую мы хотим, чтобы пользователи могли выбирать между.  Мы также создадим альтернативные варианты оформления с помощью циферблата, часовой и минутной стрелок.  Для этого проекта нам нужно настроить таргетинг на разные плотности экрана устройства, для чего мы будем создавать файлы изображений в четырех разных масштабах.</p> <hr><h2> <span>Шаг 1. </span>Создание изображений для циферблата часов</h2> <p>Мы собираемся создать три дизайна часов, каждый с циферблатом, минутной стрелкой и часовой стрелкой. Вы, конечно, можете использовать свои собственные дизайны вместо этого, но не стесняйтесь использовать файлы изображений, которые мы используем здесь, чтобы начать.  <em>Файлы изображений для каждого дизайна в каждой плотности включены в ссылку для загрузки этого учебного пособия, а также будут включены в загрузку для части 4.</em></p> <p>Сначала идет циферблат часов.  Помните, что мы указали виджет в виде двух ячеек шириной и двух ячеек, что привело к максимальному размеру 146 dp (пикселей, не зависящих от плотности). Для этой серии уроков мы создадим четыре версии каждого изображения в соответствии с четырьмя категориями плотности.</p> <p><em>Вместо того, чтобы создавать изображения для каждой плотности, вы можете альтернативно использовать графику <span>NinePatch</span>, которая является растровым изображением, которое можно масштабировать вверх и вниз в соответствии с плотностью устройства, что позволяет вам создавать одно изображение для каждого дизайна.  Возможность использования NinePatch частично зависит от содержания используемых вами дизайнов, но есть <span>инструменты</span>, которые помогут вам создать их, если вы пожелаете.</em></p> <p>Проще всего начать со средней плотности, которая должна составлять максимум 146 пикселей на обеих осях.  Вот часовой циферблат по умолчанию, который мы используем при средней плотности, который вы можете использовать либо в качестве справочного материала для ваших собственных дизайнов, либо, если вы не хотите создавать свой собственный позже.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/41477/images/41477_4e5f3fcbdad180f395e78a11db355d84.png" class="lazy07" alt="Создайте собственный виджет часов: дизайн часов..." title="Создайте собственный виджет часов: дизайн часов..." width="50" height="50"></figure><p>В этом случае размер изображения составляет 146 пикселей по обеим осям, но вы можете уменьшить его, если хотите.  Мы будем указывать запас для устройств с API-интерфейсами Android менее 14, но не будем указывать запас для устройств с более чем 14-ю версиями, поскольку на более поздних уровнях API между виджетами устанавливается автоматический запас.  Вы можете использовать практически любой понравившийся вам дизайн - ваши часы даже не должны быть круглыми.  Включение либо меток, либо цифр, обозначающих часы на циферблате, целесообразно с точки зрения удобства использования, хотя это и не обязательно.</p> <p>Вот две альтернативные конструкции циферблата часов, которые мы будем использовать: каменная и другая металлическая, которые представлены здесь со средней плотностью:</p> <div class="tutorial_image"> <p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/41477/images/41477_c64b0773368eeb7cd0a42f7b236de450.png" class="lazy07" alt="Создайте собственный виджет часов: дизайн часов..." title="Создайте собственный виджет часов: дизайн часов..." width="50" height="50"></p> <p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/41477/images/41477_9970855a9f85896d421ff7c88b032b2e.png" class="lazy07" alt="Создайте собственный виджет часов: дизайн часов..." title="Создайте собственный виджет часов: дизайн часов..." width="50" height="50"></p> </div> <p>Создав циферблат часов, вы можете создавать альтернативные версии каждого изображения для разных плотностей.  В зависимости от ваших дизайнов это может не потребоваться, но мы будем включать индивидуальные версии каждого изображения для дизайнов в этом руководстве.  Ниже указан максимальный размер, который мы используем для нашего виджета по осям X и Y при каждой плотности:</p> <ul><li>Низкая плотность: 110px</li> <li>Средняя плотность: 146 пикселей</li> <li>Высокая плотность: 220px</li> <li>Очень высокая плотность: 292px</li> </ul><p>Если у вас есть файлы изображений для каждого дизайна циферблата, который вы хотите использовать (и версии для каждой плотности, если необходимо), скопируйте их в доступные для рисования папки в рабочей области проекта виджета Android.  Eclipse обычно создает папку для каждой категории плотности автоматически, но, если вы используете только одно изображение для всех плотностей, вы можете создать папку просто с именем «drawable» и поместить туда изображение.  Папки для каждого уровня плотности:</p> <ul><li>Низкий: drawable-lpdi</li> <li>Средний: drawable-mpdi</li> <li>Высокий: drawable-hpdi</li> <li>Очень высокий: drawable-xhpdi</li> </ul><p>Android AVD Manager позволит вам протестировать готовый проект виджета на каждой из этих плотностей.  После того, как ваши изображения будут сохранены в различные папки для рисования, убедитесь, что вы использовали одинаковые имена в каждой из них.  Например, один из дизайнов циферблата, который мы используем, называется «clock_dial_stone» - это имя файла изображения для каменного циферблата в каждой папке плотности, хотя содержимое каждой версии отличается, если только по размеру.  Если вы все еще сомневаетесь в том, как это должно работать, просто загрузите файлы изображений, используя ссылку для загрузки в верхней части этого руководства, и просмотрите папки, чтобы получить представление о них.</p> <hr><h2> <span>Шаг 2: </span>создайте изображения стрелки часов</h2> <p>Затем создайте изображение для часовой и минутной стрелок виджета часов, включая изображения для каждого дизайна и каждой целевой плотности.  Вот наши минутные стрелки средней плотности для каждого дизайна:</p> <div class="tutorial_image"> <p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/41477/images/41477_c1d3ce8dfad89065e0958104aa300d97.png" class="lazy07" alt="Создайте собственный виджет часов: дизайн часов..." title="Создайте собственный виджет часов: дизайн часов..." width="50" height="50"></p> <p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/41477/images/41477_a8226588e1dff8935defff89e6adbc91.png" class="lazy07" alt="Создайте собственный виджет часов: дизайн часов..." title="Создайте собственный виджет часов: дизайн часов..." width="50" height="50"></p> <p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/41477/images/41477_4ac2b4ccd4783e668aefb5a1afaf2d64.png" class="lazy07" alt="Создайте собственный виджет часов: дизайн часов..." title="Создайте собственный виджет часов: дизайн часов..." width="50" height="50"></p> </div> <p>Опять же, не стесняйтесь использовать их, чтобы начать или работать самостоятельно.  Обратите внимание, что эти файлы изображений содержат прозрачное пространство вокруг руки.  Вам необходимо создать каждое из ваших изображений рук с полной высотой циферблата, с которым они будут использоваться.  Каждая стрелка должна быть в точном положении, в котором она была бы, если указывать на двенадцать, положить поверх изображения циферблата и на полпути через него.  Стрелка также должна находиться в центре файла изображения по горизонтали, поскольку при отображении времени она будет поворачиваться от своей центральной точки.  Длина стрелок в файле изображения действительно зависит от вас, если полная высота изображения равна высоте изображения циферблата.</p> <p>Следующая диаграмма показывает полную шкалу изображений стрелок с минутной стрелкой в двенадцать и часовой стрелкой в три (часовая стрелка была повернута на 90 градусов по часовой стрелке в ее центральной точке):</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/41477/images/41477_f672f66923dd5be5fbb2455188425507.png" class="lazy07" alt="Создайте собственный виджет часов: дизайн часов..." title="Создайте собственный виджет часов: дизайн часов..." width="50" height="50"></figure><p>После того, как у вас отсортированы дизайны минутных стрелок, снова сохраните один для каждой плотности, масштабируя их вверх и вниз, чтобы соответствовать высоте циферблата в каждом случае.  Скопируйте их снова в свои папки для рисования, используя одно и то же имя для каждого дизайна в папках плотности, как и в изображениях набора.</p> <p>Затем выполните тот же процесс для ваших часовых стрелок.  Вот часовые стрелки для трех конструкций, которые мы используем:</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/41477/images/41477_aacc6b21cddef874e464d2124fd04633.png" class="lazy07" alt="Создайте собственный виджет часов: дизайн часов..." title="Создайте собственный виджет часов: дизайн часов..." width="50" height="50"><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/41477/images/41477_8c9bff6a772cb37e103497695a3e513c.png" class="lazy07" alt="Создайте собственный виджет часов: дизайн часов..." title="Создайте собственный виджет часов: дизайн часов..." width="50" height="50"></p> <p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/legacy-premium-tutorials/posts/41477/images/41477_42b32f43a1adda8b190d0d26d9e938ef.png" class="lazy07" alt="Создайте собственный виджет часов: дизайн часов..." title="Создайте собственный виджет часов: дизайн часов..." width="50" height="50"></p> </figure><p>Принцип здесь тот же, что и для минутных стрелок, за исключением того, что часовые стрелки обычно должны быть короче.  Создайте свои часовые стрелки, указывающие на 12 часов, и подготовьте версии для каждой плотности, скопировав их в свои папки для рисования, как вы делали для минутных стрелок.</p> <hr><h2> <span>Шаг 3: </span>Определите поля виджета</h2> <p>В дизайне виджета будут использоваться некоторые данные, которые мы включим в папки «значений» нашего проекта.  В Android API 14 и более поздних версиях система автоматически включает поля между виджетами, когда они отображаются на домашнем экране пользователя.  Однако в предыдущих версиях API это было не так.  По этой причине мы хотим указать поле для включения круглосуточного виджета на устройствах с уровнями Android ниже 14.  Это случай, когда мы можем использовать тот факт, что у нас есть папки значений, предназначенные для этих двух категорий уровней пользовательского API.</p> <p>Мы определим поля в нашем файле макета XML, ссылаясь на ресурс измерения.  В каталоге «values» создайте новый файл с именем «sizes.xml»  - выберите папку «values» в Eclipse и щелкните правой кнопкой мыши или выберите «Файл», затем «Новый», «Файл» и введите имя файла.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=509/legacy-premium-tutorials/posts/41477/images/41477_7dc94d43ade7ef7bd207edd4ecc992ca.png" alt="Создайте собственный виджет часов: дизайн часов..." title="Создайте собственный виджет часов: дизайн часов..." width="50" height="50"></figure><p>Когда вы нажмете кнопку «Готово», Eclipse создаст и откроет файл.  Выберите вкладку «sizes.xml»  для редактирования кода.  Введите следующее:</p> <pre class="brush: xml noskimlinks noskimwords"> &lt;resources&gt; &lt;dimen name="clock_margin"&gt;8dp&lt;/dimen&gt; &lt;/resources&gt;</pre> <p>Этот код просто перечисляет значение измерения с использованием независимых от плотности пикселей вместе с именем, чтобы мы могли ссылаться на него в другом месте.</p> <p>Сохраните файл.  Теперь скопируйте его, щелкнув правой кнопкой мыши в папке «values» или выбрав его и выбрав «Edit» - затем выберите «Copy».  Вставьте его в папку «values-v14», которую мы создали в прошлый раз - щелкните правой кнопкой мыши или выберите папку и выберите «Изменить», затем выберите «Вставить».  Файл появится в папке «values-v14», которая предназначена для уровней API начиная с 14.  Откройте эту новую копию файла и отредактируйте значение измерения, чтобы указать нулевое поле следующим образом:</p> <pre class="brush: xml noskimlinks noskimwords"> &lt;resources&gt; &lt;dimen name="clock_margin"&gt;0dp&lt;/dimen&gt; &lt;/resources&gt;</pre> <p>Теперь, когда компоновка XML ссылается на это значение измерения с использованием его имени, нулевое значение будет использоваться на устройствах, работающих под управлением API 14 плюс, а значение 8dp будет использоваться в противном случае.</p> <hr><h2> <span>Шаг 4.</span> Реализация макета виджета</h2> <p>Теперь давайте определим наш виджет в XML.  Помните, что мы указали начальный макет для виджета в файле XML, в котором мы определили его основные свойства.  Макет, на который мы ссылались, был "clock_widget_layout", поэтому создайте этот файл сейчас.  Щелкните правой кнопкой мыши или выберите папку с «макетом» и выберите «Файл», затем «Новый», «Файл».  Введите «clock_widget_layout.xml» в качестве имени файла и нажмите «Готово».</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=510/legacy-premium-tutorials/posts/41477/images/41477_d51737ef19662371b0aed3b7ec041d67.png" alt="Создайте собственный виджет часов: дизайн часов..." title="Создайте собственный виджет часов: дизайн часов..." width="50" height="50"></figure><p>Выберите вкладку «clock_widget_layout.xml», когда Eclipse откроет файл, чтобы вы могли редактировать XML.  Мы используем относительную компоновку для нашего виджета - если вы хотите использовать другой дизайн, вы можете альтернативно использовать либо линейную, либо рамочную компоновку, так как они являются единственными поддерживаемыми виджетами.  Чтобы использовать Относительный макет, добавьте следующую схему в файл XML-макета:</p> <pre class="brush: xml noskimlinks noskimwords"> &lt;RelativeLayout    xmlns:android="http://schemas.android.com/apk/res/android"  android:id="@+id/custom_clock_widget"  android:layout_width="fill_parent"  android:layout_height="fill_parent" android:padding="@dimen/clock_margin" android:gravity="center"&gt;  &lt;/RelativeLayout&gt;</pre> <p>Здесь мы указываем идентификатор для виджета, который мы будем использовать для реализации кликов по нему в нашем Java-коде в части 4. Обратите внимание, что код также ссылается на значение измерения, которое мы создали, используя стандартный синтаксис - имя «измерений» .xml " файл на самом деле не имеет значения, вам просто нужно перечислить элемент" измерения "в файле значений, чтобы ссылаться на него таким образом.</p> <p>Внутри Относительного макета добавьте свой виджет AnalogClock следующим образом:</p> <pre class="brush: xml noskimlinks noskimwords"> &lt;AnalogClock  android:id="@+id/AnalogClock0"  android:layout_width="wrap_content"  android:layout_height="wrap_content"  android:dial="@drawable/clock_dial"  android:hand_hour="@drawable/clock_hour_hand"  android:hand_minute="@drawable/clock_minute_hand" /&gt;</pre> <p>Это стандартный элемент Android Analog Clock, который позволяет настроить дисплей.  Мы используем атрибут ID, чтобы мы могли ссылаться на виджет в Java.  Последние три атрибута определяют доступные для рисования ресурсы, которые мы создали для циферблата, минутной и часовой стрелок.  Если вы сохранили свои файлы с разными именами, измените этот код, чтобы отразить их.  Android выберет файл для рисования из соответствующей папки плотности на каждом пользовательском устройстве.</p> <p>Поскольку мы разрешаем пользователям выбирать дизайн, мы фактически собираемся включить все три дизайна в наш XML, установив все, кроме одного, изначально невидимыми.  Убедитесь, что вы включили первый дизайн, который вы хотите отобразить по умолчанию, а затем добавьте остальные следующим образом:</p> <pre class="brush: xml noskimlinks noskimwords"> &lt;AnalogClock  android:id="@+id/AnalogClock1"  android:layout_width="wrap_content"  android:layout_height="wrap_content"  android:dial="@drawable/clock_dial_stone"  android:hand_hour="@drawable/clock_hour_hand_stone"  android:hand_minute="@drawable/clock_minute_hand_stone" android:visibility="invisible" /&gt; &lt;AnalogClock  android:id="@+id/AnalogClock2"  android:layout_width="wrap_content"  android:layout_height="wrap_content"  android:dial="@drawable/clock_dial_metal"  android:hand_hour="@drawable/clock_hour_hand_metal"  android:hand_minute="@drawable/clock_minute_hand_metal" android:visibility="invisible" /&gt;</pre> <p>Опять же, измените отображаемые имена, чтобы они отражали названия циферблатов, минут и часовых стрелок для каждого из ваших дизайнов.  Вы можете включить более трех дизайнов, если хотите - убедитесь, что все, кроме одного, имеют видимость, установленную как невидимую, чтобы изначально отображался только один дизайн (опция по умолчанию).  Мы сможем реализовать выбор пользователя между этими проектами в Java, используя атрибуты идентификатора элемента Analog Clock, которые заканчиваются целыми числами, начинающимися с нуля и увеличивающимися с каждым проектом.  Сохраните файл макета.</p> <p>Вот скриншоты того, как каждый из наших дизайнов будет выглядеть, когда виджет будет завершен:</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/legacy-premium-tutorials/posts/41477/images/41477_bf3b9a0d8a56c9734c1f502acf47c168.png" alt="Создайте собственный виджет часов: дизайн часов..." title="Создайте собственный виджет часов: дизайн часов..." width="50" height="50"></figure><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/legacy-premium-tutorials/posts/42580/images/42580_ac7a108ed4a0aa9d090e44509bf7fa1c.png" alt="Создайте собственный виджет часов: дизайн часов..." title="Создайте собственный виджет часов: дизайн часов..." width="50" height="50"></figure><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/legacy-premium-tutorials/posts/41477/images/41477_28b33148e4a99a78fb2ac4e2c11371a8.png" alt="Создайте собственный виджет часов: дизайн часов..." title="Создайте собственный виджет часов: дизайн часов..." width="50" height="50"></figure><hr><h2>В следующий раз</h2> <p>На этом процесс разработки нашего виджета часов завершен.  Если вы не хотите создавать свои собственные изображения дизайна на этом этапе, просто сначала используйте изображения в папке загрузки.  В следующем уроке мы будем использовать класс AppWidgetProvider для реализации нашего виджета на Java.  В заключительной части серии мы будем реализовывать пользовательские клики на виджете, представляя выбор между дизайнами и обновляя пользовательские настройки, чтобы непрерывно отображать выбранную ими опцию.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825629-sozdajte-sobstvennyj-vidzhet-chasov-dizajn-chasov" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Android SDK" href="https://norma-studio.github.io/article5/220825629-sozdajte-sobstvennyj-vidzhet-chasov-dizajn-chasov" class="tm-article-body__tags-item-link">Android SDK</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
43328</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
493</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
