
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Изучаем Canvas с нуля: Трансформации и Градиенты... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Изучаем Canvas с нуля: Трансформации и Градиенты... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Изучаем Canvas с нуля: Трансформации и Градиенты... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Изучаем Canvas с нуля: Трансформации и Градиенты... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="В данном руководстве мы рассмотрим трансформации (*- процесс, преобразующий координаты из одной системы в другую посредством пересчета (translation), вращений (rotation) и масштабирования (scaling). Тут и далее примеч. пер.) на холсте, а также тени и градиенты. Трансформации чрезвычайно полезный набор методов, который способствует пробуждению креат...">
<meta property="og:description" content="В данном руководстве мы рассмотрим трансформации (*- процесс, преобразующий координаты из одной системы в другую посредством пересчета (translation), вращений (rotation) и масштабирования (scaling). Тут и далее примеч. пер.) на холсте, а также тени и градиенты. Трансформации чрезвычайно полезный набор методов, который способствует пробуждению креат...">
<meta name="twitter:description" content="В данном руководстве мы рассмотрим трансформации (*- процесс, преобразующий координаты из одной системы в другую посредством пересчета (translation), вращений (rotation) и масштабирования (scaling). Тут и далее примеч. пер.) на холсте, а также тени и градиенты. Трансформации чрезвычайно полезный набор методов, который способствует пробуждению креат...">
<meta property="aiturec:description" content="В данном руководстве мы рассмотрим трансформации (*- процесс, преобразующий координаты из одной системы в другую посредством пересчета (translation), вращений (rotation) и масштабирования (scaling). Тут и далее примеч. пер.) на холсте, а также тени и градиенты. Трансформации чрезвычайно полезный набор методов, который способствует пробуждению креат...">
<meta property="og:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/1.jpg">
<meta property="aiturec:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/1.jpg">
<meta name="twitter:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/1.jpg">
<meta property="vk:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/1.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/1.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825693-izuchaem-canvas-s-nulya-transformatsii-i-gradienty.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825693-izuchaem-canvas-s-nulya-transformatsii-i-gradienty.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825693-izuchaem-canvas-s-nulya-transformatsii-i-gradienty.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825693-izuchaem-canvas-s-nulya-transformatsii-i-gradienty.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825693-izuchaem-canvas-s-nulya-transformatsii-i-gradienty.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825693-izuchaem-canvas-s-nulya-transformatsii-i-gradienty.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825693-izuchaem-canvas-s-nulya-transformatsii-i-gradienty.html" title="Изучаем Canvas с нуля: Трансформации и Градиенты... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Изучаем Canvas с нуля: Трансформации и Градиенты... | envatomarket.ru | norma-studio.github.io" title="Изучаем Canvas с нуля: Трансформации и Градиенты... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/e_09402063.jpg" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825693-izuchaem-canvas-s-nulya-transformatsii-i-gradienty.html" class="tm-user-info__username" title="
А. Карпов" aria-label="
А. Карпов">
А. Карпов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Изучаем Canvas с нуля: Трансформации и Градиенты...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825693-izuchaem-canvas-s-nulya-transformatsii-i-gradienty" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825693-izuchaem-canvas-s-nulya-transformatsii-i-gradienty" class="tm-article-snippet__hubs-item-link"><span>Web Development</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825693-izuchaem-canvas-s-nulya-transformatsii-i-gradienty.html" />
    <link itemprop="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/1.jpg">
    <meta itemprop="headline name" content="Изучаем Canvas с нуля: Трансформации и Градиенты... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="В данном руководстве мы рассмотрим трансформации (*- процесс, преобразующий координаты из одной системы в другую посредством пересчета (translation), вращений (rotation) и масштабирования (scaling). Тут и далее примеч. пер.) на холсте, а также тени и градиенты. Трансформации чрезвычайно полезный набор методов, который способствует пробуждению креат...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">В данном руководстве мы рассмотрим трансформации (*- процесс, преобразующий координаты из одной системы в другую посредством пересчета (translation), вращений (rotation) и масштабирования (scaling). Тут и далее примеч. пер.) на холсте, а также тени и градиенты. Трансформации чрезвычайно полезный набор методов, который способствует пробуждению креат...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>В данном руководстве мы рассмотрим трансформации (*  процесс, преобразующий координаты из одной системы в другую посредством пересчета (translation), вращений (rotation) и масштабирования (scaling). Тут и далее примеч. пер.) на холсте, а также тени и градиенты. Трансформации чрезвычайно полезный набор методов, который способствует пробуждению креативности у нас при прорисовывании объектов на холсте. И после этого краткого вступления давайте начнем!</p><p><!--more--></p> <hr><h2>Подготавливаем страницу</h2> <p>Вы будете использовать тот же самый шаблон HTML, что и в предыдущем руководстве, поэтому откройте свой любимый редактор и вставьте туда следующий код:</p> <pre class="brush: html noskimlinks noskimwords">&lt;!DOCTYPE html&gt;&lt;html&gt;    &lt;head&gt;        &lt;title&gt;Canvas from scratch&lt;/title&gt;        &lt;meta charset="utf-8"&gt;        &lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"&gt;&lt;/script&gt;        &lt;script&gt;            $(document).ready(function() {                var canvas = document.getElementById("myCanvas");                var ctx = canvas.getContext("2d");            });        &lt;/script&gt;    &lt;/head&gt;    &lt;body&gt;        &lt;canvas id="myCanvas" width="500" height="500"&gt;            &lt;!-- Insert fallback content here --&gt;        &lt;/canvas&gt;    &lt;/body&gt;&lt;/html&gt;</pre> <p>Это всего лишь базовая HTML-страница с элементом <code>canvas </code>и некоторым кодом JavaScript, который выполняется после загрузки DOM (* Document Object Model – Объектная модель документа). Ничего фантастического тут нет.</p> <hr><h2>Пересчет в действии</h2> <blockquote class="pullquote"><p>При помощи пересчета по сути смещается вся система координат.</p></blockquote> <p>Одна из наиболее простых трансформаций на холсте – <code>translate</code>. Она позволяет вам переместить точку отсчета 2-мерного контекста отображения – координаты (0, 0) холста. Давайте проиллюстрирую, что это значит.</p> <p>Вначале разместите квадрат на холсте в координатах (0, 0):</p> <pre class="brush: js noskimlinks noskimwords">ctx.fillRect(0, 0, 100, 100);</pre> <p>За счет этого кода будет прорисован квадрат в левом верхнем углу холста. По-прежнему у нас нет тут ничего фантастического.</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/1.jpg" alt="Изучаем Canvas с нуля: Трансформации и Градиенты..." title="Изучаем Canvas с нуля: Трансформации и Градиенты..." width="50" height="50"></div> <p>Теперь давайте попробуем выполнить пересчет 2-мерного контекста отображения и нарисовать другой квадрат в той же самой позиции:</p> <pre class="brush: js noskimlinks noskimwords">ctx.save();ctx.translate(100, 100);ctx.fillStyle = "rgb(0, 0, 255)";ctx.fillRect(0, 0, 100, 100);ctx.restore();</pre> <p>Как думаете, что произойдет? Получите медальку те, кто отгадал, что будет прорисован новый квадрат в координатах (100, 100). Некогда играться с теми, кто не угадал. Без обид!</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/2.jpg" alt="Изучаем Canvas с нуля: Трансформации и Градиенты..." title="Изучаем Canvas с нуля: Трансформации и Градиенты..." width="50" height="50"></div> <p>Так что же тут происходит? Сразу после добавления кода, необходимого для прорисовывания второго квадрата, вы прорисовали его в том же месте, как и первый. Это так, поскольку вы по сути смещаете всю систему координат холста таким образом, что ее координаты (0, 0) теперь располагается в координатах (100, 100).</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/3.jpg" alt="Изучаем Canvas с нуля: Трансформации и Градиенты..." title="Изучаем Canvas с нуля: Трансформации и Градиенты..." width="50" height="50"></div> <p>Теперь вам стало понятнее? Надеюсь, что да. Может потребоваться некоторое время на то, чтобы вы поняли эту концепцию, однако она проста, как только вы ее поняли.</p> <p>Вы, вероятно, не будете использовать эту трансформацию слишком часто в отдельности, поскольку вы могли бы просто прорисовать второй квадрат в координатах (100, 100) для получения того же эффекта. Преимущество <code>translate</code>, тем не менее, состоит в том, что вы можете использовать ее совместно с остальными для реализации некоторых довольно крутых эффектов.</p> <p>Давайте рассмотрим следующую трансформацию в нашем списке.</p> <hr><h2>Масштабируем наши элементы</h2> <p>Как вы уже, скорее всего, догадались, трансформация <code>scale </code>используется для изменения размеров объектов. Точнее, трансформация scale используется для изменения масштабов 2-мерного контекста отображения. </p> <p>Уберите код, с которым работали в примере с <code>translate</code>, и добавьте следующий:</p> <pre class="brush: js noskimlinks noskimwords">ctx.fillRect(100, 100, 100, 100);</pre> <p>За счет него будет прорисован обычный квадрат в координатах (100, 100) с шириной/высотой 100 пикселей.  Итак, как изменить его масштаб?</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/4.jpg" alt="Изучаем Canvas с нуля: Трансформации и Градиенты..." title="Изучаем Canvas с нуля: Трансформации и Градиенты..." width="50" height="50"></div> <blockquote class="pullquote"><p>Аргументы метода scale являются множителями размеров контекста по осям x и y.</p></blockquote> <p>Трансформация <code>scale </code>используется подобно <code>translate</code>, в том смысле, что она выполняется до того, как вы прорисуете объекты, к которым вы хотели бы ее применить. Важно подчеркнуть, что аргументы метода <code>scale </code>являются множителями размеров контекста по осям <em>x </em>и <em>y</em>. Это означает, что при <code>масштабе </code>(1, 1) размер 2-мерного контекста отображения был бы помножен на 1, оставляя тот же размер контекста. При <code>масштабе </code>(5, 5) размер 2-мерного контекста отображения был бы помножен на 5, в результате чего размер контекста увеличился бы в 5 раз по сравнению с первоначальным. Все просто.</p> <p>В нашем случае мы хотим увеличить размер квадрата в два раза, так что мы применяем <code>масштаб </code>(5, 5).</p> <pre class="brush: js noskimlinks noskimwords">ctx.save();ctx.scale(2, 2);ctx.fillRect(100, 100, 100, 100);ctx.restore();</pre> <p>В результате чего получаем  квадрат, который больше предыдущего в два раза.</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/5.jpg" alt="Изучаем Canvas с нуля: Трансформации и Градиенты..." title="Изучаем Canvas с нуля: Трансформации и Градиенты..." width="50" height="50"></div> <p>Однако, обратите внимание на то, что квадрат был теперь прорисован в иной позиции, чем до применения <code>scale</code>. Причина в том, что при использовании <code>scale </code>происходит перемножение размера всего, что находится в 2-мерном контексте отображения, включая координаты. В нашем случае координаты (100, 100) меняются на (200, 200); значения координат теперь увеличились в два раза по сравнению с тем, какими бы они были без применения масштабирования.</p> <p>Чтобы это поправить, мы можем выполнить трансформацию <code>translate</code>, при которой точка отсчета 2-мерного контекста  отображения перемещается в позицию, в которой мы хотим прорисовать квадрат. Если вы затем примените <code>scale </code>и прорисуете квадрат в координатах (0, 0), то положение квадрата останется тем же, что и у изначального.</p> <pre class="brush: js noskimlinks noskimwords">ctx.save();ctx.translate(100, 100);ctx.scale(2, 2);ctx.fillRect(0, 0, 100, 100);ctx.restore();</pre> <p>В результате получаем квадрат, размеры которого в два раза больше исходного, однако который прорисован в той же позиции, как и исходный.</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/6.jpg" alt="Изучаем Canvas с нуля: Трансформации и Градиенты..." title="Изучаем Canvas с нуля: Трансформации и Градиенты..." width="50" height="50"></div> <p>Именно осведомленность о подобных небольших причудах, наблюдаемых при использовании трансформаций, реально помогают при их применении. Похоже на то, что большинство распространенных проблем при использовании трансформаций являются результатом недостаточного понимания принципов их работы.</p> <hr><h2>Вращаем элементы</h2> <p>Пока что все трансформации, с которыми вы имели дело, были довольно неинтересными.  К счастью, трансформация <code>rotate</code> спасет положение, и это бесспорно моя любимая из всего набора.</p> <p>Уверен, что <code>rotate </code>не нуждается в представлении, так что давайте приступим сразу к написанию кода и повернем квадрат на 45 градусов (помните, что градусы должны быть выражены в радианах (* плоский угол, который образуется, если соединить с центром круга концы дуги на его окружности, равной радиусу этого круга. Так как круг содержит 360 градусов, или 2π радиан, то радиан приблизительно равен 57,2958 градусов)).</p> <pre class="brush: js noskimlinks noskimwords">ctx.save();ctx.rotate(Math.PI/4); // Rotate 45 degrees (in radians)ctx.fillRect(100, 100, 100, 100);ctx.restore();</pre> <p>За счет этого кода квадрат располагается в координатах (100, 100) и поворачивается ... воу, погодите! Результат выглядит не так, как ожидалось:</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/7.jpg" alt="Изучаем Canvas с нуля: Трансформации и Градиенты..." title="Изучаем Canvas с нуля: Трансформации и Градиенты..." width="50" height="50"></div> <p>Видите, что получилось? Похоже, что квадрат пытается выйти за пределы окна браузера, а не повернуться в точке с координатами (100, 100). Это так, поскольку <code>rotate</code>, как и все остальные трансформации, влияет на весь 2-мерный контекст отображения, а не только на отдельный объект.</p> <p>Ниже приводится иллюстрация того, что происходит с системой координат при выполнении <code>rotate </code>на 45 градусов:</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/8.jpg" alt="Изучаем Canvas с нуля: Трансформации и Градиенты..." title="Изучаем Canvas с нуля: Трансформации и Градиенты..." width="50" height="50"></div> <p>Обратите внимание на то, как вся система координат повернулась на 45 градусов относительно точки отсчета (0, 0)? Именно из-за этого квадрат выглядит так, как будто бы он выходит за рамки браузера, просто потому, что позиция (100, 100) была повернута прямо к углу браузера.</p> <p>Эту проблему можно просто разрешить за счет комбинирования трансформации <code>rotate </code>с <code>translate</code> следующим образом:</p> <pre class="brush: js noskimlinks noskimwords">ctx.save();ctx.translate(150, 150); // Translate to centre of squarectx.rotate(Math.PI/4); // Rotate 45 degreesctx.fillRect(-50, -50, 100, 100); // Centre at the rotation pointctx.restore();</pre> <p>При выполнении <code>translate </code>точка отсчета 2-мерного контекста отображения (0, 0) перемещается туда, где должна располагаться центральная точка квадрата (150, 150). Это означает, что любое вращение теперь будет происходить вокруг координаты (150, 150). Если вы затем прорисуете квадрат с негативными значениям координат <em>x</em> и <em>y</em>, равными половине ширины и высоты квадрата, то у вас выйдет квадрат, который выглядит так, как будто он был повернут вокруг его центральной точки:</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/9.jpg" alt="Изучаем Canvas с нуля: Трансформации и Градиенты..." title="Изучаем Canvas с нуля: Трансформации и Градиенты..." width="50" height="50"></div> <p>Трансформация <code>rotate</code>, скорее всего, наиболее сложна для полного понимания из всех. Важно помнить, что трансформации выполняются со всем 2-мерым контекстом отображения, и если вы хотите повернуть фигуру вокруг ее центральной точки, то вам будет необходимо использовать совместно <code>rotate </code>и <code>translate</code>.</p> <p>Давайте перейдем к нечто визуально более впечатляющему.</p> <hr><h2>Добавляем Тени</h2> <blockquote class="pullquote"><p>Добавить тени к объектам чарующе просто. </p></blockquote> <p>В Canvas имеется поддержка небольшого количества свойств для манипулирования видом прорисованных объектов, и один из наборов этих свойств позволяет вам добавлять тени.</p> <p>Добавить тени к объектам чарующе просто. Для этого необходимо всего лишь, чтобы в качестве значения свойства <code>shadowColor </code>2-мерного контекста отображения было установлено значение, отличное от черного прозрачного, и чтобы в качестве значений свойств <code>shadowBlur</code>, <code>shadowOffsetX </code>или <code>shadowOffsetY </code>было установлено значение, отличное от 0.</p> <p>Посмотрим, что получится в результате выполнения следующего кода:</p> <pre class="brush: js noskimlinks noskimwords">ctx.save();ctx.shadowBlur = 15;ctx.shadowColor = "rgb(0, 0, 0)";ctx.fillRect(100, 100, 100, 100);ctx.restore();</pre> <p>Будет добавлено размытие тени шириной 15 пикселей и установлено в качестве значения цвета тени непрозрачный черный цвет.</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/10.jpg" alt="Изучаем Canvas с нуля: Трансформации и Градиенты..." title="Изучаем Canvas с нуля: Трансформации и Градиенты..." width="50" height="50"></div> <p>Пока выполняем довольно стандартные манипуляции.</p> <p>Если вы установите в качестве значения <code>shadowBlur </code>0, измените значение <code>shadowColor </code>на светло серый и установите для <code>dowOffsetX </code>и <code>shadowOffsetY</code> позитивные значения:</p> <pre class="brush: js noskimlinks noskimwords">ctx.save();ctx.shadowBlur = 0;ctx.shadowOffsetX = 6;ctx.shadowOffsetY = 6;ctx.shadowColor = "rgba(125, 125, 125, 0.5)"; // Transparent greyctx.fillRect(300, 100, 100, 100);ctx.restore();</pre> <p>то получите в результате тень без размытия, которая появляется немного правее и ниже прорисованного объекта:</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/11.jpg" alt="Изучаем Canvas с нуля: Трансформации и Градиенты..." title="Изучаем Canvas с нуля: Трансформации и Градиенты..." width="50" height="50"></div> <blockquote class="pullquote"><p>Добавление тени к тексту заголовка￼    Как бы ни были круты тени, они могут быть отчасти пожирателями ресурсов (* программный пакет, аппаратный блок или человек-пользователь, который захватывает неадекватно большую долю системных ресурсов, например памяти).</p></blockquote> <p>Важно помнить, что тени применяются ко всему, что прорисовывается после их определения, так что полезно воспользоваться методами <code>save </code>и <code>restore </code>для избавления вас от необходимости переустановки значений свойств тени после того, как вы ими воспользовались.</p> <p> Помните, что производительность может пострадать, если вы добавляете тень ко множеству объектов одновременно. В некоторых случаях может быть уместным использование изображения PNG (* Portable Network Graphics - "переносимая сетевая графика"; растровый формат, используемый для графических файлов в Интернете, аналогичный формату GIF , но с заметно лучшим сжатием) с тенью вместо прорисовки объектов вручную и динамичного добавления тени при помощи кода. Мы обсудим, как использовать изображения на холсте в следующем руководстве этой серии.</p> <hr><h2>Создаем Градиенты</h2> <blockquote class="pullquote"><p> Вы можете создать два типа градиентов на холсте: линейный и радиальный.</p></blockquote> <p>Последняя возможность, которую я хочу с вами рассмотреть в этом руководстве, – добавление градиентов. Имеется два типа градиентов в Сanvas, первый из которых – линейный (прямой) градиент. Вы можете создать линейный градиент при помощи метода <code>createLinearGradient </code>(кто бы сомневался), который в псевдокоде (*  язык, напоминающий императивный язык программирования и используемый в качестве нотации для описания алгоритмов и/или структуры программы) выглядит следующим образом:</p> <pre class="brush: js noskimlinks noskimwords">ctx.createLinearGradient(startX, startY, endX, endY);</pre> <p>Первая пара аргументов – <em>x</em>- и <em>у</em>-координаты начала градиента, а вторая пара аргументов – <em>x</em>- и <em>у</em>-координаты конца градиента. Важно подчеркнуть, что градиент в Сanvas является собственно значением цвета, поэтому вы применяете его в качестве значений свойств <code>fillStyle </code>и <code>strokeStyle</code>.</p> <p>Ниже приводится пример того, как создать линейный градиент, который идет от верхушки холста аж до его низа:</p> <pre class="brush: js noskimlinks noskimwords">var gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);gradient.addColorStop(0, "rgb(255, 255, 255)");gradient.addColorStop(1, "rgb(0, 0, 0)");ctx.save();ctx.fillStyle = gradient;ctx.fillRect(0, 0, canvas.width, canvas.height);ctx.restore();</pre> <p>Обратите внимание на то, что вы присваиваете значение градиента переменной, затем используете эту переменную для вызова метода <code>addColorStop</code>. Этот метод позволяет вам установить значения цвета в определенных участках вдоль градиента. Например: позиция со значением 0 представляла бы начало градиента (первая пара <em>x</em>- и <em>у</em>-координат), а позиция со значением 1 представляла бы конец градиента (вторая пара <em>x</em>- и <em>у</em>-координат). Также вы можете использовать десятичные значения между 0 и 1 для присвоения значения цвета в различных участках вдоль градиента, например 0.5 представляло бы участок посередине градиента.</p> <p>За счет применения значения переменной gradient к свойству <code>fillStyle </code>вы получаете замечательный градиент, который начинается с белого цвета (в позиции 0 на верхушке холста) и заканчивается черным (в позиции 1 внизу холста):</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/12.jpg" alt="Изучаем Canvas с нуля: Трансформации и Градиенты..." title="Изучаем Canvas с нуля: Трансформации и Градиенты..." width="50" height="50"></div> <p>Однако вам не всегда следует использовать линейный градиент; вы также можете создавать радиальные градиенты!</p> <p>Радиальные градиенты создаются при помощи метода <code>createRadialGradient</code>, который в псевдокоде выглядит следующим образом: </p> <pre class="brush: js noskimlinks noskimwords">ctx.createRadialGradient(startX, startY, startRadius, endX, endY, endRadius);</pre> <p>Первые три аргумента – координаты <em>x</em>, <em>y</em> и радиус круга в начале градиента, а остальные три аргумента представляют собой координаты <em>x</em>, <em>y</em> и радиус круга в конце градиента.</p> <p>Звучит запутанно, верно? Немного, так что давайте возьмем и создадим радиальный градиент, чтобы посмотреть, что произойдет:</p> <pre class="brush: js noskimlinks noskimwords">var gradient = ctx.createRadialGradient(350, 350, 0, 50, 50, 100);gradient.addColorStop(0, "rgb(0, 0, 0)");gradient.addColorStop(1, "rgb(125, 125, 125)");ctx.save();ctx.fillStyle = gradient;ctx.fillRect(0, 0, canvas.width, canvas.height);ctx.restore();</pre> <p>Мы создали радиальный градиент, который начинается в точке (350, 350) с радиусом круга, равным 0, и заканчивается в точке (50, 50) с радиусом круга, равным 100. Вы можете догадаться, как этот градиент будет выглядеть? Получите 20 очков, если вы посчитали, что он будет выглядеть следующим образом:</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/13.jpg" alt="Изучаем Canvas с нуля: Трансформации и Градиенты..." title="Изучаем Canvas с нуля: Трансформации и Градиенты..." width="50" height="50"></div> <p>Если вы похожи на меня, то это не то, что мы ожидали увидеть. Я пользовался радиальными градиентами ранее в программах вроде Adobe Photoshop, и они выглядят там совсем по-другому. Так почему же он выглядит так? Что ж, вот почему он выглядит так таинственно.</p> <p>Ознакомьтесь со схемой ниже, на которой ясно разъясняется, как работает радиальный градиент в Сanvas:</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/14.jpg" alt="Изучаем Canvas с нуля: Трансформации и Градиенты..." title="Изучаем Canvas с нуля: Трансформации и Градиенты..." width="50" height="50"></div> <p>Интересно, не правда ли? По существу, метод для создания градиента позволяет вам создавать конусовидную фигуру, но что если вы хотите создать стандартный радиальный градиент, подобный тому, что используем в Photoshop? К счастью, это просто.</p> <p>Для создания стандартного радиального градиента вам просто необходимо разместить два круга градиента в одних и тех же координатах <em>x</em> и <em>y</em>, и при этом убедиться, что один из кругов градиента больше другого:</p> <pre class="brush: js noskimlinks noskimwords">var canvasCentreX = canvas.width/2;var canvasCentreY = canvas.height/2;var gradient = ctx.createRadialGradient(canvasCentreX, canvasCentreY, 250, canvasCentreX, canvasCentreY, 0);gradient.addColorStop(0, "rgb(0, 0, 0)");gradient.addColorStop(1, "rgb(125, 125, 125)");ctx.save();ctx.fillStyle = gradient;ctx.fillRect(0, 0, canvas.width, canvas.height);ctx.restore();</pre> <p>За счет кода выше создается радиальный градиент, который располагается в центре холста. Один из кругов градиента имеет в качестве значения радиуса 0, а другой – 250. В результат получаем традиционный радиальный градиент, который идет от центра холста наружу подобно следующему:</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" border="0" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=550/net/uploads/legacy/964_canvas3/15.jpg" alt="Изучаем Canvas с нуля: Трансформации и Градиенты..." title="Изучаем Canvas с нуля: Трансформации и Градиенты..." width="50" height="50"></div> <p>Он выглядит понятнее! Честно говоря, я был поражен, когда увидел, как реализуются радиальные градиенты в Сanvas. Готов поспорить, у многих возникли трудности в пониманием их работы, когда они увидели эту конусообразную фигуру. Что же, как минимум теперь вы знаете, как создавать стандартные градиенты.</p> <p>Стоит отметить, что создание градиентов на холсте – также довольно ресурсозатратная операция. Если вы хотите покрыть весь холст градиентом, то я бы сначала рассмотрел вариант с применением к самому элементу canvas фона в виде градиента CSS3.</p> <hr><h2>Подводим итоги</h2> <p>В этом руководстве мы рассмотрели, как выполнять базовые трансформации на холсте, включая пересчет, масштабирование и вращение. Также вы узнали, как добавлять тени к объектам и как создавать градиенты. Звучит не очень впечатляюще, однако трансформации, в особенности, служат основой некоторый наиболее крутых трюков, которые можно выполнить в Саnvas.</p> <p>В следующем руководстве серии "Canvas from Scratch" мы перейдем от рисования объектов к рассмотрению того, как манипулировать изображениями и видео на холсте. Вот где ставится по-настоящему интересно. Следите за появлением новых руководств!</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825693-izuchaem-canvas-s-nulya-transformatsii-i-gradienty" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825693-izuchaem-canvas-s-nulya-transformatsii-i-gradienty" class="tm-article-body__tags-item-link">Web Development</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
35720</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
402</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
