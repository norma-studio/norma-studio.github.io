
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Ваш путеводитель по командам в Laravel... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Ваш путеводитель по командам в Laravel... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Ваш путеводитель по командам в Laravel... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Ваш путеводитель по командам в Laravel... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="В настоящее время вполне нормально для разработчика иметь понимание работы с консолью и знать как использовать основные команды. Но иногда нам может понадобится написать свои собственные команды для улучшения своего рабочего процесса. Если мы взглянем назад на Laravel 3, то можно вспомнить что он предлагает использование задач. Задачи были чрезвыча...">
<meta property="og:description" content="В настоящее время вполне нормально для разработчика иметь понимание работы с консолью и знать как использовать основные команды. Но иногда нам может понадобится написать свои собственные команды для улучшения своего рабочего процесса. Если мы взглянем назад на Laravel 3, то можно вспомнить что он предлагает использование задач. Задачи были чрезвыча...">
<meta name="twitter:description" content="В настоящее время вполне нормально для разработчика иметь понимание работы с консолью и знать как использовать основные команды. Но иногда нам может понадобится написать свои собственные команды для улучшения своего рабочего процесса. Если мы взглянем назад на Laravel 3, то можно вспомнить что он предлагает использование задач. Задачи были чрезвыча...">
<meta property="aiturec:description" content="В настоящее время вполне нормально для разработчика иметь понимание работы с консолью и знать как использовать основные команды. Но иногда нам может понадобится написать свои собственные команды для улучшения своего рабочего процесса. Если мы взглянем назад на Laravel 3, то можно вспомнить что он предлагает использование задач. Задачи были чрезвыча...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/769/profiles/2246/profileImage/jason%20lewis.jpeg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/769/profiles/2246/profileImage/jason%20lewis.jpeg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/769/profiles/2246/profileImage/jason%20lewis.jpeg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/769/profiles/2246/profileImage/jason%20lewis.jpeg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/769/profiles/2246/profileImage/jason%20lewis.jpeg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825589-vash-putevoditel-po-komandam-v-laravel.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825589-vash-putevoditel-po-komandam-v-laravel.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825589-vash-putevoditel-po-komandam-v-laravel.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825589-vash-putevoditel-po-komandam-v-laravel.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825589-vash-putevoditel-po-komandam-v-laravel.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825589-vash-putevoditel-po-komandam-v-laravel.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825589-vash-putevoditel-po-komandam-v-laravel.html" title="Ваш путеводитель по командам в Laravel... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Ваш путеводитель по командам в Laravel... | envatomarket.ru | norma-studio.github.io" title="Ваш путеводитель по командам в Laravel... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/653463654.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825589-vash-putevoditel-po-komandam-v-laravel.html" class="tm-user-info__username" title="
С. Салин" aria-label="
С. Салин">
С. Салин</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Ваш путеводитель по командам в Laravel...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825589-vash-putevoditel-po-komandam-v-laravel" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="PHP" href="https://norma-studio.github.io/article5/220825589-vash-putevoditel-po-komandam-v-laravel" class="tm-article-snippet__hubs-item-link"><span>PHP</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825589-vash-putevoditel-po-komandam-v-laravel.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/769/profiles/2246/profileImage/jason%20lewis.jpeg">
    <meta itemprop="headline name" content="Ваш путеводитель по командам в Laravel... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="В настоящее время вполне нормально для разработчика иметь понимание работы с консолью и знать как использовать основные команды. Но иногда нам может понадобится написать свои собственные команды для улучшения своего рабочего процесса. Если мы взглянем назад на Laravel 3, то можно вспомнить что он предлагает использование задач. Задачи были чрезвыча...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">В настоящее время вполне нормально для разработчика иметь понимание работы с консолью и знать как использовать основные команды. Но иногда нам может понадобится написать свои собственные команды для улучшения своего рабочего процесса. Если мы взглянем назад на Laravel 3, то можно вспомнить что он предлагает использование задач. Задачи были чрезвыча...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>В настоящее время вполне нормально для разработчика иметь понимание работы с консолью и знать как использовать основные команды. Но иногда нам может понадобится написать свои собственные команды для улучшения своего рабочего процесса. Если мы взглянем назад на Laravel 3, то можно вспомнить что он предлагает использование задач. Задачи были чрезвычайно полезны, но до сих пор они слабо подходили для более сложных операций. К счастью Laravel 4 поставляется с пакетом Artisan, который сильно облегчит вашу жизнь как разработчика!</p><p><!--more--></p> <hr><h2>Что такое Artisan?</h2> <blockquote class="pullquote"> <p>Artisan это утилита командной строки, которая была представлена в Laravel 3.</p> </blockquote> <p>Если вы не знакомы с Laravel, то вы могли и не знать о ней. Artisan - это утилита командной строки, которая была представлена в Laravel 3. Если вы использовали другие фреймворки, то можно сравнить Artisan с Oil в FuelPHP, ZFTool в Zend, или Console в Symfony 2.</p> <p>Artisan предлагает много различных команд, которые могут помочь вам в выполнении различных задач, как например генерация миграций, или публикация пакетов. В дополнении к встроенным командам, можно расширить Artisan своими собственными.</p> <hr><h2>Основы Artisan</h2> <blockquote class="pullquote"> <p>Вот где Artisan показывает всю свою мощь.</p> </blockquote> <p>В Laravel 3 Artisan был написан с нуля Тейлором Отвеллом (создателем Laravel), и был еще достаточно простым. Теперь после того как Laravel 4 стал базироваться на пакетах Composer, то он может использовать существующие пакеты, разработанные другими разработчиками. В результате чего Laravel 4 теперь зависит от множества пакетов из фреймворка <span>Symfony</span>. Один из них - это замечательный <span>Console Component</span>.</p> <p>Если мы откроем исходный код приложения Artisan в <code>Illuminate\Console\Application</code>, то увидим что сам класс наследуется от <code>Symfony\Component\Console\Application</code>. Вот где Artisan предстает во всей своей красе. Хотя Artisan и использует компонент Symfony"s Console, но многие методы получили более похожие на Laravel псевдонимы. Так что не беспокойтесь, по прежнему есть ощущение что вы работаете с Laravel!</p> <hr><h2>Общие вопросы</h2> <p>Обычно всплывают два вопроса, при попытке создать новую команду.</p> <div class="question"> <h4> Где мне следует располагать команды?</h4> </div> <p>Когда вы устанавливаете новое приложение Laravel, то обнаружите предустановленную директорию <code>app/commands</code>. Она также находится по умолчанию в <code>classmap</code> вашего файла <code>composer.json</code>. Это означает, что как только вы создали команду, то необходимо выполнить <code>composer dump-autoload</code> для генерации обновленного автозагрузчика. Если вы этого не сделаете, то получите ошибки, указывающие на то, что ваша команда не найдена.</p> <p>Если вы разрабатываете пакет, то необходимо создать директорию src/&lt;vendor&gt;/&lt;package&gt; в вашем пакете для хранения команд. Во всей кодовой базе Laravel 4 этот каталог называется <code>Console</code>. Убедитесь, что директория автоматически подгружается в вашем <code>composer.json</code> фале. </p> <div class="question"> <h4> Как мне следует именовать команды?</h4> </div> <p>В кодовой базе Laravel 4 все команды имеют суффикс <code>Command</code> и названы по имени задачи, которую они выполняют. Допустим, что у нас есть команда, которая очищает кэш. Можно назвать ее <code>CacheClearCommand</code>.</p> <hr><h2>Основы команд</h2> <p>Команда должна выполнять одну задачу. В остальной части этой статьи мы будем разрабатывать команду генерации пользователей. Рассмотрим основы команд.</p> <pre class="brush: php noskimlinks noskimwords">// app/commands/UserGeneratorCommand.php&lt;?phpuse Illuminate\Console\Command;class UserGeneratorCommand extends Command {    /**     * The console command name.     *     * @var string     */    protected $name = "user:generate";    /**     * The console command description.     *     * @var string     */    protected $description = "Generate a new user";    /**     * Execute the console command.     *     * @return void     */    public function fire()    {        $this-&gt;line("Welcome to the user generator.");    }}</pre> <p>Laravel может создать прототип команды для вас! Просто выполняем:</p> <pre class="brush: bash noskimlinks noskimwords">$ php artisan command:make UserGeneratorCommand</pre> <p>Эта команда создаст каркас для вас, однако для целей этой статьи мы пройдем весь процесс создания команды с самого начала, так чтобы ознакомиться с каждой частью этого процесса.</p> <h4>Имя команды</h4> <p>Любая команда должна иметь имя. Это имя используется для запуска команды из консоли, и должно описывать задачу, которую команда выполняет. Пока нет никакого соглашения о том, как команды должны именоваться, то можно рассмотреть следующий вариант:<code>namespace:group/command</code>, <code>namespace:command</code>, или просто <code>command</code>.</p> <h4>Описание команды</h4> <p>Любая команда должна иметь описание. Описание используется при получении списка доступных команд из Artisan, и при просмотре помощи для команды. Описания должны кратко описывать задачу, которую выполняет команда.</p> <p>Если мы попробуем открыть консоль и получить список всех доступных команд, то мы по-прежнему не увидим нашу команду в списке.</p> <pre class="brush: bash noskimlinks noskimwords">$ php artisan listLaravel Framework version 4.0.0Usage:  [options] command [arguments]Options:  --help           -h Display this help message.  --quiet          -q Do not output any message.  --verbose        -v Increase verbosity of messages.  --version        -V Display this application version.  --ansi              Force ANSI output.  --no-ansi           Disable ANSI output.  --no-interaction -n Do not ask any interactive question.  --env               The environment the command should run under.Available commands:  help               Displays help for a command  list               Lists commands  migrate            Run the database migrations  serve              Serve the application on the PHP development server  tinker             Interact with your application  workbench          Create a new package workbenchasset  asset:publish      Publish a package"s assets to the public directoryauth  auth:reminders     Create a migration for the password reminders tablecommand  command:make       Create a new Artisan commandconfig  config:publish     Publish a package"s configuration to the applicationcontroller  controller:make    Create a new resourceful controllerdb  db:seed            Seed the database with recordskey  key:generate       Set the application keymigrate  migrate:install    Create the migration repository  migrate:make       Create a new migration file  migrate:refresh    Reset and re-run all migrations  migrate:reset      Rollback all database migrations  migrate:rollback   Rollback the last database migrationqueue  queue:listen       Listen to a given queue  queue:work         Process the next job on a queuesession  session:table      Create a migration for the session database table</pre> <p>Чтобы ее зарегистрировать, откроем файл <code>app/start/artisan.php</code> и быстро просмотрим блок комментариев в нем. Когда мы запускаем Artisan из консоли, то подключается этот файл; мы будем использовать его для загрузки наших команд. В этом файле мы имеем доступ к переменной <code>$artisan</code>, которая была объявлена до включаемого файла. Помните класс приложения Artisan, который мы рассматривали ранее? Тот самый, который расширяет компонент Symfony Console? Итак, переменная <code>$artisan</code> - это объект этого класса.</p> <p>Добавим нашу команду, чтобы она стала доступна из консоли.</p> <pre class="brush: php noskimlinks noskimwords">$artisan-&gt;add(new UserGeneratorCommand);</pre> <p>Или так, если вы предпочитаете статический синтаксис:</p> <pre class="brush: php noskimlinks noskimwords">Artisan::add(new UserGeneratorCommand);</pre> <p>Метод <code>add</code> принимает объект команды. Как только наша команда была добавлена, то мы можем получить к ней доступ из консоли.</p> <pre class="brush: bash noskimlinks noskimwords">$ php artisan user:generateWelcome to the user generator.</pre> <p>Команда так же будет перечислена в списке доступных команд.</p> <pre class="brush: bash noskimlinks noskimwords">$ php artisan list</pre> <pre class="brush: bash noskimlinks noskimwords">$ php artisan user:generate --helpUsage: user:generateOptions: --help (-h)           Display this help message. --quiet (-q)          Do not output any message. --verbose (-v)        Increase verbosity of messages. --version (-V)        Display this application version. --ansi                Force ANSI output. --no-ansi             Disable ANSI output. --no-interaction (-n) Do not ask any interactive question. --env                 The environment the command should run under.</pre> <blockquote> <p>Если вы получили какие-либо ошибки, то выполните <code>composer dump-autoload</code> в корневой директории приложения, после создания команд.</p> </blockquote> <hr><h2>Цветной вывод</h2> <p>Вывод цветного текста в консоль легко реализуется в Artisan. Существуют четыре метода для цветового ANSI вывода.</p> <pre class="brush: php noskimlinks noskimwords">$this-&gt;info("This is some information.");$this-&gt;comment("This is a comment.");$this-&gt;question("This is a question.");$this-&gt;error("This is an error.");</pre> <hr><h2>Опции и Аргументы</h2> <p>Новая особенность Artisan - это возможность предоставлять команды с опциями и аргументами.</p> <h3>Аргументы</h3> <p>Аргументы - это строки, которые вы передаете в команду. Важно их передавать в том же порядке, в каком они были определены. Рассмотрим следующую команду:</p> <pre class="brush: bash noskimlinks noskimwords">$ php artisan user:generate [name] [email]</pre> <p>Аргумент <code>name</code> должен быть передан перед аргументом <code>email</code>.</p> <p>Аргументы можно определить как необязательные.</p> <h3>Опции</h3> <p>Опции <em>всегда</em> является необязательными, и при передаче из команде перед ними располагают два дефиса.</p> <pre class="brush: bash noskimlinks noskimwords">$ php artisan user:generate --admin</pre> <p>Помимо использования в качестве логических значений, можно настроить опцию, чтобы она принимала значение или массив значений.</p> <pre class="brush: bash noskimlinks noskimwords">$ php artisan user:generate --name=Jason$ php artisan user:generate --role=user --role=editor</pre> <h3>Определение опций и аргументов</h3> <p>Перед тем как вы определение опции и аргументы, лучше всегда импортировать необходимые классы Symfony. Вот два класса, которые нам понадобятся: <code>Symfony\Component\Console\Input\InputOption</code> и <code>Symfony\Component\Console\Input\InputArgument</code>.</p> <p>После определения классов, мы их импортируем.</p> <pre class="brush: php noskimlinks noskimwords">// app/commands/UserGenerateCommand.php&lt;?phpuse Illuminate\Console\Command;use Symfony\Component\Console\Input\InputOption;use Symfony\Component\Console\Input\InputArgument;class UserGeneratorCommand extends Command {    /**     * The console command name.     *     * @var string     */    protected $name = "user:generate";    /**     * The console command description.     *     * @var string     */    protected $description = "Generate a new user";    /**     * Execute the console command.     *     * @return void     */    public function fire()    {        $this-&gt;line("Welcome to the user generator.");    }}</pre> <p>Чтобы определить опции и аргументы, необходимо создать два новых метода: <code>getArguments</code> и <code>getOptions</code>. Оба этих метода возвращает массив аргументов или опций. Пусть наша команда принимает аргумент <code>name</code> и опцию <code>age</code>.</p> <pre class="brush: php noskimlinks noskimwords">// app/commands/UserGenerateCommand.php&lt;?phpuse Illuminate\Console\Command;use Symfony\Component\Console\Input\InputOption;use Symfony\Component\Console\Input\InputArgument;class UserGeneratorCommand extends Command {    /**     * The console command name.     *     * @var string     */    protected $name = "user:generate";    /**     * The console command description.     *     * @var string     */    protected $description = "Generate a new user";    /**     * Execute the console command.     *     * @return void     */    public function fire()    {        $this-&gt;line("Welcome to the user generator.");        // Get the name arguments and the age option from the input instance.        $name = $this-&gt;argument("name");        $age = $this-&gt;option("age");        $this-&gt;line("{$name} is {$age} years old.");    }    /**     * Get the console command arguments.     *     * @return array     */    protected function getArguments()    {        return array(            array("name", InputArgument::REQUIRED, "Name of the new user"),        );    }    /**     * Get the console command options.     *     * @return array     */    protected function getOptions()    {        return array(            array("age", null, InputOption::VALUE_REQUIRED, "Age of the new user")        );    }}</pre> <p> Помните, что Laravel может сгенерировать весь этот код за вас. Мы делаем это все вручную только лишь для целей изучения каждой строчки класса команды. </p> <p>Теперь мы можем передавать аргумент <code>name</code> и опцию <code>age</code> из консоли.</p> <pre class="brush: bash noskimlinks noskimwords">$ php artisan user:generate Jason --age=22Jason is 22 years old.</pre> <p>Оба аргумент и опция определяются как многомерный массив. Взглянем более детально на каждое из этих определений.</p> <h4>Определения аргументов</h4> <p>Определение массива в качестве аргумента принимает четыре ключа, и только первый из них является обязательным. Второй ключ является режимом работы аргумента и может быть <code>InputArgument::OPTIONAL</code> или <code>InputArgument::REQUIRED</code>. Третий - это описание, а четвертый - значение по умолчанию, если режим аргумента <code>InputArgument::OPTIONAL</code>.</p> <p>Вот аргумент, который использует все ключи массива.</p> <pre class="brush: php noskimlinks noskimwords">array("name", InputArgument::OPTIONAL, "Name of the new user", "Jason")</pre> <h4>Определения опций</h4> <p>Определение опции в виде массива принимает пять ключей, первый из которых (имя опции) является обязательным. Второй ключ - это сокращение для опции (например <code>-a</code>). Третий - это режим работы опции и может принимать любое из этих значений: <code>InputOption::VALUE_NONE</code>, <code>InputOption::VALUE_REQUIRED</code>, <code>InputOption::VALUE_OPTIONAL</code>, или <code>InputOption::VALUE_IS_ARRAY</code>. Четвертый ключ - это описание опции, а пятый - значение по умолчанию, если режим опции не выставлен в <code>InputOption::VALUE_NONE</code> или <code>InputOption::VALUE_REQUIRED</code>.</p> <p>Вот определение опции, которая использует все ключи массива.</p> <pre class="brush: php noskimlinks noskimwords">array("age", "a", InputOption::VALUE_OPTIONAL, "Age of the new user", 22)</pre> <p>Можно так же комбинировать режим <code>InputOption::VALUE_IS_ARRAY</code> c <code>InputOption::VALUE_REQUIRED</code> или <code>InputOption::VALUE_OPTIONAL</code>.</p> <pre class="brush: php noskimlinks noskimwords">array("role", "r", InputOption::VALUE_OPTIONAL | InputOption::VALUE_IS_ARRAY, "Roles of the new user", "user")</pre> <hr><h2>Подтверждения и вопросы</h2> <p>Другой интересной функцией Artisan является возможность запрашивать информацию, или задавать пользователю вопросы. Что делает разработку интерактивных команд весьма простым занятием.</p> <h3>Подтверждения</h3> <p>Используя <code>confirm</code>, мы можем задать пользователю вопрос, и дать на выбор варианты ответа "yes" или "no". Давайте спросим у пользователя подтверждение, что он верно ввел свой возраст.</p> <pre class="brush: php noskimlinks noskimwords">// app/commands/UserGenerateCommand.php&lt;?phpuse Illuminate\Console\Command;use Symfony\Component\Console\Input\InputOption;use Symfony\Component\Console\Input\InputArgument;class UserGeneratorCommand extends Command {    /**     * The console command name.     *     * @var string     */    protected $name = "user:generate";    /**     * The console command description.     *     * @var string     */    protected $description = "Generate a new user";    /**     * Execute the console command.     *     * @return void     */    public function fire()    {        $this-&gt;line("Welcome to the user generator.");        // Get the name arguments and the age option from the input instance.        $name = $this-&gt;argument("name");        $age = $this-&gt;option("age");        if ( ! $this-&gt;confirm("Are you really {$age} years old? [yes|no]", true))        {            $this-&gt;comment("Then why did you say you were!?");            return;        }        $this-&gt;comment("{$name} is {$age} years old.");    }    /**     * Get the console command arguments.     *     * @return array     */    protected function getArguments()    {        return array(            array("name", InputArgument::REQUIRED, "Name of the new user"),        );    }    /**     * Get the console command options.     *     * @return array     */    protected function getOptions()    {        return array(            array("age", null, InputOption::VALUE_REQUIRED, "Age of the new user", null)        );    }}</pre> <p>Первый параметр - это вопрос, который будет отправлен пользователю, а второй - ответ по умолчанию, на случай если пользователь нажмет enter сразу без ввода ответа.</p> <h3>Вопросы</h3> <p>Используя <code>ask</code>, мы можем спрашивать у пользователя вопросы и получать ответы на них. Вместо завершения программы в случае некорректного возраста, давайте спросим у пользователя его еще раз.</p> <pre class="brush: php noskimlinks noskimwords">// app/commands/UserGenerateCommand.php&lt;?phpuse Illuminate\Console\Command;use Symfony\Component\Console\Input\InputOption;use Symfony\Component\Console\Input\InputArgument;class UserGeneratorCommand extends Command {    /**     * The console command name.     *     * @var string     */    protected $name = "user:generate";    /**     * The console command description.     *     * @var string     */    protected $description = "Generate a new user";    /**     * Execute the console command.     *     * @return void     */    public function fire()    {        $this-&gt;line("Welcome to the user generator.");        // Get the name arguments and the age option from the input instance.        $name = $this-&gt;argument("name");        $age = $this-&gt;option("age");        // Confirm the user entered their age correctly and if they haven"t we"ll        // ask them to enter it again.        if ( ! $this-&gt;confirm("Are you really {$age} years old? [yes|no]", true))        {            $age = $this-&gt;ask("So how old are you then?");        }        $this-&gt;comment("{$name} is {$age} years old.");    }    /**     * Get the console command arguments.     *     * @return array     */    protected function getArguments()    {        return array(            array("name", InputArgument::REQUIRED, "Name of the new user"),        );    }    /**     * Get the console command options.     *     * @return array     */    protected function getOptions()    {        return array(            array("age", null, InputOption::VALUE_REQUIRED, "Age of the new user", null)        );    }}</pre> <hr><h2>Зависимости команд</h2> <p>Инъекция зависимости - это важный шаг для создания трестируемого кода. Давайте расширим нашу команду, добавив в нее инъекцию объекта модели, таким образом чтобы можно было сгенерировать пользователя. Начнем с создания интерфейса и модели пользователя.</p> <pre class="brush: php noskimlinks noskimwords">// app/models/UserInterface.php&lt;?phpinterface UserInterface {}</pre> <blockquote> <p>Наш <code>UserInterface</code> в действительности не определяет никакого метода, так как это просто пример. Для реального же приложения, вы определите методы, которые будут нужны в модели.</p> </blockquote> <pre class="brush: php noskimlinks noskimwords">// app/models/User.php&lt;?phpclass User extends Eloquent implements UserInterface {    /**     * The database table used by the model.     *     * @var string     */    protected $table = "users";}</pre> <p>Теперь после того как мы имеем модель <code>User</code>, которая реализует интерфейс <code>UserInterface</code>, мы можем продолжить настройку нашей инъекции зависимости в команду. Я собираюсь еще кое что добавить в нашу команду, чтобы можно было взаимодействовать с нашей моделью <code>User</code>.</p> <pre class="brush: php noskimlinks noskimwords">// app/commands/UserGenerateCommand.php&lt;?phpuse Illuminate\Console\Command;use Symfony\Component\Console\Input\InputOption;use Symfony\Component\Console\Input\InputArgument;class UserGeneratorCommand extends Command {    /**     * The console command name.     *     * @var string     */    protected $name = "user:generate";    /**     * The console command description.     *     * @var string     */    protected $description = "Generate a new user";    /**     * User model instance.     *      * @var UserInterface     */    protected $user;    /**     * Create a new UserGeneratorCommand instance.     *      * @param  UserInterface  $user     * @return void     */    public function __construct(UserInterface $user)    {        $this-&gt;user = $user;    }    /**     * Execute the console command.     *     * @return void     */    public function fire()    {        $this-&gt;line("Welcome to the user generator.");        // Get the name arguments and the age option from the input instance.        $this-&gt;user-&gt;name = $this-&gt;argument("name");        $this-&gt;user-&gt;age = $this-&gt;option("age");        // Confirm the user entered their age correctly and if they haven"t we"ll        // ask them to enter it again. We"ll continue asking them until they are        // sure they"ve entered the right age.        $correctAge = false;        while ( ! $correctAge)        {            if ( ! $this-&gt;confirm("Are you really {$this-&gt;user-&gt;age} years old? [yes|no]", true))            {                $this-&gt;user-&gt;age = $this-&gt;ask("So how old are you then?");            }            else            {                $correctAge = true;            }        }        $this-&gt;user-&gt;framework = $this-&gt;ask("What is your favorite framework?", "Laravel");        $this-&gt;user-&gt;website = $this-&gt;ask("What is your website address?");        // Save the user to the database.        $this-&gt;user-&gt;save();        // Report that the user has been saved.        $this-&gt;info("{$this-&gt;user-&gt;name} has been generated and saved.");    }    /**     * Get the console command arguments.     *     * @return array     */    protected function getArguments()    {        return array(            array("name", InputArgument::REQUIRED, "Name of the new user"),        );    }    /**     * Get the console command options.     *     * @return array     */    protected function getOptions()    {        return array(            array("age", null, InputOption::VALUE_REQUIRED, "Age of the new user", null)        );    }}</pre> <p>Первое, что вы могли заметить, это то что команда теперь имеет конструктор. Этот конструктор принимает один параметр, которому мы указали тип <code>UserInterface</code>, так что мы теперь знаем, что класс, который мы получим, реализует методы из этого интерфейса. Конструктор команды должен вызвать родительский конструктор.</p> <p>В методе команды <code>fire</code> мы напрямую задаем свойства объекта модели <code>User</code>. Мы также используем цикл для того чтобы задать пользователю вопрос о корректности введенного адреса. И наконец пользователь сохраняется в базе данных, и мы выводим на консоль сообщение о том, что пользователь был создан и сохранен.</p> <p>Но погодите! Перед тем, как начать использовать нашу команду, нам нужно создать объект модели <code>User</code>.</p> <pre class="brush: php noskimlinks noskimwords">// app/start/artisan.php$user = new User;$artisan-&gt;add(new UserGeneratorCommand($user));</pre> <p>Если у вас настроена база данных, вы уже сможете запустить команду и новый пользователь будет сохранен!</p> <hr><h2>Команды пакетов</h2> <p>Если вы разрабатываете пакет или библиотеку для Laravel, то возможно вы захотите включить туда команду. Регистрация команд из пакетов очень проста, за исключением того, что вы не можете добавить команду в файл <code>app/start/artisan.php</code>. Вместо этого, вы получаете их с помощью Artisan внутри вашего поставщика услуг (service provider).</p> <pre class="brush: php noskimlinks noskimwords">// path/to/your/PackageServiceProvider.php/** * Register the service provider. * * @return void */public function register(){    $this-&gt;app["command.package.command"] = $this-&gt;app-&gt;share(function($app)    {        return new PackageCommand($app["dependency"]);    });    $this-&gt;commands("command.package.command");}</pre> <p>Метод <code>commands</code> может принимать любое количество аргументов, и сможет получить объект команды из контейнера приложения, в котором запущен Artisan.</p> <hr><h2>Заключение</h2> <p>Когда сравниваешь Artisan в Laravel 4 и в Laravel 3, то понимаешь что улучшения в нем просто монументальные. Команды теперь могут быть привязаны к IoC контейнеру и включать в себя инъекцию зависимостей, предоставлять вывод ANSI, использовать аргументы и опции, и запрашивать взаимодействие с пользователем.</p> <p>Благодаря компоненту Symfony Console мощь Artisan просто невероятна. Команды теперь начинают играть значимую роль в разработке.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825589-vash-putevoditel-po-komandam-v-laravel" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="PHP" href="https://norma-studio.github.io/article5/220825589-vash-putevoditel-po-komandam-v-laravel" class="tm-article-body__tags-item-link">PHP</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
43903</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
589</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
