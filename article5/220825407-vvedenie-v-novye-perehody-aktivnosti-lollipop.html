
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Введение в новые переходы активности Lollipop... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Введение в новые переходы активности Lollipop... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Введение в новые переходы активности Lollipop... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Введение в новые переходы активности Lollipop... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Одним из наиболее интересных аспектов спецификаций Material Design является визуальная непрерывность действий. С помощью всего лишь нескольких строк кода новые API Lollipop позволяют значительно трансформировать два действия благодаря бесшовной и непрерывной анимации. Это нарушает классические границы активности предыдущих версий Android и позволяе...">
<meta property="og:description" content="Одним из наиболее интересных аспектов спецификаций Material Design является визуальная непрерывность действий. С помощью всего лишь нескольких строк кода новые API Lollipop позволяют значительно трансформировать два действия благодаря бесшовной и непрерывной анимации. Это нарушает классические границы активности предыдущих версий Android и позволяе...">
<meta name="twitter:description" content="Одним из наиболее интересных аспектов спецификаций Material Design является визуальная непрерывность действий. С помощью всего лишь нескольких строк кода новые API Lollipop позволяют значительно трансформировать два действия благодаря бесшовной и непрерывной анимации. Это нарушает классические границы активности предыдущих версий Android и позволяе...">
<meta property="aiturec:description" content="Одним из наиболее интересных аспектов спецификаций Material Design является визуальная непрерывность действий. С помощью всего лишь нескольких строк кода новые API Lollipop позволяют значительно трансформировать два действия благодаря бесшовной и непрерывной анимации. Это нарушает классические границы активности предыдущих версий Android и позволяе...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/845/posts/23711/image/first_activity-600-wide.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/845/posts/23711/image/first_activity-600-wide.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/845/posts/23711/image/first_activity-600-wide.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/845/posts/23711/image/first_activity-600-wide.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/845/posts/23711/image/first_activity-600-wide.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825407-vvedenie-v-novye-perehody-aktivnosti-lollipop.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825407-vvedenie-v-novye-perehody-aktivnosti-lollipop.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825407-vvedenie-v-novye-perehody-aktivnosti-lollipop.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825407-vvedenie-v-novye-perehody-aktivnosti-lollipop.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825407-vvedenie-v-novye-perehody-aktivnosti-lollipop.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825407-vvedenie-v-novye-perehody-aktivnosti-lollipop.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825407-vvedenie-v-novye-perehody-aktivnosti-lollipop.html" title="Введение в новые переходы активности Lollipop... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Введение в новые переходы активности Lollipop... | envatomarket.ru | norma-studio.github.io" title="Введение в новые переходы активности Lollipop... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/645343435.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825407-vvedenie-v-novye-perehody-aktivnosti-lollipop.html" class="tm-user-info__username" title="
Н. Аяцков" aria-label="
Н. Аяцков">
Н. Аяцков</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Введение в новые переходы активности Lollipop...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825407-vvedenie-v-novye-perehody-aktivnosti-lollipop" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Android SDK" href="https://norma-studio.github.io/article5/220825407-vvedenie-v-novye-perehody-aktivnosti-lollipop" class="tm-article-snippet__hubs-item-link"><span>Android SDK</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825407-vvedenie-v-novye-perehody-aktivnosti-lollipop.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/845/posts/23711/image/first_activity-600-wide.jpg">
    <meta itemprop="headline name" content="Введение в новые переходы активности Lollipop... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Одним из наиболее интересных аспектов спецификаций Material Design является визуальная непрерывность действий. С помощью всего лишь нескольких строк кода новые API Lollipop позволяют значительно трансформировать два действия благодаря бесшовной и непрерывной анимации. Это нарушает классические границы активности предыдущих версий Android и позволяе...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Одним из наиболее интересных аспектов спецификаций Material Design является визуальная непрерывность действий. С помощью всего лишь нескольких строк кода новые API Lollipop позволяют значительно трансформировать два действия благодаря бесшовной и непрерывной анимации. Это нарушает классические границы активности предыдущих версий Android и позволяе...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<h2>Введение</h2><p>Одним из наиболее интересных аспектов спецификаций Material Design является визуальная непрерывность действий. С помощью всего лишь нескольких строк кода новые API Lollipop позволяют значительно трансформировать два действия благодаря бесшовной и непрерывной анимации. Это нарушает классические границы активности предыдущих версий Android и позволяет пользователю понять, как элементы переходят из одной точки в другую.<br></p><p> В этом уроке я покажу вам, как достичь этого результата, сделав пример приложения совместимым с Руководством Google Material Design.</p><h2>Необходимые условия</h2><p>В этом уроке я предполагаю, что вы уже знакомы с разработкой Android и используете Android Studio в качестве своей среды разработки. Я буду интенсивно использовать намерения Android, предполагая базовые знания жизненного цикла деятельности и новый виджет <code class="inline">RecyclerView</code>, представленный с <strong>API 21</strong>, в июне прошлого года. Я не буду погружаться в детали этого класса, но, если вам интересно, вы можете найти отличное объяснение в <span>этом уроке Tuts +</span>.</p><h2> <span class="sectionnum">1</span>. Создайте первое действие </h2><p>Базовая структура приложения проста. Существует два основных действия <strong>MainActivity.java</strong>, задача которых состоит в отображении списка элементов, а вторая - <strong>DetailActivity.java</strong>, в котором будут показаны детали элемента, выбранного в предыдущем списке.</p><h3>Шаг 1: Виджет <code class="inline">RecyclerView</code></h3><p>Чтобы отобразить список элементов, основное действие будет использовать виджет <code class="inline">RecyclerView</code>, представленный в Android Lollipop. Первое, что вам нужно сделать, - добавить следующую строку в раздел <strong>зависимостей</strong> в файле <b>build.grade</b> вашего проекта, чтобы обеспечить обратную совместимость:</p><pre class="brush: groovy noskimlinks noskimwords">compile "com.android.support:recyclerview-v7:+"</pre><h3><b>Шаг 2: Определение данных</b></h3><p>Для краткости мы не будем определять фактическую базу данных или аналогичный источник данных для приложения. Вместо этого мы будем использовать пользовательский класс <code class="inline">Contact</code>. Каждый элемент будет иметь имя, цвет и основные контактные данные, связанные с ним. Вот как выглядит реализация класса <code class="inline">Contact</code>:</p><pre class="brush: java noskimlinks noskimwords">public class Contact {    // The fields associated to the person    private final String mName, mPhone, mEmail, mCity, mColor;    Contact(String name, String color, String phone, String email, String city) {        mName = name; mColor = color; mPhone = phone; mEmail = email; mCity = city;    }    // This method allows to get the item associated to a particular id,    // uniquely generated by the method getId defined below    public static Contact getItem(int id) {        for (Contact item : CONTACTS) {            if (item.getId() == id) {                return item;            }        }        return null;    }    // since mName and mPhone combined are surely unique,    // we don"t need to add another id field    public int getId() {        return mName.hashCode() + mPhone.hashCode();    }    public static enum Field {        NAME, COLOR, PHONE, EMAIL, CITY    }    public String get(Field f) {        switch (f) {            case COLOR: return mColor;            case PHONE: return mPhone;            case EMAIL: return mEmail;            case CITY: return mCity;            case NAME: default: return mName;        }    }}</pre><p>У вас будет хороший контейнер для информации, о которой вы заботитесь. Но нам нужно заполнить его некоторыми данными. В верхней части класса <code class="inline">Contact</code> добавьте следующий фрагмент кода для заполнения набора данных.</p><p>Определяя данные как <code class="inline">public</code> и <code class="inline">static</code>, каждый класс в проекте может ее прочитать. В некотором смысле мы имитируем поведение базы данных, за исключением того, что мы жестко кодируем ее в класс.<br></p><pre class="brush: java noskimlinks noskimwords">public static final Contact[] CONTACTS = new Contact[] {    new Contact("John", "#33b5e5", "+01 123456789", "john@example.com", "Venice"),    new Contact("Valter", "#ffbb33", "+01 987654321", "valter@example.com", "Bologna"),    new Contact("Eadwine", "#ff4444", "+01 123456789", "eadwin@example.com", "Verona"),    new Contact("Teddy", "#99cc00", "+01 987654321", "teddy@example.com", "Rome"),    new Contact("Ives", "#33b5e5", "+01 11235813", "ives@example.com", "Milan"),    new Contact("Alajos", "#ffbb33", "+01 123456789", "alajos@example.com", "Bologna"),    new Contact("Gianluca", "#ff4444", "+01 11235813", "me@gian.lu", "Padova"),    new Contact("Fane", "#99cc00", "+01 987654321", "fane@example.com", "Venice"),};</pre><h3>Шаг 3: <b>Определение основных макетов</b> </h3><p>Макет основной деятельности прост, потому что список заполнит весь экран. Макет включает <code class="inline">RelativeLayout</code> в качестве корня, но он также может быть также <code class="inline">LinearLayout</code>- и <code class="inline">RecyclerView</code> как его единственный ребенок.</p><pre class="brush: xml noskimlinks noskimwords">&lt;RelativeLayout xmlns:android="https://schemas.android.com/apk/res/android"    android:layout_width="match_parent"    android:layout_height="match_parent"    android:background="#f5f5f5"&gt;    &lt;android.support.v7.widget.RecyclerView        android:layout_width="match_parent"        android:layout_height="match_parent"        android:id="@+id/rv" /&gt;&lt;/RelativeLayout&gt;</pre><p>Поскольку виджет <code class="inline">RecyclerView</code> упорядочивает подэлементы и не более того, вам также нужно создать макет одного элемента списка. Мы хотим иметь цветной круг слева от каждого элемента списка контактов, поэтому вам сначала нужно определить drawable <strong>circle.xml</strong>.</p><pre class="brush: xml noskimlinks noskimwords">&lt;shape    xmlns:android="http://schemas.android.com/apk/res/android"    android:shape="oval"&gt;    &lt;solid        android:color="#000"/&gt;    &lt;size        android:width="32dp"        android:height="32dp"/&gt;&lt;/shape&gt;</pre><p>Теперь у вас есть все элементы, необходимые для определения макета элемента списка.</p><pre class="brush: xml noskimlinks noskimwords">&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"    android:layout_width="match_parent"    android:layout_height="82dp"    android:padding="@dimen/activity_horizontal_margin"    android:background="?android:selectableItemBackground"    android:clickable="true"    android:focusable="true"    android:orientation="vertical" &gt;    &lt;View        android:id="@+id/CONTACT_circle"        android:layout_width="40dp"        android:layout_height="40dp"        android:background="@drawable/circle"        android:layout_centerVertical="true"        android:layout_alignParentLeft="true"/&gt;    &lt;LinearLayout        android:layout_width="wrap_content"        android:layout_height="wrap_content"        android:layout_centerVertical="true"        android:layout_toRightOf="@+id/CONTACT_circle"        android:layout_marginLeft="@dimen/activity_horizontal_margin"        android:orientation="vertical"&gt;        &lt;TextView            android:id="@+id/CONTACT_name"            android:layout_width="wrap_content"            android:layout_height="wrap_content"            android:text="Jonh Doe"            android:textColor="#000"            android:textSize="18sp"/&gt;        &lt;TextView            android:id="@+id/CONTACT_phone"            android:layout_width="wrap_content"            android:layout_height="wrap_content"            android:text="+01 123456789"            android:textColor="#9f9f9f"            android:textSize="15sp"/&gt;    &lt;/LinearLayout&gt;&lt;/RelativeLayout&gt;</pre><h3>Шаг 4.<b> Отображение данных с помощью</b> <code class="inline">RecyclerView</code> </h3><p>Мы почти достигли конца первой части учебника. Вам все еще нужно написать <code class="inline">RecyclerView.ViewHolder</code> и <code class="inline">RecyclerView.Adapter</code> и назначить все для связанного представления в методе <code class="inline">onCreate</code> основного действия. В этом случае <code class="inline">RecyclerView.ViewHolder</code> также должен иметь возможность обрабатывать клики, поэтому вам нужно будет добавить определенный класс, способный это сделать. Давайте начнем определять класс, ответственный за обработку кликов.</p><pre class="brush: java noskimlinks noskimwords">public class RecyclerClickListener implements RecyclerView.OnItemTouchListener {    private OnItemClickListener mListener;    GestureDetector mGestureDetector;    public interface OnItemClickListener {        public void onItemClick(View view, int position);    }    public RecyclerClickListener(Context context, OnItemClickListener listener) {        mListener = listener;        mGestureDetector = new GestureDetector(context, new GestureDetector.SimpleOnGestureListener() {            @Override public boolean onSingleTapUp(MotionEvent e) {                return true;            }        });    }    @Override public boolean onInterceptTouchEvent(RecyclerView view, MotionEvent e) {        View childView = view.findChildViewUnder(e.getX(), e.getY());        if (childView != null &amp;&amp; mListener != null &amp;&amp; mGestureDetector.onTouchEvent(e)) {            mListener.onItemClick(childView, view.getChildPosition(childView));            return true;        }        return false;    }    @Override public void onTouchEvent(RecyclerView view, MotionEvent motionEvent) { }}</pre><p>Необходимо указать <code class="inline">RecyclerView.Adapter</code>, который я буду называть <code class="inline">DataManager</code>. Он отвечает за загрузку данных и вставку их в представления списка. Этот класс диспетчера данных также будет содержать определение <code class="inline">RecyclerView.ViewHolder</code>.</p><pre class="brush: java noskimlinks noskimwords">public class DataManager extends RecyclerView.Adapter&lt;DataManager.RecyclerViewHolder&gt; {    public static class RecyclerViewHolder extends RecyclerView.ViewHolder {        TextView mName, mPhone;        View mCircle;        RecyclerViewHolder(View itemView) {            super(itemView);            mName = (TextView) itemView.findViewById(R.id.CONTACT_name);            mPhone = (TextView) itemView.findViewById(R.id.CONTACT_phone);            mCircle = itemView.findViewById(R.id.CONTACT_circle);        }    }    @Override    public RecyclerViewHolder onCreateViewHolder(ViewGroup viewGroup, int i) {        View v = LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.contact_item, viewGroup, false);        return new RecyclerViewHolder(v);    }    @Override    public void onBindViewHolder(RecyclerViewHolder viewHolder, int i) {        // get the single element from the main array        final Contact contact = Contact.CONTACTS[i];        // Set the values        viewHolder.mName.setText(contact.get(Contact.Field.NAME));        viewHolder.mPhone.setText(contact.get(Contact.Field.PHONE));        // Set the color of the shape        GradientDrawable bgShape = (GradientDrawable) viewHolder.mCircle.getBackground();        bgShape.setColor(Color.parseColor(contact.get(Contact.Field.COLOR)));    }    @Override    public int getItemCount() {        return Contact.CONTACTS.length;    }}</pre><p>Наконец, добавьте следующий код в метод <code class="inline">onCreate</code>, ниже <code class="inline">setContentView</code>. Основное готово.</p><pre class="brush: java noskimlinks noskimwords">RecyclerView rv = (RecyclerView) findViewById(R.id.rv); // layout referenceLinearLayoutManager llm = new LinearLayoutManager(this);rv.setLayoutManager(llm);rv.setHasFixedSize(true); // to improve performancerv.setAdapter(new DataManager()); // the data manager is assigner to the RVrv.addOnItemTouchListener( // and the click is handled    new RecyclerClickListener(this, new RecyclerClickListener.OnItemClickListener() {        @Override public void onItemClick(View view, int position) {            // STUB:            // The click on the item must be handled        }    }));</pre><p>Это выглядит как приложение, если вы его создаете и запускаете.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/845/posts/23711/image/first_activity-600-wide.jpg" alt="Введение в новые переходы активности Lollipop..." title="Введение в новые переходы активности Lollipop..." width="50" height="50"></figure><h2> <b>2. Создайте детали действий</b><br></h2><h3> Шаг 1:<b> Расположение</b><b><br></b> </h3><p>Второе действие намного проще. Он выбирает идентификатор контакта и извлекает дополнительную информацию, которую не показывает первая активность.</p><p>С точки зрения дизайна, макет этого действия имеет решающее значение, поскольку он является самой важной частью приложения. Но что касается XML, это тривиально. Макет - это серия экземпляров <code class="inline">TextView</code>, расположенных в приятном ключе с использованием <code class="inline">RelativeLayout</code> и <code class="inline">LinearLayout</code>. Вот как выглядит макет:</p><pre class="brush: xml noskimlinks noskimwords">&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"    xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent"    android:layout_height="match_parent"    android:orientation="vertical"&gt;        &lt;ImageView        android:layout_width="match_parent"        android:layout_height="200dp"        android:scaleType="centerCrop"        android:src="@mipmap/material_wallpaper"/&gt;    &lt;RelativeLayout        android:layout_width="match_parent"        android:layout_height="82dp"        android:padding="@dimen/activity_vertical_margin"&gt;        &lt;View            android:id="@+id/DETAILS_circle"            android:layout_width="48dp"            android:layout_height="48dp"            android:background="@drawable/circle"            android:layout_centerVertical="true"            android:layout_alignParentLeft="true"/&gt;        &lt;TextView            android:id="@+id/DETAILS_name"            android:layout_width="wrap_content"            android:layout_height="wrap_content"            android:text="Jonh Doe"            android:layout_toRightOf="@+id/DETAILS_circle"            android:layout_marginLeft="@dimen/activity_horizontal_margin"            android:layout_centerVertical="true"            android:textColor="#000"            android:textSize="25sp"/&gt;    &lt;/RelativeLayout&gt;    &lt;LinearLayout        android:layout_width="wrap_content"        android:layout_height="wrap_content"        android:layout_centerVertical="true"        android:padding="@dimen/activity_horizontal_margin"        android:orientation="vertical"&gt;                &lt;RelativeLayout            android:layout_width="match_parent"            android:layout_height="wrap_content"&gt;            &lt;TextView                android:id="@+id/DETAILS_phone_label"                android:layout_width="wrap_content"                android:layout_height="wrap_content"                android:text="Phone:"                android:textColor="#000"                android:textSize="20sp"/&gt;                        &lt;TextView                android:id="@+id/DETAILS_phone"                android:layout_width="wrap_content"                android:layout_height="wrap_content"                android:layout_toRightOf="@+id/DETAILS_phone_label"                android:layout_marginLeft="@dimen/activity_horizontal_margin"                android:text="+01 123456789"                android:textColor="#9f9f9f"                android:textSize="20sp"/&gt;                    &lt;/RelativeLayout&gt;        &lt;RelativeLayout            android:layout_width="match_parent"            android:layout_height="wrap_content"            android:layout_marginTop="@dimen/activity_vertical_margin"&gt;            &lt;TextView                android:id="@+id/DETAILS_email_label"                android:layout_width="wrap_content"                android:layout_height="wrap_content"                android:text="Email:"                android:textColor="#000"                android:textSize="20sp"/&gt;            &lt;TextView                android:id="@+id/DETAILS_email"                android:layout_width="wrap_content"                android:layout_height="wrap_content"                android:layout_toRightOf="@+id/DETAILS_email_label"                android:layout_marginLeft="@dimen/activity_horizontal_margin"                android:text="jonh.doe@example.com"                android:textColor="#9f9f9f"                android:textSize="20sp"/&gt;        &lt;/RelativeLayout&gt;        &lt;RelativeLayout            android:layout_width="match_parent"            android:layout_height="wrap_content"            android:layout_marginTop="@dimen/activity_vertical_margin"&gt;            &lt;TextView                android:id="@+id/DETAILS_city_label"                android:layout_width="wrap_content"                android:layout_height="wrap_content"                android:text="City:"                android:textColor="#000"                android:textSize="20sp"/&gt;            &lt;TextView                android:id="@+id/DETAILS_city"                android:layout_width="wrap_content"                android:layout_height="wrap_content"                android:layout_toRightOf="@+id/DETAILS_city_label"                android:layout_marginLeft="@dimen/activity_horizontal_margin"                android:text="Rome"                android:textColor="#9f9f9f"                android:textSize="20sp"/&gt;        &lt;/RelativeLayout&gt;    &lt;/LinearLayout&gt;&lt;/LinearLayout&gt;</pre><h3>Шаг 2: <b>Отправка и получение ID через Intent Extras</b> </h3><p>Поскольку эти два действия связаны намерениями, вам необходимо отправить часть информации, которая позволяет второму действию понять, с каким контактом вы запросили детали.</p><p>Один параметр может использовать переменную положения в качестве ссылки. Позиция элемента в списке соответствует положению элемента в массиве, поэтому не должно быть ничего плохого в использовании этого целого в качестве уникальной ссылки.</p><p>Это будет работать, но если вы примете этот подход и по какой-либо причине набор данных будет изменен во время выполнения, ссылка не будет соответствовать интересующему вас контакту. Именно по этой причине лучше использовать ID ad hoc. Эта информация является методом <code class="inline">getId</code>, определенным в классе <code class="inline">Contact</code>.</p><p>Измените обработчик <code class="inline">onItemClick</code> списка элементов, как показано ниже.</p><pre class="brush: java noskimlinks noskimwords">@Override public void onItemClick(View view, int position) {    Intent intent = new Intent(MainActivity.this, DetailsActivity.class);    intent.putExtra(DetailsActivity.ID, Contact.CONTACTS[position].getId());    startActivity(intent);}</pre><p>Функция <code class="inline">DetailsActivit</code>y получит информацию из дополнительных опций <code class="inline">Intent</code> и построит правильный объект, используя ID в качестве ссылки. Это показано в следующем блоке кода.</p><pre class="brush: java noskimlinks noskimwords">// Before the onCreatepublic final static String ID = "ID";public Contact mContact;</pre><pre class="brush: java noskimlinks noskimwords">// In the onCreate, after the setContentView methodmContact = Contact.getItem(getIntent().getIntExtra(ID, 0));</pre><p>Как и в методе o<code class="inline">nCreateViewHolder</code> <code class="inline">RecylerView</code>, представления инициализируются с помощью метода <code class="inline">findViewById</code> и заполняются с помощью <code class="inline">setText</code>. Например, чтобы настроить поле имени, мы делаем следующее:</p><pre class="brush: java noskimlinks noskimwords">mName = (TextView) findViewById(R.id.DETAILS_name);mName.setText(mContact.get(Contact.Field.NAME));</pre><p>Этот процесс одинаковый для других полей. Второе действие наконец готово.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/845/posts/23711/image/second_activity-600-wide.jpg" alt="Введение в новые переходы активности Lollipop..." title="Введение в новые переходы активности Lollipop..." width="50" height="50"></figure><h2> <span class="sectionnum">3</span>. Целенаправленные переходы</h2><p>Мы, наконец, пришли к ядру учебника, оживив два действия, используя новый метод Lollipop для перехода с использованием общего элемента.<br></p><h3>Шаг 1: Настройка проекта</h3><p>Первое, что вам нужно сделать, это отредактировать свою тему в файле <strong>style.xml</strong> в папке <strong>values-v21</strong>. Таким образом, вы включаете переходы контента и устанавливаете вход и выход из представлений, которые не разделены между двумя действиями.</p><pre class="brush: xml noskimlinks noskimwords">&lt;style name="AppTheme" parent="AppTheme.Base"&gt;&lt;/style&gt;&lt;style name="AppTheme.Base" parent="android:Theme.Material.Light"&gt;    &lt;item name="android:windowContentTransitions"&gt;true&lt;/item&gt;    &lt;item name="android:windowEnterTransition"&gt;@android:transition/slide_bottom&lt;/item&gt;    &lt;item name="android:windowExitTransition"&gt;@android:transition/slide_bottom&lt;/item&gt;    &lt;item name="android:windowAllowEnterTransitionOverlap"&gt;true&lt;/item&gt;    &lt;item name="android:windowAllowReturnTransitionOverlap"&gt;true&lt;/item&gt;    &lt;item name="android:windowSharedElementEnterTransition"&gt;@android:transition/move&lt;/item&gt;    &lt;item name="android:windowSharedElementExitTransition"&gt;@android:transition/move&lt;/item&gt;&lt;/style&gt;</pre><p>Обратите внимание, что ваш проект должен быть нацелен (и, следовательно, скомпилирован), по крайней мере, на <strong>Android API 21</strong>.</p><p>Анимации будут игнорироваться в системах, на которых не установлен Lollipop. К сожалению, из-за соображений производительности библиотека <strong>AppCompat</strong> не обеспечивает полную обратную совместимость для этих анимаций.</p><h3>Шаг 2.<b> Назначьте имя перехода в файлах макета</b> </h3><p>После того, как вы отредактировали файл <strong>style</strong>.<strong>xml</strong>, вы должны указать связь между двумя общими элементами представлений.</p><p>В нашем примере общие представления представляют собой поле, содержащее имя контакта, номер телефона и цветной круг. Для каждого из них вы должны указать <strong>общее имя перехода.</strong> По этой причине начните добавлять в файл ресурсов <strong>strings.xml</strong> следующие элементы:</p><pre class="brush: xml noskimlinks noskimwords">&lt;string name="transition_name_name"&gt;transition:NAME&lt;/string&gt;&lt;string name="transition_name_circle"&gt;transition:CIRCLE&lt;/string&gt;&lt;string name=“transition_name_phone”&gt;transition:PHONE&lt;/string&gt;</pre><p>Затем для каждой из трех пар в файлах макета добавьте атрибут <code>android: transitionName</code> с соответствующим значением. Для цветного круга код выглядит следующим образом:</p><pre class="brush: plain noskimlinks noskimwords">&lt;!— In the single item layout: the item we are transitioning *from* —&gt;&lt;View    android:id=“@+id/CONTACT_circle”    android:transitionName=“@string/transition_name_circle”    android:layout_width=“40dp”    android:layout_height=“40dp”    android:background=“@drawable/circle”    android:layout_centerVertical=“true”    android:layout_alignParentLeft=“true”/&gt;</pre><pre class="brush: plain noskimlinks noskimwords">&lt;!— In the details activity: the item we are transitioning *to* —&gt;&lt;View    android:id=“@+id/DETAILS_circle”    android:transitionName=“@string/transition_name_circle”    android:layout_width=“48dp”    android:layout_height=“48dp”    android:background=“@drawable/circle”    android:layout_centerVertical=“true”    android:layout_alignParentLeft=“true”/&gt;</pre><p>Благодаря этому атрибуту, Android будет знать, какие представления разделены между двумя действиями и будут правильно анимировать переход. Повторите тот же процесс для двух других видов.</p><h3>Шаг 3: <b>Настройка намерения</b> </h3><p>С точки зрения кодирования вам нужно будет привязать конкретный пакет <code>ActivityOptions</code> к намерению. Вам нужен метод <code>makeSceneTransitionAnimation</code>, который принимает в качестве параметров контекст приложения и столько общих элементов, сколько нам нужно. В методе <code>onItemClick</code> <code>RecyclerView</code> отредактируйте ранее определенное <code>Intent </code>следующим образом:</p><pre class="brush: java noskimlinks noskimwords">@Override public void onItemClick(View view, int position) {    Intent intent = new Intent(MainActivity.this, DetailsActivity.class);    intent.putExtra(DetailsActivity.ID, Contact.CONTACTS[position].getId());    ActivityOptionsCompat options = ActivityOptionsCompat.makeSceneTransitionAnimation(            // the context of the activity            MainActivity.this,            // For each shared element, add to this method a new Pair item,            // which contains the reference of the view we are transitioning *from*,            // and the value of the transitionName attribute            new Pair&lt;View, String&gt;(view.findViewById(R.id.CONTACT_circle),                    getString(R.string.transition_name_circle)),            new Pair&lt;View, String&gt;(view.findViewById(R.id.CONTACT_name),                    getString(R.string.transition_name_name)),            new Pair&lt;View, String&gt;(view.findViewById(R.id.CONTACT_phone),                    getString(R.string.transition_name_phone))    );    ActivityCompat.startActivity(MainActivity.this, intent, options.toBundle());}</pre><p>Для каждого общего элемента, который нужно анимировать, вам нужно будет добавить в метод <code class="inline">makeSceneTransitionAnimatio</code>n новый элемент <code>Pair</code>. Каждая <code>Pair</code> имеет два значения, первая - это ссылка на представление, из <strong>которого </strong>вы переходите, вторая - <strong>значение </strong>атрибута <code>transitionName</code>.</p><p>Будьте осторожны при импорте класса <code>Pair</code>. Вам нужно будет включить пакет <code>android.support.v4.util</code>, а <em>не </em>пакет <code>android.util</code>. Кроме того, не забудьте использовать метод <code>ActivityCompat.startActivity</code> вместо метода <code>startActivity</code>, поскольку в противном случае вы не сможете запускать приложение в средах с API ниже 16.</p><p>Вот и все. Все готово. Это так просто.</p><h2>Заключение</h2><p>В этом уроке вы узнали, как красиво и плавно переходить между двумя видами деятельности, которые разделяют один или несколько общих элементов, позволяя визуально приятную и значимую непрерывность.</p><p>Вы начали с создания первого из двух видов деятельности, роль которых - отображение списка контактов. Затем вы завершили вторую деятельность, разработали ее макет и реализовали способ передачи уникальной ссылки между двумя видами деятельности. Наконец, вы посмотрели, как работает <code>makeSceneTransitionAnimation</code>, благодаря атрибуту XML <code>transitionName</code>.</p><h2> <b>Бонусный совет: стилистические подробности</b><br></h2><p>Чтобы создать истинное приложение для создания Material Design, как показано на предыдущих снимках экрана, вам также нужно будет изменить цвета вашей темы. Измените базовую тему в папке <strong>values-v21</strong>, чтобы добиться хорошего результата.</p><pre class="brush: plain noskimlinks noskimwords">&lt;style name=“AppTheme” parent=“AppTheme.Base”&gt;    &lt;item name=“android:windowTitleSize”&gt;0dp&lt;/item&gt;    &lt;item name=“android:colorPrimary”&gt;@color/colorPrimary&lt;/item&gt;    &lt;item name=“android:colorPrimaryDark”&gt;@color/colorPrimaryDark&lt;/item&gt;    &lt;item name=“android:colorAccent”&gt;@color/colorAccent&lt;/item&gt;    &lt;item name=“android:textColorPrimary”&gt;#fff&lt;/item&gt;    &lt;item name=“android:textColor”&gt;#727272&lt;/item&gt;    &lt;item name=“android:navigationBarColor”&gt;#303F9F&lt;/item&gt;&lt;/style&gt;</pre>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825407-vvedenie-v-novye-perehody-aktivnosti-lollipop" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Android SDK" href="https://norma-studio.github.io/article5/220825407-vvedenie-v-novye-perehody-aktivnosti-lollipop" class="tm-article-body__tags-item-link">Android SDK</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
34284</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
356</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
