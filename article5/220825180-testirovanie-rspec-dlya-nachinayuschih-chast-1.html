
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Тестирование RSpec для начинающих, часть 1... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Тестирование RSpec для начинающих, часть 1... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Тестирование RSpec для начинающих, часть 1... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Тестирование RSpec для начинающих, часть 1... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Вы новичок в Rails? Новое в кодировании? Интересуетесь вRSpec и как начать тестирование? Если это так, эта статья должна стать хорошей отправной точкой для начала разработки, основанной на тестировании. Он объяснит вам, почему и как, и даст вам набор для выживания, который вы сможете использовать для первого теста....">
<meta property="og:description" content="Вы новичок в Rails? Новое в кодировании? Интересуетесь вRSpec и как начать тестирование? Если это так, эта статья должна стать хорошей отправной точкой для начала разработки, основанной на тестировании. Он объяснит вам, почему и как, и даст вам набор для выживания, который вы сможете использовать для первого теста....">
<meta name="twitter:description" content="Вы новичок в Rails? Новое в кодировании? Интересуетесь вRSpec и как начать тестирование? Если это так, эта статья должна стать хорошей отправной точкой для начала разработки, основанной на тестировании. Он объяснит вам, почему и как, и даст вам набор для выживания, который вы сможете использовать для первого теста....">
<meta property="aiturec:description" content="Вы новичок в Rails? Новое в кодировании? Интересуетесь вRSpec и как начать тестирование? Если это так, эта статья должна стать хорошей отправной точкой для начала разработки, основанной на тестировании. Он объяснит вам, почему и как, и даст вам набор для выживания, который вы сможете использовать для первого теста....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/851/profiles/19371/profileImage/edgar_avatar_400x.png">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/851/profiles/19371/profileImage/edgar_avatar_400x.png">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/851/profiles/19371/profileImage/edgar_avatar_400x.png">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/851/profiles/19371/profileImage/edgar_avatar_400x.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/851/profiles/19371/profileImage/edgar_avatar_400x.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825180-testirovanie-rspec-dlya-nachinayuschih-chast-1.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825180-testirovanie-rspec-dlya-nachinayuschih-chast-1.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825180-testirovanie-rspec-dlya-nachinayuschih-chast-1.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825180-testirovanie-rspec-dlya-nachinayuschih-chast-1.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825180-testirovanie-rspec-dlya-nachinayuschih-chast-1.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825180-testirovanie-rspec-dlya-nachinayuschih-chast-1.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825180-testirovanie-rspec-dlya-nachinayuschih-chast-1.html" title="Тестирование RSpec для начинающих, часть 1... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Тестирование RSpec для начинающих, часть 1... | envatomarket.ru | norma-studio.github.io" title="Тестирование RSpec для начинающих, часть 1... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/e_09402063.jpg" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825180-testirovanie-rspec-dlya-nachinayuschih-chast-1.html" class="tm-user-info__username" title="
А. Карпов" aria-label="
А. Карпов">
А. Карпов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Тестирование RSpec для начинающих, часть 1...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825180-testirovanie-rspec-dlya-nachinayuschih-chast-1" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Rspec" href="https://norma-studio.github.io/article5/220825180-testirovanie-rspec-dlya-nachinayuschih-chast-1" class="tm-article-snippet__hubs-item-link"><span>Rspec</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825180-testirovanie-rspec-dlya-nachinayuschih-chast-1.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/851/profiles/19371/profileImage/edgar_avatar_400x.png">
    <meta itemprop="headline name" content="Тестирование RSpec для начинающих, часть 1... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Вы новичок в Rails? Новое в кодировании? Интересуетесь вRSpec и как начать тестирование? Если это так, эта статья должна стать хорошей отправной точкой для начала разработки, основанной на тестировании. Он объяснит вам, почему и как, и даст вам набор для выживания, который вы сможете использовать для первого теста....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Вы новичок в Rails? Новое в кодировании? Интересуетесь вRSpec и как начать тестирование? Если это так, эта статья должна стать хорошей отправной точкой для начала разработки, основанной на тестировании. Он объяснит вам, почему и как, и даст вам набор для выживания, который вы сможете использовать для первого теста....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Вы новичок в Rails? Новое в кодировании? Интересуетесь вRSpec и как начать тестирование? Если это так, эта статья должна стать хорошей отправной точкой для начала разработки, основанной на тестировании. Он объяснит вам, почему и как, и даст вам набор для выживания, который вы сможете использовать для первого теста.<br></p><h2>Темы</h2><ul><li>Что такое точка?</li> <li>RSpec?</li> <li>Начало</li> <li>Запуск тестов</li> <li>Базовый синтаксис</li> <li>Четыре фазы испытаний</li> <li>Трудная вещь о тестировании</li> </ul><h2>Что такое точка?</h2><p>Для чего нужен RSpec? RSpec очень полезен на уровне модульного тестирования, тестируя более тонкие детали и бизнес-логику вашего приложения. Это означает тестирование внутренних компонентов, таких как модели и контроллеры вашего приложения. Тесты, которые охватывают ваши представления или функциональные тесты, которые имитируют более полные пользовательские потоки, такие как покупка предмета, не будут в центре внимания RSpec. RSpec не использует веб-драйвер, как, например, Capybara, который имитирует взаимодействие пользователя с реальным сайтом или его представлением.</p><p>Разработка через тестирование (TDD), какой в ​​этом смысл? Ну, это не так легко ответить, не накормив вас некоторыми клише. Надеюсь, это не звучит уклончиво. Я мог бы дать быстрый ответ, но я хочу избежать отправки вас домой голодным после того, как вы перекусите. Результат этой небольшой серии статей о RSpec и тестировании должен не только дать вам всю информацию для самостоятельного ответа на этот вопрос, но и предоставить вам средства и понимание, с которых можно начать тестирование, и при этом почувствовать себя немного уверенным в этом вопросе.</p><p>Новичкам, похоже, труднее освоиться с RSpec и рабочим процессом TDD, чем начать опасно работать с Ruby или Rails. Почему так? На данный момент я могу только догадываться, но, с одной стороны, литература, в основном, ориентирована на людей, у которых уже есть некоторые навыки программирования, а с другой стороны, изучение всего того, что необходимо для ясного понимания, является немного пугающе. Кривая обучения может быть довольно крутой, я полагаю. Для эффективного тестирования задействовано много движущихся частей. Много просить новичков, которые только начали понимать среду, подобную Rails, взглянуть на процесс создания приложения с противоположной точки зрения и изучить совершенно новый API для написания кода для вашего кода.</p><p>Я думал о том, как приблизиться к этой «дилемме» для следующего поколения кодеров, которые просто ищут более плавного начала всего этого. Это то, что я придумал. Я расскажу вам о наиболее важном синтаксисе, не предполагая чего-то большего, чем базовые знания Ruby и немного Rails. Вместо того, чтобы охватить все возможные стороны и запутать вас до смерти, мы рассмотрим ваш базовый набор для выживания и попытаемся нарисовать более широкую картину. Мы будем обсуждать «Как?» Довольно многословно, чтобы не потерять новых кодеров на этом пути. Вторая часть уравнения будет объяснять «почему?» </p><p>Если мне повезет, у вас будет хорошая основа для более продвинутых книг, и вы будете чувствовать себя увереннее в общей картине. Хорошо, давай пройдем  прогуляемся! </p><h3>Извлекает выгоду и Такое</h3><p>Вернемся к цели тестирования. Полезно ли тестирование для написания более качественных приложений? Ну, это может быть горячо обсуждено, но в данный момент я отвечаю на этот вопрос с ответом да - я в лагере хипстеров TDD, я думаю. Давайте посмотрим, почему тесты предоставляют вашим приложениям пару преимуществ, которые трудно игнорировать:</p><p>Они проверяют, работает ли ваша работа как задумано. Постоянная проверка того, что вы пишете работающий код, крайне важна для здоровья вашего приложения и здоровья вашей команды.</p><p>Они проверяют то, что вы не хотите проверять вручную, утомительные проверки, которые вы можете выполнять вручную, особенно когда вам нужно проверять это все время. Вы хотите быть как можно более уверенными в том, что ваша новая функция, новый класс или что-либо еще не вызывает никаких побочных эффектов в, возможно, совершенно непредвиденных областях вашего приложения. Автоматизация подобных вещей не только сэкономит вам <em>массу</em> времени, но также сделает согласованные и воспроизводимые сценарии тестирования. Уже одно это делает их намного более надежными, чем подверженные ошибкам тестирование вручную.</p><p>Мы хотим убедиться, что приложение ведет себя определенным образом, ожидаемым образом. Тесты могут в значительной степени убедиться в том, что способы взаимодействия пользователей с вашим приложением функционируют, и избежать сценариев ошибок, которые вы могли предвидеть. Тесты проверяют, что ваше приложение работает так, как вы его разработали, и что оно продолжает работать после внесения изменений. Это особенно важно, когда ваш набор тестов информирует вас о неудачных сценариях реализации вашего приложения, которое может быть старым и, следовательно, уже не совсем у вас на уме и не учитываться, пока вы вводите некоторые новые функции. Короче говоря, это помогает поддерживать ваше приложение здоровым и позволяет избежать появления множества ошибок.</p><p>Автоматизированные тесты заставляют вас чаще тестировать. Представьте, если по какой-то причине вам нужно что-то проверить в 40-й раз. Если это займет немного времени, насколько легко будет скучно и вообще пропустить процесс? Подобные вещи - первый шаг на скользком склоне, где вы можете попрощаться с приличным процентом покрытия кода.</p><p>Тесты работают как документация. Да? Спецификации, которые вы пишете, дают другим сотрудникам вашей команды возможность быстро освоить новую кодовую базу и понять, что она должна делать. Например, написание кода в RSpec очень выразительно и формирует хорошо читаемые блоки кода, которые рассказывают историю, если все сделано правильно. Поскольку он может быть написан очень наглядно и в то же время является очень лаконичным предметно-ориентированным языком (DSL), RSpec поражает двух зайцев: не будучи многословным в своем API и предоставляя вам все средства для написания понятных тестовых сценариев. Это то, что мне всегда нравилось в этом, и почему я никогда не согревался с<span> Cucumber</span>, который, по-моему, решал одну и ту же проблему излишне дружественным к клиенту образом.</p><p>Они могут минимизировать количество кода, который вы пишете. Вместо того, чтобы шутить, как сумасшедший, пробовать что-то более вольное, практика тест-драйва вашего кода позволяет вам писать только тот код, который необходим для прохождения ваших тестов. Нет лишнего кода. В будущей карьере вы часто будете слышать о том, что лучший код - это код, который вам не нужно писать, или что-то в этом роде. Почему? Что ж, чаще всего более элегантные решения включают в себя меньшее количество кода, а также код, который вы не пишете - который может быть ненужным - не вызовет каких-либо будущих ошибок и не нуждается в поддержке. Итак, написание тестов в первую очередь, прежде чем писать реализацию, дает вам четкое представление о том, какую проблему вам нужно решить в следующий раз. Написание только необходимого кода, а не случайно, может быть недооцененным побочным эффектом, который TDD может предоставить вам. </p><p>Они положительно влияют на ваш дизайн. Для меня, понимание этой части включило лампочку и заставило меня действительно ценить все тестирование. Когда вы пишете свои реализации вокруг очень сфокусированных тестовых сценариев, ваш код, скорее всего, окажется гораздо более разрозненным и модульным. Так как мы все друзья DRY - «Не повторяйся!» - и как можно меньше связей между компонентами в вашем приложении, это простая, но эффективная дисциплина для достижения систем, которые хорошо спроектированы с нуля. Этот аспект является наиболее важным преимуществом, я думаю. Да, другие тоже довольно крутые, но когда тесты также приводят к приложениям, качество которых лучше благодаря утонченному дизайну, я бы сказал, Джекпот! </p><p>Это также сводится к деньгам. Если у вас есть стабильное приложение, которое легко поддерживать и легко менять, вы в конечном итоге сэкономите немало денег. Ненужная сложность может легко преследовать проекты, и мотивация не будет на рекордно высоком уровне, когда вашей команде придется бороться с вашим кодом, потому что он хрупок и плохо спроектирован. Хороший дизайн приложения может полностью поддержать ваши бизнес-цели и наоборот. Вы хотите представить некоторые новые функции, которые важны для вашего бизнеса, но вы постоянно боретесь со своей архитектурой, потому что она построена на песке? Конечно, нет, и мы все видели множество примеров предприятий, которые быстро исчезли именно по этой причине. Хорошие навыки тестирования могут быть эффективной линией защиты в таких ситуациях. </p><p>Другая важная цель - это качество самого кода. Программное обеспечение, которое вы пишете, должно быть легким для понимания другими разработчиками - по крайней мере, насколько это возможно. Ваши тесты могут действительно помочь донести функциональность и цель вашего приложения - и не только другим членам команды, но и вашему будущему себе. Если вы не касаетесь определенной части своего кода в течение долгого времени, будет действительно полезно освежить вашу память о том, как и почему вы написали часть программного обеспечения, с помощью документации, которую предоставляет такой инструмент, как RSpec, а RSpec делает это действительно хорошо, исключительно на самом деле.</p><p>Поскольку ваш код всегда будет меняться, рефакторинг вашего кода будет и всегда должен быть частью разработки вашего программного обеспечения. А поскольку изменения настолько запутаны в этом процессе, вы должны убедиться, что эти изменения не вызывают неожиданных побочных эффектов в неожиданных местах. Набор тестов дает вам довольно сплоченную сеть безопасности, чтобы чувствовать себя более комфортно и свободно проводить рефакторинг с удовольствием. Этот аспект, наряду с преимуществами дизайна, которые может предоставить TDD, является моим любимым преимуществом, с которым может помочь набор тестов. Модификация и расширение вашего кода - это настолько важный компонент инноваций в уже выпущенном «продукте», что вам нужен инструмент, который дает вам как можно больше свободы в этом процессе. Я не уверен, что люди, которые критически относятся к написанию обширного набора тестов, сильно обеспокоены этим аспектом.</p><p>У вас будет больше шансов быстрее создавать новые вещи на более поздних этапах, потому что отзывы от набора тестов дадут вам отзывы о ваших сбоях, ошибках и ограничениях - конечно, гораздо быстрее, чем может протестировать человек. Кроме того, это даст вам уверенность в работе с сетью безопасности, которая становится еще более ценной, чем дольше вы идете. </p><p>В ваших приложениях, особенно если они значительно выросли, вы хотите иметь возможность доверять своему программному обеспечению. 100% покрытие кода звучит намного слаще, если у вас есть сайт, которому несколько лет, и который тронут сотнями разработчиков. Возможность доверять новому коду, который вы вводите, и опираться на него, является одним из блаженств разработки программного обеспечения, которое в дальнейшем нельзя будет купить за деньги.</p><h2>Начало<br></h2><h3>Терминал</h3><pre class="brush: bash noskimlinks noskimwords">rails new your_app -T</pre><p><code class="inline">-T</code> позволяет пропустить Test Unit, среду тестирования, которая поставляется с Rails.</p><h3>Gemfile</h3><pre class="brush: ruby noskimlinks noskimwords">group :development, :test do  gem "rspec-rails"end</pre><h3>Терминал</h3><pre class="brush: bash noskimlinks noskimwords">bundle</pre><p>После этого нам нужно управлять генератором, который приходит с Rspec:</p><h3>Терминал</h3><pre class="brush: bash noskimlinks noskimwords">rails generate rspec:install</pre><h3>Выход</h3><pre class="brush: plain noskimlinks noskimwords">create  .rspeccreate  speccreate  spec/spec_helper.rbcreate  spec/rails_helper.rb</pre><p>Что это делает установлен основную структуру для ваших испытаний Rspec в пределах Рельсов. Так как вы можете посмотреть из продукции выше, этот генератор инициализировал директорий <code class="inline">спекуляции</code> с несколькими файлами, которые вам будут нужны позже. <code class="inline"> .rspec</code> файл - конфигурационный файл, пока который нам не нужно будет манипулировать. Я только что захотел позволить вам знать, что вы имеете перед вами. Другие файлы самоочевидны, но я захотел упомянуть их отличия.<br></p><ul><li> <code class="inline">spec_helper.rb</code> для спекуляций, которые не зависят от Рельсов.</li> <li> <code class="inline">rails_helper.rb</code>, с другой стороны, для спекуляций, которые зависят от этого.</li> </ul><p>Что не очевидно есть, что один из этих файлов нужно требовать в довершение ваших файлов спекуляции (испытательные файлы) для того, чтобы управлять вашими испытаниями. Давайте быстро посмотрим! Когда вы генерируете модель через: <br></p><h3>Терминал</h3><pre class="brush: bash noskimlinks noskimwords">rails generate model dummy_model name:string</pre><h3>Выход</h3><pre class="brush: plain noskimlinks noskimwords">invoke  active_recordcreate    db/migrate/20160521004127_create_dummy_models.rbcreate    app/models/dummy_model.rbinvoke    rspeccreate    spec/models/dummy_model_spec.rb</pre><p>Rails не только создаст для вас связанные файлы <code class="inline">_spec.rb</code>, но ваши спецификации также автоматически по умолчанию требуют <code class="inline">"rails_helper"</code> поверх ваших файлов спецификаций. Это означает, что вы готовы к работе, сразу. <br></p><h4>Spec/Models/dummy_model_spec.RB</h4><pre class="brush: ruby noskimlinks noskimwords">require "rails_helper"...</pre><p>Rails не только создаст для вас связанные файлы _spec.rb, но ваши спецификации также автоматически по умолчанию требуют "rails_helper" поверх ваших файлов спецификаций. Это необходимо требовать всякий раз, когда вам нужны такие вещи, как <code class="inline">ActiveRecord</code>, <code class="inline">ApplicationController</code> и так далее. Так что это ваш обычный сценарий и, следовательно, должен быть ваш первый логический выбор в качестве новичка.<br></p><p>С другой стороны, запрос <code class="inline">spec_helper.rb</code> вызовет ошибку, если вы напишите тесты, включающие бизнес-логику, из вашего приложения Rails. В этом случае RSpec не будет знать, о чем вы говорите, например, когда вы хотите протестировать какую-либо модель Rails. </p><p>Очень длинная история, <code class="inline">spec_helper</code> не загружает Rails - вот и все! Конечно, вы можете сходить с ума с конфигурациями, но я не хочу, чтобы вы беспокоились о них прямо сейчас. Давайте сосредоточимся на основах, как выполнять тесты и синтаксис. Этого должно хватить для начала. Давайте двигаться дальше!<br></p><h2>Запуск тестов<br></h2><p>Вы готовы выполнять тесты. RSpec требует, чтобы у ваших тестовых файлов был определенный суффикс, такой как <code class="inline">_spec</code>, чтобы понять, какие файлы запускать. Если вы используете генератор, это не проблема, но если вы хотите написать тестовые файлы самостоятельно, это то, как они должны закончиться. Так что вам нужно будет поместить файл наподобие your<code class="inline">_first_test_spec.rb</code> в вашу директорию <code class="inline">spec</code>. </p><p>Использование генератора для создания фиктивной модели уже предоставило нам <code class="inline">spec / models / dummy_model_spec.rb</code>. Не плохо! Осталось сделать до того, как тесты будут готовы: <br></p><h3>Терминал</h3><pre class="brush: plain noskimlinks noskimwords">rake db:migraterake db:test:prepare</pre><p>Эти команды запускают миграцию для фиктивной модели, которую мы сгенерировали выше, а также настраивают тестовую базу данных с этой моделью. Теперь мы фактически запускаем тест:<br></p><h3>Терминал</h3><pre class="brush: bash noskimlinks noskimwords">rake</pre><p>Команда <code class="inline">rake</code> запустит все ваши тесты, полный набор тестов. Обычно вам следует использовать эту команду, когда вы завершили какую-то функцию и хотите использовать весь набор тестов.<br></p><h3>Выход</h3><pre class="brush: plain noskimlinks noskimwords">*Pending: (Failures listed here are expected and do not affect your suite"s status)1) DummyModel add some examples to (or delete) /Users/vis_kid/projects/rspec-test-app/rspec-dummy/spec/models/dummy_model_spec.rb   # Not yet implemented   # ./spec/models/dummy_model_spec.rb:4Finished in 0.00083 seconds (files took 1.94 seconds to load)1 example, 0 failures, 1 pending</pre><p>Поздравляю! Вы только что провели первый тест RSpec. Не плохо, это было? Конечно, на данный момент это был фиктивный тест с фиктивным тестовым кодом, сгенерированным Rails. Более сфокусированная версия запуска ваших тестов - у вас на самом деле гораздо больше возможностей, чем только это - это, например, запуск отдельного файла. Как это: <br></p><h3>Терминал</h3><pre class="brush: plain noskimlinks noskimwords">bundle exec rspec spec/models/dummy_model_spec.rb</pre><p>При этом будет запущен только один тестовый файл вместо всего набора тестов. С большими приложениями, которые зависят от большого количества тестовых файлов, это сэкономит время. Но с точки зрения экономии времени и специфики испытаний, это, честно говоря, только царапина на поверхности. Я думаю, что мы расскажем больше о том, как сэкономить значительное количество времени во время тестирования в третьей статье этой серии. Посмотрим, как далеко мы доберемся!<br></p><p>Другой способ реализовать весь набор тестов - просто запустить <code class="inline">rspec</code> - с или без <code class="inline">bundle exec</code>, в зависимости от ваших настроек.<br></p><h3>Терминал</h3><pre class="brush: plain noskimlinks noskimwords">bundle exec rspec</pre><p>Еще одну вещь, которую я должен упомянуть, прежде чем мы продолжим, вы также можете запустить только определенное подмножество тестов. Скажем, вы хотите запустить все свои тесты для кода модели:<br></p><h3>Терминал</h3><pre class="brush: plain noskimlinks noskimwords">bundle exec rspec spec/models</pre><p>Так просто!<br></p><h2>Базовый синтаксис<br></h2><p>Я рекомендую начать с простых основ и рассмотреть несколько вариантов, которые RSpec предоставляет в следующих двух статьях. Давайте посмотрим на базовую структуру теста и окунемся в более продвинутые воды, когда мы разберемся с этим.</p><ul><li><code class="inline">Опишите</code></li></ul><p>Это будет ваш хлеб с маслом, потому что он организует ваши спецификации. Вы можете ссылаться на сами строки или классы:<br></p><h3>Некоторые спецификации</h3><pre class="brush: ruby noskimlinks noskimwords">describe User doenddescribe "Some string" doend</pre><p>Разделы <code class="inline">описания</code> - это основные строительные блоки для организации ваших тестов в логические, согласованные группы для тестирования. По сути, область для различных частей вашего приложения, которые вы хотите протестировать.<br></p><h3>Некоторые спецификации</h3><pre class="brush: ruby noskimlinks noskimwords">describe User do  ...enddescribe Guest do  ...enddescribe Attacker do  ...end</pre><p>Хороший совет - ужесточить свою сферу еще больше. Поскольку некоторые классы вырастут довольно значительно, не стоит иметь все методы, которые вы хотите протестировать, для одного класса в одном блоке <code class="inline">описаний</code>. Конечно, вы можете создать несколько таких блоков и вместо этого сфокусировать их на методах экземпляра или класса. Чтобы сделать ваше намерение более понятным, все, что вам нужно, это указать имя класса с дополнительной строкой, которая ссылается на метод, который вы хотите протестировать.<br></p><h3>Некоторые спецификации</h3><pre class="brush: ruby noskimlinks noskimwords">describe Agent, "#favorite_gadget" do  ...enddescribe Agent, "#favorite_gun" do  ...enddescribe Agent, ".gambler" do  ...end</pre><p>Таким образом, вы получаете лучшее из обоих миров. Вы помещаете связанные тесты в их репрезентативные группы, сохраняя при этом сфокусированность и приемлемый размер. Для пользователей, которые плохо знакомы с Ruby, я должен отметить, что <code class="inline">#</code> просто ссылается на метод экземпляра, а точка<code class="inline">.</code> зарезервировано для методов класса. Поскольку они находятся внутри строк, они не имеют здесь никаких технических последствий, но они сигнализируют о ваших намерениях другим разработчикам и вашему будущему «я». Не забывайте запятую после имени класса - без него не получится! Через минуту, когда мы <code class="inline">ожидаем</code>, я покажу вам, почему этот подход очень удобен.</p><ul><li><code class="inline">Это</code></li></ul><p>В рамках групп <code class="inline">описания</code> мы используем другую область <code class="inline">it </code>блоков. Они сделаны для реальных тестируемых примеров. Если вы хотите проверить метод экземпляра <code class="inline">#favorite_gadget</code> в классе <code class="inline">Agent</code>, он будет выглядеть следующим образом:<br></p><h3>Некоторые спецификации</h3><pre class="brush: ruby noskimlinks noskimwords">describe Agent, "#favorite_gadget" do  it "returns one item, the favorite gadget of the agent " do    ...  endend</pre><p>Строка, которую вы передаете в блок <code class="inline">it</code>, служит основной документацией для вашего теста. В нем вы указываете, какое именно поведение вы хотите или ожидаете от рассматриваемого метода. Моя рекомендация - не переусердствовать и не быть слишком многословным, но в то же время не быть слишком загадочным и не путать других с чрезмерно умными описаниями. </p><p>Подумайте о том, чего может и должна достичь самая маленькая и простая реализация этой части головоломки. Чем лучше вы напишите эту часть, тем лучше будет общая документация для вашего приложения. Не торопите эту часть, потому что это просто струна, которая не может нанести никакого ущерба - по крайней мере, не на поверхности.<br></p><ul><li><code class="inline">Ожидай ()</code></li></ul><p>Теперь мы углубляемся в суть вещей. Этот метод позволяет проверить или сфальсифицировать часть системы, которую вы хотите проверить. Давайте вернемся к нашему предыдущему примеру и увидим его в (ограниченном) действии:<br></p><h3>Некоторые спецификации</h3><pre class="brush: ruby noskimlinks noskimwords">describe Agent, "#favorite_gadget" do  it "returns one item, the favorite gadget of the agent " do    expect(agent.favorite_gadget).to eq "Walther PPK"   endend</pre><p><code class="inline">Ожидайте ()</code> является «новым» синтаксисом утверждения RSpec. Ранее мы использовали <code class="inline">should</code> вместо этого. Другая история, но я хотел упомянуть об этом на случай, если вы столкнетесь с этим. <code class="inline">Ожидайте, что () </code>ожидает, что вы предоставите ему объект и примените к нему любой тестируемый метод. Наконец, вы пишете утвержденный результат на правой стороне. </p><p>У вас есть возможность пойти положительным или отрицательным путем, например, с помощью <code class="inline">.to eq</code> или <code class="inline">.not_to eq</code> (<code class="inline">eq</code>, конечно, означает «равно»). Вы всегда можете изменить логику - все, что соответствует вашим потребностям. Давайте запустим этот бессмысленный тест и сосредоточимся на выводе, который мы получили в результате нашей настройки теста:<br></p><h3>Терминал</h3><pre class="brush: plain noskimlinks noskimwords">rspec spec/models/agent_spec.rb</pre><h3>Выход</h3><pre class="brush: plain noskimlinks noskimwords">Failures:  1) Agent#favorite_gadget returns one item, the favorite gadget of the agent      Failure/Error: expect(agent.favorite_gadget).to eq "Walther PPK"</pre><p>Читается довольно хорошо, не так ли? <code class="inline">** «Агент # любимый_гаджет</code> возвращает один элемент, а любимый гаджет <code class="inline">агента» **</code> сообщает вам все, что вам нужно знать:</p><ul><li>участвующий класс </li> <li>тестируемый метод</li> <li>Ожидаемый результат</li> </ul><p>Если бы мы оставили строку, описывающую метод в блоке <code class="inline">description</code>, результат был бы намного менее понятным и читабельным:<br></p><h3>Некоторые спецификации</h3><pre class="brush: ruby noskimlinks noskimwords">describe Agent do  it "returns one item, the favorite gadget of the agent " do    expect(agent.favorite_gadget).to eq "Walther PPK"   endend</pre><h3>Выход</h3><pre class="brush: plain noskimlinks noskimwords">Failures:  1) Agent returns one item, the favorite gadget of the agent      Failure/Error: expect(agent.favorite_gadget).to eq "Walther PPK"</pre><p>Конечно, есть и другие способы обойти и справиться с этим - например, передать эту информацию через свой блок <code class="inline">it</code> - но другой подход прост и работает. Ну и не перетруждайте себя!<br></p><h2>четыре фазы теста<br></h2><p>Лучшие практики в тестировании рекомендуют, чтобы мы составили наши тесты в четырех отличных фазах:</p><ul><li> испытательная установка</li> <li>смотровое учение</li> <li>испытательная проверка</li> <li>испытательное разрушение</li> </ul><p>Эти четыре фазы главным образом для удобочитаемости и дать Вашим тестам обычную структуру. Это - так называемый образец тестирования, в основном, практика, которую сообщество широко согласовало, чтобы быть полезным и рекомендованным. Эта целая тема образцов - глубокая кроличья нора, поэтому знайте, что я не учту связку, чтобы не смутить новичков среди Вас до смерти. </p><h3>установка</h3><p>Во время установки Вы готовите сценарий, согласно которому тест, как предполагается, бежит. В большинстве случаев это будет включать данные, должно было быть готово к некоторому осуществлению. Мало наконечника: не сверхусложняйте вещи и настраивайте только минимальное количество, необходимое, чтобы заставить тест работать.</p><pre class="brush: ruby noskimlinks noskimwords">agent = Agent.create(name: "James Bond")mission = Mission.create(name: "Moonraker", status: "Briefed")</pre><h3>упражнение</h3><p>Эта часть на самом деле управляет вещью, которую Вы хотите проверить в этой спекуляции. Могло быть столь же простым как:</p><pre class="brush: ruby noskimlinks noskimwords">status = mission.agent_status</pre><h3>Проверяй</h3><p>Теперь Вы проверяете, встречается ли Ваше утверждение о тесте или нет. Таким образом, Вы проверяете систему против своих собственных ожиданий.</p><pre class="brush: ruby noskimlinks noskimwords">expect(status).not_to eq "MIA")</pre><h3>разрушение</h3><p>Структура заботится о памяти и проблемах очистки базы данных — сброс в основном. Нет ничего для Вас, чтобы обращаться в этом пункте. Цель состоит в том, чтобы возвратить нетронутое государство, чтобы запустить новые тесты без любых неожиданностей от в настоящее время бегущих. Давайте посмотрим то, что это означало бы в фиктивном примере:</p><h3>Некоторые спецификации </h3><pre class="brush: ruby noskimlinks noskimwords">describe Agent, "#favorite_gadget" do  it "returns one item, the favorite gadget of the agent " do  # Setup    agent = Agent.create(name: "James Bond")    q = Quartermaster.create(name: "Q")     q.technical_briefing(agent)  # Exercise        favorite_gadget = agent.favorite_gadget    # Verify    expect(favorite_gadget).to eq "Walther PPK"   # Teardown is for now mostly handled by RSpec itself  endend</pre><p>Как вы можете видеть, в этом примере мы четко отделили этапы упражнения и проверки друг от друга, в то время как в других приведенных выше примерах <code class="inline">ожидаем (agent.favorite_gadget). Чтобы получить «Walther PKK»</code>, мы смешали обе фазы вместе. Оба являются действительными сценариями и имеют свое место. Кроме того, новые строки помогают визуально отделить структуру теста.<br></p><h2>трудная вещь - тестирование<br></h2><p>Теперь самое сложное: что тестировать и как. На мой взгляд, именно этот аспект тестирования больше всего сбивает с толку новичков - и это понятно! Вы плохо знакомы с языком и структурой и часто даже не знаете, чего не знаете. Как вы пишете тесты для этого? Очень хороший вопрос </p><p>Я буду очень откровенен, вы не - скорее всего, - и вы не будете в течение длительного времени. Освоение этого материала занимает некоторое время. Когда у вас есть наставник или вы посещаете какой-нибудь учебный лагерь и тому подобное, у вас есть возможность напрямую учиться у опытных людей. В этом случае ваш прогресс в этом отделе, конечно, будет другим.<br></p><p>С другой стороны, если - как и многие другие - вы учите себя этому, терпение будет ключевым. Чтение всех книг и статей, безусловно, приведет вас в правильном направлении, но я думаю, что тестирование требует много более сложных кусочков головоломки, чтобы вы имели полный смысл и, возможно, даже более важный, прежде чем вы будете чувствовать себя комфортно с ним , </p><p>«Хорошая» новость заключается в том, что в этом нет ничего необычного, и мы все были там. Настойчивость важна. Вы можете сделать это, это не ракетостроение, но потребуется время, пока вы не сможете эффективно написать приложение с другой стороны - с точки зрения тестов, я имею в виду. Пока продолжайте настаивать, веселиться, делать ошибки, писать приложения, копировать учебники и еще много чего, пока не погаснет лампочка.<br></p><h2>Последние мысли <br></h2><p>Когда вы пишете свои индивидуальные тесты, вы хотите, чтобы их объекты выполняли простейшую вещь для достижения вашей цели - именно сфокусированные тесты действительно являются ключевыми. Вы хотите спроектировать свое приложение с помощью очень простых шагов, а затем следить за ошибками, которые предоставляет вам набор тестов. </p><p>Реализуйте только то, что необходимо, чтобы приложение стало зеленым. Не больше, не меньше! Это «движущая» часть в разработке, управляемой тестами. Ваша работа руководствуется потребностями ваших тестов.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825180-testirovanie-rspec-dlya-nachinayuschih-chast-1" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Rspec" href="https://norma-studio.github.io/article5/220825180-testirovanie-rspec-dlya-nachinayuschih-chast-1" class="tm-article-body__tags-item-link">Rspec</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
31181</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
600</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
