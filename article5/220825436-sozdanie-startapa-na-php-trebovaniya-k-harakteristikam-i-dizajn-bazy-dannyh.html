
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных
... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных
... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных
... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных
... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Это вторая часть серии Building Your Startup PHP, в которой я веду вас через всю разработку, начиная от концепции и до запуска моего стартапа Планировщика собраний. В этой части я расскажу о целях и требованиях к функциям, а затем проведу вас через первоначальный дизайн и миграцию базы данных....">
<meta property="og:description" content="Это вторая часть серии Building Your Startup PHP, в которой я веду вас через всю разработку, начиная от концепции и до запуска моего стартапа Планировщика собраний. В этой части я расскажу о целях и требованиях к функциям, а затем проведу вас через первоначальный дизайн и миграцию базы данных....">
<meta name="twitter:description" content="Это вторая часть серии Building Your Startup PHP, в которой я веду вас через всю разработку, начиная от концепции и до запуска моего стартапа Планировщика собраний. В этой части я расскажу о целях и требованиях к функциям, а затем проведу вас через первоначальный дизайн и миграцию базы данных....">
<meta property="aiturec:description" content="Это вторая часть серии Building Your Startup PHP, в которой я веду вас через всю разработку, начиная от концепции и до запуска моего стартапа Планировщика собраний. В этой части я расскажу о целях и требованиях к функциям, а затем проведу вас через первоначальный дизайн и миграцию базы данных....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/final_image/meeting-list.jpeg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/final_image/meeting-list.jpeg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/final_image/meeting-list.jpeg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/final_image/meeting-list.jpeg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/final_image/meeting-list.jpeg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825436-sozdanie-startapa-na-php-trebovaniya-k-harakteristikam-i-dizajn-bazy-dannyh.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825436-sozdanie-startapa-na-php-trebovaniya-k-harakteristikam-i-dizajn-bazy-dannyh.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825436-sozdanie-startapa-na-php-trebovaniya-k-harakteristikam-i-dizajn-bazy-dannyh.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825436-sozdanie-startapa-na-php-trebovaniya-k-harakteristikam-i-dizajn-bazy-dannyh.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825436-sozdanie-startapa-na-php-trebovaniya-k-harakteristikam-i-dizajn-bazy-dannyh.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825436-sozdanie-startapa-na-php-trebovaniya-k-harakteristikam-i-dizajn-bazy-dannyh.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825436-sozdanie-startapa-na-php-trebovaniya-k-harakteristikam-i-dizajn-bazy-dannyh.html" title="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных
... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных
... | envatomarket.ru | norma-studio.github.io" title="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных
... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/543543242.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825436-sozdanie-startapa-na-php-trebovaniya-k-harakteristikam-i-dizajn-bazy-dannyh.html" class="tm-user-info__username" title="
А. Морозов" aria-label="
А. Морозов">
А. Морозов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных
...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825436-sozdanie-startapa-na-php-trebovaniya-k-harakteristikam-i-dizajn-bazy-dannyh" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="PHP" href="https://norma-studio.github.io/article5/220825436-sozdanie-startapa-na-php-trebovaniya-k-harakteristikam-i-dizajn-bazy-dannyh" class="tm-article-snippet__hubs-item-link"><span>PHP</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825436-sozdanie-startapa-na-php-trebovaniya-k-harakteristikam-i-dizajn-bazy-dannyh.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/final_image/meeting-list.jpeg">
    <meta itemprop="headline name" content="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных
... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Это вторая часть серии Building Your Startup PHP, в которой я веду вас через всю разработку, начиная от концепции и до запуска моего стартапа Планировщика собраний. В этой части я расскажу о целях и требованиях к функциям, а затем проведу вас через первоначальный дизайн и миграцию базы данных....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Это вторая часть серии Building Your Startup PHP, в которой я веду вас через всю разработку, начиная от концепции и до запуска моего стартапа Планировщика собраний. В этой части я расскажу о целях и требованиях к функциям, а затем проведу вас через первоначальный дизайн и миграцию базы данных....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Это вторая часть серии Building Your Startup PHP, в которой я веду вас через всю разработку, начиная от концепции и до запуска моего стартапа <span>Планировщика собраний</span>. В этой части я расскажу о целях и требованиях к функциям, а затем проведу вас через первоначальный дизайн и миграцию базы данных.</p><p>Поскольку мы не увидим, что многие функции оживают сразу, этот эпизод может показаться немного сухим, но важно заложить основу для всего, что будет дальше. Если вы не писали миграции базы данных Active Record и не использовали Gii для создания приложение Yii  вы, вероятно, узнаете всего много.</p><h2>Требования</h2><p>Прежде чем описывать специфику базы данных Планировщика собраний, я расскажу вам о функциях высокого уровня, которые будет предлагать Планировщик собраний.</p><h4><strong>Планирование совещаний</strong></h4><ul><li>Разрешить пользователям создавать запрос на собрание и приглашать другого человека (всего один человек для нашего <span>минимально жизнеспособного продукта</span>). </li> <li>Разрешить пользователям предлагать и выбирать места.</li> <li>Разрешить пользователям предлагать и выбирать дни и время.</li> <li>Разрешить пользователям отправлять заметки друг другу во время процесса планирования собрания.</li> <li>Предлагать места, подходящие для встреч, близких к пользователю.</li> <li>Запись логов (или историю) всех дополнений и изменений на собрания.</li> </ul><h4><strong>Поддержка мест</strong></h4><ul><li>Разрешить пользователям добавлять любимые места, в которых они любят регулярно встречаться.</li> <li>Позвольте пользователям добавлять свои собственные места для встреч, таких как дом и офис.</li> <li>Предложите места рядом с каждым участником или равноудаленным, частично основанным на популярности.</li> </ul><h4><strong>Поддержка пользователей</strong></h4><ul><li>Ведение списков всех собраний пользователей, находящихся в процессе, подтвержденных и прошедших.</li> <li>Разрешить пользователям предоставлять свои контактные данные, такие как номера телефонов и адреса Skype для онлайн-конференций.</li> <li>Разрешить пользователям отключать нежелательные электронные письма, то есть отменять подписку.</li> <li>Требовать от пользователей аутентификации своих писем перед доставкой приглашений.</li> <li>Упростите электронную почту, связанную с нежелательными приглашениями, например, спам.</li> </ul><h4><strong>Делать вещи проще и быстрее</strong></h4><ul><li>Разрешить пользователям создавать шаблоны, облегчающие планирование общих собраний, с предлагаемыми днями и временем и избранными местами, например, я бы хотел запланировать утренний кофе с таким и так на моем обычном предпочтительном месте, в такой день недели, и в такое время</li> <li>Отправлять электронные письма с изменениями собрания, URL-ссылки на команды для внесения изменений, например. аннулирование или запрос на изменение места, дня или времени; аутентифицировать пользователей через коды подтверждения в этих ссылках.</li> <li>Отправьте напоминания о собраниях за день до этого с контактными данными и указаниями.</li> </ul><h4><strong>Получение дохода</strong></h4><ul><li>Разрешить рекламодателям, например. ресторанам, кофешопам и арендаторам офисных помещений рекламу своих мест.</li></ul><p>Хотя вышесказанное не является исчерпывающим списком функций, оно дает вам четкое представление о том, что нам нужно для схемы базы данных.<br></p><h2>Установка репозитория планировщика собраний</h2><p>Чтобы начать настройку среды разработки для Планировщика собраний, вы можете использовать мой путеводитель <span>Программирование с Yii2: Начало работы</span>; следуйте инструкциям по установке Composer.</p><p>Все учебные пособия по планированировщику собраний будут помечены в нашем бесплатном репозитории Github с открытым исходным кодом. Итак, для этой части серии учебников вы можете установить <span>базовую версию фреймворка</span>.</p><p>Для Планировщика собраний я установил <span>расширенный шаблон приложения Yii2</span>, который обеспечивает немного более надежную архитектуру для сложных приложений, например. различные приложения для интерфейсного (конечного пользователя) и внутреннего (административного) доступа.</p><p>Чтобы начать работу с кодом, вам нужно клонировать репозиторий, проверить отмеченную версию этой части учебника, запустить инициализацию и попросить Composer обновить файлы:</p><pre class="brush: bash noskimlinks noskimwords">cd ~/Sitesgit clone git@github.com:newscloud/mp.gitcd ~/Sites/mpgit checkout p2 sudo -s php initsudo composer update</pre><p>Я использую MAMP в своей локальной среде разработки. Итак, мне нужно указать мой предпочтительный URL-адрес локального хоста для <code class="inline">~/Sites/mp/frontend/web</code>:</p><pre class="brush: bash noskimlinks noskimwords">cd /Applications/MAMP/htdocsln -s ~/Sites/mp/frontend/web/ /Applications/MAMP/htdocs/mp</pre><p>Если вы откроете в своем браузере страницу <span>http://localhost:8888/mp</span>, вы должны увидеть что-то вроде этого:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/image/localhost.jpeg" alt="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." title="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." width="50" height="50"></figure><p>Затем вам нужно создать базу данных в MySQL и настроить параметры в <code class="inline">\environments\dev\common\main-local.php</code>:</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpreturn [    "components" =&gt; [        "db" =&gt; [            "class" =&gt; "yii\db\Connection",            "dsn" =&gt; "mysql:host=localhost;dbname=your-db",            "username" =&gt; "your-username",            "password" =&gt; "your-pwd",            "charset" =&gt; "utf8",        ],</pre><p>Прежде чем мы сможем дальше продолжить миграцию, я хотел бы проработать предварительный проект базы данных.<br></p><h2>Проектирование схемы базы данных<br></h2><p>Поскольку я нахожусь на ранних стадиях построения кода, я пытаюсь выполнить тщательную работу по созданию базы данных; однако, скорее всего, дизайн, возможно, потребуется изменить или развивать по мере продвижения вперед.</p><p>Миграции Active Record Yii позволяет относительно легко программно создавать базы данных в разных средах и постепенно их развивать. Здесь вы можете узнать больше о <span>Yii"s Active Record</span>.</p><h3>Таблица пользователей</h3><p>Первая миграция создает пользовательскую таблицу и входит в состав расширенного шаблона приложения Yii - <code class="inline">/mp/console/migrations/m130524_201442_init.php</code>.</p><p>Эта миграция указывает Yii создать новую таблицу SQL с полями, необходимыми для таблицы пользователя, показанной ниже:</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpuse yii\db\Schema;use yii\db\Migration;class m130524_201442_init extends Migration{    public function up()    {        $tableOptions = null;        if ($this-&gt;db-&gt;driverName === "mysql") {            // http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci            $tableOptions = "CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE=InnoDB";        }        $this-&gt;createTable("{{%user}}", [            "id" =&gt; Schema::TYPE_BIGPK,            "friendly_name" =&gt; Schema::TYPE_STRING . " NOT NULL",            "username" =&gt; Schema::TYPE_STRING . " NOT NULL",            "auth_key" =&gt; Schema::TYPE_STRING . "(32) NOT NULL",            "password_hash" =&gt; Schema::TYPE_STRING . " NOT NULL",            "password_reset_token" =&gt; Schema::TYPE_STRING,            "email" =&gt; Schema::TYPE_STRING . " NOT NULL",            "role" =&gt; Schema::TYPE_SMALLINT . " NOT NULL DEFAULT 10",            "status" =&gt; Schema::TYPE_SMALLINT . " NOT NULL DEFAULT 10",            "created_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",            "updated_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",        ], $tableOptions);    }    public function down()    {        $this-&gt;dropTable("{{%user}}");    }}</pre><p>Вы можете выполнить первую миграцию, как показано ниже:</p><pre class="brush: bash noskimlinks noskimwords">cd ~/Sites/mp./yii migrate/up 1</pre><p>Вы должны увидеть что-то вроде этого:</p><pre class="brush: bash noskimlinks noskimwords">Jeffs-Mac-mini:mp Jeff$ ./yii migrate/up 1Yii Migration Tool (based on Yii v2.0.0)Creating migration history table "migration"...done.Total 1 out of 15 new migrations to be applied:    m130524_201442_initApply the above migration? (yes|no) [no]:yes*** applying m130524_201442_init    &gt; create table {{%user}} ... done (time: 0.068s)*** applied m130524_201442_init (time: 0.071s)Migrated up successfully.</pre><p>Yii обеспечивает встроенную веб-поддержку для общих операций, таких как регистрация, вход в систему, выход из системы и многое другое. Эта функциональность и эта таблица будут служить основой для поддержки наших первоначальных возможностей аутентификации. Мы можем позже расширить его различными способами, например, поддержкой Twitter или Google OAuth для аутентификации.</p><p>При миграции Active Record вы также можете выполнить миграцию назад. Это может быть особенно полезно при разработке. Например, переход вниз приведет к потере таблицы пользователя:</p><pre class="brush: bash noskimlinks noskimwords">Jeffs-Mac-mini:mp Jeff$ ./yii migrate/down 1Yii Migration Tool (based on Yii v2.0.0)Total 1 migration to be reverted:    m130524_201442_initRevert the above migration? (yes|no) [no]:yes*** reverting m130524_201442_init    &gt; drop table {{%user}} ... done (time: 0.001s)*** reverted m130524_201442_init (time: 0.070s)Migrated down successfully.</pre><p>Если вам нужно настроить дизайн таблицы, вы можете сделать это, а затем выполнить миграцию.</p><h3>Таблица совещаний</h3><p>Схема собрания и все таблицы, связанные с собраниями, будут невероятно важны для функциональности нашего приложения.</p><p>Вот базовая схема для собрания:</p><pre class="brush: php noskimlinks noskimwords"> $this-&gt;createTable("{{%meeting}}", [            "id" =&gt; Schema::TYPE_PK,            "owner_id" =&gt; Schema::TYPE_BIGINT." NOT NULL",            "meeting_type" =&gt; Schema::TYPE_SMALLINT." NOT NULL DEFAULT 0",            "message" =&gt; Schema::TYPE_TEXT." NOT NULL DEFAULT """,            "status" =&gt; Schema::TYPE_SMALLINT . " NOT NULL DEFAULT 0",            "created_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",            "updated_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",        ], $tableOptions);</pre><p>База собрания состоит из владельца, типа назначателя собрания, приглашения, поля состояния и стандартных created и updated временных полей.</p><p>С помощью Active Record Yii может помочь нам автоматически создавать отношения между таблицами. В таблице совещаний мы создадим отношение, согласно которому каждое собрание <em>имеет одного </em>владельца в таблице «User». Мы делаем это при миграции, создавая внешний ключ, соединяющий Meeting -&gt; Owner_ID с User-&gt; ID.</p><pre class="brush: php noskimlinks noskimwords">$this-&gt;addForeignKey("fk_meeting_owner", "{{%meeting}}", "owner_id", "{{%user}}", "id", "CASCADE", "CASCADE");        </pre><p>Нам также нужно будет отключить внешний ключ при миграции вниз:</p><pre class="brush: php noskimlinks noskimwords">    public function down()    {         $this-&gt;dropForeignKey("fk_meeting_owner", "{{%meeting}}");        $this-&gt;dropTable("{{%meeting}}");    }</pre><p>Потерпите меня, пока я опишу больше схемы, прежде чем перейти в автоматизированную систему шаблонов Yii, Gii.</p><p>Вы можете увидеть все миграции в папке <code class="inline">/mp/console/migrations</code>:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/image/migrations.jpeg" alt="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." title="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." width="50" height="50"></figure><p>Мы рассмотрим большинство из них ниже.</p><h3>Таблица мест<br></h3><p>Места также являются критическим компонентом в Планировщике собраний. Они индексируются геолокацией и указаны в Google Адресах.</p><p>Вот схема для места:</p><pre class="brush: php noskimlinks noskimwords">$tableOptions = null;      if ($this-&gt;db-&gt;driverName === "mysql") {          $tableOptions = "CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE=InnoDB";      }      $this-&gt;createTable("{{%place}}", [          "id" =&gt; Schema::TYPE_PK,          "name" =&gt; Schema::TYPE_STRING." NOT NULL",                    "place_type" =&gt; Schema::TYPE_SMALLINT." NOT NULL DEFAULT 0",          "status" =&gt; Schema::TYPE_SMALLINT . " NOT NULL DEFAULT 0",          "google_place_id" =&gt; Schema::TYPE_STRING." NOT NULL", // e.g. google places id          "created_by" =&gt; Schema::TYPE_BIGINT." NOT NULL",          "created_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",          "updated_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",      ], $tableOptions);      $this-&gt;addForeignKey("fk_place_created_by", "{{%place}}", "created_by", "{{%user}}", "id", "CASCADE", "CASCADE");</pre><p>Места состоят из <code class="inline">name</code>, <code class="inline">place_type</code>, <code class="inline">status</code>, <code class="inline">created_at</code> и <code class="inline">updated_at</code>. Но они также включают <code class="inline">google_place_id</code>, чтобы связать их с каталогом <span>Google Адресов</span>.</p><p>Обратите внимание: в этой таблице нет какой-либо геолокации, связанной с местом. Это связано с тем, что движок <span>MySQL InnoDB не поддерживает пространственные индексы</span>. Поэтому я создал вторичную таблицу, используя таблицу MyISAM для координат геолокации мест. Это таблица Place_GPS:</p><pre class="brush: php noskimlinks noskimwords">class m141025_213611_create_place_gps_table extends Migration{  public function up()  {      $tableOptions = null;      if ($this-&gt;db-&gt;driverName === "mysql") {          $tableOptions = "CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE=MyISAM";      }      $this-&gt;createTable("{{%place_gps}}", [          "id" =&gt; Schema::TYPE_PK,          "place_id" =&gt; Schema::TYPE_INTEGER." NOT NULL",          "gps"=&gt;"POINT NOT NULL",      ], $tableOptions);      $this-&gt;execute("create spatial index place_gps_gps on "."{{%place_gps}}(gps);");      $this-&gt;addForeignKey("fk_place_gps","{{%place_gps}}" , "place_id", "{{%place}}", "id", "CASCADE", "CASCADE");  }</pre><p>Обратите внимание, что она связана с таблицей Place <code class="inline">place_id</code>. Расположение мест - это просто координата GPS или <span>MySQL POINT</span>.</p><h3>Таблица участников</h3><p>Участники собрания хранятся в таблице объединений «Participant». Они присоединяются к таблице «Meeting» посредством <code class="inline">meeting_id</code> и таблице User с <code class="inline">member_id</code>. Если мы хотим иметь более одного участника собрания на встречу, эта таблица позволит сделать это в будущем.</p><pre class="brush: php noskimlinks noskimwords">class m141025_215701_create_participant_table extends Migration{  public function up()  {      $tableOptions = null;      if ($this-&gt;db-&gt;driverName === "mysql") {          $tableOptions = "CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE=InnoDB";      }      $this-&gt;createTable("{{%participant}}", [          "id" =&gt; Schema::TYPE_PK,          "meeting_id" =&gt; Schema::TYPE_INTEGER." NOT NULL",          "participant_id" =&gt; Schema::TYPE_BIGINT." NOT NULL",          "invited_by" =&gt; Schema::TYPE_BIGINT." NOT NULL",          "status" =&gt; Schema::TYPE_SMALLINT . " NOT NULL DEFAULT 0",          "created_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",          "updated_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",      ], $tableOptions);      $this-&gt;addForeignKey("fk_participant_meeting", "{{%participant}}", "meeting_id", "{{%meeting}}", "id", "CASCADE", "CASCADE");      $this-&gt;addForeignKey("fk_participant_participant", "{{%participant}}", "participant_id", "{{%user}}", "id", "CASCADE", "CASCADE");      $this-&gt;addForeignKey("fk_participant_invited_by", "{{%participant}}", "invited_by", "{{%user}}", "id", "CASCADE", "CASCADE");        }</pre><h3>Другие связанные таблицы для собраний</h3><p>Существует несколько других таблиц, которые помогают определить наши варианты встреч для планирования.</p><h4>Таблица времени встречи</h4><p>Эта таблица содержит все предлагаемые время встречи (и даты) по началу, что является временной меткой. <code class="inline">Suggested_by</code> показывает, кто предложил время. А <code class="inline">status</code> определяет, выбрано ли время для собрания.</p><pre class="brush: php noskimlinks noskimwords">      $this-&gt;createTable("{{%meeting_time}}", [          "id" =&gt; Schema::TYPE_PK,          "meeting_id" =&gt; Schema::TYPE_INTEGER." NOT NULL",          "start" =&gt; Schema::TYPE_INTEGER." NOT NULL",          "suggested_by" =&gt; Schema::TYPE_BIGINT." NOT NULL",          "status" =&gt; Schema::TYPE_SMALLINT . " NOT NULL DEFAULT 0",          "created_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",          "updated_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",      ], $tableOptions);      $this-&gt;addForeignKey("fk_meeting_time_meeting", "{{%meeting_time}}", "meeting_id", "{{%meeting}}", "id", "CASCADE", "CASCADE");      $this-&gt;addForeignKey("fk_participant_suggested_by", "{{%meeting_time}}", "suggested_by", "{{%user}}", "id", "CASCADE", "CASCADE");      </pre><h4>Таблица мест встречи</h4><p>В этой таблице показано, какие места были предложены для собрания:</p><pre class="brush: php noskimlinks noskimwords">$this-&gt;createTable("{{%meeting_place}}", [          "id" =&gt; Schema::TYPE_PK,          "meeting_id" =&gt; Schema::TYPE_INTEGER." NOT NULL",          "place_id" =&gt; Schema::TYPE_INTEGER." NOT NULL",          "suggested_by" =&gt; Schema::TYPE_BIGINT." NOT NULL",          "status" =&gt; Schema::TYPE_SMALLINT . " NOT NULL DEFAULT 0",          "created_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",          "updated_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",      ], $tableOptions);      $this-&gt;addForeignKey("fk_meeting_place_meeting", "{{%meeting_place}}", "meeting_id", "{{%meeting}}", "id", "CASCADE", "CASCADE");      $this-&gt;addForeignKey("fk_meeting_place_place", "{{%meeting_place}}", "place_id", "{{%place}}", "id", "CASCADE", "CASCADE");      $this-&gt;addForeignKey("fk_meeting_suggested_by", "{{%meeting_place}}", "suggested_by", "{{%user}}", "id", "CASCADE", "CASCADE");     </pre><h4>Таблица логов собрания</h4><p>В этой таблице записана история всех дополнений и изменений для конкретной встречи. Каждое действие, принятое во время планирования собрания, записывается для обеспечения хронологической истории событий, связанных с собранием. Это поможет пользователям просматривать записи обо всех изменениях на своих собраниях с течением времени, и это также, вероятно, поможет нам в разработке с отладкой.</p><pre class="brush: php noskimlinks noskimwords">$this-&gt;createTable("{{%meeting_log}}", [          "id" =&gt; Schema::TYPE_PK,          "meeting_id" =&gt; Schema::TYPE_INTEGER." NOT NULL",          "action" =&gt; Schema::TYPE_INTEGER." NOT NULL",          "actor_id" =&gt; Schema::TYPE_BIGINT." NOT NULL",          "item_id" =&gt; Schema::TYPE_INTEGER." NOT NULL",          "extra_id" =&gt; Schema::TYPE_INTEGER." NOT NULL",          "created_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",          "updated_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",      ], $tableOptions);      $this-&gt;addForeignKey("fk_meeting_log_meeting", "{{%meeting_log}}", "meeting_id", "{{%meeting}}", "id", "CASCADE", "CASCADE");      $this-&gt;addForeignKey("fk_meeting_log_actor", "{{%meeting_log}}", "actor_id", "{{%user}}", "id", "CASCADE", "CASCADE");</pre><h4>Таблица примечаний к собранию</h4><p>Пользователи могут отправлять короткие заметки туда и обратно, когда они вносят изменения в собрания. В этой таблице записаны эти примечания.</p><pre class="brush: php noskimlinks noskimwords">$this-&gt;createTable("{{%meeting_note}}", [          "id" =&gt; Schema::TYPE_PK,          "meeting_id" =&gt; Schema::TYPE_INTEGER." NOT NULL",          "posted_by" =&gt; Schema::TYPE_BIGINT." NOT NULL DEFAULT 0",          "note" =&gt; Schema::TYPE_TEXT." NOT NULL DEFAULT """,          "status" =&gt; Schema::TYPE_SMALLINT . " NOT NULL DEFAULT 0",          "created_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",          "updated_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",      ], $tableOptions);      $this-&gt;addForeignKey("fk_meeting_note_meeting", "{{%meeting_note}}", "meeting_id", "{{%meeting}}", "id", "CASCADE", "CASCADE");      $this-&gt;addForeignKey("fk_meeting_note_posted_by", "{{%meeting_note}}", "posted_by", "{{%user}}", "id", "CASCADE", "CASCADE");     </pre><h3>Другие связанные таблицы пользователей</h3><p>Существует несколько таблиц для расширения пользовательского определения.</p><h4>Таблица друзей</h4><p>Это индексная таблица, в которой перечислены друзья каждого пользователя. Он также отслеживает, являются ли они любимыми друзьями и количество встреч, которые у них были. Это может быть полезно для упрощения процесса планирования, например. показывая любимых или частых друзей.</p><pre class="brush: php noskimlinks noskimwords">$this-&gt;createTable("{{%friend}}", [          "id" =&gt; Schema::TYPE_PK,          "user_id" =&gt; Schema::TYPE_BIGINT." NOT NULL",          "friend_id" =&gt; Schema::TYPE_BIGINT." NOT NULL",          "status" =&gt; Schema::TYPE_SMALLINT . " NOT NULL DEFAULT 0",          "number_meetings" =&gt; Schema::TYPE_INTEGER . " NOT NULL DEFAULT 0",          "is_favorite" =&gt; Schema::TYPE_SMALLINT . " NOT NULL DEFAULT 0",          "created_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",          "updated_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",      ], $tableOptions);      $this-&gt;addForeignKey("fk_friend_user_id", "{{%friend}}", "user_id", "{{%user}}", "id", "CASCADE", "CASCADE");           $this-&gt;addForeignKey("fk_friend_friend_id", "{{%friend}}", "friend_id", "{{%user}}", "id", "CASCADE", "CASCADE");     </pre><h4>Таблица мест пользователя</h4><p>Это индексная таблица мест, в которых пользователь предпочитает встречаться или встречался в прошлом. Здесь мы будем отслеживать любимые места и количество встреч, проводимых этим пользователем. Поле <code class="inline">is_special</code> укажет, что место - это собственный дом, офис или место встречи пользователя.</p><pre class="brush: php noskimlinks noskimwords">$this-&gt;createTable("{{%user_place}}", [          "id" =&gt; Schema::TYPE_PK,          "user_id" =&gt; Schema::TYPE_BIGINT." NOT NULL",          "place_id" =&gt; Schema::TYPE_INTEGER." NOT NULL",          "is_favorite" =&gt; Schema::TYPE_SMALLINT . " NOT NULL DEFAULT 0",          "number_meetings" =&gt; Schema::TYPE_INTEGER . " NOT NULL DEFAULT 0",          "is_special" =&gt; Schema::TYPE_SMALLINT . " NOT NULL DEFAULT 0",          "note" =&gt; Schema::TYPE_STRING . " NOT NULL",          "status" =&gt; Schema::TYPE_SMALLINT . " NOT NULL DEFAULT 0",          "created_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",          "updated_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",      ], $tableOptions);      $this-&gt;addForeignKey("fk_user_place_user", "{{%user_place}}", "user_id", "{{%user}}", "id", "CASCADE", "CASCADE");           $this-&gt;addForeignKey("fk_user_place_place", "{{%user_place}}", "place_id", "{{%place}}", "id", "CASCADE", "CASCADE");     </pre><h4>Таблица контактов пользователя</h4><p>В этой таблице указаны контактные данные для конкретного пользователя, например. номера телефонов, адреса Skype и любые заметки, связанные с контактом пользователя в этих местах.</p><pre class="brush: php noskimlinks noskimwords"> $this-&gt;createTable("{{%user_contact}}", [          "id" =&gt; Schema::TYPE_PK,          "user_id" =&gt; Schema::TYPE_BIGINT." NOT NULL",          "contact_type" =&gt; Schema::TYPE_SMALLINT . " NOT NULL DEFAULT 0",          "info" =&gt; Schema::TYPE_STRING . " NOT NULL",          "details" =&gt; Schema::TYPE_TEXT . " NOT NULL",          "status" =&gt; Schema::TYPE_SMALLINT . " NOT NULL DEFAULT 0",          "created_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",          "updated_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",      ], $tableOptions);      $this-&gt;addForeignKey("fk_user_contact_user", "{{%user_contact}}", "user_id", "{{%user}}", "id", "CASCADE", "CASCADE");     </pre><p>Для простоты я пока пропустил схему шаблона собрания. И я еще не разработал функции, связанные с доходами. Основная причина этого заключается в том, что у меня впереди много времени, чтобы запустить набор основных функций и завершить первые несколько эпизодов учебной серии. Тем не менее, это учебный момент. Это хороший пример предпринимателя с ограниченными ресурсами, ориентируясь на основные функции, не «осознавая», что генерация доходов также является основной особенностью. Поскольку я считаю, что я могу начать планировщик собраний изначально без дохода, это компромисс, который я могу сделать в это время.</p><h2>Выполнение миграции базы данных</h2><p>Теперь, когда у вас есть немного больше информации о нашей схеме базы данных и миграции Active Record, давайте запустим остальные из них:</p><pre class="brush: bash noskimlinks noskimwords">cd ~/Sites/mp./yii migrate/up all</pre><p>Вы должны увидеть что-то вроде этого:</p><pre class="brush: bash noskimlinks noskimwords">Yii Migration Tool (based on Yii v2.0.0)Total 14 new migrations to be applied:    m141025_212656_create_meeting_table    m141025_213610_create_place_table    m141025_213611_create_place_gps_table    m141025_215701_create_participant_table    m141025_215833_create_meeting_time_table    m141025_220016_create_meeting_place_table    m141025_220133_create_meeting_log_table    m141025_220524_create_friend_table    m141025_220923_create_user_place_table    m141025_221627_create_meeting_note_table    m141025_221902_create_user_contact_table    m141025_222213_create_template_table    m141025_222431_create_template_time_table    m141025_222531_create_template_place_tableApply the above migrations? (yes|no) [no]:yes*** applying m141025_212656_create_meeting_table    &gt; create table {{%meeting}} ... done (time: 0.124s)    &gt; add foreign key fk_meeting_owner: {{%meeting}} (owner_id) references {{%user}} (id) ... done (time: 0.307s)*** applied m141025_212656_create_meeting_table (time: 0.434s)*** applying m141025_213610_create_place_table    &gt; create table {{%place}} ... done (time: 0.091s)    &gt; add foreign key fk_place_created_by: {{%place}} (created_by) references {{%user}} (id) ... done (time: 0.114s)*** applied m141025_213610_create_place_table (time: 0.206s)*** applying m141025_213611_create_place_gps_table    &gt; create table {{%place_gps}} ... done (time: 0.120s)    &gt; execute SQL: create spatial index place_gps_gps on {{%place_gps}}(gps); ... done (time: 0.114s)    &gt; add foreign key fk_place_gps: {{%place_gps}} (place_id) references {{%place}} (id) ... done (time: 0.112s)*** applied m141025_213611_create_place_gps_table (time: 0.347s)*** applying m141025_215701_create_participant_table    &gt; create table {{%participant}} ... done (time: 0.100s)    &gt; add foreign key fk_participant_meeting: {{%participant}} (meeting_id) references {{%meeting}} (id) ... done (time: 0.138s)    &gt; add foreign key fk_participant_participant: {{%participant}} (participant_id) references {{%user}} (id) ... done (time: 0.112s)    &gt; add foreign key fk_participant_invited_by: {{%participant}} (invited_by) references {{%user}} (id) ... done (time: 0.149s)*** applied m141025_215701_create_participant_table (time: 0.500s)*** applying m141025_215833_create_meeting_time_table    &gt; create table {{%meeting_time}} ... done (time: 0.142s)    &gt; add foreign key fk_meeting_time_meeting: {{%meeting_time}} (meeting_id) references {{%meeting}} (id) ... done (time: 0.148s)    &gt; add foreign key fk_participant_suggested_by: {{%meeting_time}} (suggested_by) references {{%user}} (id) ... done (time: 0.122s)*** applied m141025_215833_create_meeting_time_table (time: 0.413s)*** applying m141025_220016_create_meeting_place_table    &gt; create table {{%meeting_place}} ... done (time: 0.120s)    &gt; add foreign key fk_meeting_place_meeting: {{%meeting_place}} (meeting_id) references {{%meeting}} (id) ... done (time: 0.125s)    &gt; add foreign key fk_meeting_place_place: {{%meeting_place}} (place_id) references {{%place}} (id) ... done (time: 0.135s)    &gt; add foreign key fk_meeting_suggested_by: {{%meeting_place}} (suggested_by) references {{%user}} (id) ... done (time: 0.137s)*** applied m141025_220016_create_meeting_place_table (time: 0.518s)*** applying m141025_220133_create_meeting_log_table    &gt; create table {{%meeting_log}} ... done (time: 0.109s)    &gt; add foreign key fk_meeting_log_meeting: {{%meeting_log}} (meeting_id) references {{%meeting}} (id) ... done (time: 0.126s)    &gt; add foreign key fk_meeting_log_actor: {{%meeting_log}} (actor_id) references {{%user}} (id) ... done (time: 0.113s)*** applied m141025_220133_create_meeting_log_table (time: 0.348s)*** applying m141025_220524_create_friend_table    &gt; create table {{%friend}} ... done (time: 0.109s)    &gt; add foreign key fk_friend_user_id: {{%friend}} (user_id) references {{%user}} (id) ... done (time: 0.125s)    &gt; add foreign key fk_friend_friend_id: {{%friend}} (friend_id) references {{%user}} (id) ... done (time: 0.102s)*** applied m141025_220524_create_friend_table (time: 0.337s)*** applying m141025_220923_create_user_place_table    &gt; create table {{%user_place}} ... done (time: 0.109s)    &gt; add foreign key fk_user_place_user: {{%user_place}} (user_id) references {{%user}} (id) ... done (time: 0.137s)    &gt; add foreign key fk_user_place_place: {{%user_place}} (place_id) references {{%place}} (id) ... done (time: 0.114s)*** applied m141025_220923_create_user_place_table (time: 0.360s)*** applying m141025_221627_create_meeting_note_table    &gt; create table {{%meeting_note}} ... done (time: 0.109s)    &gt; add foreign key fk_meeting_note_meeting: {{%meeting_note}} (meeting_id) references {{%meeting}} (id) ... done (time: 0.125s)    &gt; add foreign key fk_meeting_note_posted_by: {{%meeting_note}} (posted_by) references {{%user}} (id) ... done (time: 0.101s)*** applied m141025_221627_create_meeting_note_table (time: 0.337s)*** applying m141025_221902_create_user_contact_table    &gt; create table {{%user_contact}} ... done (time: 0.098s)    &gt; add foreign key fk_user_contact_user: {{%user_contact}} (user_id) references {{%user}} (id) ... done (time: 0.125s)*** applied m141025_221902_create_user_contact_table (time: 0.225s)*** applying m141025_222213_create_template_table    &gt; create table {{%template}} ... done (time: 0.108s)    &gt; add foreign key fk_template_owner: {{%template}} (owner_id) references {{%user}} (id) ... done (time: 0.171s)*** applied m141025_222213_create_template_table (time: 0.281s)*** applying m141025_222431_create_template_time_table    &gt; create table {{%template_time}} ... done (time: 0.111s)    &gt; add foreign key fk_template_time_template: {{%template_time}} (template_id) references {{%template}} (id) ... done (time: 0.114s)*** applied m141025_222431_create_template_time_table (time: 0.226s)*** applying m141025_222531_create_template_place_table    &gt; create table {{%template_place}} ... done (time: 0.099s)    &gt; add foreign key fk_template_place_template: {{%template_place}} (template_id) references {{%template}} (id) ... done (time: 0.103s)    &gt; add foreign key fk_template_place_place: {{%template_place}} (place_id) references {{%place}} (id) ... done (time: 0.101s)*** applied m141025_222531_create_template_place_table (time: 0.304s)Migrated up successfully.</pre><p>Аналогичным образом, когда мы устанавливаем Планировщик собраний на продакшене, мы также будем использовать миграции для создания исходной базы данных. Нет необходимости экспортировать и импортировать SQL-файлы, которые могут быть повреждены в зависимости от множества версий, которые мы могли бы использовать в разных средах.</p><h2>Регистрация административного пользователя</h2><p>Прежде чем двигаться дальше, вам необходимо зарегистрироваться как административный пользователь. Нажмите ссылку регистрации на панели инструментов и просто зарегистрируйтесь для приложения.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/image/site-signup.jpeg" alt="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." title="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." width="50" height="50"></figure><p>Если вы добьетесь успеха, когда вы вернетесь на главную страницу, вы увидите, что панель инструментов отображает ваш зарегистрированный статус.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/image/signup%20toolbar.jpeg" alt="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." title="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." width="50" height="50"></figure><p>Эти формы и логика приложений включены в расширенный шаблон приложения Yii.</p><h2>Использование Gii Yii для построения готового кода</h2><p>Теперь мы можем построить готовый код для поддержки кода Model View Controller для общих операций Create, Read, Update и Delete (CRUD).</p><p>Мы будем использовать Gii, потрясающий автоматизированный генератор кода Yii, для создания большого количества нашего базового кода. Название может быть глупым, но оно невероятно мощно и важно для развития Yii. Мы начнем с встреч и мест.</p><h3>Использование Gii</h3><p>Откройте в своем браузере <span>http://localhost:8888/mp/gii</span>. Вы должны увидеть следующее:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/image/gii-home.jpeg" alt="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." title="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." width="50" height="50"></figure><h4>Создание моделей</h4><p>При построении с Gii вы обычно начинаете с генератора моделей для каждой таблицы. Прежде чем вы сможете использовать генератор моделей, вы должны запустить свои миграции для создания таблиц в базе данных, как мы это делали выше. Gii использует определения таблицы SQL для генерации кода для вашей модели.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/image/gii-model-generator.jpeg" alt="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." title="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." width="50" height="50"></figure><p>Давайте используем Generator Model для генерации кода модели для таблицы Meeting. Код уже был создан в вашем репозитории Github, но не стесняйтесь снова выполнять эти упражнения. Gii будет просматривать и, возможно, перезаписывать код для вас.</p><p>Заполните модельный генератор следующим образом для модели собрания:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/image/generate-meeting.jpg" alt="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." title="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." width="50" height="50"></figure><p>Затем создайте модель Place:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/image/generate-place.jpg" alt="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." title="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." width="50" height="50"></figure><p>Gii довольно удивительный инструмент, основываясь на определении нашей таблицы, он генерирует тонну логики. </p><p>В модели <code class="inline">/mp/frontend/models/Meeting.php</code> вы увидите автоматические метки атрибутов:</p><pre class="brush: php noskimlinks noskimwords">    public function attributeLabels()    {        return [            "id" =&gt; "ID",            "owner_id" =&gt; "Owner ID",            "meeting_type" =&gt; "Meeting Type",            "message" =&gt; "Message",            "status" =&gt; "Status",            "created_at" =&gt; "Created At",            "updated_at" =&gt; "Updated At",        ];    }</pre><p>Он генерирует правила проверки полей для форм:</p><pre class="brush: php noskimlinks noskimwords">    public function rules()    {        return [            [["owner_id", "message", "created_at", "updated_at"], "required"],            [["owner_id", "meeting_type", "status", "created_at", "updated_at"], "integer"],            [["message"], "string"]        ];    }</pre><p>И он генерирует отношения с базой данных - вот несколько примеров:</p><pre class="brush: php noskimlinks noskimwords">/* @property User $owner * @property MeetingLog[] $meetingLogs * @property MeetingNote[] $meetingNotes * @property MeetingPlace[] $meetingPlaces * @property MeetingTime[] $meetingTimes * @property Participant[] $participants*//**     * @return \yii\db\ActiveQuery     */    public function getMeetingLogs()    {        return $this-&gt;hasMany(MeetingLog::className(), ["meeting_id" =&gt; "id"]);    }    /**     * @return \yii\db\ActiveQuery     */    public function getMeetingNotes()    {        return $this-&gt;hasMany(MeetingNote::className(), ["meeting_id" =&gt; "id"]);    }    /**     * @return \yii\db\ActiveQuery     */    public function getMeetingPlaces()    {        return $this-&gt;hasMany(MeetingPlace::className(), ["meeting_id" =&gt; "id"]);    }</pre><h4>Создание CRUD</h4><p>Теперь мы можем использовать генератор CRUD для создания кода для операций создания, чтения, обновления и удаления.</p><p>Посетите генератор CRUD и создайте его для совещаний. Обратите внимание, что передняя часть - это приложение Yii, которое пользователь увидит.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/image/crud-meeting.jpg" alt="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." title="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." width="50" height="50"></figure><p>Когда вы нажимаете <strong>Preview</strong>, вы должны увидеть что-то вроде этого:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/image/gii-crud-preview.jpeg" alt="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." title="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." width="50" height="50"></figure><p>Когда вы нажимаете <strong>Generate</strong>, вы должны увидеть следующие результаты:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/image/gii-crud-generate.jpeg" alt="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." title="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." width="50" height="50"></figure><p>Затем повторите описанный выше процесс для « Places».</p><p>Уже сейчас вы можете просматривать собрания и места на нашем сайте, чтобы увидеть код, который был сгенерирован в действии. Откройте страницу <span>http://localhost:8888/mp/meeting</span> в своем браузере. Он должен выглядеть примерно так:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/image/meeting-controller.jpeg" alt="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." title="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." width="50" height="50"></figure><p>Если вы зарегистрировали свою учетную запись, вы сможете создать собрание. Обратите внимание, что Gii не знает разницы между полями, которыми должен управлять наш код, и теми, которые должны предоставляться пользователями. Мы очистим их в ближайших учебниках. На данный момент вам нужно ввести целые числа для <code class="inline">owner_id</code> (используйте 1 - это первый зарегистрированный пользователь), <code class="inline">meeting_type</code>, <code class="inline">status</code>, <code class="inline">created_at</code> и <code class="inline">updated_at</code>:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/image/meeting-create.jpeg" alt="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." title="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." width="50" height="50"></figure><p>После создания нескольких встреч индексная страница собраний будет выглядеть так:<br></p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/317/posts/22618/image/meeting-list.jpeg" alt="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." title="Создание стартапа на PHP: Требования к характеристикам и дизайн базы данных..." width="50" height="50"></figure><p>Объединение мощностей Gii и Yii делает создание веб-приложений намного быстрее. Удивительно, что только с табличной структурой базы данных и блоком кода миграции мы можем быть в нескольких шагах от рабочих контроллеров и форм, созданных с учетом Bootstrap.</p><h2>Что дальше?<br></h2><p>Надеюсь, вы нашли базу данных и Gii весьма интересными. Следующая статья в этой серии будет посвящена созданию функциональности вокруг Places. В ней рассказывается, как использовать геолокации Google Адресов, Google Карт и HTML5 для создания функций, связанных с планировщиком собраний. Если вам интересна эта тема, то я написал соответствующий учебник, «<span>Как использовать карты соседства Zillow и HTML5 Geolocation</span>».</p><p>Пожалуйста, не стесняйтесь добавлять ваши вопросы и комментарии ниже; я постоянно участвую в обсуждениях. Вы также можете связаться со мной в Twitter <span>@reifman</span> или отправить мне <span>электронное письмо</span>.</p><h2>Ссылки по теме</h2><ul><li><span>Программирование с помощью Yii2: Начало работы</span></li> <li><span>Введение во фреймворк Yii</span></li> </ul>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825436-sozdanie-startapa-na-php-trebovaniya-k-harakteristikam-i-dizajn-bazy-dannyh" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="PHP" href="https://norma-studio.github.io/article5/220825436-sozdanie-startapa-na-php-trebovaniya-k-harakteristikam-i-dizajn-bazy-dannyh" class="tm-article-body__tags-item-link">PHP</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
37505</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
380</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
