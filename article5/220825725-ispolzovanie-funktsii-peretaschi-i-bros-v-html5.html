
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Использование функции "Перетащи и Брось" в HTML5
... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Использование функции "Перетащи и Брось" в HTML5
... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Использование функции "Перетащи и Брось" в HTML5
... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Использование функции "Перетащи и Брось" в HTML5
... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Одной из новых функций в HTML5 является встроенный функционал ">
<meta property="og:description" content="Одной из новых функций в HTML5 является встроенный функционал ">
<meta name="twitter:description" content="Одной из новых функций в HTML5 является встроенный функционал ">
<meta property="aiturec:description" content="Одной из новых функций в HTML5 является встроенный функционал ">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/legacy-premium-tutorials/posts/11156/images/11156_3c3d050cc04487f9316435db6f7fc1ca.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/legacy-premium-tutorials/posts/11156/images/11156_3c3d050cc04487f9316435db6f7fc1ca.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/legacy-premium-tutorials/posts/11156/images/11156_3c3d050cc04487f9316435db6f7fc1ca.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/legacy-premium-tutorials/posts/11156/images/11156_3c3d050cc04487f9316435db6f7fc1ca.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/legacy-premium-tutorials/posts/11156/images/11156_3c3d050cc04487f9316435db6f7fc1ca.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825725-ispolzovanie-funktsii-peretaschi-i-bros-v-html5.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825725-ispolzovanie-funktsii-peretaschi-i-bros-v-html5.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825725-ispolzovanie-funktsii-peretaschi-i-bros-v-html5.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825725-ispolzovanie-funktsii-peretaschi-i-bros-v-html5.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825725-ispolzovanie-funktsii-peretaschi-i-bros-v-html5.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825725-ispolzovanie-funktsii-peretaschi-i-bros-v-html5.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825725-ispolzovanie-funktsii-peretaschi-i-bros-v-html5.html" title="Использование функции "Перетащи и Брось" в HTML5
... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Использование функции "Перетащи и Брось" в HTML5
... | envatomarket.ru | norma-studio.github.io" title="Использование функции "Перетащи и Брось" в HTML5
... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/542343243.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825725-ispolzovanie-funktsii-peretaschi-i-bros-v-html5.html" class="tm-user-info__username" title="
А. Анискин" aria-label="
А. Анискин">
А. Анискин</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Использование функции "Перетащи и Брось" в HTML5
...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825725-ispolzovanie-funktsii-peretaschi-i-bros-v-html5" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="HTML5" href="https://norma-studio.github.io/article5/220825725-ispolzovanie-funktsii-peretaschi-i-bros-v-html5" class="tm-article-snippet__hubs-item-link"><span>HTML5</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825725-ispolzovanie-funktsii-peretaschi-i-bros-v-html5.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/legacy-premium-tutorials/posts/11156/images/11156_3c3d050cc04487f9316435db6f7fc1ca.jpg">
    <meta itemprop="headline name" content="Использование функции "Перетащи и Брось" в HTML5
... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Одной из новых функций в HTML5 является встроенный функционал ">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Одной из новых функций в HTML5 является встроенный функционал </span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



 <p>Одной из новых функций в HTML5 является встроенный функционал "Перетащи и Брось". Удивительно, но Internet Explorer поддерживает встроенную функцию "Перетащи и Брось" начиная с версии 5.5; Фактически HTML5 основан на поддержке IE. В сегодняшнем уроке мы рассмотрим то, как реализовать нативный функционал "Перетащи и Брось" чтобы создать простой интерфейс корзины покупателя.</p> <hr><h2>Шаг 0. Что мы собираемся сделать</h2> <p>Вот что мы собираемся создать: простая корзина покупателя с панелью товаров и панелью для корзины. Чтобы "купить" продукт, вы можете перетащить его с панели на значок корзинки; мы будем отслеживать количество покупок и удалять товары из панели, когда их нет в наличии.</p> <p>Обратите внимание, что мы на самом деле не создаем полнофункциональную корзину покупателя; сегодня мы не будем работать с серверной частью. Это будет только интерфейс; наша цель - функционал "Перетащи и Брось" с помощью HTML5.</p> <hr><h2>Шаг 1. HTML</h2> <p>Конечно, мы начнем с HTML кода; вот наш каркас:</p> <pre class="brush: html noskimlinks noskimwords"> &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt;     &lt;meta charset="utf-8" /&gt;     &lt;title&gt;Drag and Drop Shopping Cart&lt;/title&gt;     &lt;link rel="stylesheet" href="default.css" /&gt; &lt;/head&gt; &lt;body&gt;      &lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"&gt;&lt;/script&gt;     &lt;script src="jquery.ndd.js"&gt;&lt;/script&gt;     &lt;script src="dragdrop.js"&gt;&lt;/script&gt; &lt;/body&gt; &lt;/html&gt;</pre> <p>Все довольно просто: мы добавляем ссылки на таблицу стилей и jQuery; мы будем использовать jQuery только для удобной обработки событий и манипуляций с DOM; функционал "Перетащи и Брось" будет нативным. Однако мы можем столкнуться с трудностями, потому что функционал "Перетащи и Брось" в HTML5 добавляет несколько свойств к объекту события. А так как JQuery не использует объект события по-умолчанию; он создает свой собственный эквивалент. И из-за этого мы не можем получить доступ к специальным свойствам с помощью jQuery. Но не беспокойтесь; для этого есть специальный плагин; мы подключаем плагин <span>Native Drag and Drop</span>, чтобы все это работало. И, наконец, мы подключаем наш скрипт: <code>dragdrop.js</code>. </p> <p>Теперь мы готовы добавить наш список товаров; в качестве изображений товаров я использую значки из <span>Apple Icon Superpack</span>, созданные <span>SvenVath</span>. (Я переименовал значки упростив имена и изменил их размер до 180 пикселей.)</p> <p>Добавьте <code>ul #products</code> в качестве первого элемента для тега body. Как только вы это сделаете, мы рассмотрим первый элемент списка:</p> <pre class="brush: html noskimlinks noskimwords"> &lt;li&gt;&lt;a class="item" href="#" id="imac" draggable="true"&gt;     &lt;img src="http://tutsplus.s3.amazonaws.com/tutspremium/web-development/064_drag_drop_html5/images/imac.png" /&gt;     &lt;div&gt;         &lt;p&gt;&lt;strong&gt;iMac&lt;/strong&gt;&lt;/p&gt;         &lt;p&gt;&lt;strong&gt;Price&lt;/strong&gt;: &lt;span&gt;$1199.00&lt;/span&gt;&lt;/p&gt;         &lt;p&gt;&lt;strong&gt;Quantity&lt;/strong&gt;: &lt;span&gt;10&lt;/span&gt;&lt;/p&gt;     &lt;/div&gt; &lt;/a&gt;&lt;/li&gt;</pre> <p>Мы завершаем элемент списка якорем внутри; обратите внимание, что каждый элемент имеет класс элемента (это будет важно, когда мы перейдем к CSS) и пользовательский идентификатор (это будет важно, когда мы перейдем к JavaScript). Также, якорь имеет атрибут <code>draggable = "true"</code>; это все, что нам нужно, чтобы сделать элемент перетаскиваемым (мы скоро обнаружим несколько предостережений). Так как мы используем тег якоря, вы должны сделать что-то для браузеров без встроенной поддержки перетаскивания (хотя мы и не будем этого делать здесь). Затем у нас есть изображение продукта и слой с информацией о продукте. И да, необходимо оформить цену и значение количества с помощью тега <code>span</code></p> <p>Вот остальные элементы списка:</p> <pre class="brush: html noskimlinks noskimwords"> &lt;li&gt;&lt;a class="item" href="#" id="iphone" draggable="true"&gt;     &lt;img src="http://tutsplus.s3.amazonaws.com/tutspremium/web-development/064_drag_drop_html5/images/iphone.png" /&gt;     &lt;div&gt;         &lt;p&gt;&lt;strong&gt;iPhone&lt;/strong&gt;&lt;/p&gt;         &lt;p&gt;&lt;strong&gt;Price&lt;/strong&gt;: &lt;span&gt;$199.00&lt;/span&gt;&lt;/p&gt;         &lt;p&gt;&lt;strong&gt;Quantity&lt;/strong&gt;: &lt;span&gt;16&lt;/span&gt;&lt;/p&gt;     &lt;/div&gt; &lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a class="item" href="#" id="appletv" draggable="true"&gt;     &lt;img src="http://tutsplus.s3.amazonaws.com/tutspremium/web-development/064_drag_drop_html5/images/appletv.png" /&gt;     &lt;div&gt;         &lt;p&gt;&lt;strong&gt;AppleTV&lt;/strong&gt;&lt;/p&gt;         &lt;p&gt;&lt;strong&gt;Price&lt;/strong&gt;: &lt;span&gt;$299.00&lt;/span&gt;&lt;/p&gt;         &lt;p&gt;&lt;strong&gt;Quantity&lt;/strong&gt;: &lt;span&gt;9&lt;/span&gt;&lt;/p&gt;     &lt;/div&gt; &lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a class="item" href="#" id="dislpay" draggable="true"&gt;     &lt;img src="http://tutsplus.s3.amazonaws.com/tutspremium/web-development/064_drag_drop_html5/images/display.png" /&gt;     &lt;div&gt;         &lt;p&gt;&lt;strong&gt;Cinema Display&lt;/strong&gt;&lt;/p&gt;         &lt;p&gt;&lt;strong&gt;Price&lt;/strong&gt;: &lt;span&gt;$899.00&lt;/span&gt;&lt;/p&gt;         &lt;p&gt;&lt;strong&gt;Quantity&lt;/strong&gt;: &lt;span&gt;4&lt;/span&gt;&lt;/p&gt;     &lt;/div&gt; &lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a class="item" href="#" id="nano" draggable="true"&gt;     &lt;img src="http://tutsplus.s3.amazonaws.com/tutspremium/web-development/064_drag_drop_html5/images/nano.png" /&gt;     &lt;div&gt;         &lt;p&gt;&lt;strong&gt;iPod Nano&lt;/strong&gt;&lt;/p&gt;         &lt;p&gt;&lt;strong&gt;Price&lt;/strong&gt;: &lt;span&gt;$149.00&lt;/span&gt;&lt;/p&gt;         &lt;p&gt;&lt;strong&gt;Quantity&lt;/strong&gt;: &lt;span&gt;20&lt;/span&gt;&lt;/p&gt;     &lt;/div&gt; &lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a class="item" href="#" id="macbook" draggable="true"&gt;     &lt;img src="http://tutsplus.s3.amazonaws.com/tutspremium/web-development/064_drag_drop_html5/images/macbook.png" /&gt;     &lt;div&gt;         &lt;p&gt;&lt;strong&gt;Macbook&lt;/strong&gt;&lt;/p&gt;         &lt;p&gt;&lt;strong&gt;Price&lt;/strong&gt;: &lt;span&gt;$1199.00&lt;/span&gt;&lt;/p&gt;         &lt;p&gt;&lt;strong&gt;Quantity&lt;/strong&gt;: &lt;span&gt;13&lt;/span&gt;&lt;/p&gt;     &lt;/div&gt; &lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a class="item" href="#" id="mini" draggable="true"&gt;     &lt;img src="http://tutsplus.s3.amazonaws.com/tutspremium/web-development/064_drag_drop_html5/images/mini.png" /&gt;     &lt;div&gt;         &lt;p&gt;&lt;strong&gt;Mac Mini&lt;/strong&gt;&lt;/p&gt;         &lt;p&gt;&lt;strong&gt;Price&lt;/strong&gt;: &lt;span&gt;$599.00&lt;/span&gt;&lt;/p&gt;         &lt;p&gt;&lt;strong&gt;Quantity&lt;/strong&gt;: &lt;span&gt;18&lt;/span&gt;&lt;/p&gt;     &lt;/div&gt; &lt;/a&gt;&lt;/li&gt;</pre> <p>Вот финальный вариант HTML: корзина для покупок:</p> <pre class="brush: html noskimlinks noskimwords"> &lt;div id="cart"&gt;     &lt;h1&gt;Shopping Cart&lt;/h1&gt;     &lt;ul&gt;&lt;/ul&gt;     &lt;p id="total"&gt;&lt;strong&gt;Total:&lt;/strong&gt; $&lt;span&gt;0.00&lt;/span&gt;&lt;/p&gt;     &lt;hr /&gt;&lt;h2&gt;Drop here to add to cart&lt;/h2&gt; &lt;/div&gt;</pre> <p>И это наш весь код HTML!<br></p><hr><h2>Полный креатив</h2> <hr><h2>Шаг 2. CSS</h2> <p>В идеале, все, что вам нужно сделать, чтобы сделать элемент перетаскиваемым, установить значение для атрибута draggable true; тем не менее, есть еще кое-что для этого. Чтобы все работало правильно, вы должны установить несколько вещей с помощью CSS. Во-первых, подумайте об этом: что происходит при нажатии и перетаскивании "нормального" (неперетаскиваемого) элемента? Обычно происходит выделение текста. Также мы хотим убедиться, что мы перетаскиваем элемент, а не только его содержимое. Чтобы справиться с этим, необходимо использовать следующий код CSS:</p> <pre class="brush: css noskimlinks noskimwords"> [draggable=true] {     -moz-user-select:none;     -webkit-user-select: none;     -webkit-user-drag: element; }</pre> <p>Для нашего удобства встроенный плагин drag-drop, который мы используем, устанавливает эти свойства для нас, поэтому мы можем не менять его, если хотим. Однако мы сделаем это:</p> <pre class="brush: css noskimlinks noskimwords"> [draggable=true] {     cursor : move; }</pre> <p>Давайте начнем работать над оформлением:</p> <pre class="brush: css noskimlinks noskimwords"> html {     height:100%; } body {     background: #ececec;     margin:0;     padding:0;     font: 13px/1.5 helvetica, arial, san-serif;     height: 100%; } h1, h2 { text-align:center; } h2 {     position:absolute;     bottom: 20px;     color:#fff;     text-shadow:0 0 10px rgba(0, 0, 0, 0.75);     display:none; } p { margin:0; }</pre> <p>Поскольку мы не используем полный сброс стиля, вот наш псевдо-сброс. Все должно быть понятно. Мы устанавливаем высоту на знание 100% для элементов <code>html</code> и <code>body</code>, потому что мы хотим, чтобы <code>#cart</code> был на всю высоту экрана; для этого каждый родительский элемент должен иметь высоту, равную 100%. Также обратите внимание, что мы используем rgba для установки цвета тени; если браузер не поддерживает это, для элемента <code>h2</code> не будет тени. И мы скроем этот <code>h2</code>, установив значение <code>display: none</code>. Помните, что <code>h2</code> говорит "Бросьте сюда, чтобы добавить в корзину", так что мы должны будем его плавно скрыть, когда перетаскивание начнется и полностью убрать, когда закончится перетаскивание. </p> <p>Переходим к нашему списку товаров… </p> <pre class="brush: css noskimlinks noskimwords"> #products {     float:left;     list-style:none;     width:65%;     padding:0; } #products li {     display:inline; }</pre> <p>Опять, тут всё понятно. Важным в этом фрагменте является то, что элементы списка будут отображаться в одну строчку. Поскольку мы установим свойства <code>display: block; float: left</code> для якорей, IE добавит к элементам списка эффект «лестничных ступеней»; мы можем обойти эту ошибку, установив свойство <code>display: inline</code> для родительского элемента.</p> <p>Говоря о якорях, давайте продолжим их оформлять дальше.</p> <pre class="brush: css noskimlinks noskimwords"> .item {     display:block;     float:left;     width:180px;     height:180px;     margin:10px;     border:1px solid #494949;     text-align:center;     text-decoration:none;     color: #000;     overflow:hidden; } .item img {     border:0;     margin:10px auto;     width:160px;     height:160px; } .item div {     background:rgb(0, 0, 0);     background: rgba(0, 0, 0, 0.5);     position:relative;     bottom:69px;     color:#f3f3f3;     padding:5px 0;     display:none; }</pre> <p>Каждый якорь будет оформлен как блок 180x180px; он будет заполнен изображением продукта. Слой с информацией о товаре будет размещён над изображением в нижней части квадрата. Обратите внимание, что мы должны установить цвет фона, а затем сбросить его для современных браузеров, потому что IE не поддерживает RGBa. Мы устанавливаем <code>display: none</code> для информационного слоя, чтобы мы могли его плавно скрыть и показать, когда "покупатель" наводит курсор и убирает его, соответственно. </p> <p>Все, что осталось оформить, это корзина для покупок; мы рассмотрим её здесь, но, помните, элементы списка будут добавлены с помощью jQuery позже, так что вы пока не увидите, как это происходит.</p> <pre class="brush: css noskimlinks noskimwords"> #cart {     float:right;     background-color:#ccc;     width:25%;     padding:0 5%;     height:100%; } #cart ul {     padding:0; } #cart li {     list-style:none;     border-bottom:1px solid #494949;     padding:5px; } #cart .quantity {     font-weight:bold;     padding-right:10px;     margin-right:10px;     border-right:1px solid #494949;     display:inline-block;     width:15px;     text-align:right; } #cart .price {     float:right; } #total {     float:right; }</pre> <p>Элементы с классами оформления <code>quantity</code> и <code>price</code> будут находиться внутри динамически вставленных элементов списка.</p> <p>Это для CSS; прежде чем перейти к звезде этого шоу, давайте посмотрим на проделанную работу.</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/legacy-premium-tutorials/posts/11156/images/11156_3c3d050cc04487f9316435db6f7fc1ca.jpg" alt="Использование функции &quot;Перетащи и Брось&quot; в HTML5..." title="Использование функции &quot;Перетащи и Брось&quot; в HTML5..." width="50" height="50"><br></figure><hr><h2>Шаг 3. JavaScript</h2> <p>Мы добрались до JavaScript; согласно <span>HTML5 doctor</span>: </p> <blockquote> <p>HTML 5 DnD основан на первоначальной реализации Microsoft, которая была доступна уже в Internet Explorer 5! В настоящее время поддерживается в IE, Firefox 3.5 и Safari 4.</p> </blockquote> <p>Вот список событий, которые предлагает "Перетащи и Брось" в HTML5: </p> <ul><li>drag</li> <li>dragstart</li> <li>dragover</li> <li>dragenter</li> <li>dragleave</li> <li>dragend</li> <li>drop</li> </ul><p>Мы не будем использовать их все, но посмотрим, как они работают. </p> <p>Сначала, мы поработаем с нашими продуктами:</p> <pre class="brush: noskimlinks noskimwords"> $(".item")     .bind("dragstart", function (evt) {         evt.dataTransfer.setData("text", this.id);         $("h2").fadeIn("fast");     })     .hover(         function () { $("div", this).fadeIn(); },          function () { $("div", this).fadeOut(); }     );</pre> <p>Мы начинаем с выбора всех объектов; затем мы привяжем функцию к событию dragstart; это событие срабатывает, когда мы начнем перетаскивать объект. Первое, что мы будем делать при перетаскивании объекта, - это установим некоторые данные; на самом деле, если данные не установлены, firefox не позволит элементу перемещаться. Специальное перетаскивание событий - это свойство объекта в объекте события, называется <code>dataTransfer</code>; мы будем использовать два метода этого свойства: <code>setData</code> и <code>getData</code>. Здесь мы используем метод <code>setData</code>, который принимает два параметра: формат данных и данные. Мы будем использовать тип данных "text." Затем мы установим данные идентификатора элемента, который пользователь перетаскивает. Затем мы плавно покажем элемент <code>h2</code> в качестве подсказки для клиента. </p> <p>Мы также используем метод наведения jQuery для постепенного появления информации о продукте, когда мы наводим указатель мыши и исчезновения, когда мы отводим указатель мыши. Обратите внимание, что мы передаем узел, который мы зависаем как контекст, поэтому мы получаем только слой соответствующего продукта.</p> <p>Теперь добавим обработчики событий для <code>#cart</code>. Мы будем взаимодействовать с событиями <code>dragover</code>, <code>dragenter</code> и <code>drop</code>:</p> <pre class="brush: noskimlinks noskimwords"> $("#cart")     .bind("dragover", function (evt) {         evt.preventDefault();     })     .bind("dragenter", function (evt) {         evt.preventDefault();     })     .bind("drop", function (evt) {      });</pre> <p>Чтобы запустить событие drop, нам нужно отменить действие по умолчанию для события <code>dragover</code>; это событие непрерывно срабатывает при достижении цели перетаскивания, когда перетаскиваемый элемент перемещается по ней. Только для IE нам нужно отменить действие по умолчанию на <code>dragenter</code> event, которое происходит только тогда, когда элемент перетаскивания входит в целевую точку. Причины отмены действия по умолчанию несколько не конкретные; если честно, я их не понимаю. Вот что говорит <span>Remy Sharp</span>:</p> <blockquote> <p>То, что сообщает браузеру, что этот элемент является тем, который мы хотим использовать в событии перетаскивания, это обычное действие перетаскивания. так, отменив это событие, он мы сообщаем браузеру, что это тот элемент, который должен начинаться перемещение.</p> </blockquote> <p>Я должен отметить, что jQuery немного помогает нам здесь; обычно мы также должны возвращать значение <code>return false</code>, чтобы он работал в IE; однако исправленное предупреждение jQuery <code>preventDefault</code> делает это для нас.</p> <p>Теперь событие <code>drop</code>; это событие также запускается для целевого объекта, которым является слой <code>div#cart</code> в нашем случае. Прежде чем мы посмотрим на функцию, давайте поговорим о том, что должна делать эта функция:</p> <ul><li>получить продукт, который мы бросили</li> <li>если продукт уже куплен, добавить его к количеству купленного; в противном случае добавить товар в корзину</li> <li>уменьшение количества продукта </li> <li>обновить общую стоимость</li> </ul><p>Вот первая часть:</p> <pre class="brush: noskimlinks noskimwords"> var id = evt.dataTransfer.getData("text"),     item = $("#" + id),     cartList = $("#cart ul"),     total = $("#total span"),     price = $("p:eq(1) span", item).text(),     prevCartItem = null,     notInCart = (function () {         var lis = $("li", cartList),             len = lis.length,             i;          for (i = 0; i &lt; len; i++ ) {             var temp = $(lis[i]);             if (temp.data("id") === id) {                 prevCartItem = temp;                 return false;             }         }         return true;     } ()),     quantLeftEl, quantBoughtEl, quantLeft;</pre> <p>Я знаю; здесь много переменных, но мы будем использовать их все. Давайте разберёмся; во-первых, мы получаем текстовые данные, которые мы передали с событием; мы передали id таким образом, потому что в объекте события нет ничего, что сообщает нам, какой элемент был сброшен на нашу цель; мы получим идентификатор, а затем будем использовать его, чтобы найти элемент, который был перенесён. Далее мы получаем список корзины и блок с ценой. Затем мы получим цену отдельного товара; мы знаем, что это блок во втором абзаце элемента, поэтому мы можем использовать этот элемент в качестве параметра контекста. Мы установим <code>prevCartItem</code> на null, но мы будем использовать его, чтобы узнать, есть ли элемент, который мы перетаскиваем в корзину, в корзине. Значение <code>notInCart</code> - самозапускающаяся анонимная функция; она будет проверяться для каждого элемента в cartList (опять же, мы используем контекстный параметр) и проверяем, является ли <code>id</code> данных такими же, как идентификатор переменной <code>id</code>. Чтобы понять это, вам нужно будет знать, что когда мы добавим элементы списка в корзину покупок, мы будем использовать метод <code>data</code> jQuery для установки идентификатора продукта для элемента. В этой функции мы проверяем элемент списка с правильными данными; если мы найдем один, и элемент уже находится в корзине, поэтому мы устанавливаем значение <code>notinCart</code> в значение false; если он не находится в корзине, мы установим переменную в значение true. Наконец, мы будем использовать <code>quantLeftEl</code>, <code>quantBoughtEl</code> и <code>quantLeft</code> при обновлении количеств.</p> <p>Теперь, оформим некоторые действия:</p> <pre class="brush: noskimlinks noskimwords"> $("h2").fadeOut("fast");  if (notInCart) {     prevCartItem = $("&lt;li /&gt;", {         text : $("p:first", item).text(),         data : { id : id }     }).prepend($("&lt;span /&gt;", {         "class" : "quantity",         text : "0"     })).prepend($("&lt;span /&gt;", {         "class" : "price",         text : price     })).appendTo(cartList); }</pre> <p>Во-первых, мы скроем уведомление элемента <code>h2</code>. Затем, если элемент не находится в корзине, мы добавим его в корзину. Для этого мы создадим элемент списка; затем мы можем передать литерал объекта в качестве второго параметра для задания свойств нашего нового элемента списка. Мы установим текст в название продукта; который берем из первого абзаца продукта. Затем мы устанавливаем данные, о которых говорилось выше. </p> <p>Затем мы добавим блок к этому элементу списка; мы назначим ему класс ‘quantity’ (не забудьте поставить класс в кавычки, так как это зарезервированное слово) и установите текст на ноль; да, я знаю, что число должно быть единицей, поскольку они только что поместили товар в корзину, но мы добавим это позже ... и вы поймете, почему.</p> <p>Мы добавим еще один блок к элементу списка, на этот раз время цены. Мы делаем обтекание цены справа, поэтому было бы логично <strong>добавить</strong> его; но это вызовет ошибку с обтеканием в IE; блок будет обтекать текст справа и под элементом списка. </p> <p>Наконец, мы добавим элемент списка в список корзины покупок. </p> <p>Последняя часть этой функции будет работать независимо от того, находится ли элемент в корзине или нет:</p> <pre class="brush: noskimlinks noskimwords"> quantLeftEl = $("p:last span", item); quantLeft   = parseInt(quantLeftEl.text(), 10) - 1; quantLeftEl.text(quantLeft); quantBoughtEl = $(".quantity", prevCartItem); quantBoughtEl.text(parseInt(quantBoughtEl.text(), 10) + 1);  if (quantLeft === 0) {     item.fadeOut("fast").remove(); }  total.text((parseFloat(total.text(), 10) + parseFloat(price.split("$")[1])).toFixed(2));  evt.stopPropagation(); return false;</pre> <p>Сначала мы получим количество товара; это количество, оставшееся, после того как покупатель перетащит товар в корзину; мы получим количество, которое действительно осталось; но это строка, поэтому мы используем нативную функцию <code>parseInt</code>, чтобы преобразовать ее в число (используйте 10 в качестве основы для того, чтобы мы получили десятичное число) и вычтите единицу из него. Затем мы сбрасываем количество, используя метод jQuery <code>text</code>. </p> <p>Затем мы получаем количество, покупок пользователя; это элемент с классом ‘quantity"; мы используем <code>prevCartItem</code> как контекст; это работает, потому что если элемент уже был в корзине, в этой анонимной функции был установлен <code>prevCartItem</code>; если его не было в корзине, мы устанавливаем его, когда мы создаем корзину. Затем мы можем установить текстовое значение, получив текущее значение, преобразуя его в число и добавив к нему единицу. </p> <p>Что происходит, когда количество достигает нуля? Если он равен нулю, мы скроем элемент и удалим его.</p> <p>Наконец, мы должны обновить общую цену. У нас есть блок с итоговой ценой, поэтому мы можем просто сбросить текст;  что мы сейчас делаем, это получаем текущий текст, преобразуем его в число (на этот раз мы используем функцию <code>parseFloat</code> для сохранения центов), разделяем знак доллара с ценой и преобразуем его в число и добавляем к двум значениям. Наконец, мы используем функцию <code>toFixed</code>, чтобы убедиться, что мы всегда показываем правильное значение в центах.</p> <p>Наконец, мы не хотим, чтобы событие <code>drop</code> drop наслаивалось, поэтому мы прекратим его и вернем значение return false; </p> <hr><h2>Шаг 4. Завершенный проект</h2> <p>Отличная работа, мы закончили; вот обзор нашей корзины в действии:</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/legacy-premium-tutorials/posts/11156/images/11156_4fac0afeb42789909fc0c8f6a204c1f6.jpg" alt="Использование функции &quot;Перетащи и Брось&quot; в HTML5..." title="Использование функции &quot;Перетащи и Брось&quot; в HTML5..." width="50" height="50"><br></figure><p>Если вы хотите проверить, что делают другие события перетаскивания, добавьте это в ваш скрипт:</p> <pre class="brush: noskimlinks noskimwords"> $("#cart").bind("dragleave", function (evt) {   console.log("dragleave"); });  $(".item") .bind("dragend", function (evt) { console.log("dragend"); }) .bind("dragstart", function (evt) { console.log("dragstart"); }) .bind("drag", function (evt) { console.log("drag"); });</pre> <p>Хотя нативный HTML5 пока не готов к прайм-тайм (Opera не поддерживает его), определенно интересно узнать, куда всё движется!</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825725-ispolzovanie-funktsii-peretaschi-i-bros-v-html5" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="HTML5" href="https://norma-studio.github.io/article5/220825725-ispolzovanie-funktsii-peretaschi-i-bros-v-html5" class="tm-article-body__tags-item-link">HTML5</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
43143</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
707</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
