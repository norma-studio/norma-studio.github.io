
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Создаём ваш первый плагин на jQuery UI
... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Создаём ваш первый плагин на jQuery UI
... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Создаём ваш первый плагин на jQuery UI
... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Создаём ваш первый плагин на jQuery UI
... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="В jQuery существует метод fn.extend(), который упрощает
создание плагинов jQuery, что позволяет нам писать код, который используется в точности так же, как и другие методы jQuery. Пользовательский интерфейс jQuery также содержит структуры, которые упрощают создание плагинов jQuery. Но, вот что мы будем рассматривать в ходе этого урока. Методы котор...">
<meta property="og:description" content="В jQuery существует метод fn.extend(), который упрощает
создание плагинов jQuery, что позволяет нам писать код, который используется в точности так же, как и другие методы jQuery. Пользовательский интерфейс jQuery также содержит структуры, которые упрощают создание плагинов jQuery. Но, вот что мы будем рассматривать в ходе этого урока. Методы котор...">
<meta name="twitter:description" content="В jQuery существует метод fn.extend(), который упрощает
создание плагинов jQuery, что позволяет нам писать код, который используется в точности так же, как и другие методы jQuery. Пользовательский интерфейс jQuery также содержит структуры, которые упрощают создание плагинов jQuery. Но, вот что мы будем рассматривать в ходе этого урока. Методы котор...">
<meta property="aiturec:description" content="В jQuery существует метод fn.extend(), который упрощает
создание плагинов jQuery, что позволяет нам писать код, который используется в точности так же, как и другие методы jQuery. Пользовательский интерфейс jQuery также содержит структуры, которые упрощают создание плагинов jQuery. Но, вот что мы будем рассматривать в ходе этого урока. Методы котор...">
<meta property="og:image" content="https://net.tutsplus.com/wp-content/themes/nettuts/site_images/button_src_nm.jpg">
<meta property="aiturec:image" content="https://net.tutsplus.com/wp-content/themes/nettuts/site_images/button_src_nm.jpg">
<meta name="twitter:image" content="https://net.tutsplus.com/wp-content/themes/nettuts/site_images/button_src_nm.jpg">
<meta property="vk:image" content="https://net.tutsplus.com/wp-content/themes/nettuts/site_images/button_src_nm.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://net.tutsplus.com/wp-content/themes/nettuts/site_images/button_src_nm.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825729-sozdayom-vash-pervyj-plagin-na-jquery-ui.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825729-sozdayom-vash-pervyj-plagin-na-jquery-ui.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825729-sozdayom-vash-pervyj-plagin-na-jquery-ui.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825729-sozdayom-vash-pervyj-plagin-na-jquery-ui.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825729-sozdayom-vash-pervyj-plagin-na-jquery-ui.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825729-sozdayom-vash-pervyj-plagin-na-jquery-ui.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825729-sozdayom-vash-pervyj-plagin-na-jquery-ui.html" title="Создаём ваш первый плагин на jQuery UI
... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Создаём ваш первый плагин на jQuery UI
... | envatomarket.ru | norma-studio.github.io" title="Создаём ваш первый плагин на jQuery UI
... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/54332343.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825729-sozdayom-vash-pervyj-plagin-na-jquery-ui.html" class="tm-user-info__username" title="
В. Бухтеев" aria-label="
В. Бухтеев">
В. Бухтеев</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Создаём ваш первый плагин на jQuery UI
...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825729-sozdayom-vash-pervyj-plagin-na-jquery-ui" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825729-sozdayom-vash-pervyj-plagin-na-jquery-ui" class="tm-article-snippet__hubs-item-link"><span>Web Development</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825729-sozdayom-vash-pervyj-plagin-na-jquery-ui.html" />
    <link itemprop="image" href="https://net.tutsplus.com/wp-content/themes/nettuts/site_images/button_src_nm.jpg">
    <meta itemprop="headline name" content="Создаём ваш первый плагин на jQuery UI
... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="В jQuery существует метод fn.extend(), который упрощает
создание плагинов jQuery, что позволяет нам писать код, который используется в точности так же, как и другие методы jQuery. Пользовательский интерфейс jQuery также содержит структуры, которые упрощают создание плагинов jQuery. Но, вот что мы будем рассматривать в ходе этого урока. Методы котор...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">В jQuery существует метод fn.extend(), который упрощает
создание плагинов jQuery, что позволяет нам писать код, который используется в точности так же, как и другие методы jQuery. Пользовательский интерфейс jQuery также содержит структуры, которые упрощают создание плагинов jQuery. Но, вот что мы будем рассматривать в ходе этого урока. Методы котор...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



 <p>В jQuery существует метод <strong>fn.extend()</strong>, который упрощаетсоздание плагинов jQuery, что позволяет нам писать код, который используется в точности так же, как и другие методы jQuery. Пользовательский интерфейс jQuery также содержит структуры, которые упрощают создание плагинов jQuery. Но, вот что мы будем рассматривать в ходе этого урока. Методы которые отличаются от стандартных плагинов jQuery, и здесь работают более жесткие ограничения, которые следует соблюдать, поэтому я считаю, что эта тема заслуживает отдельной статьи. </p> <p><!--more--></p> <div class="tutorial_image"> <span><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://net.tutsplus.com/wp-content/themes/nettuts/site_images/button_src_nm.jpg" class="lazy07" alt="Создаём ваш первый плагин на jQuery UI..." title="Создаём ваш первый плагин на jQuery UI..." width="50" height="50"></span><br><span><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://net.tutsplus.com/wp-content/themes/nettuts/site_images/button_demo_nm.jpg" class="lazy07" alt="Создаём ваш первый плагин на jQuery UI..." title="Создаём ваш первый плагин на jQuery UI..." width="50" height="50"></span> </div> <p>В ходе этого урока я покажу вам ограничения и общиерекомендации к программированию, которые должны соблюдаться при создании плагинов для jQuery UI. Мы создадим простой плагин, который добавит заголовки к изображениям на странице. Он специально очень простой, чтобы мы могли сосредоточиться на том, что необходимо для создания плагина jQuery UI, не путаясь в коде. Любой, кто уже писал плагины для jQuery, должен всё понять. Знание jQuery UI может помочь, но не обязательно для завершения этого урока. Давайте начнем.</p> <h2>Начинаем </h2> <p>Нам понадобится копия jQuery, а также несколько файлов из jQuery UI, но это должен быть jQuery UI 1.8 (его можно найти <span>в блоге</span>). Создайте рабочий каталог на вашем компьютере с именем <strong>jqueryui-plugin</strong>, затем внутри него создайте папку <strong>css</strong>, папку<strong> js</strong> и папку <strong>img </strong>(изображения, используемые в этом руководстве, можно найти в разделе загрузок).</p> <p>Загрузите библиотеку и распакуйте ее в доступном месте. Нам нужны только несколько файлов из архива, а именно исходный файл jQuery, который находится в корне архива под названием<strong> jquery-1.4.1.js</strong>, и файлы <strong>jquery.ui.core.js</strong> и <strong>jquery.ui.widget.js</strong>, которые находятся в папке <strong>ui</strong>. Возьмите их и переместите в папку <strong>js</strong> в рабочем каталоге. Мы также будем использовать облегчённую версию CSS, поэтому нам понадобится одна из таблиц стилей тем, доступных для загрузки вместе с текущей стабильной версией jQuery UI (в этом примере я использовал <strong>ui-lightness</strong>).</p> <p>Мы создадим виджет captionator, поэтому нам понадобится страница с кучей изображений на ней, чтобы разработать/протестировать плагин. В этом примере используется следующая страница:</p> <pre class="brush: html noskimlinks noskimwords">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"&gt;&lt;html&gt;  &lt;head&gt;&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;&lt;title&gt;jQuery UI Captionator&lt;/title&gt;&lt;link rel="stylesheet" type="text/css" href="css/ui-lightness/jquery-ui-1.7.2.custom.css"&gt;&lt;link rel="stylesheet" type="text/css" href="css/ui.captionator.css"&gt;&lt;/head&gt;&lt;body&gt;&lt;img src="img/1.jpg" alt="Royal Air Force Eurofighter Typhoon"&gt;&lt;img src="img/2.jpg" alt="A British military GR-9 Harrier"&gt;&lt;img src="img/3.jpg" alt="Two RAF Tornado GR-4s pull away from a KC-135 Stratotanker after refueling"&gt;        &lt;script type="text/javascript" src="js/jquery.js"&gt;&lt;/script&gt;&lt;script type="text/javascript" src="js/jquery.ui.core.js"&gt;&lt;/script&gt;&lt;script type="text/javascript" src="js/jquery.ui.widget.js"&gt;&lt;/script&gt;&lt;script type="text/javascript" src="js/jquery.ui.captionator.js"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;</pre> <p>На данный момент у нас будет все просто; всего триизображения на странице, за которыми следуют четыре файла сценариев; три ссылки на исходные файлы jQuery и jQuery UI, четвертая -  на исходный файл нашего плагина, который мы создадим в ближайшее время. Файл <strong>jquery.ui.core.js</strong> необходим всем виджетам/плагинам jQuery UI. Файл <strong>jquery.ui.widget.js</strong> является базовой частью виджета и позволяет создавать виджеты, которые обладают общими функциональными возможностями API. Большинство компонентов библиотеки используют это, и мы будем использовать его для создания нашего плагина.</p> <h2>Создание файла плагина</h2> <p>Создайте новый файл JavaScript и сохраните его как<strong>jquery.ui.captionator.js</strong> в папке <strong>js</strong>; мы должны придерживаться рекомендаций об именах jQuery UI, которое только что было обновлено в версии 1.8 версиибиблиотеки, и использовать формат <strong>jquery.ui.plugin_name.js</strong>. Добавьте следующий код в новый файл:</p> <pre class="brush: js noskimlinks noskimwords">(function($) {})(jQuery);</pre> <p>Весь код, который составляет наш плагин, должен бытьинкапсулирован в самостоятельную исполняемую анонимную функцию. Объект jQuery передается в эту функцию и используется внутри функции через псевдоним <strong>$</strong>; это значит, что плагин совместим с методом <strong>noConflict()</strong> в jQuery. Это чёткоетребование и всегда должно соблюдаться. Это чёткое требование и всегда должно соблюдаться.</p> <p>Затем нам нужно определить плагин; добавьте следующий код в нашу анонимную функцию:</p> <pre class="brush: js noskimlinks noskimwords">$.widget("ui.captionator", {});</pre> <p>Шаблон для использования базы виджета прост в использовании, мы просто вызываем метод <strong>widget()</strong>, определяющий имя плагина в качестве первого аргумента, и литерал объекта, содержащий свойства и методы, которые составляют функцию плагина. Это позволяет нашему плагину работать (быть вызванным) с использованием общего синтаксиса jQuery<strong>$("element_caption_applied_to").captionator()</strong>; как и любой другой метод jQuery или jQuery UI.</p> <p>База виджета предоставляет нам ряд этих свойств и методов; например, мы можем установить параметры по умолчанию для плагина, используя свойство <strong>options</strong>, и добавить функцию инициализации, которая автоматически запускается базой виджета, как только вызывается экземпляр плагина. Внутри объекта, который появляется в качестве второго аргумента в предыдущем коде, добавьте следующий код:</p> <pre class="brush: js noskimlinks noskimwords">options: {  location: "bottom",  color: "#fff",  backgroundColor: "#000"},</pre> <p>Это все настройки, которые мы будем использовать в нашем примере; пользователи (и пользователи, я имею в виду разработчики, а не конечные пользователи) плагина могут указать положение заголовка как в верхней части изображения, на которое он накладывается, так и в нижней части, также можно указать цвет текста заголовка или изменить его фоновый цвет надписи. Чтобы изменить параметр любого виджета на jQuery UI до инициализации, разработчик просто использует нечто похожее:</p> <p><strong>$("element_caption_applied_to").captionator({ location: "top" });</strong></p> <p>Затем мы можем создать нашу функцию инициализации, для этого, после объекта options добавьте следующий метод:</p> <pre class="brush: js noskimlinks noskimwords">_create: function() {var self = this,o = self.options,el = self.element,cap = $("&lt;span&gt;&lt;/span&gt;").text(el.attr("alt")).addClass("ui-widget ui-caption").css({backgroundColor: o.backgroundColor,color: o.color,width: el.width()}).insertAfter(el),capWidth = el.width() - parseInt(cap.css("paddingLeft")) - parseInt(cap.css("paddingRight")),capHeight = cap.outerHeight() - parseInt(cap.css("paddingTop")) + parseInt(cap.css("paddingBottom"));cap.css({width: capWidth,top: (o.location === "top") ? el.offset().top : el.offset().top + el.height() - capHeight,left: el.offset().left,display: "block"});$(window).resize(function(){cap.css({top: (o.location === "top") ? el.offset().top : el.offset().top + el.height() - capHeight,left: el.offset().left});});},</pre> <p>Имя метода должно начинаться с подчеркивания, так как jQuery UI предотвращает любой метод, который начинается с подчеркивания, от выполнения за пределамиплагина, так что это предотвращает случайное выполнение с HTML-страницы. Любой метод, который мы начинаем с подчеркивания, будет защищен таким образом.</p> <p>Большая часть нашего метода инициализации представляет собой ряд переменных; внутри нашей функции ключевое слово this относится к объекту, переданному в метод, который представляет собой экземпляр плагина. Первая переменная кэширует ссылку на текущий экземпляр плагина; метод <strong>_create </strong>вызывается для каждого элемента, на который выполняется метод плагина, он может быть одним элементом или сразу несколькими.</p> <p>Мы можем получить доступ к настройкам по умолчанию для плагина (которые автоматически переопределяются, если разработчик настраивает любой из них), используя свойство объекта <strong>options</strong>; мы кэшируем это во второй переменной. Элемент, который был вызван методом плагина (<strong>captionator()</strong>), который в этом примере будет изображением, может быть доступен с использованием свойства <strong>element</strong> объекта. Мы сохраняем его в третьей переменной.</p> <p>Мы используем четвертую переменную для хранения ссылки на новый элемент заголовка, который построен из простого тега <strong>&lt;span&gt;</strong>; <strong>&lt;span&gt;</strong> имеет свой <strong>innerText</strong>, установленный в атрибуте <strong>alt</strong> текущего изображения, и к нему добавляются несколько имен классов; мы даем ему имя класса <strong>ui-widget</strong>, чтобы он приобрел стиль по умолчанию из текущей темы jQuery UI. Мы также присваиваем ему пользовательское имя класса, чтобы мы могли добавить некоторые из наших собственных стилей.</p> <p>Затем нам нужно настроить некоторые свойства CSS; мы будем использовать отдельную таблицу стилей для некоторых стилей, но обязательные вещи, такие как стили <strong>цвета </strong>и <strong>фона</strong>, управляются с помощью настраиваемых параметров, поэтому нам нужно установить их с помощью плагина. Ширина заголовка должна соответствовать ширинеизображения, на которое оно накладывается, поэтому нам необходимо определить это и установить программным способом. Наконец, новый <strong>&lt;span&gt;</strong> встраивается на страницу непосредственно после целевого изображения.</p> <p>После того, как заголовок был вставлен, необходимо изменить размер и расположить его правильно; единственный способ, которым размер может быть точно установлен, - если объект уже существует в DOM и обладает прикреплёнными к нему правилами CSS, такими как размер шрифта. Вот почему мы встраиваем заголовок в страницу, а затем определяем ее точные размеры, которые затем сохраняются в переменных <strong>capWidth</strong> и <strong>capHeight</strong>.</p> <p>Как только надпись будет добавлена ​​на страницу (только после этого), мы сможем установить правильную ширину, высоту и положение каждой надписи, которые мы снова устанавливаем с помощью метода <strong>css()</strong>. Заголовки фактически полностью отделены от изображений; они вставляются непосредственно после каждого изображения, а затем перемещаются для того, чтобы перекрыть его, в конце концов, мы не можем просто добавить <strong>&lt;span&gt;</strong>  в качестве дочернего элемента <strong>&lt;img&gt;</strong>.</p> <p>Тут всё работает, пока браузер не изменит размер, и в этот момент изображения перемещаются, но заголовки нет, потому что они расположены абсолютно. Чтобы исправить это, мы использовали базовый обработчик изменения размера, привязанный к окну, который просто переносит каждую подпись в новую позицию по отношению к изображению. Этот обработчик событий является последним в нашем методе инициализации.</p> <p>Другим методом, который должен использовать наш плагин, это метод <strong>destroy()</strong>, который является общим для всех плагинов jQuery UI. Мы должны обеспечить реализацию этого метода для очистки данных после завершения работы плагина. Для нашего плагина этот метод будет простым:</p> <pre class="brush: js noskimlinks noskimwords">destroy: function() {this.element.next().remove();$(window).unbind("resize");},</pre> <p>Все, что нам нужно сделать, это удалить заголовки и отвязать обработчик изменения размера окна. Этот метод может быть выполнен плагином, поэтомумы не должны начинать название этого метода с подчеркивания. Чтобы вызвать этот метод, мы будем использовать <strong>$("element_caption_attached_to").captionator("destroy");</strong> так как будет выполнен любой из наших публичных методов.</p> <p>Нам нужно предоставить другой метод, управляемый/выполняемый на базе виджета; мы видели ранее, как разработчик может изменить настраиваемый параметр до инициализации, но что если нужно после инициализации? Это делается с использованием метода <strong>option</strong>, используя следующий синтаксис: <strong>$("element_caption_attached_to").сaptionator("option", "location", "top");</strong> поэтому нам нужно добавить встроенный метод <strong>_setOption</strong>: </p> <pre class="brush: js noskimlinks noskimwords">_setOption: function(option, value) {$.Widget.prototype._setOption.apply( this, arguments );var el = this.element,cap = el.next(),capHeight = cap.outerHeight() - parseInt(cap.css("paddingTop")) + parseInt(cap.css("paddingBottom"));switch (option) {case "location":(value === "top") ? cap.css("top", el.offset().top) : cap.css("top", el.offset().top + el.height() - capHeight);break;case "color":el.next().css("color", value);break;case "backgroundColor":el.next().css("backgroundColor", value);break;}}</pre> <p>Мы начинаем этот метод с подчеркивания, потому чторазработчик использует параметр <strong>option</strong>, а не <strong>_setOption</strong>, чтобы фактически изменять настройки; нам не нужно беспокоиться о том, как это обрабатывается, нам просто нужно предоставить этот метод для решения чего-либо конкретного для нашего плагина. Поскольку этот метод уже существует на базе виджета, мы должны вызвать оригинальный метод, который мы делаем в первую очередь с помощью прототипа объекта <strong>Widget</strong>, указав имя метода (<strong>_setOption</strong> в этом случае, но мы могли бы сделать это для встроенных методах также), и используйте <strong>apply</strong> для его вызова. Затем мы можем перейти к коду, специфичного для нашего плагина.</p> <p>Функция автоматически получит два аргумента, которые могут быть изменены, и новое значение. Мы кэшируем некоторые обычно используемые элементы, такие как изображение и заголовок, и получаем текущую высоту каждого заголовка. Затем мы используем простой оператор switch-case для обработки каждого из трех наших изменяемых параметров. Перестановка подтипов является самой сложной частью, но все же довольно тривиальной и похожей на то, как мы позиционировали их в начале.</p> <h2>Добавление событий</h2> <p>Важно добавить события, в которые разработчики, использующие ваш плагин, смогут добавлять обратные вызовы, чтобы они могли реагировать на различные вещи, происходящие, когда пользователи каким-то образом взаимодействует с виджетами. База виджета обрабатывает большую часть этой задачи для нас, все, что нам нужно сделать, это инициировать событие. Этот плагин на самом деле не делает очень много, но мы все равно можем вызвать событие после добавления каждого заголовка на страницу; для этого добавьте следующий код непосредственно перед обработчиком события resize:</p> <pre class="brush: js noskimlinks noskimwords">self._trigger("added", null, cap);</pre> <p>Это все, что нам нужно сделать! Одна строка кода, и у нас есть настраиваемое событие, на которое можно закрепить действие. Мы вызываем метод <strong>_trigger()</strong> экземпляра плагина, (который мы сохранили в переменной <strong>self) </strong>и передаем в метод три аргумента; первое - для название события, второе - для объекта события (нам не нужно использовать это в нашем примере плагина, следовательно, установим <strong>нулевое</strong> значение), а третья - ссылка на элемент заголовка. База виджета автоматически передает объект события (если он указан) и данные, переданные третьим параметром, в функцию обратного вызова, которая использует добавленное событие. Разработчик может выполнить хук к этому событию, используя следующий синтаксис: <strong>$("element_caption_attached_to").сaptionator({</strong> added: function(e, ui){ //do stuff });</p> <h2>Стилизация плагина</h2> <p>Нам нужна совсем небольшая таблица стилей для нашегоплагина, буквально только три стиля. Даже и не стоит создавать отдельный файл для стилей! Но мы создадим новый файл с именем <strong>ui.captionator.css</strong>, формат названия которого является обязательным форматом для таблиц стилей плагина и сохраним его в каталоге<strong> css</strong>. Добавьте к нему следующие стили:</p> <pre class="brush: js noskimlinks noskimwords">.ui-caption { display:none; position:absolute; padding:10px; }</pre> <p>Вот и все. Наш плагин теперь функционально и визуальнозавершен. Заголовки должны выглядеть следующим образом:</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=850/net/uploads/legacy/579_jqueryui/img1.jpg" alt="Создаём ваш первый плагин на jQuery UI..." title="Создаём ваш первый плагин на jQuery UI..." width="50" height="50"></div> <h2>Итог</h2> <p>Как и метод создания плагина jQuery - <strong>fn.extend()</strong>, jQuery UI также имеет свой собственный механизм, который позволяет разработчикам быстро и легко создавать надежные и масштабируемые плагины, которые соответствуют высоким стандартам jQuery UI, хотя с точки зрения того, что он на самом деле делает для нас, это даже лучше, чем в jQuery. База виджета была создана таким образом, что практически вся тяжелая работа выносится за рамки создания плагина.</p> <p> Легко работать с методами, предоставляемыми базой виджета, чтобы добавлять методы к нашим плагинам, которые являются общими для виджетов пользовательского интерфейса, например методы <strong>уничтожения</strong> и <strong>опций</strong>, которые разработчики ожидали найти в любом плагине. Мы также видели, насколько легко запускать пользовательские события, которые разработчики могут использовать для реагирования на взаимодействия или появления с виджетами.</p> <ul class="webroundup"><li>Следите за нами в <span>Твиттере</span> или подпишитесь на <span>ленту новостей Nettuts+</span> чтобы получать информацию о лучших учебных пособиях по веб-разработке в Интернете. </li> </ul>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825729-sozdayom-vash-pervyj-plagin-na-jquery-ui" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825729-sozdayom-vash-pervyj-plagin-na-jquery-ui" class="tm-article-body__tags-item-link">Web Development</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
31347</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
694</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
