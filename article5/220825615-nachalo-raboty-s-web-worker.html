
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Начало работы с Web Worker... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Начало работы с Web Worker... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Начало работы с Web Worker... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Начало работы с Web Worker... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Одна из многих целей разработки языка JavaScript состояла в том, чтобы сделать его однопоточным и, как следствие, простым. Хотя я должен признать, что, учитывая особенности языковых конструкций, это совсем не просто! Но что мы имеем в виду под «однопоточностью», так это то, что в JavaScript есть только один поток управления; да, к сожалению, ваш дв...">
<meta property="og:description" content="Одна из многих целей разработки языка JavaScript состояла в том, чтобы сделать его однопоточным и, как следствие, простым. Хотя я должен признать, что, учитывая особенности языковых конструкций, это совсем не просто! Но что мы имеем в виду под «однопоточностью», так это то, что в JavaScript есть только один поток управления; да, к сожалению, ваш дв...">
<meta name="twitter:description" content="Одна из многих целей разработки языка JavaScript состояла в том, чтобы сделать его однопоточным и, как следствие, простым. Хотя я должен признать, что, учитывая особенности языковых конструкций, это совсем не просто! Но что мы имеем в виду под «однопоточностью», так это то, что в JavaScript есть только один поток управления; да, к сожалению, ваш дв...">
<meta property="aiturec:description" content="Одна из многих целей разработки языка JavaScript состояла в том, чтобы сделать его однопоточным и, как следствие, простым. Хотя я должен признать, что, учитывая особенности языковых конструкций, это совсем не просто! Но что мы имеем в виду под «однопоточностью», так это то, что в JavaScript есть только один поток управления; да, к сожалению, ваш дв...">
<meta property="og:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=444/net/uploads/legacy/2140_webworkers/images/IEDialogJS.png">
<meta property="aiturec:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=444/net/uploads/legacy/2140_webworkers/images/IEDialogJS.png">
<meta name="twitter:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=444/net/uploads/legacy/2140_webworkers/images/IEDialogJS.png">
<meta property="vk:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=444/net/uploads/legacy/2140_webworkers/images/IEDialogJS.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=444/net/uploads/legacy/2140_webworkers/images/IEDialogJS.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825615-nachalo-raboty-s-web-worker.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825615-nachalo-raboty-s-web-worker.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825615-nachalo-raboty-s-web-worker.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825615-nachalo-raboty-s-web-worker.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825615-nachalo-raboty-s-web-worker.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825615-nachalo-raboty-s-web-worker.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825615-nachalo-raboty-s-web-worker.html" title="Начало работы с Web Worker... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Начало работы с Web Worker... | envatomarket.ru | norma-studio.github.io" title="Начало работы с Web Worker... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/45343254534.jpg" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825615-nachalo-raboty-s-web-worker.html" class="tm-user-info__username" title="
С. Баранов" aria-label="
С. Баранов">
С. Баранов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Начало работы с Web Worker...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825615-nachalo-raboty-s-web-worker" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825615-nachalo-raboty-s-web-worker" class="tm-article-snippet__hubs-item-link"><span>Web Development</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825615-nachalo-raboty-s-web-worker.html" />
    <link itemprop="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=444/net/uploads/legacy/2140_webworkers/images/IEDialogJS.png">
    <meta itemprop="headline name" content="Начало работы с Web Worker... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Одна из многих целей разработки языка JavaScript состояла в том, чтобы сделать его однопоточным и, как следствие, простым. Хотя я должен признать, что, учитывая особенности языковых конструкций, это совсем не просто! Но что мы имеем в виду под «однопоточностью», так это то, что в JavaScript есть только один поток управления; да, к сожалению, ваш дв...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Одна из многих целей разработки языка JavaScript состояла в том, чтобы сделать его однопоточным и, как следствие, простым. Хотя я должен признать, что, учитывая особенности языковых конструкций, это совсем не просто! Но что мы имеем в виду под «однопоточностью», так это то, что в JavaScript есть только один поток управления; да, к сожалению, ваш дв...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Одна из многих целей разработки языка JavaScript состояла в том, чтобы сделать его однопоточным и, как следствие, простым. Хотя я должен признать, что, учитывая особенности языковых конструкций, это совсем не просто! Но что мы имеем в виду под «однопоточностью», так это то, что в JavaScript есть только один поток управления; да, к сожалению, ваш движок JavaScript может делать только одно за раз. </p><p>Разве это не звучит слишком ограниченно, чтобы использовать многоядерные процессоры, бездействующие на вашем компьютере? HTML5 обещает изменить все это.</p> <p><!--more--></p> <hr><h2>Однопоточная модель JavaScript</h2> <blockquote class="pullquote pqRight"> <p>Web Worker живет в ограниченном мире без доступа к DOM, так как DOM не является поточно-ориентированным.</p> </blockquote> <p>Одна школа рассматривает однопотоковую природу JavaScript как упрощение, а другая отклоняет его как ограничение. Последняя имеет очень хороший момент, особенно когда современные веб-приложения интенсивно используют JavaScript для обработки событий пользовательского интерфейса, запроса или опроса API на стороне сервера, обработки больших объемов данных и манипулирования DOM на основе ответа сервера.</p> <p>Быть способным сделать так много в одном потоке управления при поддержании отзывчивого пользовательского интерфейса часто является непростой задачей, и это заставляет разработчиков прибегать к взлому и обходным путям (таким как использование <code>setTimeout()</code>, <code>setInterval()</code> или использование <code>XMLHttpRequest</code> и DOM события) для достижения параллелизма. Тем не менее, стоит отметить, что эти методы  предоставляют способ выполнять асинхронные вызовы, но неблокирование не обязательно означает одновременность. Джон Резиг объясняет, почему вы не можете запустить что-либо параллельно в <span>своем блоге</span>.</p> <h3>Ограничения</h3> <p>Если вы работали с JavaScript в течение длительного периода времени, весьма вероятно, что вы столкнулись со следующим раздражающим диалоговым окном, в котором говорится, что выполнение какого-либо сценария занимает слишком много времени. Да, почти каждый раз, когда ваша страница перестает отвечать, причину можно объяснить каким-то кодом JavaScript.</p> <div class="tutorial_image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=444/net/uploads/legacy/2140_webworkers/images/IEDialogJS.png" alt="Начало работы с Web Worker..." title="Начало работы с Web Worker..." width="50" height="50"></div> <p>Вот некоторые из причин, по которым ваш браузер может просто прекратить загрузку при выполнении вашего скрипта:</p> <ul><li> <b>Чрезмерное манипулирование DOM</b>: манипулирование DOM, пожалуй, самая дорогая операция, которую вы можете сделать с JavaScript. Следовательно, большое количество операций с DOM делает ваш сценарий хорошим кандидатом на рефакторинг.</li> <li> <b>Бесконечные циклы</b>: сканирование вашего кода на наличие сложных вложенных циклов никогда не повредит. Они, как правило, выполняют гораздо больше работы, чем нужно на самом деле. Возможно, вы можете найти другое решение, которое обеспечивает ту же функциональность.</li> <li> <b>Комбинируя два</b>: худшее, что мы можем сделать, это многократно обновлять DOM в цикле, когда существуют более элегантные решения, такие как использование <span>DocumentFragment</span>.</li> </ul><hr><h2>Web Workers на помощь</h2> <blockquote class="pullquote pqRight"> <p>...неблокирование не обязательно означает одновременный...</p> </blockquote> <p>Благодаря HTML5 и Web Workers вы можете создавать новый поток, обеспечивающий истинную асинхронность. Новый поток может работать в фоновом режиме, пока основной поток обрабатывает события пользовательского интерфейса, даже если рабочий поток занят обработкой большого количества данных. Например обработать большую структуру JSON, чтобы извлечь ценную информацию для отображения в пользовательском интерфейсе. Но хватит моей болтовни; давайте посмотрим код в действии.</p> <h3> Создание потока </h3> <p>Обычно код, относящийся к web worker находится в отдельном файле JavaScript. Родительский поток создает нового работника, указав URI файла сценария в конструкторе <span><code>Worker</code></span>, который асинхронно загружает и выполняет файл JavaScript.</p> <pre class="brush: js noskimlinks noskimwords">var primeWorker = new Worker("prime.js");</pre> <h3> Начало потока </h3> <p>Чтобы запустить в фоновом режиме, родительский поток отправляет сообщение worker, например:</p> <pre class="brush: js noskimlinks noskimwords">var current = $("#prime").attr("value");primeWorker.postMessage(current);</pre> <p>Родительская страница может общаться с workers с помощью <code>postMessage</code> <span>API</span> который также используется для обмена сообщениями между источниками. Помимо отправки примитивных типов данных worker, <code>postMessage</code> API также поддерживает передачу структур JSON. Однако нельзя передавать функции, поскольку они могут содержать ссылки на базовый DOM.</p> <blockquote><p>Родительский и рабочий потоки имеют свое собственное отдельное пространство; сообщения, передаваемые туда и сюда, копируются, а не передаются.</p></blockquote> <p>За кулисами эти сообщения сериализуются на рабочем месте, а затем десериализуются на принимающей стороне. По этой причине не рекомендуется отправлять огромные объемы данных работнику.</p> <p>Родительский поток также может зарегистрировать обратный вызов для прослушивания любых сообщений, которые рабочий отправляет обратно после выполнения своей задачи. Это позволяет родительскому потоку предпринять необходимые действия (например, обновить DOM) после того, как работник выполнит свою роль. Взгляните на этот код:</p> <pre class="brush: js noskimlinks noskimwords">primeWorker.addEventListener("message", function(event){    console.log("Receiving from Worker: "+event.data);    $("#prime").html( event.data );});</pre> <p>Объект <code>event</code> содержит два важных свойства:</p> <ul><li> <code><b>target</b></code>: используется для идентификации работника, отправившего сообщение; в первую очередь полезен в среде с несколькими работниками.</li> <li> <code><b>data</b></code>: сообщение, отправленное рабочим обратно в его родительский поток.</li> </ul><p>Работник содержится в <code>prime.js</code> и регистры для <code>message</code> события, которые он получает от своего родительского узла. Он также использует один и тот же <code>postMessage</code> API для взаимодействия с родительским потоком.</p> <pre class="brush: js noskimlinks noskimwords">self.addEventListener("message",  function(event){    var currPrime = event.data, nextPrime;    setInterval( function(){    nextPrime = getNextPrime(currPrime);    postMessage(nextPrime);      currPrime = nextPrime;    }, 500);});</pre> <blockquote class="pullquote pqRight"> <p>Web workers живет в ограниченной и поточно-ориентированной среде.</p> </blockquote> <p>В этом примере мы просто находим следующее наибольшее простое число и неоднократно публикуем результаты обратно в родительский поток, который, в свою очередь, обновляет пользовательский интерфейс с новым значением. В контексте работника, и <code>self</code>, и <code>this</code> относятся к глобальной области. Рабочий может либо добавить прослушиватель события для <code>message</code>, либо определить обработчик <code>onmessage</code> для прослушивания любых сообщений, отправленных родительским потоком.</p> <p>Задача поиска следующего простого числа, очевидно, не является идеальным вариантом использования для работника, но была выбрана здесь для демонстрации концепции передачи сообщений. Позже мы рассмотрим возможные и практические варианты использования, где использование Web Worker действительно принесет пользу.</p> <h3>Прекращения потока </h3> <p>Фоновые потоки ресурсоемки; это потоки уровня ОС. Поэтому не создавайте большое количество потоков, и следует прекратить работу потока после того, как он завершит свою работу. Поток может остановить себя, например:</p> <pre class="brush: js noskimlinks noskimwords">self.close();</pre> <p>Или родительский поток может завершить фоновой:</p> <pre class="brush: js noskimlinks noskimwords">primeWorker.terminate();</pre> <h3>Безопасности и ограничения</h3> <p>Внутри рабочего скрипта у нас нет доступа ко многим важным объектам JavaScript, таким как <code>document</code>, <code>window</code>, <code>console</code>, <code>parent</code> и, что самое важное, нет доступа к DOM. Отсутствие доступа к DOM и невозможность обновления страницы звучит слишком ограничительно, но это важное решение для обеспечения безопасности. Только представьте, какой хаос это может вызвать, если несколько потоков попытаются обновить один и тот же элемент. Таким образом, web workers живут в ограниченной и поточно-ориентированной среде.</p> <p>После этого, вы все равно можете использовать работников для обработки данных и возврата результата обратно в основной поток, который затем может обновить DOM. Хотя им отказано в доступе к некоторым довольно важным объектам JavaScript, работникам разрешено использовать некоторые функции, такие как <code>setTimeout()/clearTimeout()</code>, <code>setInterval()/clearInterval()</code>, <code>navigator</code> и т. д. Вы также можете использовать объекты <code>XMLHttpRequest</code> и <code>localStorage</code> внутри потока.</p> <h3> Ограничения </h3> <blockquote class="pullquote pqRight"> <p>В контексте потока, и <code>self</code>, и <code>this</code> относятся к глобальной области.</p> </blockquote> <p>Для связи с сервером работники должны следовать <span>same-origin policy</span>. Например, сценарий, размещенный на <code>http://www.example.com/</code>, не может получить доступ к сценарию на <code>https://www.example.com/</code>. Несмотря на то, что имена хостов совпадают, оригинальная политика гласит, что протокол должен быть таким же. Обычно это не проблема. Весьма вероятно, что вы пишете как работнику, так и клиенту, и обслуживаете их из одного домена, но знание ограничения всегда полезно.</p> <h3> Проблемы локального доступа с Google Chrome </h3> <p> Google Chrome накладывает ограничения на локальный доступ к workers, поэтому вы не сможете запускать эти примеры в локальной среде. Если вы хотите использовать Chrome, то вы должны либо разместить эти файлы на каком-либо сервере, либо использовать флаг <code>--allow-file-access-from-files</code> при запуске Chrome из командной строки. Для OS X запустите Chrome следующим образом:</p> <pre class="brush: html noskimlinks noskimwords">$ /Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --allow-file-access-from-files</pre> <p>Однако использование этого флага не рекомендуется в производственной среде. Таким образом, вам лучше всего разместить эти файлы на веб-сервере и протестировать своих веб-работников в любом поддерживаемом браузере.</p> <h3> Отладка рабочих и обработка ошибок</h3> <p>Отсутствие доступа к <code>console</code> делает это несколько нетривиальным, но благодаря Chrome Developer Tools можно отлаживать рабочий код, как если бы это был любой другой код JavaScript.</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=449/net/uploads/legacy/2140_webworkers/images/debuggingworker.png" alt="Начало работы с Web Worker..." title="Начало работы с Web Worker..." width="50" height="50"></div> <p>Для обработки любых ошибок, выдаваемых веб-работниками, вы можете прослушивать событие <code>error</code>, которое заполняет объект <span>ErrorEvent</span>. Вы можете проверить этот объект, чтобы узнать подробную причину ошибки.</p> <pre class="brush: js noskimlinks noskimwords">primeWorker.addEventListener("error", function(error){    console.log(" Error Caused by worker: "+error.filename        + " at line number: "+error.lineno        + " Detailed Message: "+error.message);});</pre> <h3>Несколько рабочих потоков</h3> <p>Хотя обычно несколько рабочих потоков разделяют работу между собой, нужно быть осторожным. Официальная спецификация указывает, что эти потоки относительно тяжелые и, как следствие будут долгоживущими сценариями, работающими в фоновом режиме. Веб-работники не предназначены для использования повсеместно из-за их высокой загрузки производительности при запуске и высокой нагрузке на память для каждого процесса.</p> <h3> Краткое введение в общих работников </h3> <p> Спецификация выделяет два типа работников: выделенные и совместно используемые. До сих пор мы видели примеры специальных работников. Они напрямую связаны со своим сценарием/страницей создателя в том смысле, что они имеют отношение один к одному со сценарием/страницей, которая их создала. Совместно используемые работники могут использоваться всеми страницами (то есть: все страницы или сценарии одного и того же источника могут взаимодействовать с совместно используемым работником).</p> <blockquote><p>Чтобы создать общего работника, просто передайте URL-адрес сценария или имя работника в конструктор <span>SharedWorker</span>.</p></blockquote> <p>Основное различие в использовании общих работников заключается в том, что они связаны с <code>port</code> для отслеживания доступа к ним родительского скрипта.</p> <p>Следующий фрагмент кода создает общего работника, регистрирует обратный вызов для прослушивания любых сообщений, отправленных работником, и отправляет сообщение общему работнику:</p> <pre class="brush: js noskimlinks noskimwords">var sharedWorker = new SharedWorker("findPrime.js");sharedWorker.port.onmessage = function(event){    ...}sharedWorker.port.postMessage("data you want to send");</pre> <p>И наоборот, работник может прослушивать событие подключения, которое принимается, когда новый клиент пытается подключиться к работнику, и затем соответствующим образом отправляет ему сообщение. </p> <pre class="brush: js noskimlinks noskimwords">onconnect = function(event) {    // event.source contains the reference to the client"s port    var clientPort = event.source;    // listen for any messages send my this client    clientPort.onmessage = function(event) {        // event.data contains the message send by client        var data = event.data;        ....        // Post Data after processing        clientPort.postMessage("processed data");    }};</pre> <p>Из-за их общего характера вы можете поддерживать одно и то же состояние на разных вкладках одного и того же приложения, так как обе страницы на разных вкладках используют один и тот же сценарий общего рабочего, чтобы поддерживать и сообщать о состоянии. Для получения более подробной информации об общих работниках, я призываю вас прочитать спецификацию.</p> <hr><h2> Практические варианты использования </h2> <blockquote class="pullquote"><p>Веб-работники не предназначены для использования повсеместно из-за их высокой загрузки производительности при запуске и высокой нагрузке на память для каждого процесса.</p></blockquote> <p>Сценарий может быть таким: вы вынуждены иметь дело с синхронным сторонним API, который заставляет основной поток ждать результата, прежде чем перейти к следующему оператору. В таком случае вы можете делегировать эту задачу вновь порожденному работнику, чтобы использовать асинхронные возможности в свою пользу.</p> <p>Веб-работники также целесообразно использовать в ситуациях опроса, когда вы постоянно опрашиваете адресата в фоновом режиме и отправляете сообщение в основной поток, когда поступают новые данные. </p> <p>Вам также может понадобиться обработать огромное количество данных, возвращаемых сервером. Традиционно обработка большого количества данных негативно влияет на скорость отклика приложения, что делает неприемлемым взаимодействие с пользователем. Более элегантное решение разделило бы процесс обработки между несколькими работниками для обработки разных частей данных.</p> <p>Другие варианты использования могут быть такие: анализ видео или аудио источников с помощью нескольких веб-работников, каждый из которых работает над определенной частью задачи.</p> <hr><h2>Заключение</h2> <blockquote class="pullquote"> <p>Представьте себе мощность, связанную с несколькими потоками в однопоточной среде.</p> </blockquote> <p>Как и во многих других аспектах спецификации HTML5, спецификация веб-работников продолжает развиваться. Если вы планируете работать в сети, вам не помешает взглянуть на <span>спецификацию</span>.</p> <p><span>Кросс-браузерная поддержка</span> довольно хороша с текущими версиями Chrome, Safari и Firefox. Даже IE не сильно отстает от IE10. Однако общие workers поддерживаются только в текущих версиях Chrome и Safari. Удивительно, но последняя версия браузера Android, доступная в Android 4.0, не поддерживает веб-работников, хотя они были поддержаны в версии 2.1. Apple также включила поддержку веб-работников, начиная с iOS 5.0.</p> <p>Представьте себе мощность, связанную с несколькими потоками в однопоточной среде. Возможности безграничны!</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825615-nachalo-raboty-s-web-worker" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825615-nachalo-raboty-s-web-worker" class="tm-article-body__tags-item-link">Web Development</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
41936</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
456</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
