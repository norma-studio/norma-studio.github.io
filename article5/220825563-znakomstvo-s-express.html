
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Знакомство с Express... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Знакомство с Express... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Знакомство с Express... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Знакомство с Express... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content=" Несколько лет назад я, как и множество других людей, стал всё чаще слышать о Node.js. Я создавал серверные приложения с ColdFusion в течении десятилетия, но мне всегда было любопытно, как работают другие платформы. Мне нравиться писать JavaScript на стороне клиента, использование его на стороне сервера кажется не менее интересным. (Хоть это и не н...">
<meta property="og:description" content=" Несколько лет назад я, как и множество других людей, стал всё чаще слышать о Node.js. Я создавал серверные приложения с ColdFusion в течении десятилетия, но мне всегда было любопытно, как работают другие платформы. Мне нравиться писать JavaScript на стороне клиента, использование его на стороне сервера кажется не менее интересным. (Хоть это и не н...">
<meta name="twitter:description" content=" Несколько лет назад я, как и множество других людей, стал всё чаще слышать о Node.js. Я создавал серверные приложения с ColdFusion в течении десятилетия, но мне всегда было любопытно, как работают другие платформы. Мне нравиться писать JavaScript на стороне клиента, использование его на стороне сервера кажется не менее интересным. (Хоть это и не н...">
<meta property="aiturec:description" content=" Несколько лет назад я, как и множество других людей, стал всё чаще слышать о Node.js. Я создавал серверные приложения с ColdFusion в течении десятилетия, но мне всегда было любопытно, как работают другие платформы. Мне нравиться писать JavaScript на стороне клиента, использование его на стороне сервера кажется не менее интересным. (Хоть это и не н...">
<meta property="og:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=599/net/uploads/2013/07/express-blog3-home.jpg">
<meta property="aiturec:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=599/net/uploads/2013/07/express-blog3-home.jpg">
<meta name="twitter:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=599/net/uploads/2013/07/express-blog3-home.jpg">
<meta property="vk:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=599/net/uploads/2013/07/express-blog3-home.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=599/net/uploads/2013/07/express-blog3-home.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825563-znakomstvo-s-express.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825563-znakomstvo-s-express.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825563-znakomstvo-s-express.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825563-znakomstvo-s-express.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825563-znakomstvo-s-express.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825563-znakomstvo-s-express.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825563-znakomstvo-s-express.html" title="Знакомство с Express... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Знакомство с Express... | envatomarket.ru | norma-studio.github.io" title="Знакомство с Express... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/636536435.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825563-znakomstvo-s-express.html" class="tm-user-info__username" title="
С. Торгашев" aria-label="
С. Торгашев">
С. Торгашев</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Знакомство с Express...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825563-znakomstvo-s-express" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825563-znakomstvo-s-express" class="tm-article-snippet__hubs-item-link"><span>Web Development</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825563-znakomstvo-s-express.html" />
    <link itemprop="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=599/net/uploads/2013/07/express-blog3-home.jpg">
    <meta itemprop="headline name" content="Знакомство с Express... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content=" Несколько лет назад я, как и множество других людей, стал всё чаще слышать о Node.js. Я создавал серверные приложения с ColdFusion в течении десятилетия, но мне всегда было любопытно, как работают другие платформы. Мне нравиться писать JavaScript на стороне клиента, использование его на стороне сервера кажется не менее интересным. (Хоть это и не н...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody"> Несколько лет назад я, как и множество других людей, стал всё чаще слышать о Node.js. Я создавал серверные приложения с ColdFusion в течении десятилетия, но мне всегда было любопытно, как работают другие платформы. Мне нравиться писать JavaScript на стороне клиента, использование его на стороне сервера кажется не менее интересным. (Хоть это и не н...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p> Несколько лет назад я, как и множество других людей, стал всё чаще слышать о <span>Node.js</span>. Я создавал серверные приложения с ColdFusion в течении десятилетия, но мне всегда было любопытно, как работают другие платформы. Мне нравиться писать JavaScript на стороне клиента, использование его на стороне сервера кажется не менее интересным. (Хоть это и не ново). Я помню ещё те времена, когда Netscape выпустил SSJS в 90-ых.) Я прочитал пару туториалов, испробовал его несколько раз, и на этом моё знакомство с ним закончилось... он меня не впечатлил.</p><p><!--more--></p> <p> Каждый раз когда мне приходится читать что-либо о Node, я вижу одну и ту же историю: создание веб-сервера. Откровенно говоря, это не очень увлекательно. Даже когда я начинал создавать веб-приложения с CGI скриптами Perl, мне не приходилось беспокоиться об этом. Я вижу потенциал в маленьких, легковесных API, буду-ли я создавать простые сайты с ними, конечно нет!</p> <p> В один прекрасный день мне повезло. Я решил посмотреть очередную презентацию посвящённую Node (в основном потому что я знал хорошо спикера) и во время его презентации он показал <span>Express</span>. В этот момент над моей головой загорелась лампочка. Это был Node фреймворк, которого мне не хватало! Да, в теории, вы всё ещё создаёте свой собственный веб-сервер, но данный аспект, так сказать, минимизирован и вам остаётся лишь сфокусироваться на построении логики сайта и добавлению контента. Что ещё лучше, интеграция шаблонизатора позволяет использовать ColdFusion (или PHP). В этой статье я покажу, как установить Express и как начать создавать веб-приложения используя фреймворк.</p> <hr><h2>Установка</h2> <p> Скорее всего вы уже знакомы с разработкой на Node. В случае если же вы новичок и не знаете как работать с данной платформой, мощь npm может вас немного шокировать. Так было и со мной. Как я говорил, большинство своей жизни я работал с ColdFusion. Для этой платформы существует богатая, огромная экосистема проектов с открытым исходным кодом. Однако установку и поиск приходится осуществлять вручную. Первый раз столкнувшись с npm я был просто изумлён. Честно говоря, я не могу представить на данный момент, как можно использовать платформу без такого замечательного инструмента, как npm. Давайте начнём с добавления Express, как зависимости нашего проекта в файл <code>package.json</code>.</p> <pre class="brush: js noskimlinks noskimwords">{  "name": "demo1","description": "First Express app","version": "0.0.1","dependencies": {"express": "3.x"}}</pre> <p> Подобные действия являются стандартом для Node разработчиков. Откройте командную строку и запустите:</p> <pre class="brush: bash noskimlinks noskimwords">npm install</pre> <p> Тем самым будет установлен Express и его зависимости.</p> <p> Также есть возможность установить Express, как инструмент командной строки для быстрой генерации общей структуры, скелета приложения. Этого можно добиться, запустив:</p> <pre class="brush: bash noskimlinks noskimwords">npm install -g express</pre> <p>Как только это будет сделано, можно запустить <code>express</code> в командной строке, для генерации приложения.</p> <hr><h2>Первые шаги</h2> <p> Давайте вернёмся к созданному приложению с файлом <code>package.json</code> и добавим файл <code>app.js</code>. По минимуму, приложение создаст новый экземпляр объекта Express, который будет прослушивать определённый порт. Давайте начнём, добавим следующий код:</p> <pre class="brush: js noskimlinks noskimwords">var express = require("express");var app = express();app.listen(3000);</pre> <p> Лично я изучаю функции нового фреймворка, довольно медленно, так что возможно есть смысл, как можно быстрее запустить <code>node приложения</code>, чтобы убедиться, что всё работает.</p> <h3>Создаём роуты</h3> <p> Теперь давайте добавим несколько простых роутов нашему приложению. Express приложения могут отвечать на различные HTTP методы посредством методов своего API. К примеру:</p> <pre class="brush: js noskimlinks noskimwords">//Regular HTTP getapp.get(some url, do something);//Some other pageapp.get(some other url, do something else);//I can respond to a form postapp.post(some url, do more stuff);</pre> <p> Давайте создадим живой пример и добавим главную страницу нашему приложению:</p> <pre class="brush: js noskimlinks noskimwords">app.get("/", function(request, response) {response.send("This would be some HTML");});</pre> <p> Обратите внимание, что Express добавляет простой метод <code>send()</code> к объекту ответа. Тем самым мы абстрагируем шаблонный код, для обработки <code>ответов</code>. Если всё сделано правильно, перезагрузите приложение и откройте браузер на порту 3000.</p> <p> Также <code>request.send()</code> API соответствующим образом обрабатывает различные типы данных. Представьте добавление API основанного на JSON своему сайту. Возвращая объект вместо строки, Express будет конвертировать результат в JSON, а также добавлять необходимый заголовок ответа.</p> <pre class="brush: js noskimlinks noskimwords">app.get("/api", function(request, response) {response.send({name:"Raymond",age:40});});</pre> <p> Как вы можете представить, к этому моменту, создание приложения будет состоять из добавления всё большего количества нужных вам роутов. Давайте сделаем очень простой статичный сайт, используя полученные знания.</p> <hr><h2> Создание приложения-блога 9000<br></h2> <p> Первый сайт, который мо создадим будет являться блогом. Да, я знаю, это не очень увлекательно и ново, однако концепция подобного проекта будет понятна всем. Исходники данного приложения можно найти в прикреплённых файлах для скачивания в папке <strong>blog1</strong>. Мы пропустим описание файла <code>package.json</code>, так как он ничуть не изменился. Вместо этого взглянем на <code>app.js</code>.</p> <pre class="brush: js noskimlinks noskimwords">var express = require("express");var app = express();app.get("/", function(req, res) {res.sendfile("./views/index.html");});app.get("/about", function(req, res) {res.sendfile("./views/about.html");});app.get("/article", function(req, res) {res.sendfile("./views/article.html");});app.listen(3000);</pre> <p> Первая вещь, которую вы заметите, мы отказались от <code>send api</code> в пользу <code>sendfile</code>.Несмотря на то что у нас есть возможность добавлять большие строки HTML в наш файл <code>app.js</code>, код таким образом довольно быстро станет неаккуратным и неразборчивым. Первая вещь, которую вы заметите, мы отказались от send api в пользу sendfile. Несмотря на то что у нас есть возможность добавлять больше строки HTML в наш файл app.js, код таким образом довольно быстро станет неаккуратным и неразборчивым.</p> <h3>Добавление HTML</h3> <p>HTML для наших страницы будет выглядеть также довольно просто. Ниже разметка главной страницы:</p> <pre class="brush: html noskimlinks noskimwords">&lt;html&gt;&lt;head&gt;&lt;title&gt;Home Page&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Blog!&lt;/h1&gt;&lt;footer&gt;&lt;p&gt;&lt;a href="/"&gt;Home&lt;/a&gt; ~ &lt;a href="/about"&gt;About Me&lt;/a&gt; ~ &lt;a href="/article"&gt;Some Article&lt;/a&gt;&lt;/p&gt;&lt;/footer&gt;&lt;/body&gt;&lt;/html&gt;</pre> <p> Обратите внимание, что сейчас в разметке нет ничего особенного. Это обычный, статичный HTML, который будет возвращён Express приложением, в таком состоянии, в котором он описан в коде. Обе страницы About и Article ничем не отличаются, кроме title и текста в h1.</p> <p>Как и прежде, запустите команду в командной строке и откройте браузер. (Кстати, во время изучения Node, я всегда забывал остановить до этого запущенный процесс, это было моей самой частой ошибкой). Если у вас всё ещё запущено предыдущее приложение, порт 3000 будет занят. Либо остановите его, либо используйте другой порт для текущего приложения. Вы сможете разобраться в работе этого простого приложения за пару кликов.</p> <p>Теперь давайте добавим динамики статичным страницам.</p> <h3>От статичного к динамичному</h3> <p> Express поддерживает множество различных шаблонизаторов. Шаблонизатор - программное обеспечение, позволяющее использовать html-шаблоны для генерации конечных html-страниц. Команда express может добавить поддержку для Jade, EJS, JSHTML и Hogan. Согласно документации Express, любой шаблонизатор который соответствует определённой подписи в коде Express, будет работать. Разработчики Express также рекомендуют проверить библиотеку <span>consolidate.js</span>, чтобы ознакомиться со списком шаблонизаторов.</p> <p> Лично я большой поклонник Handlebars (handlebarsjs.com). Я использовал его во многих приложениях работающих на стороне клиента, и для меня он одинаково хорошо вписывается в разработку на стороне сервера. Для того чтобы воспользоваться Handlebars вам надо установить библиотеку-обертку под названием <span>hbs</span>. Давайте добавим её к нашему приложению.</p> <pre class="brush: js noskimlinks noskimwords">{"name": "blog2","description": "Blog app","version": "0.0.1","dependencies": {"express": "3.x","hbs":"*"}}</pre> <p> Теперь обновим наш <code>app.js</code>, чтобы использовать данный движок шаблонов:</p> <pre class="brush: js noskimlinks noskimwords">var express = require("express");var app = express();var hbs = require("hbs");app.set("view engine", "html");app.engine("html", hbs.__express);app.get("/", function(req, res) {res.render("index");});app.get("/about", function(req, res) {res.render("about");});app.get("/article", function(req, res) {res.render("article");});app.listen(3000);</pre> <p> Здесь мы делаем несколько важных вещей. Для Handlebars, мы загружаем (с помощью require) библиотеку-обёртку HBS. После чего нам необходимо сообщить Express, чтобы он использовал её. По умолчанию, Handlebars будет обрабатывать файлы с расширением шаблонизатора. В нашем случае - <code>.hbs</code>. Однако мы можем сообщить Express рассматривать HTML файлы, как динамичные, используя "<code>view engine</code>" директиву, это можно увидеть в примере выше. Хоть это и не обязательно, но я предпочитаю работать с HTML файлами. Мой текстовый редактор, в этом случае, будет показывать удобные подсказки в коде и подсветку синтаксиса. Вообще, загрузка шаблонизатора осуществляется с помощью <code>app.engine</code>.</p> <p>Наконец, роуты переключатся на использование нового метода (<code>render</code>) отображения. По умолчанию Express использует папку views, мы можем оставить это без изменений. Так как Express знает файловое расширение, которое мы предпочитаем, можно об этом не беспокоиться. По сути, <code>res.render("что-нибудь")</code> сообщает Express следить за <code>views/что-нибудь.html</code>, после чего парсить это согласно правилам шаблонизатора и возвращать результат браузеру.</p> <p>Вы можете найти данный пример в папке <strong>blog2</strong>, в исходниках к даной статье. Как я говорил ранее, мне нравится продвигаться во время обучения не спеша, несмотря на то что мы не делаем ничего динамичного, я предлагаю вам запустить данный пример в командной строке и убедиться, что вы в состоянии открыть сайт.</p> <h3>Отображение записей блога на главной странице</h3> <p> Таким образом в нашем распоряжении есть динамические шаблоны, давайте сделаем их действительно динамичными. Так как мы создаём блог, мы должны реализовать список записей блога на главной странице, а также возможность использовать определённый движок блога. Конечно мы можем реализовать соединение с MySQL или Mongo, давайте создадим статичный набор данных, а также простую библиотеку-обёртку для них. Ниже показан файл <code>blog.js</code>, который позволяет вывести список записей или показать лишь одну из них.</p> <pre class="brush: js noskimlinks noskimwords">var entries = [{"id":1, "title":"Hello World!", "body":"This is the body of my blog entry. Sooo exciting.", "published":"6/2/2013"},{"id":2, "title":"Eggs for Breakfast", "body":"Today I had eggs for breakfast. Sooo exciting.", "published":"6/3/2013"},{"id":3, "title":"Beer is Good", "body":"News Flash! Beer is awesome!", "published":"6/4/2013"},{"id":4, "title":"Mean People Suck", "body":"People who are mean aren"t nice or fun to hang around.", "published":"6/5/2013"},{"id":5, "title":"I"m Leaving Technology X and You Care", "body":"Let me write some link bait about why I"m not using a particular technology anymore.", "published":"6/10/2013"},{"id":6, "title":"Help My Kickstarter", "body":"I want a new XBox One. Please fund my Kickstarter.", "published":"6/12/2013"}];exports.getBlogEntries = function() {return entries;}exports.getBlogEntry = function(id) {for(var i=0; i &lt; entries.length; i++) {if(entries[i].id == id) return entries[i];}}</pre> <p> Чаще всего, нам понадобятся метод для добавления, редактирования или удаления, но на данный момент нашего функционала вполне достаточно. Давайте посмотрим на обновлённый файл <code>app.js</code>, который использует этот движок.</p> <pre class="brush: js noskimlinks noskimwords">var express = require("express");var app = express();var hbs = require("hbs");var blogEngine = require("./blog");app.set("view engine", "html");app.engine("html", hbs.__express);app.use(express.bodyParser());app.get("/", function(req, res) {res.render("index",{title:"My Blog", entries:blogEngine.getBlogEntries()});});app.get("/about", function(req, res) {res.render("about", {title:"About Me"});});app.get("/article/:id", function(req, res) {var entry = blogEngine.getBlogEntry(req.params.id);res.render("article",{title:entry.title, blog:entry});});app.listen(3000);</pre> <p> Давайте разберёмся с обновлениями, которые мы сделали. (Эту версию можно найти в папке <strong>blog3</strong>). Сначала, мы загружаем наш движок, вызывая require. Тем самым мы можем вызвать его и получить записи. Можно увидеть новую строку под названием <code>bodyParser</code>, пока не обращайте на это внимания.</p> <p> В нашем роутере главной страницы, мы передаём второй аргумент для рендеринга API. Аргумент является объектом с двумя ключами, заголовок (<code>title</code>) и записи (<code>entries</code>). Значения для заголовка - просто строка, однако записи вызвают наш <code>blogEngine</code> API. Вот тут начинается интересное. Любые данные, которые мы передаём будут доступны нашим шаблонам. В зависимости от языка шаблонов, детали как мы будем их использовать могут измениться, но, тем не менее давайте взглянем на главную станицу.</p> <pre class="brush: html noskimlinks noskimwords">&lt;h1&gt;Blog!&lt;/h1&gt;{{#each entries}}&lt;p&gt;&lt;a href="/article/{{id}}"&gt;{{title}}&lt;/a&gt;&lt;br/&gt;Published: {{published}}&lt;/p&gt;{{/each}}</pre> <p> Если вам прежде не доводилось работать с Handlebars, скорее всего вам не составит труда догадаться, что здесь происходит. Директива <code>#each</code> обойдёт массив. Внутри блока я использовал комбинацию Handlebar токенов, которые указывают на данные моего блога, а также HTML для генерации простого списка записей блога. Данная конструкция должна быть знакома, тем кто сталкивался с ColdFusion.</p> <h3>Создание структуры</h3> <p> Думаю вы удивляетесь, а где же остальной HTML. Когда вы используете шаблонизатор в Express, в вашем распоряжении автоматическая поддержка общей структуры (layout). Это значит, что я могу создать основную структуру дизайна сайта и Express добавит данную структуру для соответствующих страниц. Есть соглашение, согласно которому данные файлы носят название <code>layout.что-либо</code>, где "что-либо", является определённым файловым расширением, которые вы используете. Так как мы использует HTML, данный файл будет представлять из себя <code>layout.html</code>:</p> <pre class="brush: html noskimlinks noskimwords">&lt;html&gt;&lt;head&gt;&lt;title&gt;{{title}}&lt;/title&gt;&lt;/head&gt;&lt;body&gt;{{{body}}}&lt;footer&gt;&lt;p&gt;&lt;a href="/"&gt;Home&lt;/a&gt; ~ &lt;a href="/about"&gt;About Me&lt;/a&gt;&lt;/p&gt;&lt;/footer&gt;&lt;/body&gt;&lt;/html&gt;</pre> <p> Не правда-ли это довольно удобно? Страница About не так интересна, так что мы её пропустим, но давайте взглянет на роут article. Теперь он включает в себя токен, <code>:id</code>, в адресе. Express позволяет нам создавать динамичные адреса (URL), которые в дальнейшем будут соответствовать аргументам запроса. Можно заметить что во время работы надо главной страницей, мы создали ссылки, которые выглядят следующим образом: <code>/article/{{id}}</code>.</p> <p>В теории мы могли создать роут для каждой записи блога, но гораздо лучше сделать абстрактный роут, который будет отвечать любому запросу, определённой его форме. Чтобы получить значение, мы добавим ещё один кусочек к строке <code>bodyParser</code>, который мы определили ранее. (Данная функция идёт вместе с фреймворком Connect и она довольно полезна - помогает поддерживать строку запроса и тела форм. Эта функция пригодится почти в каждом Express приложении).</p> <h3>Отображаем отдельные статьи</h3> <p> Так как у нас есть доступ к динамическому значению в конце адреса, мы можем просто-напросто передать его объекту <code>blogEngine</code> и использовать результат, как аргумент нашего представления (view).</p> <p>Ниже файл <code>article.html</code>:</p> <pre class="brush: html noskimlinks noskimwords">&lt;h1&gt;{{blog.title}}&lt;/h1&gt;Published: {{blog.published}}&lt;p/&gt;{{blog.body}}</pre> <p> Теперь у нас есть по настоящему динамичное приложение, но некрасивое. В примере ниже можно увидеть новую, главную страницу:</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=599/net/uploads/2013/07/express-blog3-home.jpg" alt="Знакомство с Express..." title="Знакомство с Express..." width="50" height="50"><br></figure><p> А вот как выглядит отдельная запись блога:</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2013/07/express-blog3-article.jpg" alt="Знакомство с Express..." title="Знакомство с Express..." width="50" height="50"><br></figure><hr><h2>Загримируем свинью!</h2> <p> Добавим основные стили нашему приложению, чтобы оно выглядело немного красивее. В Express есть простой способ добавить статические ресурсы, такие как изображения, библиотеки JavaScript и таблицы стилей. Указывая статичную папку, каждый запрос будет проверять файл согласно определённой папке, для каждого роута. Вот пример финальной версии движка нашего блога (который можно найти в директории <strong>blog4</strong>):</p> <pre class="brush: js noskimlinks noskimwords">app.use(express.static("public"));</pre> <p> На этом этапе, если запросить <code>/foo.css</code>, и в случае если файл <code>foo.css</code> существует в папке <code>public</code>, он будет возвращён. Так как мои навыки дизайна так же хороши, как у любого разработчика, я воспользуюсь простым способом и добавлю копию Bootstrap (http://twitter.github.io/bootstrap/). Я добавил его, а также копию jQuery в папку <code>public.</code></p> <p> После чего в <code>layout.html</code> я могу ссылаться на эти ресурсы. Вот пример ссылки <code>bootstrap.css</code>:</p> <pre class="brush: html noskimlinks noskimwords">&lt;link href="/bootstrap/css/bootstrap.css" rel="stylesheet"&gt;</pre> <p> Теперь Express будет автоматически проверять наличие этого файла в папке <code>public</code>. У вас может быть множество статичных папок, на вроде этой, даже можно указать кастомные префиксы адреса. Результат потрясающий. (Хорошо, по сравнению с первой версией, это пожалуй значительное улучшение!).</p> <p>Главная страница:</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=597/net/uploads/2013/07/express-blog4-home.jpg" alt="Знакомство с Express..." title="Знакомство с Express..." width="50" height="50"><br></figure><p>И страница статьи:</p> <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/2013/07/express-blog4-article.jpg" alt="Знакомство с Express..." title="Знакомство с Express..." width="50" height="50"><br></figure><hr><h2> Что дальше?</h2> <p> Хотите узнать ещё больше? Вот некоторые ссылки, которые могут оказаться полезными.</p> <ul><li>Очевидно, что отправной точкой будет <span>главная страница Express</span>.</li> <li>Можно присоединиться к <span>группе Google</span>, для общения с другими разработчиками.</li> <li>Если хотите быть в курсе всех обновлений, присоединитесь к IRC каналу: #express.</li> <li>Ну и наконец, взгляните на огромное количество примеров на <span>GitHub</span>.</li> </ul>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825563-znakomstvo-s-express" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825563-znakomstvo-s-express" class="tm-article-body__tags-item-link">Web Development</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
30852</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
741</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
