
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Создайте диспетчер контактов с помощью Backbone.js: часть 3... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Создайте диспетчер контактов с помощью Backbone.js: часть 3... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Создайте диспетчер контактов с помощью Backbone.js: часть 3... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Создайте диспетчер контактов с помощью Backbone.js: часть 3... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Добро пожаловать в третью часть нашей серии, посвященной созданию приложений с использованием Backbone. Если вы не читали - 1-ю и-2-ю-части, я настоятельно рекомендую вам это сделать - просто чтобы вы знали, где мы находимся и что мы рассмотрели до сих пор. ...">
<meta property="og:description" content="Добро пожаловать в третью часть нашей серии, посвященной созданию приложений с использованием Backbone. Если вы не читали - 1-ю и-2-ю-части, я настоятельно рекомендую вам это сделать - просто чтобы вы знали, где мы находимся и что мы рассмотрели до сих пор. ...">
<meta name="twitter:description" content="Добро пожаловать в третью часть нашей серии, посвященной созданию приложений с использованием Backbone. Если вы не читали - 1-ю и-2-ю-части, я настоятельно рекомендую вам это сделать - просто чтобы вы знали, где мы находимся и что мы рассмотрели до сих пор. ...">
<meta property="aiturec:description" content="Добро пожаловать в третью часть нашей серии, посвященной созданию приложений с использованием Backbone. Если вы не читали - 1-ю и-2-ю-части, я настоятельно рекомендую вам это сделать - просто чтобы вы знали, где мы находимся и что мы рассмотрели до сих пор. ...">
<meta property="og:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=748/net/uploads/legacy/1147_bb3and4/3/1.png">
<meta property="aiturec:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=748/net/uploads/legacy/1147_bb3and4/3/1.png">
<meta name="twitter:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=748/net/uploads/legacy/1147_bb3and4/3/1.png">
<meta property="vk:image" content="https://cdn.tutsplus.com/cdn-cgi/image/width=748/net/uploads/legacy/1147_bb3and4/3/1.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=748/net/uploads/legacy/1147_bb3and4/3/1.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825652-sozdajte-dispetcher-kontaktov-s-pomoschyu-backbonejs-chast-3.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825652-sozdajte-dispetcher-kontaktov-s-pomoschyu-backbonejs-chast-3.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825652-sozdajte-dispetcher-kontaktov-s-pomoschyu-backbonejs-chast-3.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825652-sozdajte-dispetcher-kontaktov-s-pomoschyu-backbonejs-chast-3.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825652-sozdajte-dispetcher-kontaktov-s-pomoschyu-backbonejs-chast-3.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825652-sozdajte-dispetcher-kontaktov-s-pomoschyu-backbonejs-chast-3.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825652-sozdajte-dispetcher-kontaktov-s-pomoschyu-backbonejs-chast-3.html" title="Создайте диспетчер контактов с помощью Backbone.js: часть 3... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Создайте диспетчер контактов с помощью Backbone.js: часть 3... | envatomarket.ru | norma-studio.github.io" title="Создайте диспетчер контактов с помощью Backbone.js: часть 3... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/45343254534.jpg" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825652-sozdajte-dispetcher-kontaktov-s-pomoschyu-backbonejs-chast-3.html" class="tm-user-info__username" title="
С. Баранов" aria-label="
С. Баранов">
С. Баранов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Создайте диспетчер контактов с помощью Backbone.js: часть 3...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825652-sozdajte-dispetcher-kontaktov-s-pomoschyu-backbonejs-chast-3" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825652-sozdajte-dispetcher-kontaktov-s-pomoschyu-backbonejs-chast-3" class="tm-article-snippet__hubs-item-link"><span>Web Development</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825652-sozdajte-dispetcher-kontaktov-s-pomoschyu-backbonejs-chast-3.html" />
    <link itemprop="image" href="https://cdn.tutsplus.com/cdn-cgi/image/width=748/net/uploads/legacy/1147_bb3and4/3/1.png">
    <meta itemprop="headline name" content="Создайте диспетчер контактов с помощью Backbone.js: часть 3... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Добро пожаловать в третью часть нашей серии, посвященной созданию приложений с использованием Backbone. Если вы не читали - 1-ю и-2-ю-части, я настоятельно рекомендую вам это сделать - просто чтобы вы знали, где мы находимся и что мы рассмотрели до сих пор. ...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Добро пожаловать в третью часть нашей серии, посвященной созданию приложений с использованием Backbone. Если вы не читали - 1-ю и-2-ю-части, я настоятельно рекомендую вам это сделать - просто чтобы вы знали, где мы находимся и что мы рассмотрели до сих пор. ...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Добро пожаловать в третью часть нашей серии, посвященной созданию приложений с использованием Backbone. Если вы не читали - <span>1-ю</span> и <span>2-ю</span> части, я настоятельно рекомендую вам это сделать - просто чтобы вы знали, где мы находимся и что мы рассмотрели до сих пор. </p><p>В первой части мы взяли основной взгляд и модели и коллекции. Во второй части мы рассмотрели маршрутизаторы, события и модули истории. В этой части мы рассмотрим дальнейшие взаимодействия и посмотрим, как мы можем добавлять или удалять модели из коллекции.</p> <p><!--more--></p> <hr><h2>Добавление модели в коллекцию</h2> <p>Если вы вернетесь к первой части, вы вспомните, как мы добавили все наши модели в коллекцию, когда коллекция была инициализирована. Но как мы можем добавить отдельные модели в коллекцию после того, как коллекция уже была инициализирована? На самом деле это очень просто.</p> <p> Мы добавим возможность добавления новых контактов, которые будут включать обновление базового HTML и нашего главного представления. Во-первых, HTML; добавьте следующую маркировку в контейнер контактов:</p> <pre class="brush: html noskimlinks noskimwords">&lt;form id="addContact" action="#"&gt;    &lt;label for="photo"&gt;photo:&lt;/label&gt;&lt;input id="photo" type="file" /&gt;    &lt;label for="type"&gt;Type:&lt;/label&gt;&lt;input id="type" /&gt;    &lt;label for="name"&gt;Name:&lt;/label&gt;&lt;input id="name" /&gt;    &lt;label for="address"&gt;Address:&lt;/label&gt;&lt;input id="address" /&gt;    &lt;label for="tel"&gt;Tel:&lt;/label&gt;&lt;input id="tel" /&gt;    &lt;label for="email"&gt;Email:&lt;/label&gt;&lt;input id="email" /&gt;    &lt;button id="add"&gt;Add&lt;/button&gt;&lt;/form&gt;</pre> <p>Эта простая форма позволит пользователям добавлять новый контакт. Главное, что атрибут <code>id</code> элементов <code>input&gt;</code>соответствует именам атрибутов, используемых нашими моделями, что облегчает получение данных в нужном формате.</p> <p>Затем мы можем добавить обработчик событий в наш основной вид, чтобы можно было собрать данные в форму; добавьте следующий код после существующей пары ключей: значение в объекте <code>events</code>:</p> <pre class="brush: js noskimlinks noskimwords">"click #add": "addContact"</pre> <p>Не забудьте добавить конечную запятую в конец существующей привязки! На этот раз мы укажем событие <code>click</code>, инициированное элементом с <code>id</code> <code>add</code>, который является кнопкой в ​​нашей форме. Обработчиком, который мы связываем с этим событием, является <code>addContact</code>, который мы можем добавить далее. Добавьте следующий код после метода <code>filterByType ()</code> из второй части:</p> <pre class="brush: js noskimlinks noskimwords">addContact: function (e) {    e.preventDefault();    var newModel = {};    $("#addContact").children("input").each(function (i, el) {        if ($(el).val() !== "") {            newModel[el.id] = $(el).val();  }    });    contacts.push(formData);    if (_.indexOf(this.getTypes(), formData.type) === -1) {       this.collection.add(new Contact(formData));        this.$el.find("#filter").find("select").remove().end().append(this.createSelect());     } else {        this.collection.add(new Contact(formData));    }}</pre> <p>Поскольку это обработчик событий, он автоматически получит объект <code>event</code>, который мы можем использовать для предотвращения поведения по умолчанию <code>&lt;button&gt;</code>элемент при его нажатии (что бы отправить форму и перезагрузить страницу-это не то, что мы хотим). Затем мы создаем новый пустой объект и используем метод использования <code>each()</code> jQuery для перебора <code>&lt;input&gt;</code>элемент в нашей <code>addContact</code> форме.</p> <p>В функции обратного вызова передается <code>each()</code> мы сначала проверяем, что поле имеет текст, введенный в него, и если так, мы добавляем новое свойство к объекту с ключа равным <code>id </code>текущего элемента и <code>value</code>, равное его текущему значению. Если поле пусто, свойство не будет установлено, и новая модель будет наследовать любые значения по умолчанию, которые могут быть указаны.</p> <p>Затем мы можем обновить наше локальное хранилище данных новым контактом. Именно здесь мы, вероятно, сохраним новые данные на сервере - если бы у нас был сервер для получения таких запросов. На данный момент мы этого не делаем, поэтому мы просто обновим исходный массив, чтобы теперь, если просмотр фильтруется, новые данные не затерялись. Все, что нам нужно сделать это использовать метод <code>add()</code> коллекции для добавления новых данных к коллекции. Мы можем создать новую модель для передачи в коллекцию в течение вызова <code>add()</code>.</p> <p>И наконец, нам нужно обновить<code>&lt;select&gt;</code>элемент, так что если новый контакт имеет другой тип, то тип доступен для фильтрации. Однако, мы только хотим, отрисовать<code>&lt;select&gt;</code>Если был добавлен новый тип. Мы можем использовать метод <code>indexOf()</code> подчеркивания для поиска через массив для определенного значения. Как родной метод <code>indexOf()</code> JavaScript для строк этот метод вернет <code>-1</code>, если значение не найдено. Мы передаем массив для поиска как первый аргумент <code>indexOf()</code> и значение для поиска в качестве второго.</p> <p>Если значение не найдено, указанный тип должен быть новым, поэтому мы найдем существующее поле выбора и удалим его перед добавлением нового, сгенерированного нашим методом <code>createSelect()</code>. Если тип найден, мы можем просто добавить новую модель без необходимости повторного рендеринга выбора.</p> <hr><h2>Предоставление новой модели</h2> <p>Теперь, когда мы добавили новую модель в коллекцию, мы должны отобразить ее на странице. Для этого мы можем привязать другого обработчика, на этот раз прослушать событие добавления. <code>Добавьте</code> следующую строку кода в метод <code>initialize()</code> коллекции:</p> <pre class="brush: js noskimlinks noskimwords">this.collection.on("add", this.renderContact, this);</pre> <p>Мы снова используем метод <code>on()</code>, чтобы присоединить прослушиватель событий, и поскольку у нас уже есть метод, который создает и отображает отдельные виды, мы просто указываем эту функцию как обработчик. Мы также устанавливаем мастер-представление как этот объект внутри обработчика, как это было с предыдущими обработчиками. На этом этапе мы должны теперь иметь возможность заполнить форму и связать новый контакт со страницей:</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=748/net/uploads/legacy/1147_bb3and4/3/1.png" alt="Создайте диспетчер контактов с помощью Backbone.js: часть 3..." title="Создайте диспетчер контактов с помощью Backbone.js: часть 3..." width="50" height="50"></div> <p>Следует отметить, что если поля формы <code>addContact</code> останутся полностью пустыми, результирующая модель будет почти полностью лишена атрибутов, что вызовет проблемы, когда мы попытаемся манипулировать моделью позже. Один из способов избежать этого - предоставить параметры по умолчанию для большинства атрибутов модели, точно так же, как мы предоставили атрибут <code>фотографии</code> по умолчанию. Если нет разумных значений по умолчанию, которые мы можем использовать, например, для имени контакта, мы можем просто указать пустую строку. Обновите объект по <code>умолчанию</code> в классе <code>Contact</code>, чтобы включить значения по умолчанию для других наших атрибутов:</p> <pre class="brush: js noskimlinks noskimwords">name: "",address: "",tel: "",email: "",type: ""</pre> <hr><h2>Удаление модели из коллекции</h2> <p>Теперь, когда мы знаем, как добавлять модели в коллекцию, мы должны посмотреть, как их можно удалить. Один из способов, которым мы могли бы позволить удалить отдельные модели, заключается в добавлении кнопки удаления к каждому контакту, так что это то, что мы сделаем; сначала нам нужно обновить шаблон для каждого отдельного представления, чтобы он содержал кнопку удаления. Добавьте новую кнопку в конце шаблона:</p> <pre class="brush: js noskimlinks noskimwords">&lt;button class="delete"&gt;Delete&lt;/button&gt;</pre> <p>Это все, что нам понадобится для этого примера. Логику удаления отдельной модели можно добавить в класс представления, который представляет отдельный контакт, поскольку экземпляр представления будет связан с конкретным экземпляром модели. Нам нужно будет добавить привязку события и обработчик события, чтобы удалить модель при нажатии кнопки; добавьте следующий код в конец класса <code>ContactView</code>:</p> <pre class="brush: js noskimlinks noskimwords">events: {    "click button.delete": "deleteContact"},deleteContact: function () {var removedType = this.model.get("type").toLowerCase();    this.model.destroy();    this.remove();    if (_.indexOf(directory.getTypes(), removedType) === -1) {        directory.$el.find("#filter select").children("[value="" + removedType + ""]").remove();    }}</pre> <p>Мы используем объект <code>events</code> для указания привязки события, как мы это делали ранее, с помощью нашего главного представления. На этот раз мы слушаем <code>нажмите</code> события, вызванные <code>&lt;button&gt;</code>, имеет имя класса <code>удалить</code>. Обработчик который привязан к этому событию является <code>deleteContact</code>, который мы добавляем после объекта <code>events</code>.</p> <p>Сначала мы сохраняем тип контакта, который мы только что удалили. Мы должны сделать это значение в нижнем регистре, как и раньше, чтобы гарантировать отсутствие проблем с случаем, когда используется средство просмотра контактов.</p> <p>Затем мы вызываем метод <code>destroy()</code> на модель, связанную с <code>этим</code>, экземпляр представления. Мы можем также удалить представление HTML представления из страницы путем вызова метода <code>remove()</code> jQuery, которая имеет дополнительный бонус очистки любых обработчиков событий, присоединенных к представлению.</p> <p>Наконец, мы получаем все типы моделей в коллекции каталогов и проверяем, сохраняется ли тип связанного с ним контакта только в результирующем массиве. Если это не так, контактов больше нет, поэтому мы должны удалить эту опцию из выбора.</p> <p>Мы выбираем элемент для удаления сначала определяя поле выбора, а затем используя селектор атрибутов  выбираем<code>&lt;option&gt;</code>с атрибут value, который соответствует переменной <code>removedType</code>, которую мы сохраняли в начале. Если мы уберем все контакты определенного типа и затем проверим<code>&lt;select&gt;</code>элемент, мы найдем, что тип отсутствует в раскрывающемся списке:</p> <div class="tutorial_image"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=850/net/uploads/legacy/1147_bb3and4/3/2.png" alt="Создайте диспетчер контактов с помощью Backbone.js: часть 3..." title="Создайте диспетчер контактов с помощью Backbone.js: часть 3..." width="50" height="50"></div> <hr><h2>Удаление модели данных</h2> <p>Хорошо, что подзаголовок немного вводит в заблуждение; я имею в виду, что так же, как и удаление модели и вида, мы также должны удалить исходные данные в нашем массиве контактов, из которых первоначально была построена модель. Если мы этого не сделаем, удаленная модель вернется, когда она будет отфильтрована. В реальном приложении это, вероятно, то, где мы будем синхронизировать с секцией, чтобы сохранить данные.</p> <p>Функциональность для удаления элемента из исходного массива может находиться внутри нашего главного представления; коллекция убьет событие <code>remove</code>, когда какая-либо из моделей будет удалена из коллекции, поэтому мы можем просто привязать обработчик для этого события к коллекции в главном представлении. Добавьте следующую строку кода непосредственно после существующих привязок:</p> <pre class="brush: js noskimlinks noskimwords">this.collection.on("remove", this.removeContact, this);</pre> <p>На данный момент вы должны быть хорошо знакомы с этим утверждением, но в качестве напоминания первый аргумент метода <code>on()</code> - это событие, которое мы слушаем, второе - обработчик, выполняемый при возникновении события, а третий - контекст для использования в качестве этого при выполнении обработчика. Затем мы можем добавить метод <code>removeContact()</code>; после добавления <code>addContact()</code> добавьте следующий код:</p> <pre class="brush: js noskimlinks noskimwords">removeContact: function (removedModel) {    var removed = removedModel.attributes;    if (removed.photo === "/img/placeholder.png") {        delete removed.photo;    }    _.each(contacts, function (contact) {        if (_.isEqual(contact, removed)) {            contacts.splice(_.indexOf(contacts, contact), 1);        }    });}</pre> <p>Основательно помогает передать обработчик модели, которая только что удалена из коллекции. Мы храним ссылку на коллекцию атрибутов, чтобы мы могли сравнить модель, которая была удалена с элементами в нашем исходном массиве контактов. В исходных элементах в массиве контактов не было определено свойство фотографии, но поскольку это указано как свойство по умолчанию, все наши модели наследуют свойство и поэтому не будут сопоставляться с объектами в массиве контактов.</p> <p>В этом примере нам нужно проверить, совпадает ли свойство <code>photo</code> модели с значением по умолчанию, и если это так, мы удаляем свойство <code>photo</code>.</p> <p>Как только это будет сделано, мы можем перебирать каждый элемент в массиве <code>contacts</code> и тестировать его, чтобы увидеть, совпадает ли он с моделью, удаленной из коллекции. Мы можем сравнить каждый элемент с объектом, который мы храним в удаленной переменной, используя метод <code>isEqual()</code> Underscore.</p> <p>Если метод <code>isEqual()</code> возвращает true, мы затем вызываем собственный метод <code>splice()</code> JavaScript в массиве <code>contacts</code>, передавая индекс элемента, подлежащего удалению, и количество элементов для удаления. Индекс получен с использованием метода <code>indexOf()</code> индекса Underscore, который использовался ранее.</p> <p>Теперь, когда нажата кнопка удаления, представление, модель и исходные данные будут стерты из существования. Мы также можем отфильтровать представление, а затем вернуться к просмотру всех контактов, а контакт, который был удален, по-прежнему не отображается.</p> <hr><h2>Работаем над формой</h2> <p>Итак, мы просто сбросили форму <code>addContact</code> на страницу, не так ли? Чтобы закрыть эту часть учебника, мы можем сделать что-то, чтобы скрыть его до тех пор, пока не будет нажата ссылка. Мы можем добавить следующую ссылку в элемент <code>header</code>:</p> <pre class="brush: js noskimlinks noskimwords">&lt;a id="showForm" href="#"&gt;Add new contact&lt;/a&gt;</pre> <p>Чтобы ссылка отображала форму, нам нужно сначала скрыть ее, а затем использовать обработчик событий пользовательского интерфейса, чтобы показать ее. Связывание может быть добавлено к объекту <code>events</code> в классе<code> DirectoryView</code>:</p> <pre class="brush: js noskimlinks noskimwords">"click #showForm": "showForm"</pre> <p>Наш метод <code>showForm()</code> может быть таким же простым (хотя вы, вероятно, захотите сделать с ним немного больше, чем здесь)!</p> <pre class="brush: js noskimlinks noskimwords">showForm: function () {    this.$el.find("#addContact").slideToggle();}</pre> <hr><h2>Итоги</h2> <p>В этом уроке мы рассмотрели только, как новые модели могут быть добавлены в коллекцию и как модели могут быть удалены из коллекции. Мы видели, что методы Backbone, используемые для добавления и удаления моделей, неудивительно, что это методы <code>add()</code> и <code>remove()</code>.</p> <p>Мы также увидели, как мы можем привязывать обработчики к событиям, которые запускаются автоматически, когда эти методы используются для обновления пользовательского интерфейса и коллекции по мере необходимости.</p> <p>Мы также рассмотрели некоторые полезные функции утилиты Underscore, которые мы можем использовать для работы с нашими данными, включая <code>_indexOf()</code>, которая возвращает этот индекс элемента в массиве, и <code>isEqual()</code>, который может использоваться для тщательного сравнения двух объектов, чтобы посмотреть идентичны ли они.</p> <p>Как и в последней части этого урока, мы также видели, как можно писать наши классы таким образом, чтобы их функциональность можно было использовать по возможностям. Например, когда мы добавили новую модель, мы использовали существующий метод <code>renderContact()</code>, определенный в нашем классе <code>DirectoryView</code>, для обработки визуализации HTML для нового контакта.</p> <p>Итак, мы увидели, как добавлять модели и удалять их, присоединяйтесь ко мне в следующей части этой серии, где мы рассмотрим, как редактировать существующие данные модели.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825652-sozdajte-dispetcher-kontaktov-s-pomoschyu-backbonejs-chast-3" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825652-sozdajte-dispetcher-kontaktov-s-pomoschyu-backbonejs-chast-3" class="tm-article-body__tags-item-link">Web Development</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
30597</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
666</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
