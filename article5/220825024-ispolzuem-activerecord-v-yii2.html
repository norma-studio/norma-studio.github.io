
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Используем ActiveRecord в Yii2... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Используем ActiveRecord в Yii2... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Используем ActiveRecord в Yii2... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Используем ActiveRecord в Yii2... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Если у вас возникают вопросы: «Что такое Yii?» Ознакомьтесь с моим предыдущим руководством: Знакомство с Yii Framework, в котором рассмотрены преимущества Yii и представлен обзор изменений в Yii 2.0, выпущенных в октябре 2014 года....">
<meta property="og:description" content="Если у вас возникают вопросы: «Что такое Yii?» Ознакомьтесь с моим предыдущим руководством: Знакомство с Yii Framework, в котором рассмотрены преимущества Yii и представлен обзор изменений в Yii 2.0, выпущенных в октябре 2014 года....">
<meta name="twitter:description" content="Если у вас возникают вопросы: «Что такое Yii?» Ознакомьтесь с моим предыдущим руководством: Знакомство с Yii Framework, в котором рассмотрены преимущества Yii и представлен обзор изменений в Yii 2.0, выпущенных в октябре 2014 года....">
<meta property="aiturec:description" content="Если у вас возникают вопросы: «Что такое Yii?» Ознакомьтесь с моим предыдущим руководством: Знакомство с Yii Framework, в котором рассмотрены преимущества Yii и представлен обзор изменений в Yii 2.0, выпущенных в октябре 2014 года....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/27434/final_image/featured.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/27434/final_image/featured.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/27434/final_image/featured.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/27434/final_image/featured.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/27434/final_image/featured.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825024-ispolzuem-activerecord-v-yii2.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825024-ispolzuem-activerecord-v-yii2.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825024-ispolzuem-activerecord-v-yii2.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825024-ispolzuem-activerecord-v-yii2.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825024-ispolzuem-activerecord-v-yii2.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825024-ispolzuem-activerecord-v-yii2.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825024-ispolzuem-activerecord-v-yii2.html" title="Используем ActiveRecord в Yii2... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Используем ActiveRecord в Yii2... | envatomarket.ru | norma-studio.github.io" title="Используем ActiveRecord в Yii2... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/e_09402063.jpg" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825024-ispolzuem-activerecord-v-yii2.html" class="tm-user-info__username" title="
А. Карпов" aria-label="
А. Карпов">
А. Карпов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Используем ActiveRecord в Yii2...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825024-ispolzuem-activerecord-v-yii2" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Yii" href="https://norma-studio.github.io/article5/220825024-ispolzuem-activerecord-v-yii2" class="tm-article-snippet__hubs-item-link"><span>Yii</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825024-ispolzuem-activerecord-v-yii2.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/27434/final_image/featured.jpg">
    <meta itemprop="headline name" content="Используем ActiveRecord в Yii2... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Если у вас возникают вопросы: «Что такое Yii?» Ознакомьтесь с моим предыдущим руководством: Знакомство с Yii Framework, в котором рассмотрены преимущества Yii и представлен обзор изменений в Yii 2.0, выпущенных в октябре 2014 года....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Если у вас возникают вопросы: «Что такое Yii?» Ознакомьтесь с моим предыдущим руководством: Знакомство с Yii Framework, в котором рассмотрены преимущества Yii и представлен обзор изменений в Yii 2.0, выпущенных в октябре 2014 года....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p><em>Если у вас возникают вопросы: «Что такое Yii?» Ознакомьтесь с моим предыдущим руководством: </em><span><em>Знакомство с Yii Framework</em></span>, в котором рассмотрены преимущества Yii и представлен обзор изменений в Yii 2.0, выпущенных в октябре 2014 года.</p><p>В этой <span>серии статей о программировании в Yii2</span> я рассказывают своим читателям как использовать фреймворк Yii2 для PHP. В сегодняшнем учебнике я расскажу вам об <span>объектно-реляционном отображении</span> в Yii, известном как ORM, для работы с базами данных. Этот шаблон называется <span>Active Record</span> и является ключевым аспектом программирования приложений баз данных в Yii.</p><p>Yii предлагает различные способы программной работы с вашей базой данных, такие как <span>прямые запросы</span> и <span>построитель запросов</span>, но использование Active Record предоставляет полный набор преимуществ для объектно-ориентированного программирования баз данных. Ваша работа становится более эффективной, более безопасной, работает в контексте архитектуры MVC и является переносимой, если вы решите изменить платформу баз данных (например, MySQL на PostgreSQL).</p><p>Следуйте за мной и я подробно расскажу об основах Active Record в Yii.</p><p>Напоминаю, что я активно участвую в обсуждениях, приведенных ниже. Меня особенно интересует, есть ли у вас разные подходы, дополнительные идеи или вы хотите предложить темы для будущих уроков. Если у вас есть вопрос или предложение, отправьте сообщение ниже. Вы также можете связаться со мной прямо в Twitter <span>@reifman</span>.</p><h2>Что такое активная запись?</h2><p><span>Архитектура MVC</span> является одним из ключевых преимуществ в Yii. Active Record предоставляет объектно-ориентированное решение для работы с вашими базами данных, которое тесно интегрировано с Yii-моделями. Согласно <span>Википедии</span>, общий термин «Active Record» был «предложен <span>Мартином Фаулером</span> в его книге «<i>Архитектура корпоративных программных приложений</i>» в 2003 году".</p><p>В <span>документации Yii</span> это описано кратко:</p><blockquote>Класс Active Record связан с таблицей базы данных, экземпляр Active Record соответствует строке этой таблицы, а <em>атрибут</em> экземпляра Active Record представляет значение определенного столбца в этой строке. Вместо написания чистых SQL запросов, вы можете получить доступ к атрибутам Active Record и вызвать методы Active Record для доступа к данным, хранящимся в таблицах базы данных, и управления ими.<br></blockquote><p>Интеграция паттерна Active Record в Yii - сильная сторона фреймворка, но общая для большинства других фреймворков, таких как Ruby on Rails. </p><p>Эта абстракция от моделей к таблицам базы данных позволяет фреймворку выполнять тяжелую работу по обеспечению безопасности, включая защиту от <span>SQL-инъекций</span>.</p><p>Active Record в Yii также поддерживает переносимость во многих базах данных. Вы можете переключаться между базами данных без необходимости менять свой код:</p><ul><li>MySQL 4.1 или более поздние версии</li> <li>PostgreSQL 7.3 или новее</li> <li>SQLite 2 и 3</li> <li>Microsoft SQL Server 2008 или новее</li> <li>CUBRID 9.3 или новее</li> <li>Oracle</li> <li>Sphinx: через <span>yii\sphinx\ActiveRecord</span>, требуется расширение <code>yii2-sphinx</code><br></li> <li>ElasticSearch: через <span>yii\elasticsearch\ActiveRecord</span>, требуется расширение <code>yii2-elasticsearch</code></li> </ul><p>И следующие базы данных NoSQL:</p><ul><li>Redis 2.6.12 или новее: через <span>yii\redis\ActiveRecord</span>, требуется расширение <code>yii2-redis</code></li> <li>MongoDB 1.3.0 или более поздняя версия: через <span>yii\mongodb\ActiveRecord</span>, требуется расширение <code>yii2-mongodb</code></li> </ul><h2>Изучение основ</h2><p>В предыдущем эпизоде <span>«Как программировать с Yii2: работа с базой данных и Active Record»</span> я рассмотрел создание вашей базы данных, то как Yii подключается к ней для каждого сеанса, использование миграций для создания таблиц базы данных и использование Gii (полезный генератор кода Yii) для создания кода модели по умолчанию. Если вы не знакомы со всем этим, просмотрите этот эпизод.</p><p>В данном эпизоде я больше сконцентрируюсь на использовании Active Record в вашем коде.</p><h3>Объявление класса модели Active Record<br></h3><p>Во-первых, позвольте мне рассмотреть, как преобразовать модель Yii для использования Active Record. Я воспользуюсь примером модели, которую я создал в серии<span> «Создаем свой стартап»</span>. Эта серия покажет вам, как я с нуля создаю свой стартап, <span>Meeting Planner</span>, в Yii2.</p><p>Я воспользуюсь примером простой модели, которую я создал под названием Launch, которая позволяет посетителям домашней страницы предоставлять свой адрес электронной почты, если они хотят получать уведомление, когда продукт вышел из превью и полностью запущен.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=850/uploads/users/317/posts/27434/image/launch%20ux.jpg" alt="Используем ActiveRecord в Yii2..." title="Используем ActiveRecord в Yii2..." width="50" height="50"></figure><p>Использование Active Record в модели довольно просто; Обратите внимание, что <code class="inline">class Launch extends \yii\db\ActiveRecord</code>:</p><pre class="brush: php noskimlinks noskimwords">&lt;?phpnamespace frontend\models;use Yii;use yii\db\ActiveRecord;/** * This is the model class for table "launch". * * @property integer $id * @property string $email * @property string $ip_addr * @property integer $status * @property integer $created_at * @property integer $updated_at */class Launch extends \yii\db\ActiveRecord{  const STATUS_REQUEST =0;    /**     * @inheritdoc     */    public static function tableName()    {        return "launch";    }</pre><p>И это все.</p><h3>Создание запросов</h3><p>Давайте рассмотрим некоторые распространенные запросы Active Record. </p><h4>Индивидуальные записи</h4><p>Если у вас есть идентификатор записи, который часто мы получаем из параметра запроса в контроллере, то будет довольно легко найти требуемую запись:</p><pre class="brush: php noskimlinks noskimwords">public function actionSomething($id){  $model = Launch::findOne($id);</pre><p>Это идентично:</p><pre class="brush: php noskimlinks noskimwords">$model = Launch::find()    -&gt;where(["id" =&gt; $id])    -&gt;one();</pre><p>Вы также можете расширить <code class="inline">-&gt;where</code> массив большим количеством полей или булевых условий:</p><pre class="brush: php noskimlinks noskimwords">$model = Launch::find()    -&gt;where(["id" =&gt; $id,"status"=&gt;Launch::ACTIVE_REQUEST])    ...    //equivalent to$model = Launch::find()    -&gt;where(["id" =&gt; $id)    -&gt;andWhere(["status"=&gt;Launch::ACTIVE_REQUEST])    -&gt;orWhere(["status"=&gt;Launch::FUTURE_REQUEST])    ...    </pre><h4>Несколько записей</h4><p>Вот пример поиска всех записей, которые соответствуют определенному <code class="inline">status</code>, отсортированные по <code class="inline">$id</code>:</p><pre class="brush: php noskimlinks noskimwords">$people = Launch::find()  -&gt;where(["status" =&gt; Launch::STATUS_REQUEST])  -&gt;orderBy("id")  -&gt;all();</pre><p>Метод <code class="inline">-&gt;all();</code> выбирает все записи, а не только одну. В переменную <code class="inline">$people</code> возвращается массив объектов модели. В противном случае, когда нет условий, вы можете получить доступ ко всем записям с помощью <code class="inline">-&gt;findAll();</code></p><h4>Возвращение массива</h4><p>Использование <code class="inline">indexBy</code> возвращает массив элементов, индексированных по <code class="inline">id</code>:</p><pre class="brush: php noskimlinks noskimwords">$people = Launch::find()    -&gt;indexBy("id")    -&gt;all();</pre><p>Альтернативно, вы можете вернуть ассоциативный массив с <code class="inline">-&gt;asArray()</code>:</p><pre class="brush: php noskimlinks noskimwords">$people = Launch::find()    -&gt;asArray()    -&gt;all();</pre><p><em><strong>Примечание</strong></em>. В документация Yii сказано:<em> «Хотя этот метод экономит память и повышает производительность, он расположен ближе к нижнему уровню абстракции БД, и вы потеряете большинство функций Active Record»</em>.</p><h4>Подсчет записей</h4><p>Вы также можете вернуть только <code class="inline">count</code> записей из запроса:</p><pre class="brush: php noskimlinks noskimwords">$count = Launch::find()    -&gt;where(["status" =&gt; Launch::STATUS_REQUEST])    -&gt;count();</pre><p>Для подсчета статистики я использую много значений в Планировщике встреч; узнайте больше в <span>нашем эпизоде про панель Dashboard</span>:</p><pre class="brush: php noskimlinks noskimwords">// calculate  $count_meetings_completed$hd-&gt;count_meetings_completed = Meeting::find()-&gt;where(["status"=&gt;Meeting::STATUS_COMPLETED])-&gt;andWhere("created_at&lt;".$since)-&gt;count();;// calculate  $count_meetings_expired$hd-&gt;count_meetings_expired = Meeting::find()-&gt;where(["status"=&gt;Meeting::STATUS_EXPIRED])-&gt;andWhere("created_at&lt;".$since)-&gt;count();;// calculate  $count_meetings_planning$hd-&gt;count_meetings_planning = Meeting::find()-&gt;where("status&lt;".Meeting::STATUS_COMPLETED)-&gt;andWhere("created_at&lt;".$since)-&gt;count();;// calculate  $count_places$hd-&gt;count_places = Place::find()-&gt;where("created_at&gt;".$after)-&gt;andWhere("created_at&lt;".$since)-&gt;count();</pre><h3>Доступ к данным</h3><p>Когда вы запрашиваете данные, такие как отдельная модель, легко получить доступ к данным как к объекту модели:</p><pre class="brush: php noskimlinks noskimwords">$model = Launch::findOne($id);  $id = $model-&gt;id;$email = $model-&gt;email;</pre><p>Я часто обрабатываю массивы таким образом:</p><pre class="brush: php noskimlinks noskimwords">$users = User::findAll();foreach ($users as $u) { $id = $u-&gt;id; $email = $u-&gt;email;</pre><h3>Массовое присвоение</h3><p>Вы также можете быстро присвоить массив записи модели с помощью ActiveRecord:</p><pre class="brush: php noskimlinks noskimwords">$values = [    "name" =&gt; "James",    "email" =&gt; "james@example.com",];$customer = new Customer();$customer-&gt;attributes = $values;$customer-&gt;save();</pre><p>Это часто <span>используется для заполнения данных модели после отправки формы</span>:</p><pre class="brush: php noskimlinks noskimwords">if (isset($_POST["FormName"])) {    $model-&gt;attributes = $_POST["FormName"];    if ($model-&gt;save()) {        // handle success    }}</pre><p>Или вы можете использовать <code class="inline">-&gt;load()</code> для этого:</p><pre class="brush: php noskimlinks noskimwords">if ($model-&gt;load(Yii::$app-&gt;request-&gt;post()) &amp;&amp; $model-&gt;save()) {...}</pre><p>Генератор кода Yii Gii отлично подходит для создания моделей с использованием ActiveRecord, который может сгенерировать много полезного кода, как например модели, контроллеры, формы, отображение и т.д.</p><h3>Сохранение данных</h3><p>Как вы можете видеть выше, сохранить данные в Active Record также легко. В этом примере из документации Yii создается и сохраняется новая запись, а затем запись загружается по идентификатору, и сохраняются обновления:</p><pre class="brush: php noskimlinks noskimwords">// insert a new row of data$customer = new Customer();$customer-&gt;name = "James";$customer-&gt;email = "james@example.com";$customer-&gt;save();// update an existing row of data$customer = Customer::findOne(123);$customer-&gt;email = "james@newexample.com";$customer-&gt;save();</pre><h3>Удаление записей</h3><p>Удаление записи еще проще:</p><pre class="brush: php noskimlinks noskimwords">$u = User::findOne(99);$u-&gt;delete();</pre><h3>Обновление счетчиков</h3><p>Yii также предлагает удобные приращения счетчика. Предположим, пользователь планирует другое собрание, а я отслеживаю их кол-во в таблице пользователей:</p><pre class="brush: php noskimlinks noskimwords">$u = User::findOne(99);$u-&gt;updateCounters(["meeting_count"=&gt;1]);// equivalent to// UPDATE `User` SET `meeting_count` = `meeting_count` + 1 WHERE `id` = 99</pre><h3>Связи</h3><p>Связывание таблиц по индексам - одна из самых мощных возможностей Active Record. Например, в Planner Meeting каждое собрание может иметь 0 или более <code class="inline">MeetingPlaces</code>. Модель Meeting.php определяет реляционный ActiveQuery для этого:</p><pre class="brush: php noskimlinks noskimwords">* @property MeetingPlace[] $meetingPlaces/** * @return \yii\db\ActiveQuery */public function getMeetingPlaces(){    return $this-&gt;hasMany(MeetingPlace::className(), ["meeting_id" =&gt; "id"]);}</pre><p>Затем я могу получить доступ ко всем местам встречи с помощью свойства <code class="inline">$meetingPlaces</code>. Ниже я загружаю собрание и перебираю все его <code class="inline">meetingPlaces</code> довольно легко, как если бы это был встроенный массив подобъектов:</p><pre class="brush: php noskimlinks noskimwords">$mtg=Meeting::find()-&gt;where(["id"=&gt;$meeting_id])-&gt;one();foreach ($mtg-&gt;meetingPlaces as $mp) {  ...}</pre><p>Конечно, все зависит от создания внешнего ключа при создании таблицы в ее миграции:</p><pre class="brush: php noskimlinks noskimwords">$this-&gt;createTable("{{%meeting_place}}", [          "id" =&gt; Schema::TYPE_PK,          "meeting_id" =&gt; Schema::TYPE_INTEGER." NOT NULL",          "place_id" =&gt; Schema::TYPE_INTEGER." NOT NULL",          "suggested_by" =&gt; Schema::TYPE_BIGINT." NOT NULL",          "status" =&gt; Schema::TYPE_SMALLINT . " NOT NULL DEFAULT 0",          "created_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",          "updated_at" =&gt; Schema::TYPE_INTEGER . " NOT NULL",      ], $tableOptions);      $this-&gt;addForeignKey("fk_meeting_place_meeting",        "{{%meeting_place}}", "meeting_id", "{{%meeting}}",        "id", "CASCADE", "CASCADE");      </pre><h2>Что дальше<br></h2><p>Надеюсь, вы получили простое представление об удивительной популярности Active Records. Сюда также входят жизненные циклы, транзакции и блокировка, о которых я могу написать в будущем. Если вы хотите сделать шаг вперед, Yii2 предлагает две большие области для более подробного изучения в своей документации: <span>Yii2 Руководство по Active Record</span> и <span>функциональные спецификации Yii2 Active Record</span>. Это хорошо написанные статьи.</p><p>Следите за предстоящими уроками в серии <span>Программирование на Yii2</span>, где мы продолжаем погружаться в различные аспекты фреймворка. Вы также можете ознакомиться с вышеупомянутой статьей «<span>Создание своего стартапа на PHP</span>».</p><p>Если вы хотите знать, когда появится следующий учебник по Yii2, следуйте за мной <span>@reifman </span>в Twitter или <span>проверьте мою страницу инструктора</span>. <br></p><h2>Ссылки по теме</h2><ul><li> <span>Программируем на Yii2: Работа с базой данных и Active Record (Envato Tuts +)</span><br></li> <li><span>Yii2 Руководство по Active Record</span></li> <li><span>Функциональная спецификация Active Record Yii2</span></li> <li><span>Шаблон Active Record (Википедия)</span></li> <li> <span>Yii2 Developer Exchange</span>, мой ресурсный сайт Yii2</li> </ul>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825024-ispolzuem-activerecord-v-yii2" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Yii" href="https://norma-studio.github.io/article5/220825024-ispolzuem-activerecord-v-yii2" class="tm-article-body__tags-item-link">Yii</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
39985</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
620</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
