
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Создание API REST с помощью AWS SimpleDB и Node.js... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Создание API REST с помощью AWS SimpleDB и Node.js... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Создание API REST с помощью AWS SimpleDB и Node.js... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Создание API REST с помощью AWS SimpleDB и Node.js... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="SimpleDB - это удаленная база данных, прелагаемая Amazon Web Services (AWS). Мир хранилищ данных обычно делится на SQL и NoSQL, основываясь на использовании (или неприменении) языка SQL. Хранилища данных NoSQL обычно основаны на более простой настройке ключа / значения. SimpleDB ограничивает эту строку - это хранилище ключей / значений и также може...">
<meta property="og:description" content="SimpleDB - это удаленная база данных, прелагаемая Amazon Web Services (AWS). Мир хранилищ данных обычно делится на SQL и NoSQL, основываясь на использовании (или неприменении) языка SQL. Хранилища данных NoSQL обычно основаны на более простой настройке ключа / значения. SimpleDB ограничивает эту строку - это хранилище ключей / значений и также може...">
<meta name="twitter:description" content="SimpleDB - это удаленная база данных, прелагаемая Amazon Web Services (AWS). Мир хранилищ данных обычно делится на SQL и NoSQL, основываясь на использовании (или неприменении) языка SQL. Хранилища данных NoSQL обычно основаны на более простой настройке ключа / значения. SimpleDB ограничивает эту строку - это хранилище ключей / значений и также може...">
<meta property="aiturec:description" content="SimpleDB - это удаленная база данных, прелагаемая Amazon Web Services (AWS). Мир хранилищ данных обычно делится на SQL и NoSQL, основываясь на использовании (или неприменении) языка SQL. Хранилища данных NoSQL обычно основаны на более простой настройке ключа / значения. SimpleDB ограничивает эту строку - это хранилище ключей / значений и также може...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/1197/posts/26086/image/grid.png">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/1197/posts/26086/image/grid.png">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/1197/posts/26086/image/grid.png">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/1197/posts/26086/image/grid.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/1197/posts/26086/image/grid.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825186-sozdanie-api-rest-s-pomoschyu-aws-simpledb-i-nodejs.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825186-sozdanie-api-rest-s-pomoschyu-aws-simpledb-i-nodejs.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825186-sozdanie-api-rest-s-pomoschyu-aws-simpledb-i-nodejs.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825186-sozdanie-api-rest-s-pomoschyu-aws-simpledb-i-nodejs.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825186-sozdanie-api-rest-s-pomoschyu-aws-simpledb-i-nodejs.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825186-sozdanie-api-rest-s-pomoschyu-aws-simpledb-i-nodejs.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825186-sozdanie-api-rest-s-pomoschyu-aws-simpledb-i-nodejs.html" title="Создание API REST с помощью AWS SimpleDB и Node.js... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Создание API REST с помощью AWS SimpleDB и Node.js... | envatomarket.ru | norma-studio.github.io" title="Создание API REST с помощью AWS SimpleDB и Node.js... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/543234456.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825186-sozdanie-api-rest-s-pomoschyu-aws-simpledb-i-nodejs.html" class="tm-user-info__username" title="
А. Гаврилов" aria-label="
А. Гаврилов">
А. Гаврилов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Создание API REST с помощью AWS SimpleDB и Node.js...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825186-sozdanie-api-rest-s-pomoschyu-aws-simpledb-i-nodejs" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Node.js" href="https://norma-studio.github.io/article5/220825186-sozdanie-api-rest-s-pomoschyu-aws-simpledb-i-nodejs" class="tm-article-snippet__hubs-item-link"><span>Node.js</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825186-sozdanie-api-rest-s-pomoschyu-aws-simpledb-i-nodejs.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/1197/posts/26086/image/grid.png">
    <meta itemprop="headline name" content="Создание API REST с помощью AWS SimpleDB и Node.js... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="SimpleDB - это удаленная база данных, прелагаемая Amazon Web Services (AWS). Мир хранилищ данных обычно делится на SQL и NoSQL, основываясь на использовании (или неприменении) языка SQL. Хранилища данных NoSQL обычно основаны на более простой настройке ключа / значения. SimpleDB ограничивает эту строку - это хранилище ключей / значений и также може...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">SimpleDB - это удаленная база данных, прелагаемая Amazon Web Services (AWS). Мир хранилищ данных обычно делится на SQL и NoSQL, основываясь на использовании (или неприменении) языка SQL. Хранилища данных NoSQL обычно основаны на более простой настройке ключа / значения. SimpleDB ограничивает эту строку - это хранилище ключей / значений и также може...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p><span>SimpleDB</span> - это удаленная база данных, прелагаемая Amazon Web Services (AWS). Мир хранилищ данных обычно делится на SQL и NoSQL, основываясь на использовании (или неприменении) языка SQL. Хранилища данных NoSQL обычно основаны на более простой настройке ключа / значения. SimpleDB ограничивает эту строку - это хранилище ключей / значений и также может использовать вариант SQL для извлечения. Большинство языков SQL основаны на схеме, в которой указаны строки и столбцы данных, но SimpleDB - это база данных без схемы, создающая очень гибкий хранилище данных.<br></p><p>В модели базы данных SimpleDB у вас есть <b>элементы, атрибуты и значения.</b>  Каждая строка в базе данных является <b>элементом</b> и может быть идентифицирована уникальным и назначаемым именем элемента. Каждый элемент может иметь до 256 пар <b>атрибутов</b> и <b>значений</b>. Неожиданным аспектом SimpleDB является то, что атрибут может содержать более одной пары на элемент. Я думаю, что лучший способ подумать о SimpleDB - подумать о электронной таблице, но вместо каждого пересечения столбца / строки, представляющего одно значение, он представляет собой массив значений.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/1197/posts/26086/image/grid.png" alt="Создание API REST с помощью AWS SimpleDB и Node.js..." title="Создание API REST с помощью AWS SimpleDB и Node.js..." width="50" height="50"></figure><p>Эта диаграмма представляет два элемента, хранящихся в <i>домене</i> SimpleDB. Термин <i>домен</i> аналогичен «таблице» в других базах данных. </p><p>Первый столбец - это имя элемента - это единственный столбец, в котором у вас может быть только одно значение, и вы можете считать его уникальным столбцом индекса. </p><p>Остальные четыре столбца (<em>домашние животные</em>, <em>автомобили</em>, <em>мебель</em> и <em>телефоны</em>) представляют собой атрибуты, которые в настоящее время находятся в этом домене - вы не ограничены этим, поэтому каждый элемент может иметь совершенно уникальный набор атрибутов. В этих данных атрибут <i>pets</i> на элементе <i>personInventory1</i> имеет три пары; выраженный в JSON, он будет выглядеть примерно так:</p><pre class="brush: javascript noskimlinks noskimwords">{ "Name" : "pets", "Value" : "dog" }, { "Name" : "pets", "Value" : "cat" }, { "Name" : "pets", "Value" : "fish" }</pre><p>С другой стороны, элемент <em>personInventory2</em> имеет только одну пару:</p><pre class="brush: javascript noskimlinks noskimwords">{ "Name" : "pets", "Value" : "cat" }</pre><p>Хотя вам не нужно указывать одинаковые атрибуты для каждого элемента, вам нужно предоставить хотя бы одну пару. Это означает, что у вас не может быть «пустой» элемент. Каждый атрибут может иметь значение до 1 КБ, поэтому это означает, что каждый элемент функционально ограничен 256 КБ, из-за предела 1 кб и предела 256 пар.</p><p>SimpleDB является распеределенной бд, у которой есть некоторые отличительные черты, которые вам нужно понять и имейте в виду при разработке своего приложения. Будучи распределенной базой данных, вся группа машин будет реагировать на ваши запросы, и ваши данные будут реплицироваться на всех этих серверах. Это распределение будет полностью прозрачным для вашей программы, но оно вводит возможность проблем согласованности - ваши данные не могут быть гарантированы на всех серверах изначально. </p><p>Не паникуйте: это не так плохо, как кажется по нескольким причинам. С SimpleDB согласованность не обещана, но обычно она довольно хороша и быстро достигает всех узлов из моего опыта. Проектирование вокруг этого также не так сложно - обычно вы пытаетесь избежать немедленного чтения записи, которую вы только что написали. Наконец, SimpleDB имеет возможность выполнять последовательные чтения, но они медленнее и могут потреблять больше ресурсов. Если ваше приложение требует последовательного чтения каждый раз, вам может потребоваться пересмотреть использование SimpleDB в качестве хранилища данных, но для многих приложений это может быть вполне приемлимым.</p><p>С другой стороны, распределенный характер также предоставляет SimpleDB несколько преимуществ, которые хорошо сочетаются со средой Node.js. Поскольку у вас нет одного сервера, отвечающего на ваши запросы, вам не нужно беспокоиться о нагрузке на сервисы, и вы можете добиться хорошей производительности, сделав много параллельных запросов к SimpleDB. Параллельные и асинхронные запросы - это то, с чем легко справляется Node.js.</p><p>В отличие от многих услуг AWS, для управления SimpleDB нет консоли Amazon. К счастью, есть хорошая консоль управления в браузере в виде плагина Google Chrome, <span>SdbNavigator</span>. В SdbNavigator вы можете добавлять или удалять домены, вставлять, обновлять и удалять элементы, изменять атрибуты и выполнять запросы.</p><h2>AWS SDK</h2><p>Теперь, когда мы узнали о службе SimpleDB, давайте начнем писать наш сервер REST. Во-первых, нам нужно установить AWS SDK. Этот SDK обрабатывает не только SimpleDB, но и все службы AWS, поэтому вы можете уже включать его в файл package.json. Чтобы установить SDK, запустите в командной строке:</p><pre class="brush: bash noskimlinks noskimwords">npm install aws-sdk —-save</pre><p>Чтобы использовать SimpleDB, вам также необходимо получить свои <span>учетные данные AWS</span>, которые включают ключ доступа и секретный ключ. SimpleDB - это услуга с «оплатой по мере необходимости», но AWS в настоящее время включает в себя щедрое бесплатное предложение для SimpleDB. </p><p><em>Предупреждение:</em> <em>как и с любым сервисом pay-as-you-go, имейте в виду, что можно писать код, который может набирать большие счета, поэтому вы захотите следить за своим использованием и хранить свои учетные данные в приватном режиме и безопасно.</em> </p><p>После того, как вы установили AWS SDK и приобрели свои учетные данные, вам нужно настроить SimpleDB в своем коде. В этом примере мы будем использовать учетные данные AWS, хранящиеся в файле JSON в вашем домашнем каталоге. Во-первых, вам нужно будет включить модуль SDK, создать объект AWS и, наконец, настроить свой интерфейс SimpleDB.</p><pre class="brush: javascript noskimlinks noskimwords">var  aws         = require("aws-sdk"),  simpledb;aws.config.loadFromPath(process.env["HOME"] + "/aws.credentials.json");//We"ll use the Northern Virginia datacenter, change the region / endpoint for other datacenters https://docs.aws.amazon.com/general/latest/gr/rande.html#sdb_regionsimpledb = new aws.SimpleDB({  region    : "US-East",  endpoint  : "https://sdb.amazonaws.com"});</pre><p>Обратите внимание, что мы используем конкретный ендпоинт и регион. Каждый центр данных полностью независим, поэтому, если вы создадите Домен с именем «<em>mysuperawesomedata</em>» в Северной Вирджинии, он не будет реплицироваться и не находиться в центре данных Сан-Паулу, например.</p><p>Объект SimpleDB, созданный с помощью <code class="inline">new aws.SimpleDB</code>, будет содержать все необходимые методы для взаимодействия с SimpleDB. <span>AWS SDK для SimpleDB имеет только несколько методов</span>:</p><p><b>Групповые операции</b></p><ul><li>batchDeleteAttributes</li> <li>batchPutAttributes</li> </ul><p><b>Управление доменами и информация</b></p><ul><li>CreateDomain</li> <li>deleteDomain</li> <li>domainMetadata</li> <li>listDomains</li> </ul><p><b>Манипуляция Item / Attribute</b></p><ul><li>deleteAttributes</li> <li>GetAttributes</li> <li>putAttributes</li> </ul><p><b>Запросы</b></p><ul><li> select</li></ul><p>В этом уроке мы будем иметь дело только с манипуляцией Item / Attribute и Querying; в то время как другие категории полезны, многие приложения не будут им пользоваться.</p><h2>Тестовые данные</h2><p>Используя SdbNavigator, введите ключи доступа и безопасности в инструмент, выберите «US-East» и нажмите «Подключиться».</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/1197/posts/26086/image/connect.png" alt="Создание API REST с помощью AWS SimpleDB и Node.js..." title="Создание API REST с помощью AWS SimpleDB и Node.js..." width="50" height="50"></figure><p>Как только вы успешно подключитесь, давайте создадим домен для тестирования. Нажмите <strong>Add domain</strong>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=440/uploads/users/1197/posts/26086/image/Screen%20Shot%202016-02-21%20at%202.06.57%20PM.png" alt="Создание API REST с помощью AWS SimpleDB и Node.js..." title="Создание API REST с помощью AWS SimpleDB и Node.js..." width="50" height="50"></figure><p>Затем введите доменное имя «sdb-rest-tut» и нажмите «<strong>ОК</strong>».</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=554/uploads/users/1197/posts/26086/image/Screen%20Shot%202016-02-21%20at%202.07.17%20PM.png" alt="Создание API REST с помощью AWS SimpleDB и Node.js..." title="Создание API REST с помощью AWS SimpleDB и Node.js..." width="50" height="50"></figure><p>Теперь, когда вы создали домен, давайте введем некоторые тестовые данные. Нажмите <strong>Add property</strong> и добавьте свойство «colors». Как правило, я обычно называю свойства во множественном числе, чтобы отражать многозначную природу SimpleDB.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=596/uploads/users/1197/posts/26086/image/Screen%20Shot%202016-02-21%20at%202.22.34%20PM.png" alt="Создание API REST с помощью AWS SimpleDB и Node.js..." title="Создание API REST с помощью AWS SimpleDB и Node.js..." width="50" height="50"></figure><p>Наконец, мы нажмем <strong>Add record</strong>, чтобы создать наш первый элемент SimpleDB. В столбце ItemName() введите уникальное имя элемента. Причуда SdbNavigator заключается в том, что по умолчанию он будет принимать только одно значение для каждого элемента, но это скрывает тот факт, что свойство может содержать несколько значений. Чтобы ввести несколько значений, щелкните <strong>S</strong> по правому краю столбца свойств.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/1197/posts/26086/image/Screen%20Shot%202016-02-21%20at%202.29.02%20PM.png" alt="Создание API REST с помощью AWS SimpleDB и Node.js..." title="Создание API REST с помощью AWS SimpleDB и Node.js..." width="50" height="50"></figure><p>В новом окне выберите <strong>Array</strong>, чтобы ввести несколько значений. В столбце <strong>Value</strong> введите «red», а затем нажмите <strong>Add value</strong> и введите «blue».</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/1197/posts/26086/image/Screen%20Shot%202016-02-21%20at%202.30.09%20PM.png" alt="Создание API REST с помощью AWS SimpleDB и Node.js..." title="Создание API REST с помощью AWS SimpleDB и Node.js..." width="50" height="50"></figure><p>Наконец, нажмите <strong>Update</strong>, чтобы сохранить изменения в этой строке.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/1197/posts/26086/image/Screen%20Shot%202016-02-21%20at%202.32.07%20PM.png" alt="Создание API REST с помощью AWS SimpleDB и Node.js..." title="Создание API REST с помощью AWS SimpleDB и Node.js..." width="50" height="50"></figure><p>Теперь, когда мы ввели некоторые тестовые данные, сделаем первый запрос SimpleDB от Node. Мы просто получим все в Домене, который на данный момент будет всего лишь одной строкой.</p><pre class="brush: javascript noskimlinks noskimwords">var  aws         = require("aws-sdk"),  simpledb;aws.config.loadFromPath(process.env["HOME"] + "/aws.credentials.json");simpledb = new aws.SimpleDB({  region       : "US-East",  endpoint : "https://sdb.amazonaws.com"});simpledb.select({  SelectExpression  : "select * from `sdb-rest-tut` limit 100"}, function(err,resp) {  if (err) {    console.error(err);  } else {    console.log(JSON.stringify(resp,null," "));  }});</pre><p>Ответ будет отправлен на консоль. Вот ответ, поясненный для объяснения:</p><pre class="brush: javascript noskimlinks noskimwords">{ "ResponseMetadata": {  "RequestId": "...",             //Every request made to SimpleDB has a request ID  "BoxUsage": "0.0000228616"      //This is how your account is charged, as of time of writing US-East region is 14 US cents per hour, so this request costs 0.00032 cents + the transfer cost (if you are currently outside of your free tier) }, "Items": [                       //For a Select, your response will be in the "Items" object property  {   "Name": "myfirstitem",         //this is the itemName()   "Attributes": [                //these are the attribute pairs    {     "Name": "colors",            //attribute name     "Value": "red"               //value - note that every Value is a string, regardless of the contents    },    {     "Name": "colors",            //Since the attribute name is repeated, we can see that `colors` has more than one value     "Value": "blue"    }   ]  } ]}</pre><h2>Сервер REST</h2><p>Поскольку мы будем создавать REST-сервер, который хранит данные в SimpleDB, важно понять, что делает сервер REST. REST означает <strong>RE</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer. Сервер REST - это просто сервер, который использует стандартные HTTP-механизмы в качестве интерфейса для ваших данных. Часто REST используется для связи между серверами, но вы можете использовать REST-серверы с клиентом через библиотеки JavaScript, такие как jQuery или Angular. Однако, как правило, конечный пользователь не будет взаимодействовать напрямую с сервером REST.</p><p>Интересно, что AWS SDK фактически использует протокол REST для взаимодействия с SimpleDB, поэтому может показаться странным создание сервера REST для другого сервера REST. Вы не хотели бы использовать SimpleDB REST API напрямую, потому что вам нужно аутентифицировать ваши запросы, что может привести к опасности вашей учетной записи AWS. Кроме того, написав сервер, вы сможете добавить слой абстракции и проверки в хранилище данных, что значительно облегчит работу с остальной частью вашего приложения.</p><p>В этом уроке мы будем создавать базовые функции CRUD + L, то есть <strong>C</strong>reate, <strong>R</strong>ead, <strong>U</strong>pdate, <strong>D</strong>elete и <strong>L</strong>ist. Если вы думаете об этом, вы можете разбить большинство приложений на CRUD + L. С помощью REST вы будете использовать ограниченное количество путей и несколько HTTP-методов или глаголов для создания интуитивно понятного API. Большинство разработчиков знакомы с некоторыми из HTTP-глаголов, а именно GET и POST, поскольку они чаще всего используются в веб-приложениях, но есть <span>несколько других</span>.</p><table><thead><tr><th>Operation</th> <th>HTTP-глагол</th> </tr></thead><tbody><tr><td>Create</td> <td>POST</td> </tr><tr><td>Read</td> <td>GET</td> </tr><tr><td>Update</td> <td>PUT</td> </tr><tr><td>Delete</td> <td>DELETE</td> </tr><tr><td>List</td> <td>GET</td> </tr></tbody></table><p>Обратите внимание, что Read и List используют один и тот же глагол; мы будем использовать несколько разные пути, чтобы различать их. Мы используем POST для представления Create, поскольку создание не считается idempotent. <em>Idempotent</em> означает, что несколько идентичных вызовов будут иметь тот же результат для пользователя и ваших данных, поэтому обновление (aka PUT) будет считаться идемпотентным.</p><p>В качестве нашего примера мы создадим персональный сервер инвентаризации - базу данных, чтобы сохранить все, что у вас есть. Вот как будут выглядеть пути:</p><table><thead><tr><th>Operation</th> <th>HTTP-глагол</th> <th>Path</th> </tr></thead><tbody><tr><td>Create</td> <td>POST</td> <td>/inventory</td> </tr><tr><td>Read</td> <td>GET</td> <td>/inventory/1234</td> </tr><tr><td>Update</td> <td>PUT</td> <td>/inventory/1234</td> </tr><tr><td>/inventory/1234</td> <td>DELETE</td> <td>/inventory/1234</td> </tr><tr><td>List</td> <td>GET</td> <td>/ инвентарь</td> </tr></tbody></table><p><em>1234</em> является заполнителем для идентификатора человека (ID) - обратите внимание, что в «create» и «list» не имеют идентификатора. В случае создания будет создан идентификатор, и со списком мы получим все имена, поэтому нам не нужен конкретный идентификатор. </p><h2>Создание сервера</h2><p>Чтобы начать работу, давайте установим <span>Express</span>, фреймворка для HTTP-сервера Node.js:</p><pre class="brush: bash noskimlinks noskimwords">npm install express —-save</pre><p>Экспресс управляет большинством мелочей при настройке сервера, но он не содержит каких-либо средств для обработки тела запроса HTTP, поэтому нам нужно будет установить еще один модуль - <span>body-parser</span>, чтобы мы могли прочитать тело запроса.</p><pre class="brush: bash noskimlinks noskimwords">npm install body-parser --save</pre><p>Body-parser имеет несколько различных параметров для синтаксического анализа тела HTTP-запроса. Мы будем использовать метод <code class="inline">json()</code> для удобочитаемости, но переход на другой метод - это просто замена метода на объект <code class="inline">bodyParser</code>. Нам нужен  <code class="inline">bodyParser</code> только для методов создания и обновления, поэтому мы можем просто включить его в эти конкретные маршруты.</p><h3>Create</h3><p>Поскольку каждое <code class="inline">itemName</code> SimpleDB должно быть уникальным, мы можем автоматически генерировать новое имя <code class="inline">itemName</code> для каждого вновь созданного элемента. Мы собираемся использовать модуль <span>cuid</span>, который является легким способом генерации уникальных идентификаторов.</p><pre class="brush: bash noskimlinks noskimwords">npm install cuid --save</pre><p>SimpleDB ожидает, что атрибуты будут находиться в формате пары имя/значение атрибута:<br></p><pre class="brush: javascript noskimlinks noskimwords">[    { "Name" : "attribute1", "Value" : "value1" },    { "Name" : "attribute1", "Value" : "value2" },    { "Name" : "attribute2", "Value" : "value3" },    { "Name" : "attribute3", "Value" : "value4" }]</pre><p>Ваш сервер, безусловно, может просто принять и передать значения в этом формате непосредственно в SimpleDB, но он несовместим с тем, как часто структурируются данные, и это сложная концепция, с которой можно работать. Мы будем использовать более интуитивную структуру данных, массив объектов/значений:</p><pre class="brush: javascript noskimlinks noskimwords">{    "attribute1"    : ["value1","value2"],    "attribute2"    : ["value3","value4"]}</pre><p>Вот базовый сервер на основе Express с операцией create:</p><pre class="brush: javascript noskimlinks noskimwords">var  aws         = require("aws-sdk"),  bodyParser  = require("body-parser"),  cuid        = require("cuid"),  express     = require("express"),    sdbDomain   = "sdb-rest-tut",    app         = express(),  simpledb;aws.config.loadFromPath(process.env["HOME"] + "/aws.credentials.json");simpledb = new aws.SimpleDB({  region     : "US-East",  endpoint : "https://sdb.amazonaws.com"});//createapp.post(  "/inventory",   bodyParser.json(),  function(req,res,next) {    var      sdbAttributes   = [],      newItemName     = cuid();        //start with:     /*      { attributeN     : ["value1","value2",.."valueN"] }    */    Object.keys(req.body).forEach(function(anAttributeName) {      req.body[anAttributeName].forEach(function(aValue) {        sdbAttributes.push({          Name  : anAttributeName,          Value : aValue        });      });    });    //end up with:    /*      [         { Name : "attributeN", Value : "value1" },        { Name : "attributeN", Value : "value2" },        ...        { Name : "attributeN", Value : "valueN" },      ]    */    simpledb.putAttributes({      DomainName    : sdbDomain,      ItemName      : newItemName,      Attributes    : sdbAttributes    }, function(err,awsResp) {      if (err) {         next(err);  //server error to user      } else {        res.send({          itemName  : newItemName         });      }    });  });app.listen(3000, function () {  console.log("SimpleDB-powered REST server started.");});</pre><p>Давайте запустим ваш сервер и попробуем его. Отличный способ взаимодействия с сервером REST - использовать <span>инструмент cURL</span>. Этот инструмент позволяет вам сделать HTTP-запрос с любым глаголом прямо из командной строки. Чтобы попробовать создать элемент на нашем сервере REST, нам нужно активировать несколько дополнительных опций:</p><pre class="brush: bash noskimlinks noskimwords">curl -H "Content-Type: application/json" -X POST -d "{"pets" : ["dog","cat"], "cars" : ["saab"]}" http://localhost:3000/inventory</pre><table><thead><tr><th>Option</th> <th>Purpose</th> </tr></thead><tbody><tr><td>-H</td> <td>Добавить строку в заголовок HTTP</td> </tr><tr><td>-X</td> <td>Определите, какой глагол будет использоваться</td> </tr><tr><td>-d</td> <td>Данные, отправляемые в тело запроса HTTP</td> </tr></tbody></table><p>После выполнения команды вы увидите ответ JSON с вашим новым созданным именем элемента или идентификатором. Если вы переключитесь на SdbNavigator, вы увидите новые данные при запросе всех элементов.</p><h3>Read</h3><p>Теперь давайте построим базовую функцию для чтения элемента из SimpleDB. Для этого нам не нужно выполнять запрос, так как мы будем получать itemName или ID с пути запроса. Мы можем выполнить запрос <code class="inline">getAttributes</code> с этим ItemName или ID.</p><p>Если бы мы остановились здесь, у нас была бы функциональная, но не очень дружелюбная форма наших данных. Давайте преобразуем массив Name/Value в ту же форму, которую мы используем, чтобы принимать данные (атрибут: массив значений). Для этого нам нужно пройти через каждую пару имя/значение и добавить его в новый массив для каждого уникального имени. </p><p>Наконец, давайте добавим itemName и вернем результаты. </p><pre class="brush: javascript noskimlinks noskimwords">//Readapp.get("/inventory/:itemID", function(req,res,next) {  simpledb.getAttributes({    DomainName    : sdbDomain,    ItemName      : req.params.itemID   //this gets the value from :itemID in the path  }, function(err,awsResp) {    var      attributes = {};          if (err) {       next(err);  //server error to users    } else {      awsResp.Attributes.forEach(function(aPair) {        // if this is the first time we are seeing the aPair.Name, let"s add it to the response object, attributes as an array        if (!attributes[aPair.Name]) {           attributes[aPair.Name] = [];        }        //push the value into the correct array        attributes[aPair.Name].push(aPair.Value);      });      res.send({        itemName    : req.params.itemID,        inventory   : attributes      });    }  });});</pre><p>Чтобы проверить это, нам нужно снова использовать curl. Попробуйте заменить <code class="inline">[cuid]</code> на itemName или ID, возвращенный из нашего примера создания элемента ранее в этом уроке.</p><pre class="brush: bash noskimlinks noskimwords">curl -D- http://localhost:3000/inventory/[cuid]</pre><p>Обратите внимание, что мы используем опцию <code class="inline">-D</code>. Это дамп HTTP-заголовка, чтобы мы могли видеть код ответа.</p><p>Другим аспектом REST является использование ваших <span>кодов ответа</span> по назначению. В текущем примере, если вы поставляете несуществующий идентификатор для завивки, вышеупомянутый сервер будет аварийно завершен, потому что вы пытаетесь использовать <code class="inline">forEach</code> для несуществующего массива. Нам нужно учесть это и вернуть значимый код ответа HTTP, указывающий, что элемент не найден. </p><p>Чтобы предотвратить ошибку, мы должны проверить наличие переменной <code class="inline">awsResp.Attributes</code>. Если этого не существует, давайте установим код состояния 404 и завершим http-запрос. Если он существует, мы можем обслуживать ответ с атрибутами. </p><pre class="brush: javascript noskimlinks noskimwords">app.get("/inventory/:itemID", function(req,res,next) {  simpledb.getAttributes({    DomainName    : sdbDomain,    ItemName      : req.params.itemID  }, function(err,awsResp) {    var      attributes = {};          if (err) {       next(err);    } else {      if (!awsResp.Attributes) {        //set the status response to 404 because we didn"t find any attributes then end it        res.status(404).end();       } else {        awsResp.Attributes.forEach(function(aPair) {          if (!attributes[aPair.Name]) {             attributes[aPair.Name] = [];          }                    attributes[aPair.Name].push(aPair.Value);        });        res.send({          itemName    : req.params.itemID,          inventory   : attributes        });      }    }  });});</pre><p>Попробуйте использовать новый код и несуществующий идентификатор, и вы увидите, что сервер возвращает 404. </p><p>Теперь, когда мы знаем, как использовать <code class="inline">status</code> для изменения значения, мы также должны обновить, как мы реагируем на POST / create. Хотя ответ 200 технически корректен, так как это означает «ОК», более проницательный код ответа будет 201, что означает «создан». Чтобы внести это изменение, мы добавим его в метод состояния перед отправкой.</p><pre class="brush: javascript noskimlinks noskimwords"> res  .status(201)  .send({    itemName  : newItemName  });</pre><h3>Update</h3><p>Обновление обычно является самой сложной операцией для любой системы, и этот сервер REST не является исключением. </p><p>Природа SimpleDB делает эту операцию еще более сложной. В случае сервера REST обновление - это место, где вы заменяете всю часть хранимых данных; SimpleDB, с другой стороны, представляет отдельные пары атрибут / значение под элементом itemName. </p><p>Чтобы позволить обновлению представлять единый фрагмент данных, а не набор пар имя / значение, нам нужно определить схему для целей нашего кода (хотя SimpleDB не нуждается в ней). Не беспокойтесь, если это сейчас неясно - продолжайте читать, и я проиллюстрирую это требование.</p><p>По сравнению со многими другими системами баз данных наша схема будет очень простой: просто определенный массив атрибутов. Для нашего примера у нас есть четыре поля, на которых мы сосредоточились: <em>pets</em>, <em>cars</em>, <em>furniture</em>, и <em>phones</em>:</p><pre class="brush: javascript noskimlinks noskimwords">schema      = ["pets","cars","furniture","phones"],</pre><p>С SimpleDB вы не можете хранить пустую пару атрибут / значение, а SimpleDB не имеет понятия отдельных элементов, поэтому мы будем предполагать, что если SimpleDB не возвращает значение, оно не существует. Аналогичным образом, если мы попытаемся обновить элемент SimpleDB пустым парой атрибутов / значений, он будет игнорировать эти данные. Возьмем, к примеру, эти данные:</p><pre class="brush: javascript noskimlinks noskimwords">{  "itemName": "cil89uvnm00011ma2fykmy79c",  "inventory": {    "cars": [],    "pets": [      "cat",      "dog"    ]  }}</pre><p>Логически, мы знаем, что <code class="inline">cars</code>, являющиеся пустым массивом, не должны иметь никаких значений, а <code class="inline">pets</code> должны иметь два значения, но как насчет <code class="inline">phones</code> и <code class="inline">furniture</code>? Что вы с ними делаете? Вот как мы переводим этот запрос на обновление для работы с SimpleDB:</p><ul><li>Поместите атрибут <code class="inline">pet</code> со значением <code class="inline">cat</code>.</li> <li>Поместите атрибут <code class="inline">pet</code> со значением <code class="inline">dog</code>.<br></li> <li>Удалить атрибуты для <code class="inline">cars</code>.<br></li> <li>Удалить атрибуты для <code class="inline">phones</code>.</li> <li>Удалить атрибуты для <code class="inline">furniture</code>.</li> </ul><p>Без какой-либо схемы, которая, по крайней мере, определяет атрибуты, мы не знали, что <code class="inline">phones</code> и <code class="inline">furniture</code> необходимо удалить. К счастью, мы можем консолидировать эту операцию обновления в два запроса SimpleDB вместо пяти: один для размещения атрибутов и один для удаления атрибутов. Это хорошее время, чтобы вытащить код из функции post / create, которая преобразует объект attribute / array of values в массив пар атрибут / значение.</p><pre class="brush: javascript noskimlinks noskimwords">function attributeObjectToAttributeValuePairs(attrObj, replace) {   var     sdbAttributes   = [];    Object.keys(attrObj).forEach(function(anAttributeName) {      attrObj[anAttributeName].forEach(function(aValue) {        sdbAttributes.push({          Name    : anAttributeName,          Value   : aValue,          Replace : replace           //if true, then SimpleDB will overwrite rather than append more values to an attribute        });      });    });   return sdbAttributes; }</pre><p>Мы также сделаем важное изменение для функции create. Мы добавим новый атрибут/значение ко всем элементам. Этот атрибут не будет добавлен в схему и будет доступен только для чтения. </p><p>Мы добавим атрибут <code class="inline">created</code> и установим значение в <code class="inline">1</code>. С SimpleDB существует ограниченная возможность проверить, существует ли элемент до добавления атрибутов и значений. В каждом запросе <code class="inline">putAttributes</code> вы можете проверить значение и существование одного атрибута - в нашем случае мы будем использовать <code class="inline">created</code> и проверять значение 1. Хотя это может показаться странным обходным решением, оно обеспечивает очень важную безопасность, чтобы предотвратить операцию обновления из-за возможности создавать новые элементы с произвольным идентификатором.</p><pre class="brush: javascript noskimlinks noskimwords">newAttributes.push({  Name    : "created",  Value   : "1"});</pre><p>Поскольку мы будем выполнять несколько асинхронных HTTP-запросов, давайте установим <span>модуль async</span>, чтобы облегчить обработку этих обратных вызовов.<br></p><pre class="brush: bash noskimlinks noskimwords">npm install async —-save</pre><p>Помните, поскольку SimpleDB распространяется, нет причин последовательно помещать наши атрибуты, а затем удалять. Мы будем использовать функцию <code class="inline">async.parallel</code> для запуска этих двух операций и получения обратного вызова, когда оба завершатся. Ответы формы AWS <code class="inline">putAttributes</code> и <code class="inline">deleteAttributes</code> не предоставляют важной информации, поэтому мы просто отправим пустой ответ с кодом состояния 200, если ошибок нет.</p><pre class="brush: javascript noskimlinks noskimwords">app.put(  "/inventory/:itemID",   bodyParser.json(),  function(req,res,next) {    var      updateValues  = {},      deleteValues  = [];        schema.forEach(function(anAttribute) {      if ((!req.body[anAttribute]) || (req.body[anAttribute].length === 0)) {        deleteValues.push({ Name : anAttribute});      } else {        updateValues[anAttribute] = req.body[anAttribute];      }    });        async.parallel([        function(cb) {          //update anything that is present          simpledb.putAttributes({              DomainName    : sdbDomain,              ItemName      : req.params.itemID,              Attributes    : attributeObjectToAttributeValuePairs(updateValues,true),              Expected      : {                Name          : "created",                Value         : "1",                Exists        : true              }            },            cb          );        },        function(cb) {          //delete any attributes that not present          simpledb.deleteAttributes({              DomainName    : sdbDomain,              ItemName      : req.params.itemID,              Attributes    : deleteValues            },            cb          );        }      ],      function(err) {        if (err) {          next(err);        } else {          res.status(200).end();        }      }    );  });</pre><p>Чтобы принять это за спину, давайте обновим ранее созданную запись. На этот раз инвентарь включает только «собаку», удалив все остальные предметы. Опять же, с помощью cURL, запустите команду, заменив [cuid] на один из ваших идентификаторов элементов.</p><pre class="brush: bash noskimlinks noskimwords">curl -H "Content-Type: application/json" -X PUT -d "{"pets" : ["dog"] }" http://localhost:3000/inventory/[cuid]</pre><h3>Delete</h3><p>У SimpleDB нет понятия удаления элемента, но он может удалить атрибуты, как указано выше. Чтобы удалить элемент, нам нужно удалить все атрибуты, и элемент перестанет быть. </p><p>Поскольку мы определили список атрибутов в нашей схеме, мы будем использовать вызов <code class="inline">deleteAttributes</code> для удаления всех этих атрибутов, а также атрибута <code class="inline">created</code>. Согласно нашему плану, эта операция будет проходить по тому же пути, что и Update, но с использованием verb  DELETE. </p><pre class="brush: javascript noskimlinks noskimwords">app.delete(  "/inventory/:itemID",   function(req,res,next) {    var      attributesToDelete;        attributesToDelete = schema.map(function(anAttribute){      return { Name : anAttribute };    });        attributesToDelete.push({ Name : "created" });        simpledb.deleteAttributes({        DomainName    : sdbDomain,        ItemName      : req.params.itemID,        Attributes    : attributesToDelete      },      function(err) {        if (err) {          next(err);        } else {          res.status(200).end();        }      }    );  });</pre><h3>List</h3><p>Последний из глаголов REST - это list. Для выполнения операции списка мы будем использовать команду select и SQL-подобный язык запросов. Наша функция списка будет barebones, но будет служить хорошей основой для более сложного поиска позже. Мы сделаем очень простой запрос:</p><pre class="brush: sql noskimlinks noskimwords">select * from `sdb-rest-tut` limit 100</pre><p>Когда мы столкнулись с операцией get/read, ответ от SimpleDB не очень полезен, поскольку он ориентирован на пары атрибут/значение. Чтобы избежать повторения, мы реорганизуем часть операции get/read в отдельную функцию и используем ее здесь. Пока мы в нем, мы также отфильтровываем атрибут <code class="inline">created</code> (как он будет отображаться в операции get).</p><pre class="brush: javascript noskimlinks noskimwords">function attributeValuePairsToAttributeObject(pairs) {  var    attributes = {};      pairs    .filter(function(aPair) {      return aPair.Name !== "created";    })    .forEach(function(aPair) {    if (!attributes[aPair.Name]) {       attributes[aPair.Name] = [];    }        attributes[aPair.Name].push(aPair.Value);  });    return attributes;}</pre><p>С помощью операции select SimpleDB возвращает значения в массиве <code class="inline">Items</code>. Каждый элемент представлен объектом, который содержит имя элемента (как просто <code class="inline">Name</code>) и пары атрибут / значение. </p><p>Чтобы упростить этот ответ, давайте вернем все в одном объекте. Сначала мы преобразуем пары атрибут / значение в массив атрибутов / значений, как это было в операции read / get, и затем мы можем добавить itemName как идентификатор свойства. </p><pre class="brush: javascript noskimlinks noskimwords">app.get(  "/inventory",  function(req,res,next) {    simpledb.select({      SelectExpression  : "select * from `sdb-rest-tut` limit 100"    },    function(err,awsResp) {      var        items = [];      if (err) {        next(err);      } else {        items = awsResp.Items.map(function(anAwsItem) {          var            anItem;                    anItem = attributeValuePairsToAttributeObject(anAwsItem.Attributes);                    anItem.id = anAwsItem.Name;                    return anItem;        });        res.send(items);      }    });  });</pre><p>Чтобы увидеть наши результаты, мы можем использовать curl:</p><pre class="brush: javascript noskimlinks noskimwords">curl -D- -X GET  http://localhost:3000/inventory</pre><h3>Валидация</h3><p>Валидация является целой отдельной темой, но с тем кодом, который мы уже написали, у нас есть начало для простой системы проверки. </p><p>На данный момент мы хотим убедиться, что пользователь не может ничего представить, кроме того, что находится в схеме. Оглядываясь на код, написанный для update / put, <code class="inline">forEaching</code> по схеме предотвратит добавление несанкционированных атрибутов, поэтому нам просто нужно применить что-то похожее на нашу операцию create / post. В этом случае мы будем фильтровать пары атрибут/значение, исключая любые атрибуты вне схемы.</p><pre class="brush: javascript noskimlinks noskimwords">newAttributes = newAttributes.filter(function(anAttribute) {  return schema.indexOf(anAttribute.Name) !== -1;});</pre><p>В вашем боевом коде вам, скорее всего, понадобится более надежная система проверки. Я бы предложил интегрировать валидатор схемы JSON, например <span>ajv</span>, и создать middleware, которое находится между <code class="inline">bodyParser</code> и вашей функцией маршрута при создании и обновлении.</p><h2>Следующие шаги</h2><p>С кодом, описанным в этой статье, у вас есть все операции, необходимые для хранения, чтения и изменения данных, но это только начало вашего путешествия. В большинстве случаев вам нужно подумать о следующих темах:</p><ul><li>Аутентификация</li> <li>Пагинация</li> <li>Сложные операции со списком/запросами</li> <li>Дополнительные выходные форматы (xml, csv и т.д.)</li> </ul><p>Эта основа для сервера REST, работающего на SimpleDB, позволяет добавлять middleware и дополнительную логику для создания каркаса для вашего приложения.</p><p>Окончательный код сервера доступен в <span>simpledb-rest-api</span> на GitHub.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825186-sozdanie-api-rest-s-pomoschyu-aws-simpledb-i-nodejs" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Node.js" href="https://norma-studio.github.io/article5/220825186-sozdanie-api-rest-s-pomoschyu-aws-simpledb-i-nodejs" class="tm-article-body__tags-item-link">Node.js</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
36231</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
400</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
