
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Полнотекстовый поиск WordPress с помощью ElasticSearch... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Полнотекстовый поиск WordPress с помощью ElasticSearch... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Полнотекстовый поиск WordPress с помощью ElasticSearch... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Полнотекстовый поиск WordPress с помощью ElasticSearch... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="WordPress - отличное программное обеспечение: он управляет миллионами веб-сайтов, хотя его функция поиска не так уж и сильна, как могла бы быть. Фактически, сами Automattic используют другое решение для поиска на WordPress.com. Ознакомьтесь с отличным постом в блоге и презентацией в блоге и презентации на Elasticsearch в Automattic....">
<meta property="og:description" content="WordPress - отличное программное обеспечение: он управляет миллионами веб-сайтов, хотя его функция поиска не так уж и сильна, как могла бы быть. Фактически, сами Automattic используют другое решение для поиска на WordPress.com. Ознакомьтесь с отличным постом в блоге и презентацией в блоге и презентации на Elasticsearch в Automattic....">
<meta name="twitter:description" content="WordPress - отличное программное обеспечение: он управляет миллионами веб-сайтов, хотя его функция поиска не так уж и сильна, как могла бы быть. Фактически, сами Automattic используют другое решение для поиска на WordPress.com. Ознакомьтесь с отличным постом в блоге и презентацией в блоге и презентации на Elasticsearch в Automattic....">
<meta property="aiturec:description" content="WordPress - отличное программное обеспечение: он управляет миллионами веб-сайтов, хотя его функция поиска не так уж и сильна, как могла бы быть. Фактически, сами Automattic используют другое решение для поиска на WordPress.com. Ознакомьтесь с отличным постом в блоге и презентацией в блоге и презентации на Elasticsearch в Automattic....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=580/uploads/users/162/posts/20891/image/2014-05-10_15-06-33.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=580/uploads/users/162/posts/20891/image/2014-05-10_15-06-33.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=580/uploads/users/162/posts/20891/image/2014-05-10_15-06-33.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=580/uploads/users/162/posts/20891/image/2014-05-10_15-06-33.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=580/uploads/users/162/posts/20891/image/2014-05-10_15-06-33.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825485-polnotekstovyj-poisk-wordpress-s-pomoschyu-elasticsearch.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825485-polnotekstovyj-poisk-wordpress-s-pomoschyu-elasticsearch.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825485-polnotekstovyj-poisk-wordpress-s-pomoschyu-elasticsearch.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825485-polnotekstovyj-poisk-wordpress-s-pomoschyu-elasticsearch.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825485-polnotekstovyj-poisk-wordpress-s-pomoschyu-elasticsearch.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825485-polnotekstovyj-poisk-wordpress-s-pomoschyu-elasticsearch.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825485-polnotekstovyj-poisk-wordpress-s-pomoschyu-elasticsearch.html" title="Полнотекстовый поиск WordPress с помощью ElasticSearch... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Полнотекстовый поиск WordPress с помощью ElasticSearch... | envatomarket.ru | norma-studio.github.io" title="Полнотекстовый поиск WordPress с помощью ElasticSearch... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/543543242.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825485-polnotekstovyj-poisk-wordpress-s-pomoschyu-elasticsearch.html" class="tm-user-info__username" title="
А. Морозов" aria-label="
А. Морозов">
А. Морозов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Полнотекстовый поиск WordPress с помощью ElasticSearch...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825485-polnotekstovyj-poisk-wordpress-s-pomoschyu-elasticsearch" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="WordPress" href="https://norma-studio.github.io/article5/220825485-polnotekstovyj-poisk-wordpress-s-pomoschyu-elasticsearch" class="tm-article-snippet__hubs-item-link"><span>WordPress</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825485-polnotekstovyj-poisk-wordpress-s-pomoschyu-elasticsearch.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=580/uploads/users/162/posts/20891/image/2014-05-10_15-06-33.jpg">
    <meta itemprop="headline name" content="Полнотекстовый поиск WordPress с помощью ElasticSearch... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="WordPress - отличное программное обеспечение: он управляет миллионами веб-сайтов, хотя его функция поиска не так уж и сильна, как могла бы быть. Фактически, сами Automattic используют другое решение для поиска на WordPress.com. Ознакомьтесь с отличным постом в блоге и презентацией в блоге и презентации на Elasticsearch в Automattic....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">WordPress - отличное программное обеспечение: он управляет миллионами веб-сайтов, хотя его функция поиска не так уж и сильна, как могла бы быть. Фактически, сами Automattic используют другое решение для поиска на WordPress.com. Ознакомьтесь с отличным постом в блоге и презентацией в блоге и презентации на Elasticsearch в Automattic....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>WordPress - отличное программное обеспечение: он управляет миллионами веб-сайтов, хотя его функция поиска не так уж и сильна, как могла бы быть. Фактически, сами Automattic используют другое решение для поиска на WordPress.com. Ознакомьтесь с <span>отличным постом в блоге</span> и <span>презентацией в блоге и презентации на Elasticsearch в Automattic</span>.</p><h2>Проблема поиска WordPress</h2>  <p>Что случилось с поиском в WordPress? Проще говоря, это наивное решение с   простым запросом MySQL для поиска.</p>  <ul><li>WordPress сортирует результат поиска по дате поста, отличному от того, насколько релевантен результат для поискового запроса.</li> <li>Поиск - это просто комбинация <code class="inline">LIKE</code>, вместе с <code class="inline">%query%</code> а это означает, что никакой индекс не используется. Без индексации он может быстро убить вашу базу данных на сайте с высоким трафиком, если у вас много поиска.</li> <li>Он ищет точную фразу. Если я ищу «zsh on arch linux», WordPress возвращает нулевые результаты, даже если у вас много сообщений, содержащих эти слова. Обычно вы не ожидаете, что пользователь введет точную фразу, не так ли?</li> <li>Он не поддерживает нечеткий поиск. Если пользователи делают опечатку, у них нет шансов получить ожидаемый результат.</li> </ul><p>Давайте подумаем о лирическом сайте, где пользователи могут запомнить несколько слов песни и хотят найти лирику всей песни. Чтобы сделать это более сложным, предположим, что пользователи могут не быть англо-говорящими и пытаются найти английскую песню. Они, скорее всего, сделают опечатку при наборе текста на английском языке, и без нечеткого поиска мы потеряем этих пользователей.</p>  <p>Мы преодолеем эти проблемы, используя поисковую систему для индексации и поиска наших данных. Мы можем думать об использовании MySQL Full   Text Search или что-то подобное. Хотя это и возможно, это не может быть лучшим решением. Вы должны определить схему, вам нужно изменить базу данных WordPress по умолчанию, добавить индексы и т.д. </p>  <p>Если вы хотите переиндексировать большую таблицу, вы можете ввести блокировку и запретить сайту принимать новые посты. Более того, это все еще является ударом для вашей базы данных MySQL. На сайте с большими объемами трафика с большим количеством поиска он может замедлить работу базы данных. При использовании такого продукта, как <span>ElasticSearch</span>, вы устраняете эти проблемы. Он быстрый, эффективный, оптимизированный для поиска с большим количеством дополнительных функций, и это даже без использования схемы, вы можете легко добавлять или удалять поля.</p>  <p>В этом уроке мы рассмотрим следующие два шага:</p>  <ol><li>Настройка ElasticSearch.</li> <li>Настройка плагина для индексации данных в ElasticSearch и поиска.</li> </ol><p>Хорошим моментом является то, что плагин вернется к поиску по умолчанию WordPress, если сервер ElasticSearch вдруг будет недоступен.</p>  <h2>Требования</h2>  <p>Вы должны использовать VPS для установки на нем поисковой системы. Если вы используете обычную службу общедоступного хостинга, вы можете использовать OpenShift в качестве альтернативного сервера для установки нашей поисковой системы позже.</p>  <h2>Красота ElasticSearch</h2>  <p><span>ElasticSearch</span> - это гибкий и мощный, распределенный механизм поиска и анализа в режиме реального времени. Вы можете отправить данные в него и быстро получить назад проиндексированные и готовые к поиску данные. Он очень оптимизирован для своей работы: поиск. Более того, результаты включают в себя значение того, насколько хорошие данные соответствуют поисковому запросу. ElasticSearch даже поставляется с REST API, который позволяет вам легко выполнять поиск или играть с ним во время тестирования/разработки с помощью инструмента <span>Sense</span>. </p>  <p>Обратите внимание на эту <span>страницу</span>, если вы хотите узнать больше об этом. Их сайт широко документирован. Дополнительную информацию можно найти на странице <span>Stack Overflow</span>.</p>  <h3>1. Установка ElasticSearch на вашем сервере</h3>  <p>В зависимости от вашего дистрибутива Linux вам может потребоваться обратиться к его документации, чтобы узнать, как установить ElasticSearch. Кроме того, вы можете следовать <span>общему учебнику ElasticSearch</span>.</p>  <h3>Ubuntu/Debian (или распределенные на основе APT)</h3>  <pre class="brush: bash noskimlinks noskimwords">$ wget -O - http://packages.elasticsearch.org/GPG-KEY-elasticsearch | apt-key add -$ sudo sh -c "echo "deb http://packages.elasticsearch.org/elasticsearch/1.1/debian stable main" &gt; /etc/apt/sources.list"$ sudo apt-get update# We need Java for ElasticSearch$ sudo apt-get install openjdk-7-jre-headless -y$ sudo apt-get install elasticsearch# Run elasticsearch when booting up$ sudo update-rc.d elasticsearch defaults 95 10$ sudo /etc/init.d/elasticsearch start</pre>  <h3>Centos/RedHat (или YUM-based Distributions)</h3>  <pre class="brush: bash noskimlinks noskimwords">$ rpm --import http://packages.elasticsearch.org/GPG-KEY-elasticsearch$ vim /etc/yum.repos.d/elastic.repo</pre>  <p>После установки поместите это в конфигурационный файл ElasticSearch: </p>  <pre class="brush: bash noskimlinks noskimwords">[elasticsearch-1.1]name=Elasticsearch repository for 1.1.x packagesbaseurl=http://packages.elasticsearch.org/elasticsearch/1.1/centosgpgcheck=1gpgkey=http://packages.elasticsearch.org/GPG-KEY-elasticsearchenabled=1</pre>  <p>Сохраните файл. И продолжайте установку с помощью <code class="inline">yum</code>. Обратите внимание, что мы должны установить Java 6 из стороннего репозитория, если ваш репозиторий CentOS не имеет Java 6.</p>  <pre class="brush: bash noskimlinks noskimwords">$ sudo yum install elasticsearch# Make it roon when booting$ sudo /sbin/chkconfig --add elasticsearch# We need Java6+ for ElasticSearch# Ignore this section if you had Java6+$ sudo rpm --import http://apt.sw.be/RPM-GPG-KEY.dag.txt$ sudo wget http://packages.sw.be/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.x86_64.rpm$ sudo rpm -Uhv rpmforge-release-0.5.2-2.el6.rf.x86_64.rpm$ sudo yum install java-1.6.0-openjdk.x86_64 -y# Start it$ sudo service elasticsearch start</pre>  <p>После запуска ElasticSearch вы можете подтвердить, что он работает правильно, посетив ваш домен на порту 9200 как <b>yourdomain.com:9200</b> в браузере или выполнив запрос с помощью <code class="inline">curl</code>.</p>  <pre class="brush: bash noskimlinks noskimwords">$ curl 127.0.0.1:9200{  "ok" : true,  "status" : 200,  "name" : "Jessica Jones",  "version" : {    "number" : "0.90.7",    "build_hash" : "36897d07dadcb70886db7f149e645ed3d44eb5f2",    "build_timestamp" : "2013-11-13T12:06:54Z",    "build_snapshot" : false,    "lucene_version" : "4.5.1"  },  "tagline" : "You Know, for Search"}</pre>  <p>Если у вас нет VPS и вы все еще хотите его использовать, вы можете использовать платформу OpenShift для установки ElasticSearch на нее. Если вы установили ElasticSearch на свой сервер, перейдите к следующему разделу.</p>   <h3> <span class="sectionnum">2.</span> Установка ElasticSearch на OpenShift</h3>  <p>ElasticSearch можно легко установить, загрузив программный пакет и запустив двоичный файл. Java 6 - единственная зависимость. <span>OpenShift</span> дает нам вид виртуального сервера, на котором мы можем установить на нем свое собственное программное обеспечение.</p>  <p>Зарегистрируйтесь для создания учетной записи на <span>https://www.openshift.com/</span>. Затем войдите в свою панель управления или введите этот URL <span>https://openshift.redhat.com/app/console/applications</span> после того, как вы вошли в систему. Нажмите « Applications», введите «DIY», чтобы отфильтровать поле. </p>  <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=580/uploads/users/162/posts/20891/image/2014-05-10_15-06-33.jpg" alt="Полнотекстовый поиск WordPress с помощью ElasticSearch..." title="Полнотекстовый поиск WordPress с помощью ElasticSearch..." width="50" height="50"></figure><p>Затем нажмите на заголовок «Do-It-Yourself 0.1», чтобы добавить приложение в свою учетную запись. Это означает, что мы сами настроим приложение. Здесь у вас будет возможность назвать ваше приложение и получить поддомен, например <b>appnamesubdomain.rhccloud.com</b>. Подождите, пока установка будет завершена, затем нажмите «<span>Продолжить на странице обзора приложений</span>», чтобы перейти на страницу обзора приложений.</p>  <p>На этой странице вы увидите доменное имя своего приложения. Нам понадобится это позже, чтобы настроить URL-адрес сервера ElasticSearch. В правом нижнем углу вы можете увидеть «Удаленный доступ». Благодаря этому доступу мы сможем запустить команду оболочки и установить ее точно так же, как с обычным VPS. Мы собираем информацию SSH для удаленного доступа в наше приложение и устанавливаем ElasticSearch.</p>  <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/162/posts/20891/image/2014-05-10_15-14-16.jpg" alt="Полнотекстовый поиск WordPress с помощью ElasticSearch..." title="Полнотекстовый поиск WordPress с помощью ElasticSearch..." width="50" height="50"></figure><p>Обратите внимание на команду <code class="inline">ssh 536ea3e4500446d9db000279@diy-notyim.rhcloud.com</code>, мы будем использовать ее для удаленного доступа к нашему серверу на OpenShift. <code class="inline">diy-notyim.rhcloud.com</code> - ваш адрес сервера, <span>ssh</span> - это команда, которую мы используем для удаленного доступа.</p>  <p> Чтобы войти в систему через SSH, вы должны предоставить свой открытый ключ OpenShift. Перейдите на вкладку «<i>Настройка</i>» и нажмите «<i>Добавить публичный ключ</i>» ...</p>  <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/162/posts/20891/image/2014-05-10_15-17-22.jpg" alt="Полнотекстовый поиск WordPress с помощью ElasticSearch..." title="Полнотекстовый поиск WordPress с помощью ElasticSearch..." width="50" height="50"></figure><p>Просто скопируйте и вставьте содержимое своего публичного ключа в него. Ваш публичный ключ обычно находится в папке <code class="inline">~/.ssh/id_rsa.pub</code>. Если вы не знакомы с публичными ключами, прочитайте эти руководства о том, как их создавать:</p>  <ol><li><span>Настройка SSH-ключей</span></li> <li><span>SSH: Что и как</span></li> </ol><p>После того, как вы добавите свой ключ на веб-сайт OpenShift, введите эту команду, чтобы подключиться к нему. Обратите внимание, что ваш адрес будет отличаться от моего.</p>  <div> <pre class="noskimlinks noskimwords">ssh 536ea3e4500446d9db000279@diy-notyim.rhcloud.com</pre>  </div>Вас приветствует экран, подобный этому:<pre class="brush: bash noskimlinks noskimwords">    *********************************************************************    You are accessing a service that is for use only by authorized users.    If you do not have authorization, discontinue use at once.    Any use of the services is subject to the applicable terms of the    agreement which can be found at:    https://www.openshift.com/legal    *********************************************************************    Welcome to OpenShift shell    This shell will assist you in managing OpenShift applications.    !!! IMPORTANT !!! IMPORTANT !!! IMPORTANT !!!    Shell access is quite powerful and it is possible for you to    accidentally damage your application.  Proceed with care!    If worse comes to worst, destroy your application with "rhc app delete"    and recreate it    !!! IMPORTANT !!! IMPORTANT !!! IMPORTANT !!!    Type "help" for more info.[diy-notyim.rhcloud.com 536ea3e4500446d9db000279]\&gt;</pre>  <p>Мы загрузим и установим ElasticSearch вручную. Тем не менее, мы должны хранить файл загрузки в папке <code class="inline">$OPENSHIFT_DATA_DIR</code> из-за ее сохранения между развертыванием.   Во время развертывания OpenShift удаляет почти все файлы и папки и использует сборку   инструкции в приложении для <span>создания и развертывания </span>приложения. </p>  <p>Обратите внимание, что OpenShift имеет специальную папку, которая используется для хранения постоянных данных   между несколькими развертываниями. <code class="inline">$OPENSHIFT_DATA_DIR</code> - путь хранения переменных окружения. Выполните следующую команду для загрузки, установки и запуска ElasticSearch. </p>  <pre class="brush: bash noskimlinks noskimwords">$ cd $OPENSHIFT_DATA_DIR$ wget https://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-1.1.1.tar.gz$ tar xvf elasticsearch-1.1.1.tar.gz$ cd elasticsearch-1.1.1</pre>    Когда вы находитесь внутри папки <code class="inline">elasticsearch-1.1.1</code>, вы должны изменить ключи и значения в файле <code class="inline">config/elasticsearch.yml</code>. Вы можете использовать nano или vi/vim для редактирования файла и редактирования этого значения<pre class="noskimlinks noskimwords">network.host: ${OPENSHIFT_DIY_IP}transport.tcp.port: 3306http.port: ${OPENSHIFT_DIY_PORT}discovery.zen.ping.multicast.enabled: falsediscovery.zen.ping.unicast.hosts: []</pre>    После редактирования и сохранения. Запустите ElasticSearch.<pre class="brush: plain noskimlinks noskimwords"># Stop default DIY app to release the port$ ctl_app stop$ bin/elasticsearch &amp;</pre>    Подождите немного, чтобы он запустился. Отсюда ваш URL-адрес ElasticSearch может быть открыт через ранее установленный домен. В моем случае это <span>http://diy-notyim.rhccloud.com</span>. Обратите внимание, что мы не используем порт по умолчанию 9200, потому что OpenShift не позволяет нам привязываться к нему; поэтому мы используем порт 8080, который задается переменной окружения <code class="inline">${OPENSHIFT_DIY_PORT}</code>. Мы привязываемся только к нашему внутреннему IP-адресу, и OpenShift перейдет на публичный IP-адрес к порту 80 для нас. Из-за этого вы можете напрямую получить URL <span>http://diy-notyim.rhccloud.com</span> без указания порта. Мы также должны остановить внутреннее приложение DIY командой <code class="inline">ctl_app</code>, чтобы освободить порт перед запуском <code class="inline">elasticsearch</code>.<figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=533/uploads/users/162/posts/20891/image/2014-05-11_02-14-08.jpg" alt="Полнотекстовый поиск WordPress с помощью ElasticSearch..." title="Полнотекстовый поиск WordPress с помощью ElasticSearch..." width="50" height="50"><figcaption>Запуск ElasticSearch на OpenShift, привязка к порту 8080 вместо порта 9200</figcaption></figure><h3> <span class="sectionnum">3.</span> Настройка плагина</h3>  <p>Загрузите и установите плагин из <span>репозитория WordPress</span>. Извлеките его в папку <code class="inline">wp-content/plugins</code> и активируйте его. Или, если вы используете <code class="inline">wp-cli</code>, это будет просто.</p>  <pre class="brush: bash noskimlinks noskimwords">wp install fantastic-elasticsearchwp activate fantastic-elasticsearch</pre>    <p>Перезагрузив панель инструментов WordPress, появится новый пункт меню для ElasticSearch. Отсюда, давайте настроим его.</p>  <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/162/posts/20891/image/2014-05-10_20-48-23.jpg" alt="Полнотекстовый поиск WordPress с помощью ElasticSearch..." title="Полнотекстовый поиск WordPress с помощью ElasticSearch..." width="50" height="50"></figure><p>Большинство полей описываются четко, чтобы помочь вам настроить его. Ниже приведены некоторые итоги.</p>  <h4>Интеграция WordPress</h4>  <p>Эта вкладка содержит параметр, разрешающий использование ElasticSearch. Эта вкладка также позволяет нам выбирать, какие категории должны содержаться в ElasticSearch.</p>  <h4>Настройки сервера</h4>  <p>Настройте сервер ElasticSearch и имя индекса. Имя индекса похоже на имя базы данных в MySQL. В нем есть сервер MySQL и несколько баз данных. Вы можете использовать любое имя там, пока оно используется другой службой. </p>  <p>Если ElasticSearch установлен на одном компьютере и использует настройку по умолчанию, вы можете оставить имя сервера пустым; в противном случае укажите свой URL. Например, если я использовал OpenShift, как описано выше, я бы ввел <span>http://diy-notyim.rhcloud.com/</span> как URL-адрес сервера. </p>  <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/162/posts/20891/image/serversetting.jpg" alt="Полнотекстовый поиск WordPress с помощью ElasticSearch..." title="Полнотекстовый поиск WordPress с помощью ElasticSearch..." width="50" height="50"></figure><h4>Индексирование контента</h4>  <p>Вы можете выбрать, какие поля типа post, post field или taxonomy будут проиндексированы ElasticSearch. Как только объект индексируется, он будет доступен для поиска через ElasticSearch. Вы можете указать индексы сообщений, страниц, настраиваемых полей или любого настраиваемого типа сообщений в зависимости от ваших потребностей.</p>  <h4>Результат</h4>  <p>Это важно для сортировки результата. Например, совпадение в заголовке сообщения может считаться более точным, чем совпадение в сообщении. Поэтому мы должны установить меньшее значение для контента поста. Аналогично, если совпадение тегов более ценно, чем совпадение в заголовке, мы установим более высокое значение для <code class="inline">post_tag</code>. </p>  <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/162/posts/20891/image/scoringr.jpg" alt="Полнотекстовый поиск WordPress с помощью ElasticSearch..." title="Полнотекстовый поиск WordPress с помощью ElasticSearch..." width="50" height="50"><figcaption>Моя оценка баллов, вы должны изменить и принять ее к своим собственным требованиям</figcaption></figure><h4>Длина префикса</h4>  <p>Это относится к количеству символов, которые могут быть заменены для соответствия словам. Например: если я искал <code class="inline">Lonux</code>, <code class="inline">Linux</code> по-прежнему считается совпадением: L(i)nux-&gt; L(o)nux. Чем меньше   число, тем лучше производительность. Не устанавливайте слишком высокое значение. Я думаю, что 0-2 являются самыми разумными.</p>  <h4>Управление индексом</h4>  <p>Когда все настроено или изменено, пришло время применить это изменение. Когда вы нажимаете повторно индексировать, он должен показывать что-то, как показано ниже:</p>  <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/162/posts/20891/image/index.jpg" alt="Полнотекстовый поиск WordPress с помощью ElasticSearch..." title="Полнотекстовый поиск WordPress с помощью ElasticSearch..." width="50" height="50"></figure><p>После завершения индексации. Попробуйте найти что-то на своем сайте, найти фразу, переключить поиск в состояние вкл/выкл по умолчанию и ElasticSearch, чтобы увидеть разницу. Вот мой результат поиска с поиском по умолчанию WordPress:</p>  <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=517/uploads/users/162/posts/20891/image/default-result.jpg" alt="Полнотекстовый поиск WordPress с помощью ElasticSearch..." title="Полнотекстовый поиск WordPress с помощью ElasticSearch..." width="50" height="50"><figcaption>Нет результата при поиске zsh arch linux со стандартным поиском</figcaption></figure><p>Вот результат поиска с помощью ElasticSearch.</p>  <figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=524/uploads/users/162/posts/20891/image/es-result.jpg" alt="Полнотекстовый поиск WordPress с помощью ElasticSearch..." title="Полнотекстовый поиск WordPress с помощью ElasticSearch..." width="50" height="50"><figcaption>Куча сообщений с ElasticSearch</figcaption></figure><h2>Вывод</h2>  <p>Всего лишь несколькими простыми шагами мы создали мощную поисковую систему на нашем сайте. Чем точнее результат поиска, тем лучше для наших посетителей. Если ваш сайт имеет интенсивный трафик, а одна установка ElasticSearch не может обрабатывать поиск, вы можете добавить в ElasticSearch дополнительные узлы для выполнения <span>распределенного поиска</span>. </p>  <p>Обратите внимание, что по умолчанию ElasticSearch не имеет аутентификации, но вы, вероятно, должны использовать брандмауэр, чтобы ограничить доступ к ElasticSearch с общедоступных IP-адресов. Или, возможно, лучший способ - связать ElasticSearch с внутренним IP-адресом и сделать его доступным только через локальную сеть. </p>  <p>Пожалуйста, оставьте комментарий и сообщите нам, как работает ваш сайт после установки этого плагина.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825485-polnotekstovyj-poisk-wordpress-s-pomoschyu-elasticsearch" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="WordPress" href="https://norma-studio.github.io/article5/220825485-polnotekstovyj-poisk-wordpress-s-pomoschyu-elasticsearch" class="tm-article-body__tags-item-link">WordPress</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
36129</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
474</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
