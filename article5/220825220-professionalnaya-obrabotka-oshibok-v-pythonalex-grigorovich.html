
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Профессиональная обработка ошибок в Python
Alex Grigorovich... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Профессиональная обработка ошибок в Python
Alex Grigorovich... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Профессиональная обработка ошибок в Python
Alex Grigorovich... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Профессиональная обработка ошибок в Python
Alex Grigorovich... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="В этом уроке вы узнаете, как обрабатывать ошибки в Python со всех возможных точек зрения. Обработка ошибок является важнейшим аспектом проектирования, и она проходит от самых низких уровней (иногда это аппаратное обеспечение) через весь путь к конечным пользователям. Если у вас нет продуманной стратегии в этой области, ваша система будет ненадежной...">
<meta property="og:description" content="В этом уроке вы узнаете, как обрабатывать ошибки в Python со всех возможных точек зрения. Обработка ошибок является важнейшим аспектом проектирования, и она проходит от самых низких уровней (иногда это аппаратное обеспечение) через весь путь к конечным пользователям. Если у вас нет продуманной стратегии в этой области, ваша система будет ненадежной...">
<meta name="twitter:description" content="В этом уроке вы узнаете, как обрабатывать ошибки в Python со всех возможных точек зрения. Обработка ошибок является важнейшим аспектом проектирования, и она проходит от самых низких уровней (иногда это аппаратное обеспечение) через весь путь к конечным пользователям. Если у вас нет продуманной стратегии в этой области, ваша система будет ненадежной...">
<meta property="aiturec:description" content="В этом уроке вы узнаете, как обрабатывать ошибки в Python со всех возможных точек зрения. Обработка ошибок является важнейшим аспектом проектирования, и она проходит от самых низких уровней (иногда это аппаратное обеспечение) через весь путь к конечным пользователям. Если у вас нет продуманной стратегии в этой области, ваша система будет ненадежной...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/1199/profiles/19709/profileImage/gigi_kettlebell_400x400.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/1199/profiles/19709/profileImage/gigi_kettlebell_400x400.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/1199/profiles/19709/profileImage/gigi_kettlebell_400x400.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/1199/profiles/19709/profileImage/gigi_kettlebell_400x400.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/1199/profiles/19709/profileImage/gigi_kettlebell_400x400.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825220-professionalnaya-obrabotka-oshibok-v-pythonalex-grigorovich.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825220-professionalnaya-obrabotka-oshibok-v-pythonalex-grigorovich.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825220-professionalnaya-obrabotka-oshibok-v-pythonalex-grigorovich.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825220-professionalnaya-obrabotka-oshibok-v-pythonalex-grigorovich.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825220-professionalnaya-obrabotka-oshibok-v-pythonalex-grigorovich.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825220-professionalnaya-obrabotka-oshibok-v-pythonalex-grigorovich.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825220-professionalnaya-obrabotka-oshibok-v-pythonalex-grigorovich.html" title="Профессиональная обработка ошибок в Python
Alex Grigorovich... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Профессиональная обработка ошибок в Python
Alex Grigorovich... | envatomarket.ru | norma-studio.github.io" title="Профессиональная обработка ошибок в Python
Alex Grigorovich... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/64533gfdsgf.jpg" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825220-professionalnaya-obrabotka-oshibok-v-pythonalex-grigorovich.html" class="tm-user-info__username" title="
А. Лукичев" aria-label="
А. Лукичев">
А. Лукичев</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Профессиональная обработка ошибок в Python
Alex Grigorovich...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825220-professionalnaya-obrabotka-oshibok-v-pythonalex-grigorovich" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Python" href="https://norma-studio.github.io/article5/220825220-professionalnaya-obrabotka-oshibok-v-pythonalex-grigorovich" class="tm-article-snippet__hubs-item-link"><span>Python</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825220-professionalnaya-obrabotka-oshibok-v-pythonalex-grigorovich.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=80/uploads/users/1199/profiles/19709/profileImage/gigi_kettlebell_400x400.jpg">
    <meta itemprop="headline name" content="Профессиональная обработка ошибок в Python
Alex Grigorovich... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="В этом уроке вы узнаете, как обрабатывать ошибки в Python со всех возможных точек зрения. Обработка ошибок является важнейшим аспектом проектирования, и она проходит от самых низких уровней (иногда это аппаратное обеспечение) через весь путь к конечным пользователям. Если у вас нет продуманной стратегии в этой области, ваша система будет ненадежной...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">В этом уроке вы узнаете, как обрабатывать ошибки в Python со всех возможных точек зрения. Обработка ошибок является важнейшим аспектом проектирования, и она проходит от самых низких уровней (иногда это аппаратное обеспечение) через весь путь к конечным пользователям. Если у вас нет продуманной стратегии в этой области, ваша система будет ненадежной...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>В этом уроке вы узнаете, как обрабатывать ошибки в Python со всех возможных точек зрения. Обработка ошибок является важнейшим аспектом проектирования, и она проходит от самых низких уровней (иногда это аппаратное обеспечение) через весь путь к конечным пользователям. Если у вас нет продуманной стратегии в этой области, ваша система будет ненадежной, а пользовательский опыт будет плохим, и вы будете иметь много проблем с отладкой и устранением неполадок. </p><p>Ключ к успеху, зная обо всех связанных сторонах вопроса, рассматривать их целостно и сформировать решение, которое учитывает каждый аспект.<br></p><h2>Коды статуса против Исключений</h2><p>Существует две основных модели обработок ошибок: Коды статуса и Исключения. Коды статуса могут использоваться в любом языке программирования. Исключения требуют поддержки языка/среды исполнения. </p><p>Python поддерживает исключения. Python и его стандартная библиотека использует исключения свободно для того, чтобы сообщить о различных состояниях, таких как IO ошибки, ошибки деления на ноль, ошибки пределов индексации, а также некоторые некритичные ситуаций, такие как конец итерации (хотя обычно эти ошибки скрыты). Большинство библиотек придерживаются этого принципа и вызывают исключения.</p><p>Это означает, что ваш код будет обрабатывать исключения, возникающие в Python или в библиотеке, во всяком случае, так что вы можете также вызывать исключения напрямую из вашего кода, когда это необходимо и не полагаться на коды статуса.</p><h2>Небольшой пример</h2><p>Прежде чем погрузиться в святая святых лучших практик обработки исключений и ошибок Python, давайте рассмотрим некоторые исключения в действии:</p><pre class="brush: python noskimlinks noskimwords">def f():    return 4 / 0def g():    raise Exception("Don"t call us. We"ll call you")def h():    try:        f()    except Exception as e:        print(e)    try:        g()    except Exception as e:        print(e)</pre><p>При вызове <code class="inline">h()</code>, мы получаем на выходе:</p><pre class="brush: bash noskimlinks noskimwords">h()division by zeroDon"t call us. We"ll call you</pre><h2>Исключения Python </h2><p>Python исключениями являются объекты организованные в классовой иерархии. </p><p>Вот иерархия целиком:</p><pre class="brush: plain noskimlinks noskimwords">BaseException +-- SystemExit +-- KeyboardInterrupt +-- GeneratorExit +-- Exception      +-- StopIteration      +-- StandardError      |    +-- BufferError      |    +-- ArithmeticError      |    |    +-- FloatingPointError      |    |    +-- OverflowError      |    |    +-- ZeroDivisionError      |    +-- AssertionError      |    +-- AttributeError      |    +-- EnvironmentError      |    |    +-- IOError      |    |    +-- OSError      |    |         +-- WindowsError (Windows)      |    |         +-- VMSError (VMS)      |    +-- EOFError      |    +-- ImportError      |    +-- LookupError      |    |    +-- IndexError      |    |    +-- KeyError      |    +-- MemoryError      |    +-- NameError      |    |    +-- UnboundLocalError      |    +-- ReferenceError      |    +-- RuntimeError      |    |    +-- NotImplementedError      |    +-- SyntaxError      |    |    +-- IndentationError      |    |         +-- TabError      |    +-- SystemError      |    +-- TypeError      |    +-- ValueError      |         +-- UnicodeError      |              +-- UnicodeDecodeError      |              +-- UnicodeEncodeError      |              +-- UnicodeTranslateError      +-- Warning           +-- DeprecationWarning           +-- PendingDeprecationWarning           +-- RuntimeWarning           +-- SyntaxWarning           +-- UserWarning           +-- FutureWarning  +-- ImportWarning  +-- UnicodeWarning  +-- BytesWarning </pre><p>Существует несколько специальных исключений, которые являются производными от <code class="inline">BaseException</code>, такие как <code class="inline">SystemExit</code>, <code class="inline">KeyboardInterrupt</code> и <code class="inline">GeneratorExit</code>. Еще есть класс <code class="inline">Exception</code>, который является базовым классом для <code class="inline">StopIteration</code>, <code class="inline">StandardError</code> и <code class="inline">Warning</code>. Все стандартные ошибки являются производными от <code class="inline">StandardError</code>.</p><p>Когда вы получаете исключение или функция, которую вы выполнили вызывает исключение, обычный порядок кода завершается и исключение начинает распространятся вверх по стеку вызовов до тех пор, пока не встречает обработчик соответствующих исключений. Если обработчик не доступен, процесс (или, точнее, текущий поток) будет прекращен с сообщением о необработанном исключении.</p><h2>Вызов исключений</h2><p>Вызов исключений очень прост. Вы просто используете ключевое слово <code class="inline">raise</code> чтобы вызвать объект, который является подклассом <code class="inline">Exception</code>. Это может быть экземпляр <code class="inline">Exception</code>, одно из стандартных исключений (напр., <code class="inline">RuntimeError</code>), или подкласс <code class="inline">Exception</code>, который вы получили. Вот небольшой фрагмент кода, который демонстрирует эти случаи:</p><pre class="brush: python noskimlinks noskimwords"># Raise an instance of the Exception class itselfraise Exception("Ummm... something is wrong")# Raise an instance of the RuntimeError classraise RuntimeError("Ummm... something is wrong")# Raise a custom subclass of Exception that keeps the timestamp the exception was createdfrom datetime import datetimeclass SuperError(Exception):    def __init__(self, message):        Exception.__init__(message)        self.when = datetime.now()raise SuperError("Ummm... something is wrong")</pre><h2>Перехват исключений</h2><p>Вы получили исключение, с условием <code class="inline">except</code>, как вы видели в примере. Когда вы получили исключение, у вас есть три варианта:</p><ul><li>Пропустить (обработать его и продолжить работу).</li> <li>Сделать что-то вроде записи в журнал, но получить повторно то же самое исключение, чтобы продолжить его обработку на более высоком уровне.</li> <li>Вызвать другое исключение вместо текущего.</li> </ul><h3>Пропустить исключение</h3><p>Если вы знаете, как его обработать и как его полностью восстановить, можно пропустить исключение. </p><p>Например, если вы получаете входящий файл, который может быть в различных форматах (JSON, YAML), вы можете попробовать проанализировать его с помощью различных средств. Если анализатор JSON создаёт исключение, которое показывает, что файл имеет некорректный формат JSON, вы пропускаете его и пробуете проанализировать через парсер YAML. Если парсер YAML также не справляется с задачей, тогда вы даёте исключению перейти на следующий уровень.</p><pre class="brush: python noskimlinks noskimwords">import jsonimport yamldef parse_file(filename):    try:        return json.load(open(filename))    except json.JSONDecodeError        return yaml.load(open(filename))</pre><p>Обратите внимание, что другие исключения (например, file not found или no read permissions) будут переходить на следующий уровень и не будут обработаны конкретным исключением. Это хорошая тактика в том случае, если вы хотите использовать YAML парсер, когда анализ с помощью JSON парсера не удался.  </p><p>Если вы хотите обрабатывать <em>все</em> исключения, тогда используйте <code class="inline">except Exception</code>. Например:</p><pre class="brush: python noskimlinks noskimwords">def print_exception_type(func, *args, **kwargs):    try:        return func(*args, **kwargs)    except Exception as e:        print type(e)</pre><p>Обратите внимание, что, добавляя <code class="inline">as e</code>, вы привязываете объект к имении <code class="inline">e</code> в вашем исключении.</p><h3>Перезапуск исключения</h3><p>Чтобы перезапустить исключение, просто напишите <code class="inline">raise </code>без аргументов внутри обработчика. Это позволит выполнить некоторую локальную обработку, но также пропустит исключение для обработки на верхние уровни. Здесь, функция<code class="inline"> invoke_function()</code> выводит тип исключения в консоль и затем повторно вызывает его.</p><pre class="brush: python noskimlinks noskimwords">def invoke_function(func, *args, **kwargs):    try:        return func(*args, **kwargs)    except Exception as e:        print type(e)        raise</pre><h3>Вызов Различных Исключений</h3><p>Есть несколько случаев, когда вы хотели бы вызвать другое исключение. Иногда вы хотите сгруппировать несколько различных низкоуровневых исключений в одну категорию, которая равномерно обрабатывается на более высоком уровне кода. В других случаях вам нужно преобразовать исключение на уровне пользователя и предоставить контекст конкретного приложения. </p><h2>Финальное утверждение</h2><p>Иногда вы хотите убедиться, что код очистки выполняется, даже если где-то по пути возникло исключение. Например, у вас может быть подключение к базе данных, которое требуется закрыть, как только вы закончите. Это неправильный способ сделать это:</p><pre class="brush: python noskimlinks noskimwords">def fetch_some_data():    db = open_db_connection()    query(db)    close_db_Connection(db)</pre><p>Если функция <code class="inline">query()</code> вызывает исключение, то вызов <code class="inline">close_db_connection()</code> никогда не будет выполнен и подключение останется открытым. Утверждение <code class="inline">finally</code> всегда выполняется после всех попыток обработчика. Вот как сделать это правильно:</p><pre class="brush: python noskimlinks noskimwords">def fetch_some_data():    db = None    try:        db = open_db_connection()        query(db)    finally:        if db is not None:            close_db_connection(db)</pre><p>Вызов <code class="inline">open_db_connection()</code> может не вернуть подключение или вызвать исключение. В этом случае нет необходимости закрывать соединение.</p><p>При использовании <code class="inline">finally</code>, вы должны быть осторожны, чтобы не вызвать другие исключения, потому, что они скроют исходное.</p><h2>Диспетчеров Контекста</h2><p><span>Контекстные менеджеры</span> обеспечивают еще один механизм обработки ресурсов, таких как файлы или подключения к БД, которые выполняются автоматически, даже если исключения были вызваны. Вместо блоков try-finally, можно использовать определение <code class="inline">with</code>. Вот пример с файлом:</p><pre class="brush: python noskimlinks noskimwords">def process_file(filename):     with open(filename) as f:        process(f.read())</pre><p>Теперь, даже если <code class="inline">process()</code> вызывает исключение, этот файл будет закрыт правильно сразу же когда область видимости блока <code class="inline">with</code> завершена, независимо от того, было исключение обработано или нет.</p><h2>Ведение журнала</h2><p>Ведение журнала обычно требуется в нетривиальных, масштабных системах. Это особенно полезно в веб-приложениях, где вы можете исправить все исключения универсальным способом: Просто записать в журнал исключение и вернуть сообщение об ошибке. </p><p>При записи полезно учитывать тип исключения, сообщение и маршрут ошибки. Вся эта информация доступна через объект <code class="inline">sys.exc_info</code>, но если вы используете <code class="inline">logger.exception()</code> метод в обработчике исключений, Python извлечёт всю необходимую для вас информацию.</p><p>Это лучший пример, которую я рекомендую:</p><pre class="brush: python noskimlinks noskimwords">import logginglogger = logging.getLogger()def f():    try:        flaky_func()    except Exception:        logger.exception()        raise</pre><p>Если вы будете придерживаться этому шаблону,тогда (предполагаю, что вы настроили запись в журнал правильно), независимо от того, что происходит, вы будете иметь очень понятные записи в ваших журналах о что пошло не так, и будете иметь возможность исправить проблему.<br></p><p>Если вы повторно вызываете исключение, убедитесь что вы не записывайте в журнал повторно одну и туже ошибку на разных уровнях. Эту будет бесполезный мусор. который может запутать вас и заставить думать что произошло несколько ошибок, хотя на самом деле одна ошибка была зарегистрирована несколько раз.<br></p><p>Самый простой способ сделать это заключается в том, чтобы позволить всем исключениям переходить дальше (если они могут быть обработаны и пропущены ранее), и затем выполнить запись в журнал на самом верхнем уровне системы/приложения.</p><h2>Sentry</h2><p>Ведение журнала это возможность. Наиболее распространенные реализации которой, является использование журнала. Но, для крупномасштабных распределенных систем с сотнями, тысячами или более серверов, это не всегда лучшее решение. </p><p>Для отслеживания исключений во всей инфраструктуре, такой сервис как <span>sentry</span> очень полезен. Он централизует все сообщения об исключениях, и в дополнении к маршруту ошибки он добавляет состояние каждого состояния стека (значение переменных в то время, когда было вызвано исключение). Он также предоставляет приятный интерфейс с панелью мониторинга, отчетами и способами получать сообщения по нескольким проектам сразу. Он предоставляется с открытым исходным кодом, так что вы можете запустить свой собственный сервер или оформить подписку на предустановленную версию.</p><h2>Работа с временной ошибкой</h2><p>Некоторые ошибки являются временными, в частности при работе с распределенными системами. Система, которая начинает ругаться при первом признаке ошибки не очень полезна. </p><p>Если ваш код получает доступ к удаленной системе, которая не отвечает, традиционное решение, это таймауты, но иногда случается не каждая система разработана с таймаутами. Таймауты, не всегда удобны для калибровки при изменении условий. </p><p>Другой подход заключается в том, чтобы быстро получить ошибку и затем повторить попытку. Преимущество в том, что если цель реагирует быстро, то вам не придется тратить много времени находясь в режиме ожидания и можно реагировать незамедлительно. Но если это сделать не удалось, вы можете повторять запрос несколько раз до тех пор, пока вы не решите, что ресурс действительно недоступен и вызовете исключение. В следующем разделе я расскажу об оформителе, который может сделать это для вас.</p><h2>Полезные оформители</h2><p>Два оформителя которые могут помочь в обработке ошибок, это <code class="inline">@log_error</code>, который записывает исключение и затем вновь вызывает его и <code class="inline">@retry</code> оформитель, который будет повторять вызов функции несколько раз.</p><h3>Журнал ошибок</h3><p>Вот пример простой реализации. Оформитель исключает объект logger. Когда он оформляет функцию и функция вызвана, он обработает вызов в блоке try-except, и если там было исключение сделает запись в журнал и наконец повторно вызовет исключение.</p><pre class="brush: python noskimlinks noskimwords">def log_error(logger)    def decorated(f):        @functools.wraps(f)        def wrapped(*args, **kwargs):            try:                return f(*args, **kwargs)            except Exception as e:                if logger:                    logger.exception(e)                raise        return wrapped    return decorated</pre><p>Вот пример, как его использовать:</p><pre class="brush: python noskimlinks noskimwords">import logginglogger = logging.getLogger()@log_error(logger)def f():    raise Exception("I am exceptional")</pre><h3>Retrier</h3><p>Здесь, очень хорошая реализация <span>@retry оформителя</span>.</p><pre class="brush: python noskimlinks noskimwords">import timeimport math# Retry decorator with exponential backoffdef retry(tries, delay=3, backoff=2):  """Retries a function or method until it returns True.  delay sets the initial delay in seconds, and backoff sets the factor by which  the delay should lengthen after each failure. backoff must be greater than 1,  or else it isn"t really a backoff. tries must be at least 0, and delay  greater than 0."""  if backoff &lt;= 1:    raise ValueError("backoff must be greater than 1")  tries = math.floor(tries)  if tries &lt; 0:    raise ValueError("tries must be 0 or greater")  if delay &lt;= 0:    raise ValueError("delay must be greater than 0")  def deco_retry(f):    def f_retry(*args, **kwargs):      mtries, mdelay = tries, delay # make mutable      rv = f(*args, **kwargs) # first attempt      while mtries &gt; 0:        if rv is True: # Done on success          return True        mtries -= 1      # consume an attempt        time.sleep(mdelay) # wait...        mdelay *= backoff  # make future wait longer        rv = f(*args, **kwargs) # Try again      return False # Ran out of tries :-(    return f_retry # true decorator -&gt; decorated function  return deco_retry  # @retry(arg[, ...]) -&gt; true decorator</pre><h2>Заключение</h2><p>Обработка ошибок имеет решающее значение для пользователей и разработчиков. Python предоставляет отличную поддержку на уровне языка и стандартной библиотеки для обработки ошибок на основе исключений. Следуя рекомендациям старательно, вы можете преодолеть этот аспект, которым так часто пренебрегают.</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825220-professionalnaya-obrabotka-oshibok-v-pythonalex-grigorovich" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Python" href="https://norma-studio.github.io/article5/220825220-professionalnaya-obrabotka-oshibok-v-pythonalex-grigorovich" class="tm-article-body__tags-item-link">Python</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
37668</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
624</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
