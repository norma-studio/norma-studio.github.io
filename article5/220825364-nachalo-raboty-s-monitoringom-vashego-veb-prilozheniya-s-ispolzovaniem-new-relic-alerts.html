
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Начало работы с мониторингом вашего веб-приложения с использованием--New Relic Alerts... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Начало работы с мониторингом вашего веб-приложения с использованием--New Relic Alerts... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Начало работы с мониторингом вашего веб-приложения с использованием--New Relic Alerts... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Начало работы с мониторингом вашего веб-приложения с использованием--New Relic Alerts... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Начнем с крайнего примера. Спустя три года на рынке, по оценкам аналитического сайта Think Gaming, Clash of Clans по-прежнему остается самой кассовой мобильной игрой сегодня, принося поразительные 1,5 миллиона долларов в день - или чуть больше 1000 долларов каждую минуту. В основе игры лежит кластер веб-серверов, который заботится обо всем: от учет...">
<meta property="og:description" content="Начнем с крайнего примера. Спустя три года на рынке, по оценкам аналитического сайта Think Gaming, Clash of Clans по-прежнему остается самой кассовой мобильной игрой сегодня, принося поразительные 1,5 миллиона долларов в день - или чуть больше 1000 долларов каждую минуту. В основе игры лежит кластер веб-серверов, который заботится обо всем: от учет...">
<meta name="twitter:description" content="Начнем с крайнего примера. Спустя три года на рынке, по оценкам аналитического сайта Think Gaming, Clash of Clans по-прежнему остается самой кассовой мобильной игрой сегодня, принося поразительные 1,5 миллиона долларов в день - или чуть больше 1000 долларов каждую минуту. В основе игры лежит кластер веб-серверов, который заботится обо всем: от учет...">
<meta property="aiturec:description" content="Начнем с крайнего примера. Спустя три года на рынке, по оценкам аналитического сайта Think Gaming, Clash of Clans по-прежнему остается самой кассовой мобильной игрой сегодня, принося поразительные 1,5 миллиона долларов в день - или чуть больше 1000 долларов каждую минуту. В основе игры лежит кластер веб-серверов, который заботится обо всем: от учет...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut28.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut28.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut28.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut28.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut28.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825364-nachalo-raboty-s-monitoringom-vashego-veb-prilozheniya-s-ispolzovaniem-new-relic-alerts.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825364-nachalo-raboty-s-monitoringom-vashego-veb-prilozheniya-s-ispolzovaniem-new-relic-alerts.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825364-nachalo-raboty-s-monitoringom-vashego-veb-prilozheniya-s-ispolzovaniem-new-relic-alerts.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825364-nachalo-raboty-s-monitoringom-vashego-veb-prilozheniya-s-ispolzovaniem-new-relic-alerts.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825364-nachalo-raboty-s-monitoringom-vashego-veb-prilozheniya-s-ispolzovaniem-new-relic-alerts.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825364-nachalo-raboty-s-monitoringom-vashego-veb-prilozheniya-s-ispolzovaniem-new-relic-alerts.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825364-nachalo-raboty-s-monitoringom-vashego-veb-prilozheniya-s-ispolzovaniem-new-relic-alerts.html" title="Начало работы с мониторингом вашего веб-приложения с использованием--New Relic Alerts... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Начало работы с мониторингом вашего веб-приложения с использованием--New Relic Alerts... | envatomarket.ru | norma-studio.github.io" title="Начало работы с мониторингом вашего веб-приложения с использованием--New Relic Alerts... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/543234456.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825364-nachalo-raboty-s-monitoringom-vashego-veb-prilozheniya-s-ispolzovaniem-new-relic-alerts.html" class="tm-user-info__username" title="
А. Гаврилов" aria-label="
А. Гаврилов">
А. Гаврилов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Начало работы с мониторингом вашего веб-приложения с использованием--New Relic Alerts...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825364-nachalo-raboty-s-monitoringom-vashego-veb-prilozheniya-s-ispolzovaniem-new-relic-alerts" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825364-nachalo-raboty-s-monitoringom-vashego-veb-prilozheniya-s-ispolzovaniem-new-relic-alerts" class="tm-article-snippet__hubs-item-link"><span>Web Development</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825364-nachalo-raboty-s-monitoringom-vashego-veb-prilozheniya-s-ispolzovaniem-new-relic-alerts.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut28.jpg">
    <meta itemprop="headline name" content="Начало работы с мониторингом вашего веб-приложения с использованием--New Relic Alerts... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Начнем с крайнего примера. Спустя три года на рынке, по оценкам аналитического сайта Think Gaming, Clash of Clans по-прежнему остается самой кассовой мобильной игрой сегодня, принося поразительные 1,5 миллиона долларов в день - или чуть больше 1000 долларов каждую минуту. В основе игры лежит кластер веб-серверов, который заботится обо всем: от учет...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Начнем с крайнего примера. Спустя три года на рынке, по оценкам аналитического сайта Think Gaming, Clash of Clans по-прежнему остается самой кассовой мобильной игрой сегодня, принося поразительные 1,5 миллиона долларов в день - или чуть больше 1000 долларов каждую минуту. В основе игры лежит кластер веб-серверов, который заботится обо всем: от учет...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<h2>Введение</h2><p>Начнем с крайнего примера. Спустя три года на рынке, по оценкам аналитического сайта <em>Think Gaming</em>, <span>Clash of Clans</span> по-прежнему остается самой кассовой мобильной игрой сегодня, принося поразительные 1,5 миллиона долларов в день - или чуть больше 1000 долларов каждую минуту. В основе игры лежит кластер веб-серверов, который заботится обо всем: от учетных записей пользователей до игровых событий и обработки платежей.<br></p><p>Представьте себе, если однажды команда выкатила новую сборку, которая нарушила обработку платежа.</p><p>Каждая <em>минута</em> пока ошибка остается незамеченной, означает потерю тысячи долларов! </p><p>Теперь представьте, что эта ошибка появилась ночью, когда на работе не было никого ...</p><p>Ваши цифры, вероятно, меньше, но базовая концепция остается прежней: <em>если вы зарабатываете на жизнь от веб-приложения, любая проблема с сервисом, будь то ошибка в коде или проблема с настройкой сервера, означает потерянные продажи</em>.</p><p>Хуже того: если ошибка возникает в куске кода, который вы не тестируете каждый день, например, между вашей корзиной покупок и поставщиком внешних платежей, возможно, за несколько дней до того, как один из ваших клиентов отправит вам электронное сообщение, чтобы вы знали о проблеме!</p><p>Здесь на помощь происходит мониторинг сервера. При работе с хорошим набором тестов, прежде чем каждое обновление обязательно поможет, вы никогда не сможете предвидеть все. Вам нужны глаза внутри сервера; инструменты мониторинга, позволяющие видеть ключевые показатели, описывающие здоровье вашего сервера, от ошибок сервера до медленного времени загрузки и вызовов внешних служб, занимающих больше времени, чем нужно. </p><p>Но даже мониторинга бывает недостаточно, когда у вас всего анализируется, можно забыть проверить свою статистику - или когда возникают проблемы в ночное время, когда вы спите.</p><p>Об этом мы поговорим в этом уроке.<br></p><h3>В этом учебнике<br></h3><p>Несмотря на то, что для инструментов аналитики и оповещения доступны различные варианты, <span>New Relic</span> предлагает одно из наиболее полных решений для анализа ваших серверов. </p><p>Недавно New Relic открыла бета-версию нового продукта под названием <em>New Relic Alerts</em> - слой поверх набора инструментов мониторинга, который вы можете использовать, чтобы поддерживать себя и свою команду в любых событиях в приложении, требуя вашего внимания.</p><p>В этом уроке мы будем использовать New Relic Alerts для создания набора предупреждений для мониторинга простого PHP-приложения, работающего на сервере Amazon EC2. Делая это, мы также поговорим об общих принципах и лучших методах определения программных предупреждений, чтобы помочь вам создать наилучшую возможную настройку оповещения для ваших бизнес-потребностей.</p><h2>Настройка New Relic на вашем сервере</h2><p>Прежде чем вы сможете использовать New Relic Alerts, вам понадобится учетная запись New Relic, настроенная для мониторинга веб-служб. </p><p>Поэтому, прежде чем приступать к настройке и тестированию предупреждений, я быстро проведу вас через шаги по настройке мониторинга для недавно созданного экземпляра Amazon EC2. Для более подробного изучения использования инструментов мониторинга в вашем собственном приложении я предлагаю наш бесплатный курс «<span>Мониторинг производительности с помощью New Relic</span>». </p><p><span>Предыдущие уроки</span> Джеффа Рейфмана и Алана Скоркина также могут помочь вам. Для получения дополнительной информации об Amazon EC2 ознакомьтесь с этим руководством по <span>установке WordPress в облаке Amazon</span>.</p><p>Если вы уже используете New Relic на своем сервере, вы можете пропустить этот раздел и перейти к следующему: «<em>Начало работы с New Relic Alerts</em>».</p><h3>Шаг 1. Создание нового экземпляра EC2 Amazon</h3><p>Выбор сервера для вашего приложения - вопрос, выходящий за рамки данного руководства. Тем не менее, для таких экспериментов я большой поклонник AWS: используя EC2, я могу запускать и останавливать серверы, при этом я плачу только за то, что я их использую.<br></p><p>Чтобы создать тестовый экземпляр на Amazon EC2, сначала войдите в свою <strong>Console</strong> администратора Amazon Web Services (если у вас еще нет учетной записи, вам нужно будет создать ее, прежде чем продолжить). Затем в главном меню выберите <strong>EC2 (Виртуальные серверы в облаке)</strong>.</p><p>На <strong>панели управления EC2</strong> нажмите кнопку, обозначенную <strong>Launch Instance</strong>, чтобы начать процесс создания нового сервера:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut28.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Затем вам будет предложено выбрать <strong>Amazon Machine Image (AMI)</strong> для виртуального сервера, который вы собираетесь запустить. Для этого урока вариант быстрого запуска по умолчанию <strong>Amazon Linux AMI 2015.03</strong> - это то, что нам нужно. </p><p>Нажмите «<strong>Выбрать</strong>», чтобы выбрать его.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut29.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>После выбора AMI вам будет предложено <strong>выбрать тип экземпляра</strong> - в основном размер машины. Поскольку мы будем использовать машину для экспериментов и обучения, самая маленькая, <code class="inline">t2.micro</code>, является для нас самой подходящей:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut30.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Убедитесь, что вы установили флажок перед правильным типом экземпляра. Затем нажмите «<strong>Обзор и Запуск</strong>», чтобы перейти к последнему шагу мастера запуска.</p><p>На этой странице вы увидите уведомление об улучшении ваших групп безопасности. </p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut31.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Нажмите «<strong>Изменить группы безопасности</strong>», чтобы вернуться к шагу конфигурации группы безопасности. Вносим следующие изменения в группы безопасности:</p><ul><li>Отредактируйте существующее правило SSH, чтобы ограничить доступ к SSH только вашему IP-адресу (выберите «<strong>My IP</strong>» в раскрывающемся списке «<strong>Source</strong>»).</li> <li>Добавьте новое правило, чтобы открыть HTTP-порт для всех (выберите <strong>Anywhere</strong> в раскрывающемся списке <strong>Source</strong>).</li> </ul><p>Вот как должны выглядеть настройки группы безопасности с вашими изменениями:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut40.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>После внесения изменений нажмите «<strong>Обзор и запуск</strong>», чтобы вернуться к странице «<strong>Запуск экземпляра</strong>» и запустите сервер.</p><p>В качестве последнего шага Amazon попросит вас создать новую <em>пару ключей</em> (или выбрать существующую) для подключения к новому серверу через SSH. Дайте паре ключей именя, загрузите ее, нажав «<strong>Загрузить пару ключей</strong>», а затем нажмите «<strong>Запустить экземпляры</strong>». </p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut32.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>На вашем компьютере переместите файл загруженной пары ключей, например <code class="inline">test_keypair.pem</code>, из каталога загрузок в более подходящее место и измените его свойства доступа, чтобы никто, кроме вас, не мог открыть файл. </p><p>Вот пример того, как это сделать в Mac OS X:</p><pre class="brush: plain noskimlinks noskimwords">mv ~/Downloads/test_keypair.pem ~/.sshchmod 400 ~/.ssh/test_keypair.pem</pre><p>Теперь, чтобы подключиться к серверу, проверьте IP-адрес нового экземпляра с панели управления Amazon EC2 и подключитесь к нему, используя файл пары ключей (замените IP-адрес на один соответствующий вашему серверу):</p><pre class="brush: bash noskimlinks noskimwords">ssh -i ~/.ssh/fourbean_test.pem ec2-user@54.174.156.252</pre><p>Если ваш сервер запущен и работает, вы должны войти в систему. </p><p>Установите PHP, используя следующую команду. Примите предложенные пакеты.</p><pre class="brush: bash noskimlinks noskimwords">sudo yum install php</pre><p>Затем запустите Apache:</p><pre class="brush: bash noskimlinks noskimwords">sudo /etc/init.d/httpd start</pre><p>Теперь вы создали простую установку Apache и PHP на Amazon EC2. Затем давайте начнем отслеживать его с помощью New Relic APM.</p><h3>Шаг 2. Включите  New Relic APM на вашем сервере.</h3><p>Во-первых, если у вас еще нет учетной записи New Relic, начните с ее создания. </p><p><span>На странице регистрации</span> заполните все поля и нажмите «<strong>Зарегистрироваться для New Relic</strong>».</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut34.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Затем настроим инструмент мониторинга веб-приложений New Relic, <strong>APM</strong>.</p><p>На экране приветствия щелкните элемент <strong>APM New Relic</strong>:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut36.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>После выбора APM вы увидите страницу с инструкциями по включению мониторинга в разных средах. </p><p>Если вы настраиваете New Relic на сервере, отличном от Amazon EC2, что мы создали на предыдущем шаге, то инструкции, характерные для вашей среды, вы, скорее всего, найдете на странице «<strong>Начинаем работу с New Relic</strong>». </p><p>Кроме того, хотя команды установки, используемые ниже, действительны на момент написания, рекомендуется перепроверить эту страницу для самых последних инструкций.</p><p>Теперь нажмите на <strong>логотип PHP</strong>, чтобы открыть инструкции по установке для агента PHP.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut35.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Чтобы установить агент PHP, сначала используйте SSH для подключения к экземпляру EC2, который мы создали выше. </p><p>Затем в окне SSH введите следующую команду для добавления репозитория New Relic (для экземпляра EC2, указанного выше, мы используем 64-разрядную версию):</p><pre class="brush: bash noskimlinks noskimwords">sudo rpm -Uvh http://yum.newrelic.com/pub/newrelic/el5/x86_64/newrelic-repo-5-3.noarch.rpm</pre><p>Затем, чтобы установить агент PHP:</p><pre class="brush: bash noskimlinks noskimwords">sudo yum install newrelic-php5sudo newrelic-install install</pre><p>В конце установки скрипт попросит вас ввести свой лицензионный ключ New Relic:<br></p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut37.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Чтобы получить лицензионный ключ, вернитесь на страницу «<strong>Начать работу с New Relic</strong>» и нажмите «<strong>Лицензионный ключ</strong>».</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut38.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Скопируйте ключ и вставьте его в приглашении оболочки, чтобы завершить установку.</p><p>Чтобы применить изменения, перезапустите веб-сервер, а затем подождите несколько минут, чтобы New Relic начал получать данные с вашего сервера.</p><pre class="brush: bash noskimlinks noskimwords">/etc/init.d/httpd restart</pre><p>Когда New Relic APM будет получать данные с вашего сервера, вместо экрана настройки, показанного выше, вы увидите <strong>панель управления APM</strong> с указанным на ней PHP-приложением:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut39.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Как только это произойдет, вы можете начать использовать New Relic Alerts.</p><h2>Начинаем работу с New Relic Alerts.</h2><p>Теперь, когда вы настроили свой сервер и используете New Relic APM, следя за ним, пришло время перейти к актуальной теме этого руководства: <em>предупреждения</em>.</p><h3>Шаг 1: включение New Relic Alerts.</h3><p>Первое, что нужно сделать, - включить оповещения в своей учетной записи New Relic. </p><p>Нажмите на ссылку <strong>Alerts</strong><sup class="inline"><strong>Beta</strong></sup> в правом верхнем углу окна New Relic. Предупреждения по-прежнему являются бета-функцией, поэтому перед началом работы вам будет представлен экран, описывающий его функции, а также список вещей, которые все еще разрабатываются. </p><p>Хотя большинство функций уже реализовано, New Relic заявляет, что Alerts будет поддерживать свой бета-статус до тех пор, пока они не добавят предупреждения «сервер не отвечает», поддержку API и метод переноса существующих предупреждений в новую систему.</p><p>Во время бета-тестирования по-прежнему можно использовать новую систему бок о бок с устаревшими предупреждениями, поэтому, даже если вы являетесь существующим пользователем New Relic, нет никакого вреда в том чтобы попробовать Alerts.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut2.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Чтобы начать использовать New Relic Alerts, прокрутите вниз до нижней части страницы, отметьте галочкой «<strong>Я согласен принять условия и положения New Relic Alerts<sup class="inline">Beta</sup></strong>» и нажмите кнопку «<strong>Попробовать</strong>».<br></p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut3.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><h3>Шаг 2: Создайте свою первую политику предупреждения</h3><p>После включения предупреждений первое, что вы увидите, это страница для создания <em>политики предупреждений</em>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut4.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>В New Relic Alerts все предупреждения группируются в политики предупреждений, каждый из которых имеет свои собственные каналы уведомлений. Это означает, что когда условие предупреждения нарушено, предупреждение отправляется <em>всем пользователям и каналам связи, указанным в политике</em>.<br></p><p>Вот почему лучший способ думать о правилах оповещения - это уведомления. </p><p>Задайте себе два вопроса: </p><ul><li>Кому нужно получать уведомления из этого набора предупреждений?</li> <li>Как они должны получать уведомления?</li> </ul><p>Например, критические проблемы с сервером, которые требуют немедленного внимания независимо от времени суток, должны быть отправлены другой группе людей и с использованием другого канала уведомлений (телефон жужжит, чтобы разбудить вас), чем менее серьезные проблемы с производительностью, которые могут быть отправлены в течение дня (уведомление по электронной почте, чтобы сообщить вам, что пора бы начать оптимизацию кода).</p><p>Но не зацикливайтесь на этом этапе слишком долго. Если вы не можете придумать идеальный способ организации своих оповещений, все в порядке: вы всегда можете вернуться к нему и позже изменить свои правила оповещения, когда вы познакомитесь с этой концепцией.<br></p><p>В этом уроке мы начнем с создания простой, всеобъемлющей политики предупреждений, которую мы просто назовем «<strong>Приложение</strong>».</p><p>Введите имя в текстовое поле, в котором указано <strong>Название команды или имя службы</strong>, и нажмите «<strong>Создать политику</strong>».</p><h3>Шаг 3: ознакомьтесь с панелью предупреждений</h3><p>Теперь вы готовы начать создавать оповещения для своего приложения. Но прежде чем мы отправимся туда, давайте быстро взглянем на панель предупреждений:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut5.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="" class="lazy07" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50">Начиная с левой стороны, параметры:<br></p><ul><li> <strong>Incidents</strong>: список нарушений, разделенных на две вкладки. <strong>Open Incidents</strong> - это предупреждения, которые еще не решены и требуют вашего внимания прямо сейчас. <strong>All Incidents</strong> - это исторический список, который вы можете использовать для поиска прошлых нарушений состояния предупреждения и для выяснения того, что было сделано для их устранения.</li> <li> <strong>Events</strong>: список всех событий из системы оповещений, разделенных на две вкладки. <strong>Violations</strong> показывают все нарушения состояния предупреждения. <strong>Events</strong> также перечисляют уведомления, отправленные по разным каналам уведомлений, и изменения статусов инцидентов.</li> <li> Политика оповещений: это основа системы предупреждений, набор правил, которые определяют, как и когда отправляются оповещения.</li> <li> <strong>Notification channels</strong>: Здесь вы настраиваете каналы уведомлений, используемые в политиках предупреждений, чтобы уведомить вас и вашу команду об инцидентах в вашем приложении.</li> </ul><p>Элемент меню, который появляется после этих четырех, <strong>Switch to Alerts<sup class="inline">Beta</sup></strong>, сначала смутил меня. Из-за его имени у меня создалось впечатление, что я еще не включил новые оповещения. Однако это было не так. Вместо этого это вариант, который вы можете использовать для включения all<em>-in</em> и полной интеграции новой системы оповещений в ваш New Relic, оставляя прежние оповещения позади.</p><p>Если вы нажмете на элемент меню, вы увидите следующую страницу:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut6.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>На этой странице вы найдете обзор изменений, которые будут иметь место, если вы полностью переключитесь на новую функцию оповещений. Самое главное, это означает более глубокую интеграцию с Alerts в других продуктах New Relic. </p><p>Если вы уже являетесь пользователем New Relic, и ваше текущее приложение опирается на устаревшую систему оповещений, вам следует дважды подумать, прежде чем двигаться дальше. Кроме того, чтобы следовать остальной части этого урока, вам не нужно заходить так далеко, как я упоминал ранее, совершенно нормально использовать обе системы рядом.<br></p><p>Но если вы предприимчивы и хотели бы использовать самые последнии версии вашего программного обеспечения, то вы вполне можете согласиться с тем фактом, что назад уже нет возврата и переключите свою учетную запись, чтобы использовать только новые функции, нажав кнопку «<strong>Become an early adopter</strong>» в нижней части экрана.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut7.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Выбор за вами. И каким бы вариантом вы не воспользовались, теперь вы готовы создать свое первое предупреждение.</p><h2>Создайте свое первое предупреждение</h2><p>Теперь, когда вы включили New Relic Alerts и имеете общее представление об этом инструменте, пришло время начать работать и создать ваше первое предупреждение: предупреждение, отправляющее уведомление с использованием электронной почты и Slack, если частота ошибок в вашем приложении PHP превышает 5% не реже одного раза в 5 минут. </p><p>Я выбрал это предупреждение, потому что оно важное, но также и потому, что его легко проверить: как только условие предупреждения определено, мы можем сломать сервер и привести к срабатыванию предупреждения без дополнительной работы.<br></p><p>Но сначала поговорим немного о том, что делает хорошее программное обеспечение.</p><h3>Шаг 1. Решите для себя о каких проблемах вы хотите получать оповещения</h3><p>В классической сказке Эзопа, «<em>Мальчик, который кричал про волка</em>», скучающий мальчик-пастух снова и снова кричит ложными тревогами о волке, атакующем свою паству. В конце концов, когда наконец появляется волк, жители деревни думают, что это просто еще одна ложная тревога, и никто не придет ему на помощь.</p><p>Аналогично, если у вас есть предупреждение о программном обеспечении, которое уведомляет вас каждый день, а тем более, много раз в день, о том, что вам не нужно действовать прямо в этот момент, вы привыкли игнорировать ошибку. Затем, когда появляются важные ошибки, они потеряются в шуме, и вы их пропускаете.<br></p><p>Вот почему вы всегда должны начинать планировать свои оповещения, задавая себе вопрос: «<em>Насколько это предупреждение важное?</em>» и «<em>Как я (или моя команда) отреагирую на это предупреждение?</em>»</p><p>Тогда ваш ответ будет определять, что вы делаете дальше:</p><ul><li> <em>Если предупреждение - это то, что нужно немедленно устранить</em>, добавьте его в политику предупреждения, которая будит вас (или вашу команду) в любое время дня.</li> <li> <em>Если предупреждение является чем-то срочным, которое может быть разрешено за один день или менее</em>, включите его в политику предупреждений, которая уведомляет вас через менее навязчивый канал уведомлений, такой как электронная почта.</li> <li> <em>Если предупреждение не требует внимания через день или два</em>, вероятно, лучше вообще не создавать оповещения. Проблема будет замечена во время случайного взгляда на инструменты мониторинга и затем может быть помечена как задача в вашем инструменте управления проектами для последующего рассмотрения.</li> </ul><p>Кроме того, убедитесь, что вы отправляете оповещения людям, у которых есть инструменты, чтобы что-то сделать с ними. Отправление письма менеджеру с предупреждениями об ошибках в коде - не что иное, как отвлечение внимания.</p><p>Еще одна вещь, которую следует учитывать, - это порог предупреждения или такие вопросы, как:</p><ul><li>Как скоро должно быть отправлено предупреждение? </li> <li>Какой процент допустимой ошибки?</li> <li>Насколько низко может быть дисковое пространство сервера, прежде чем нам нужно что-то сделать?</li> </ul><p>Это непростая задача, и, вероятно, вам потребуется немного переделать, прежде чем вы получите правильный набор предупреждений. Вы хотите отправить сообщение об ошибке достаточно рано, чтобы не пропустить важные ошибки, но и не так скоро, что бы не получить слишком много ложных предупреждений. </p><p>Лучший способ сделать это - экспериментировать: изменение условий предупреждений происходит быстро, так как это не связано с изменением файлов конфигурации и перезапусков сервера, поэтому продолжайте проверять разные значения, пока не будете удовлетворены результатами. Кроме того, по мере того, как ваше приложение будет развиваться, вы, вероятно, захотите также изменить свои предупреждения, например, ослабить пороговые значения предупреждений, когда вы знаете, что новое обновление негативно повлияет на время загрузки на некоторое время.</p><h3>Шаг 2: выберите продукт и объект для мониторинга</h3><p>Как я объяснял ранее, каждое условие предупреждения в New Relic Alerts относится к <em>политике предупреждения</em>. Итак, чтобы добавить новое условие предупреждения, сначала перейдите на вкладку «<strong>Политики предупреждений</strong>» и выберите политику, которую вы только что создали, «<strong>Приложение</strong>». <br></p><p>Поскольку вы еще не создали никаких условий предупреждения, в середине страницы вы увидите следующий заполнитель:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut41.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Нажмите «<strong>Создать условие</strong>», чтобы начать определение первого условия предупреждения. После того, как вы создали это первое условие, вы увидите список условий предупреждения, и не большую кнопку - в этот момент добавляется новое условие, используя небольшую кнопку «<strong>Новая политика предупреждений»</strong> в правом верхнем углу списка.</p><p>Нажатие на кнопку инициирует трехэтапный мастер нового условия: <br></p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut8.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>В мастере вам будет предложено выбрать продукт New Relic. Это продукт, который вы будете использовать в качестве источника показателей для условия предупреждения, которое вы создаете, и, следовательно, также будет определять параметры, доступные для вас в следующих двух шагах мастера. </p><p>Ошибки PHP контролируются с помощью <strong>APM</strong>, поэтому давайте выбираем его.<br></p><p>На том же шаге мастера у вас все еще есть второй выбор: выбор <strong>типа условия</strong>, которое вы хотите создать. Параметры в этом выборе изменяются при переключении между продуктами. Для APM у вас есть следующие три варианта:</p><ul><li> <strong>Метрика приложения</strong>: эта опция дает вам доступ к метрикам приложений по умолчанию, измеренным APM (Apdex, процент ошибок, время отклика и пропускной способности), а также любые пользовательские показатели, которые вы определили в инструменте мониторинга.</li> <li> <strong>Ключевые показатели транзакций</strong>: в качестве платной функции в APM вы можете отметить некоторые транзакции в своем приложении как операции с ключевыми транзакциями, которые имеют особое значение для вашей компании или вашего продукта. Если вы выберете этот параметр, вы создадите условие предупреждения так же, как и с помощью параметра <strong>метрики приложения</strong>, за исключением того, что вместо наблюдения за всем приложением (или несколькими приложениями) предупреждение будет срабатывать только в том случае, если условие выполняется в пределах ключевой транзакции, которую вы выбираете.</li> <li> <strong>Внешняя служба</strong>. Эта опция позволяет создавать условия предупреждения на основе API или других вызовов внешних служб. </li> </ul><p>Поскольку процент ошибки - это показатель приложения, и мы не указали какие-либо ключевые транзакции, выберите «<strong>Показатель приложения</strong>» и нажмите «<strong>Далее</strong>», выберите цели, чтобы перейти к второму шагу мастера.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut18.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>На этом втором экране вы выберете APM-мониторинг приложений, о которых условие предупреждения будет уведомлять.</p><p>Сначала нажмите «<strong>Все приложения</strong>», чтобы открыть список приложений. </p><p>Затем отметьте флажок перед нашим приложением (в нашем примере у нас есть только одно приложение, <strong>PHP Application</strong>)  и перейдите к последнему шагу мастера, нажав кнопку <strong>Далее, определить пороговые значения</strong>.<strong> </strong></p><h3>Шаг 3: Определите условие предупреждения</h3><p>Третий и последний шаг мастера <strong>создания условий</strong> - это определение фактического состояния предупреждения. </p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut42.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Параметры, которые вы увидите на этом этапе, зависят от выбора, сделанного вами в течение первых двух шагов. Однако в каждом случае основная идея одинакова: это экран, на котором вы выберете метрику и порог ошибки (и дополнительного предупреждения).</p><p>Чтобы создать условие предупреждения о высоком проценте ошибки, описанное выше:</p><ol><li>Выберите <strong>процент ошибки</strong> в качестве показателя приложения для мониторинга.</li> <li>Затем выберите подходящий оператор сравнения. В этом случае <strong>above</strong> имеет смысл (остальные варианты <strong>below</strong> и <strong>equal to</strong>).</li> <li>Определите порог: какой процент ошибок имеет смысл для отчета об ошибке? Сделайте эту цифру слишком высокой, и вы пропустите важные ошибки. Сделайте ее слишком низкой, и вы будете тонуть в предупреждениях. <strong>5%</strong> - хорошая отправная точка, но в реальной жизни вы можете изменить порог вверх или вниз в зависимости от вашего приложения и ваших предпочтений.</li> <li>Определите временные рамки. Чтобы уловить большинство ошибок, выберите «<strong>at least once in</strong>" "<strong>5 mins</strong>"». Это немедленно предупредит вас, если порог ошибки будет превышен даже один раз в течение выбранного периода времени. С другой стороны, если вы хотите, чтобы ваше приложение было немного слабее, вы можете выбрать «<strong>for at least</strong>» и получать уведомление только в том случае, если процент ошибки остается высоким в течение всей продолжительности выбранного периода времени.</li> <li>Если вам нравится, вы также можете определить <strong>порог предупреждения</strong>, используя более низкий процент ошибок. Предупреждения не будут вызывать оповещения по электронной почте, но вы увидите их в списке событий, а также в представлении APM.</li> <li>Дайте условию описательное имя или, если вам нравится, используйте имя по умолчанию, предложенное инструментом.</li> <li>Если вы хотите предоставить своей команде информацию об инциденте и как его исправить, вы можете добавить «URL-адрес рабочей среды»: ссылку на внешнюю веб-страницу, например страницу документации, в которой объясняется, что означает это оповещение, и описывает этапы его решения. Для этого нажмите «<strong>Добавить URL-адрес рабочей книги</strong>» и введите URL-адрес в текстовое поле.</li> </ol><p>Когда вы довольны условием предупреждения, нажмите «<strong>Создать условие</strong>», чтобы сохранить его. Помните, что вы всегда можете вернуться к настройке позже.</p><p>Теперь страница <strong>условий Alert</strong> будет выглядеть следующим образом: ваше новое предупреждение добавлено к ней:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut43.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Если в любое время вы хотите изменить условие предупреждения, просто нажмите на его правила. Также обратите внимание на кнопки «<strong>Копировать</strong>» и «<strong>Удалить</strong>» в верхнем правом углу вашего нового условия предупреждения: они пригодятся, если в какой-то момент вы захотите переместить предупреждение на другую политику оповещений.</p><h3>Шаг 4: Настройка уведомлений по электронной почте для политики оповещений</h3><p>Теперь вы создали первое предупреждение. Но предупреждение без канала уведомления не очень полезно: нарушения будут добавлены на вкладку инцидентов, но никто не получит о них уведомлений. Чтобы политика уведомлений уведомила вас об инциденте, нам нужно определить канал уведомления и связать его с этой политикой предупреждения. </p><p>Начнем с наиболее распространенного сообщения электронной почты.</p><p>Чтобы начать создание своего первого канала уведомлений, нажмите на пункт меню «<strong>Каналы уведомлений</strong>». Затем нажмите на большую кнопку, на которой написано «<strong>Создать канал уведомлений</strong>».</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut9.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>На следующем экране вы увидите текстовое поле с надписью «<strong>Выбрать тип канала</strong>». Нажмите на него, чтобы открыть раскрывающийся список с доступными параметрами уведомлений:<br></p><figure></figure><p>Возможные варианты на данный момент (согласно документации, в будущем будет добавлено больше каналов):</p><ul><li> <strong>E-mail</strong>: отправляет электронное сообщение на адрес электронной почты, указанный в конфигурации. </li> <li> <strong>HipChat</strong>: отправляет сообщение в комнату <span>HipChat</span>, указанную в конфигурации.</li> <li> <strong>PagerDuty</strong>: отправляет уведомление через средство администрирования NetOps <span>PagerDuty</span>. Это расширенный вариант для более критических уведомлений, которые необходимо устранить сразу - оповещения могут быть настроены на то, чтобы позвонить вам по телефону!</li> <li> <strong>VictorOps</strong>: Подобно PagerDuty, эта опция отправляет уведомление через инструмент NetOps <span>VictorOps</span>. Функциональность этих двух инструментов довольно схожа, поэтому выбор зависит в основном от того, что вы уже используете.</li> <li> <strong>Webhook</strong>: отправляет уведомление на указанный вами URL-адрес. Используйте эту опцию, если вы хотите отправлять уведомления на канал, который в настоящее время не поддерживается напрямую с помощью New Relic Alerts, или если вы хотите создать свое собственное решение ...</li> <li> <strong>Campfire</strong>: отправляет уведомление в чат-комнату <span>Campfire</span>, указанную в конфигурации.</li> <li> <strong>Slack</strong>: отправляет уведомление каналу <span>Slack</span>, указанному в конфигурации. </li> <li> <strong>OpsGenie</strong>: отправляет уведомление с помощью системы оповещения <span>OpsGenie</span> NetOps. OpsGenie - еще один инструмент, похожий на PagerDuty и VictorOps, который можно использовать, чтобы убедиться, что ваша команда уведомляет о предупреждениях по мере их возникновения.</li> </ul><p>В дополнение к этим, New Relic Alerts автоматически создает канал уведомлений <strong>Users</strong> для каждого пользователя в вашей учетной записи. Этот канал можно использовать для отправки электронной почты и для отправки уведомлений на приложение New Relic для iPhone и Android.</p><p>В реальной ситуации вы должны выбрать инструменты, которые наилучшим образом соответствуют вашей политике предупреждения и культуре общения вашей команды: например, используйте OpsGenie для срочных оповещений, а адрес электронной почты для не столь срочных. В этом уроке мы просто добавим два примера, начиная с электронной почты.</p><p>Когда вы нажимаете кнопку <strong>E-mail</strong>, остальная часть формы автоматически обновляется, чтобы отображать конфигурацию уведомлений по электронной почте:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut12.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Введите адрес электронной почты в поле <strong>Email</strong> и нажмите «<strong>Создать канал</strong>». Если вы хотите отправить еще несколько данных об этом инциденте вместе с сообщением электронной почты (например, если письмо читается программно), установите флажок <strong>Включить JSON вложение</strong>.</p><p>И вот, теперь был создан канал уведомления по электронной почте:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut13.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Чтобы связать этот канал уведомлений с политикой оповещений, созданной ранее, вернитесь на страницу <strong>политики предупреждений</strong> и выберите политику предупреждения «Приложение».</p><p>Затем перейдите на вкладку «<strong>Каналы уведомлений</strong>». Поскольку для этой политики предупреждений нет каналов уведомлений, вкладка будет выглядеть так:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut44.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Нажмите «<strong>Добавить каналы уведомлений</strong>», чтобы открыть всплывающее окно для выбора каналов уведомлений, которые будут использоваться в этой политике предупреждений.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut45.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Используйте браузер канала уведомлений, чтобы найти каналы <strong>Email</strong> и установите флажок напротив своего адреса электронной почты. </p><p>Затем нажмите «<strong>Обновить политику</strong>», чтобы сохранить изменения.</p><h3>Шаг 5: Настройка Slack уведомлений для политики предупреждения</h3><p>Затем давайте сделаем уведомления на канале Slack. Если вы не используете Slack, вы можете пропустить этот шаг и перейти к следующему шагу, в котором мы начнем тестирование предупреждения.</p><p>Во-первых, в окне Slack chat нажмите стрелку вниз рядом с вашим именем пользователя, чтобы открыть меню. Затем выберите опцию <strong>Configure Integrations</strong>:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut14.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Это откроет новую вкладку браузера, на которой показана страница <strong>Интеграции</strong> Slack.</p><p>Используйте панель поиска в правом верхнем углу списка услуг, чтобы найти тип интеграции New Relic.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/34/posts/24187/image/img_1.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Прокрутите вниз до параметра «<strong>Входящие WebHooks</strong>» и нажмите «<strong>Добавить</strong>».</p><p>Нажмите «<b>Просмотр</b>». Затем на следующей странице выберите или создайте канал, на который вы хотите отправить уведомления. Это может быть существующий, специфичный для проекта канал, или, возможно, вы хотите создать определенный канал для оповещений сервера.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/34/posts/24187/image/img_2.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>После выбора канала продолжите, нажав «<b>Добавить интеграцию New Relic</b>».<br></p><p>На следующей странице разверните инструкции для первого элемента в списке «<b>New Relic Alerts [Beta]</b>». Затем скопируйте URL-адрес Webhook, показанный в разделе, обозначенном как <b>Шаг 2</b>. Это уникальный, сгенерированный URL-адрес и он должен использоваться только для этой интеграции. Если у вас есть основания подозревать, что URL-адрес просочился кому-то, у кого его не было, вы можете (и должны) создать новый.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/34/posts/24187/image/img_3.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Вернитесь на страницу <strong>каналов уведомлений</strong> и создайте новый канал уведомлений, выбрав <strong>Slack</strong> как <strong>тип канала</strong>. В параметрах этого нового канала вставьте URL-адрес, который вы только что скопировали, в текстовое поле с надписью <strong>URL</strong>:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/34/posts/24187/image/img_4.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Если вам нравится, вы можете использовать поле<strong> Team канал</strong>, чтобы указать имя канала Slack, на который вы хотите отправлять уведомления. Если вы сделаете это, убедитесь, <em>что вы не указали знак хеша перед именем</em>, иначе вместо получения предупреждения на вашем Slack-канале вы увидите ошибку в журнале <strong>Events</strong>.<br></p><p>Нажмите «<strong>Создать канал</strong>», чтобы сохранить определение. Затем следуйте инструкциям по связыванию нового канала уведомлений с политикой предупреждения, которую мы использовали при связывании электронной почты.</p><h3>Шаг 6: Проверьте оповещение, сломав свой код</h3><p>Прежде чем оставить вас для работы с вашими реальными предупреждениями и настройкой вашего боевого сервера, давайте добавим наше новое предупреждение в тест и посмотрим, что произойдет, когда будет нарушено условие предупреждения. </p><p>Поскольку мы создали тестовый сервер специально для этого урока, мы можем безопасно сломать код. Если вы тестируете оповещения на существующем сервере, вы, вероятно, захотите сделать это только в тестовом или промежуточном окружении.</p><p>Чтобы создать ошибку PHP в настройке сервера, которую мы создали ранее, сначала используйте SSH для подключения к вашему серверу. Затем перейдите в корневой каталог вашего веб-сервера:</p><pre class="brush: bash noskimlinks noskimwords">cd /var/www/html</pre><p>В этом каталоге создайте файл PHP, например <code class="inline">error.php</code>, и напишите неверный код, чтобы сломать скрипт при попытке загрузить его в браузере:</p><pre class="brush: php noskimlinks noskimwords">&lt;?php// Just some code that will fail syntax_error.echo "Hello, world";</pre><p>Теперь откройте URL в своем веб-браузере и обновите его несколько раз в течение пятиминутного временного интервала, который мы определили для условия предупреждения. (URL-адрес вашего сервера находится на панели управления Amazon EC2.)</p><p>Примерно через пять минут вы должны получить уведомление как в своем почтовом ящике, так и в канале Slack, указанном выше.</p><p>Вот как будет выглядеть ошибка в вашей электронной почте:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut47.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>И то же уведомление в Slack:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut46.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Когда вы нажмете ссылку «<strong>Сведения об инциденте</strong>» в письме или номере инцидента в Slack, вы будете перенаправлены на соответствующую страницу New Relic с гораздо более подробной информацией об ошибке, вызвавшей уведомление:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut48.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Если вы готовы начать работу над предупреждением, нажмите кнопку «<strong>Подтверждение</strong>» справа. После того, как вы нажали на кнопку, она заменяется следующей информацией о состоянии:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut49.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Вы (и ваша команда, настроенная в каналах уведомлений) также получите уведомление о подтверждении по электронной почте и Slack. Это подтверждение означает, что вы берете на себя ответственность за устранение проблемы, и статус не может быть изменен: после того, как вы подтвердите предупреждение, никто другой не сможет подтвердить его снова.</p><p>Когда вы прокрутите страницу до нижней части страницы оповещений, вы увидите следующие кнопки, которые вы можете использовать, чтобы получить дополнительную информацию о решении проблемы (<strong>Open runbook</strong>), <strong>Изменить состояние предупреждения</strong> (если вы считаете, что это ложное предупреждение) или <strong>Вручную закрыть предупреждение</strong> (после устранения проблемы).</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut25.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Для получения дополнительной информации о проблеме вы также можете посетить страницу <strong>ошибок</strong> APM:</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/343/posts/24187/image/tut26.jpg" alt="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." title="Начало работы с мониторингом вашего веб-приложения с использованием  New Relic Alerts..." width="50" height="50"></figure><p>Используйте информацию из APM, чтобы исправить проблему (на этот раз это легко). </p><p>Затем загрузите страницу несколько раз и дождитесь очередного уведомления о том, что проблема больше не активна или вернуться на страницу «Происшествия» и нажмите «Нарушение вручную», чтобы немедленно закрыть предупреждение. </p><p>Поскольку New Relic Alerts управляются данными, если больше данных не поступает с вашего сервера после отправки предупреждения, инцидент остается открытым навсегда. Итак, если вам интересно, почему ваше предупреждение не закрывается автоматически даже после того, как вы исправили ошибку на этом <em>тестовом сервере</em>, это потому, что никто не использует сайт, и поэтому не о чем беспокоиться.<br></p><p>Теперь вы успешно создали свое первое условие предупреждения и использовали его, чтобы исправить ошибку на своем сервере, и вы готовы начать создавать свои политики предупреждения в реальном приложении, чтобы ваше веб-приложение стало более безопасным. </p><h2>Другие показатели для ваших оповещений</h2><p>Хотя уведомление об ошибке, которое мы только что создали, очень полезным, оно по-прежнему является лишь одним из многих предупреждений, которые вы можете создать с помощью New Relic Alerts. </p><p>Чтобы помочь вам в разработке собственных оповещений для реального веб-приложения, рассмотрим остальные варианты, применимые к веб-приложениям, а также некоторые идеи для проблем в вашем приложении, которые вы можете отслеживать с их помощью.</p><h3>1. Условия оповещения на основе показателей APM</h3><p><span>APM</span> (сокращение от мониторинга производительности приложений) - это флагманский продукт New Relic: инструмент мониторинга приложений, который переходит на уровень кода, измеряя такие вещи, как ошибки, и как долго ваше приложение выполняется в разных точках исполнения.</p><p>В дополнение к предварительному условию предупреждения о высоком проценте ошибок, которое мы создали выше, для создания предупреждений можно использовать следующие показатели APM.</p><ul><li> <strong>Apdex</strong>: <span>Apdex</span> (индекс производительности приложения) - это стандартный метод, предназначенный для измерения и сопоставления производительности программных приложений. Метрика измеряет удовлетворенность конечного пользователя и идет от 0 до 1, где 1 означает, что каждый пользователь удовлетворен, а 0 означает, что все недовольны. Хорошим числом для начала является 0,7, что является порогом предупреждения по умолчанию в устаревших New Relic.</li> <li> <strong>Время отклика и пропускная способность</strong>: время отклика показывает, как долго запросы, поступающие в ваше приложение, в среднем обрабатываются. Пропускная способность - это связанная метрика, которая описывает, сколько запросов было <em>успешно</em> обработано вашей службой в течение заданного периода времени. Хотя оба показателя включены в расчет Apdex, добавление отдельных предупреждений для них сделает ваши предупреждения более конкретными и, следовательно, их будет легче анализировать и направлять нужным людям.</li> <li> <strong>Пользовательская метрика</strong>: если вы записываете <span>собственные пользовательские показатели в APM</span>, вы можете использовать их для создания собственных условий для конкретных приложений.</li> <li> <strong>Внешняя служба</strong>. Используя тип внешнего условия службы, вы можете создавать оповещения на основе времени отклика и пропускной способности от HTTP-вызова внешней службы. Например, на моем собственном сайте мониторинг запросов внешних сервисов помог мне идентифицировать вызов API для Tumblr в качестве основной причины медленного времени загрузки.</li> </ul><p>Если в качестве <strong>типа условия</strong> вы выбрали <strong>ключевые показатели транзакций</strong> (платная функция в APM), у вас будет доступ ко всем тем же показателям, описанным в приведенном выше списке, но они будут использоваться для отслеживания только выбранных транзакций, а не всего приложения. </p><p>Таким образом, вы можете получать предупреждения об ошибках в важных транзакциях (например, обработке платежей), отправленных с более высоким приоритетом (например, SMS вместо электронной почты), чем ошибки в менее важных транзакциях.</p><h3>2. Предупреждения на основе показателей браузера</h3><p><span>Браузер</span> - это продукт мониторинга New Relic, разработанный, чтобы дать вам представление о том, как реальные пользователи воспринимают ваше веб-приложение: мониторинг событий, происходящих внутри браузера. Для более подробного объяснения инструмента и инструкций по включению его в свою учетную запись New Relic ознакомьтесь с <span>этим руководством</span>.</p><p>Принимая во внимание, что предупреждения на основе APM уведомляют вас о том, что происходит внутри сервера приложений, предупреждения от браузера могут быть важными для выявления ошибок, которые приводят к нарушению работы пользователя.</p><ul><li> <strong>Apdex конечного пользователя</strong>: ключевой показатель в предупреждениях на основе браузера, Apdex конечного пользователя измеряет процент пользователей, которых удовлетворяет производительность приложения, принимая во внимание также производительность приложения по мере его запуска в браузере.</li> <li> <strong>Время загрузки страницы</strong>. Группа показателей для измерения времени, проведенного в разных частях загрузки страницы: общее время загрузки страницы, рендеринг страницы, веб-приложение, сеть, обработка DOM и очередность запросов, могут использоваться для получения более подробных уведомлений о конкретных узких местах в работе с конечным пользователем.</li> <li> <strong>Просмотры страниц с ошибками JavaScript</strong>. Количество ошибок JavaScript в вашем приложении может быть признаком плохой разработки, который должен быть быстро устранен. Используя эту метрику, вы можете создать предупреждение, подобное предупреждению о процентне ошибок, которое мы создали в этом учебнике, только на этот раз, измеряя ошибки JavaScript вместо ошибок в PHP-коде приложения.</li> <li> Время отклика и пропускная способность AJAX: если ваше приложение использует вызовы AJAX для важных действий, связанных с конечным пользователем, важно сначала найти проблемы в них. Для этого вы можете использовать метрику, измеряющую, как долго выполняются запросы AJAX для обработки и сколько запросов AJAX успешно обслуживаются в заданный период времени.<strong> </strong> </li> <li> <strong>Пользовательская метрика</strong>: как и в предупреждениях APM, вы также можете использовать собственные показатели в своих предупреждениях браузера.</li> </ul><h3>3. Оповещения на основе показателей Servers</h3><p><span>Servers</span> - продукт New Relic для измерения того, что происходит физически на вашем сервере. Вместо того, чтобы смотреть на показатели приложений, как мы это делали с APM и браузером, теперь мы говорим о таких вещах, как использование дискового пространства и загрузка процессора - это такие типы показателей, которые вы хотите, чтобы видела ваша команда NetOps (или просто вы). Дополнительную информацию о New Relic Servers см. в <span>этом руководстве</span>.</p><p>Эти показатели являются важными источниками для обычно-срочных предупреждений:</p><ul><li> <strong>CPU%</strong>: Если ваше приложение использует много ресурсов процессора, это может быть признаком того, что вам нужно либо оптимизировать приложение, либо его стоит перенести его на более мощный сервер. В обоих случаях полезно знать, когда вы достигаете пределов того, что может обрабатывать машина.</li> <li> <strong>Disk IO%</strong>: в New Relic Servers метрика IO% диска указывает вам, сколько раз ваши диски используются, 0% означает отсутствие операций с дисками вообще, а 100%, что диск используется все время. </li> <li> <strong>Memory%</strong>: особенно при работе с тяжелым приложением данных память является одним из первых ресурсов, о которых вам нужно беспокоиться. Убедитесь, что вы получили уведомление достаточно рано, прежде чем машина исчерпает всю свободную память.</li> <li> <strong>Fullest Disk%</strong>: Если на вашем сервере не хватает места на жестком диске, вы можете быть уверены, что ваше приложение не будет работать так, как должно. Опять же, лучше справиться с проблемой дискового пространства до того, как оно повлияет на ваших пользователей: около 90% заполнено или около того. </li> <li> <strong>Средняя загрузка</strong>: средняя нагрузка говорит вам, насколько хорошо процессор сервера справляется с работой, на которую он заряжен. Значение 0 означает полностью бездействующий компьютер, и каждый запущенный или ожидающий процесс добавляет к этому числу. Порог предупреждения зависит от количества ядер вашего сервера: в одноядерной системе среднее значение нагрузки 1 означает, что процессор используется на полную мощность (с двумя ядрами, числом 2 и т.д.). Более высокие значения означают, что есть некоторые процессы, ожидающие очереди.</li> </ul><h2>Что дальше?<br></h2><p>Теперь мы посмотрели, как предупреждения могут помочь вам отслеживать ваше веб-приложение и дать вам душевное спокойствие, мы обсудили основы разработки хороших предупреждений и проделали шаги с помощью New Relic Alerts для настройки предупреждений для вашего веб-приложения.</p><p>Если вы любите возиться с настройками, оповещения предоставляют вам широкие возможности для тонкой настройки ваших предупреждений, пока они не будут в порядке: добавьте в свой код некоторые пользовательские показатели, используйте данные из <span>плагинов New Relic</span> и отправьте предупреждения на все виды каналов уведомлений, или если вы являетесь разработчиком мобильных устройств, обратите свое внимание на мобильные оповещения. Но мы поговорили об алертах лишь в общих чертах.</p><p>Оповещения в настоящее время находятся в бета-версии, а это означает, что новые функции все еще реализуются. Поэтому, чтобы оставаться в курсе новых разработок, следите за новостями в <span>документации New Relic Alerts</span> и <span>присоединяйтесь к дискуссиям на форумах</span>.<br></p><p>Но сперва сделайте несколько предупреждений!</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825364-nachalo-raboty-s-monitoringom-vashego-veb-prilozheniya-s-ispolzovaniem-new-relic-alerts" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825364-nachalo-raboty-s-monitoringom-vashego-veb-prilozheniya-s-ispolzovaniem-new-relic-alerts" class="tm-article-body__tags-item-link">Web Development</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
37664</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
662</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
