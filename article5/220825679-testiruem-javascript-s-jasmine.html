
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Тестируем JavaScript с Jasmine... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Тестируем JavaScript с Jasmine... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Тестируем JavaScript с Jasmine... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Тестируем JavaScript с Jasmine... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Все мы знаем, что код нуждается в тестировании, но на деле мы часто забываем об этом. - Я уверен, будет справедливо сказать, что большинство из нас в девяти случаях из десяти откладывает тестирование, поскольку это означает изучение ещё одной концепции.- В этом уроке, я познакомлю вас с небольшим, но великим фреймворком для легкого тестирования Jav...">
<meta property="og:description" content="Все мы знаем, что код нуждается в тестировании, но на деле мы часто забываем об этом. - Я уверен, будет справедливо сказать, что большинство из нас в девяти случаях из десяти откладывает тестирование, поскольку это означает изучение ещё одной концепции.- В этом уроке, я познакомлю вас с небольшим, но великим фреймворком для легкого тестирования Jav...">
<meta name="twitter:description" content="Все мы знаем, что код нуждается в тестировании, но на деле мы часто забываем об этом. - Я уверен, будет справедливо сказать, что большинство из нас в девяти случаях из десяти откладывает тестирование, поскольку это означает изучение ещё одной концепции.- В этом уроке, я познакомлю вас с небольшим, но великим фреймворком для легкого тестирования Jav...">
<meta property="aiturec:description" content="Все мы знаем, что код нуждается в тестировании, но на деле мы часто забываем об этом. - Я уверен, будет справедливо сказать, что большинство из нас в девяти случаях из десяти откладывает тестирование, поскольку это означает изучение ещё одной концепции.- В этом уроке, я познакомлю вас с небольшим, но великим фреймворком для легкого тестирования Jav...">
<meta property="og:image" content="https://cdn.tutsplus.com/net/uploads/legacy/1026_jasmine/jasmine_logo.png">
<meta property="aiturec:image" content="https://cdn.tutsplus.com/net/uploads/legacy/1026_jasmine/jasmine_logo.png">
<meta name="twitter:image" content="https://cdn.tutsplus.com/net/uploads/legacy/1026_jasmine/jasmine_logo.png">
<meta property="vk:image" content="https://cdn.tutsplus.com/net/uploads/legacy/1026_jasmine/jasmine_logo.png">
<meta property="og:type" content="article">
<link image_src="image" href="https://cdn.tutsplus.com/net/uploads/legacy/1026_jasmine/jasmine_logo.png">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825679-testiruem-javascript-s-jasmine.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825679-testiruem-javascript-s-jasmine.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825679-testiruem-javascript-s-jasmine.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825679-testiruem-javascript-s-jasmine.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825679-testiruem-javascript-s-jasmine.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825679-testiruem-javascript-s-jasmine.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825679-testiruem-javascript-s-jasmine.html" title="Тестируем JavaScript с Jasmine... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Тестируем JavaScript с Jasmine... | envatomarket.ru | norma-studio.github.io" title="Тестируем JavaScript с Jasmine... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/653463654.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825679-testiruem-javascript-s-jasmine.html" class="tm-user-info__username" title="
С. Салин" aria-label="
С. Салин">
С. Салин</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Тестируем JavaScript с Jasmine...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825679-testiruem-javascript-s-jasmine" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825679-testiruem-javascript-s-jasmine" class="tm-article-snippet__hubs-item-link"><span>Web Development</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825679-testiruem-javascript-s-jasmine.html" />
    <link itemprop="image" href="https://cdn.tutsplus.com/net/uploads/legacy/1026_jasmine/jasmine_logo.png">
    <meta itemprop="headline name" content="Тестируем JavaScript с Jasmine... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Все мы знаем, что код нуждается в тестировании, но на деле мы часто забываем об этом. - Я уверен, будет справедливо сказать, что большинство из нас в девяти случаях из десяти откладывает тестирование, поскольку это означает изучение ещё одной концепции.- В этом уроке, я познакомлю вас с небольшим, но великим фреймворком для легкого тестирования Jav...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Все мы знаем, что код нуждается в тестировании, но на деле мы часто забываем об этом. - Я уверен, будет справедливо сказать, что большинство из нас в девяти случаях из десяти откладывает тестирование, поскольку это означает изучение ещё одной концепции.- В этом уроке, я познакомлю вас с небольшим, но великим фреймворком для легкого тестирования Jav...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Все мы знаем, что код нуждается в тестировании, но на деле мы часто забываем об этом.   Я уверен, будет справедливо сказать, что большинство из нас в девяти случаях из десяти откладывает тестирование, поскольку это означает изучение ещё одной концепции.  В этом уроке, я познакомлю вас с небольшим, но великим фреймворком для легкого тестирования JavaScript кода.</p><hr><h2>Шаг 0: Понимание BDD</h2> <p>Сегодня мы собираемся изучить Jasmine - BDD фреймворк для тестирования. Но мы немного остановимся здесь, чтобы поговорить кратко о BDD и TDD.  Раскроем определение каждой из этих аббревиатур для тех, кто ещё не сталкивался с ними: BDD - это разработка, основанная на поведении, а TDD - это разработка через тестирование. В данный момент я ещё занимаюсь изучением всех особенностей каждой из этих технологий на практике, но уже могу выделить некоторые из основных отличий:</p> <blockquote> <p>BDD и TDD ... означают Разработку, основанную на поведении (функционировании) и Разработку, основанную на тестировании.</p> </blockquote> <p>TDD в простой форме можно описать следующим образом:</p> <ol><li>Пишешь тесты</li> <li>Отслеживаешь причины, по которым тесты не проходят</li> <li>Добиваешься успешного прохождения тестов</li> <li>Рефакторишь</li> <li>Повторяешь</li> </ol><p>Это довольно просто понять, не так ли? </p> <p>BDD немного сложнее: насколько я понимаю это в данный момент, я не думаю, что бы вы или я как разработчик, работающий в одиночку, могли бы использовать его в полной мере, это больше командная вещь. Вот некоторые практические особенности BDD:</p> <ul><li>Отлаживание целей различных заинтересованных сторон необходимых для реализации видений. </li> <li>Вовлечение заинтересованных сторон в процесс внедрения через внешнюю разработку программного обеспечения</li> <li>Использование примеров для описания поведения всего приложения или частей кода.</li> <li>Автоматизация этих тестов для обеспечения быстрой обратной связи и регрессионого тестирования</li> </ul><p>Для более близкого ознакомления вы можете прочитать <span>обширную статью на Википедии</span> (откуда были взяты перечисленные здесь пункты). </p> <p>Подведем итоги ко всему выше сказанному, в то время как Jasmine представляет собой BDD фреймворк, мы собираемся использовать больше как TDD. Это не значит что мы будем использовать его неправильно. После того, как мы закончим обучение, вы с легкостью сможете проверить ваш JavaScript код ... и я рассчитываю, что вы это сделаете!</p> <hr><h2>Шаг 1: Изучаем синтаксис </h2> <div><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cdn.tutsplus.com/net/uploads/legacy/1026_jasmine/jasmine_logo.png" class="lazy07" alt="Тестируем JavaScript с Jasmine..." title="Тестируем JavaScript с Jasmine..." width="50" height="50"></div> <blockquote><p> Jasmine многое перенял от Rspec.</p></blockquote> <p>Если вы знакомы с Rspec, в рамках BDD фреймворка, то вы увидите, что Jasmine многое от него перенял. В Jasmine тестах можно выделить 2 важных части: <code>describe</code> блоки и блоки <code>it</code>. Давайте посмотрим как это работает.</p> <p>Мы обязательно рассмотрим близкие к реальным ситуациям тесты, но пока разберем более простые:  </p> <pre class="brush: noskimlinks noskimwords">describe("JavaScript addition operator", function () {    it("adds two numbers together", function () {        expect(1 + 2).toEqual(3);    });});</pre> <p>Обе функции <code>describe</code> и <code>it</code> имеют 2 параметра: строку и функцию. Большинство тест фреймворков пытаются делать максимально удобными для чтения на английском, Jasmine не стал исключением. Обратите внимание, что строки, переданные в <code>describe </code>и в <code>it</code> формируют следующее предложение :"JavaScript оператор сложения складывает 2 числа вместе". Теперь рассмотрим как это работает.</p> <p>Внутри блока <code>it</code> вы можете указать все настройки кода, который собираетесь протестировать. С этим вроде все понятно, приводить снова пример не будем.  Когда вы соберетесь протестировать ваш код, вы начнете с того, что передадите его в функцию <code>expect</code>. Обратите внимание на такое предложение в примере:"expect 1+2 to equeal 3".</p> <p>Но я забегаю немного вперед. Как я уже сказал, любое значение, переданное в <code>expect </code>будет протестировано. Вызываемый метод, который возвращает <code>expect</code>, будет определен запускаемым тестом.  Эта группа методов называется "вычислителями", и мы рассмотрим некоторые из них сегодня. В этом случае мы используем вычислитель <code>toEqual</code>, который проверяет, что значение, переданное в <code>expect </code>совпадаем со значением переданным в <code>toEqual</code>.</p> <p>Я думаю, вы готовы перейти на следующий этап, так давайте настроим простой проект используя Jasmine.</p> <hr><h2>Шаг 2: Настройка проекта</h2> <p>Jasmine можно использовать сам по себе или интегрироватьего в Rails проект. Мы воспользуемся первым вариантом. В то время, как Jasmine может работать вне браузера, мы можем получить действительно хороший небольшой шаблон с загрузки. </p> <p>И так, перейдите на <span>страницу загрузки</span> и скачайте последнюю версию. Вы должны получить что-то вроде этого:</p> <div><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1026_jasmine/jasmine-download.png" alt="Тестируем JavaScript с Jasmine..." title="Тестируем JavaScript с Jasmine..." width="50" height="50"></div> <p>Актуальные файлы Jasmine фреймворка вы найдете в парке <code>lib</code>. Если вы предпочитаете структурировать ваши проекты по-другому, то, пожалуйста, мы же собираемся придерживаться пока такой структуре. </p> <p>В этом шаблоне проекта есть пример кода. «Фактический» JavaScript (код, который мы хотим проверить) можно найти в подкаталоге <code>src</code>; мы скоро поместим наш код. Код с тестами - <em>спецификации</em> - находится в папке <code>spec</code>. Не беспокойтесь о файле <code>SpecHelper.js</code>; мы еще вернемся к нему. </p> <p>Этот файл <code>SpecRunner.html</code> запускает тесты в браузере. Откройте его (и установите флажок «пройденный» в верхнем правом углу), и вы увидите что-то вроде этого:</p> <div><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=600/net/uploads/legacy/1026_jasmine/sample-tests.png" alt="Тестируем JavaScript с Jasmine..." title="Тестируем JavaScript с Jasmine..." width="50" height="50"></div> <p>Это показывает нам, что все тесты для нашего проекта проходят. После того, как вы пройдете этот учебник, я рекомендую вам открыть файл <code>spec/PlayerSpec.js</code> и ознакомиться с этим кодом. Но прямо сейчас давайте попробуем эту тестовую запись. </p> <ul><li>Создайте <code>convert.js</code> в папке <code>src</code>.</li> <li>Создайте <code>convertSpec.js</code> в папке <code>spec</code>,</li> <li>Скопируйте файл <code>SpecRunner.html</code> и переименуйте его <code>SpecRunner.original.html</code>.</li> <li> <p>Удалите ссылки на образцы файлов проекта в <code>SpecRunner.html</code> и добавьте следующие строки:</p> <pre class="brush: html noskimlinks noskimwords">&lt;script src="src/convert.js"&gt;&lt;&gt;/script&gt;&lt;script src="spec/convertSpec.js"&gt;&lt;/script&gt;</pre> </li> </ul><p>Теперь мы готовы создать мини-библиотеку, которая будет конвертировать данные между различными единицами измерения. Начнем с написания тестов для нашей мини-библиотеки.</p> <hr><h2>Шаг 3: Написание тестов</h2> <p>Итак, давайте напишем наши тесты, не так ли?</p> <pre class="brush: noskimlinks noskimwords">describe( "Convert library", function () {    describe( "distance converter", function () {        });        describe( "volume converter", function () {    });});</pre> <p>Мы начнем с этого; мы тестируем нашу библиотеку <code>Convert</code>. Вы заметите, что здесь мы вставляем <code>describe</code> выражения. Это совершенно законно. На самом деле это отличный способ проверить отдельные фрагменты функциональных возможностей одной и той же базы кода. Вместо двух отдельных <code>describe</code> вызовов для библиотеки <code>Convert</code> и конвертации расстояний, а так же конвертации объемов, у нас может быть более описательный набор тестов, подобных этому.</p> <p>Теперь фактические тесты. Я буду повторять внутренние <code>describe</code> вызовы здесь для вашего удобства.</p> <pre class="brush: noskimlinks noskimwords">describe( "distance converter", function () {    it("converts inches to centimeters", function () {        expect(Convert(12, "in").to("cm")).toEqual(30.48);    });    it("converts centimeters to yards", function () {        expect(Convert(2000, "cm").to("yards")).toEqual(21.87);    });});</pre> <p>Вот наши тесты для преобразования расстояний. Здесь важно заметить что мы еще не написали код для нашей библиотеки <code>Convert</code>, поэтому в этих тестах мы делаем больше, чем просто проверяем, работает ли это: мы фактически решаем, как мы будем пользоваться нашей библиотекой (и, следовательно то, как она должна быть реализована). Вот как мы решили сделать наши конвертации:</p> <pre class="brush: noskimlinks noskimwords">Convert(&lt;number&gt;, &lt;from unit string&gt;).to(&lt;to unit string&gt;);</pre> <p>Да, я понимаю, как Jasmine выполнил свои тесты, но я думаю, что это хороший формат. Итак, в этих двух тестах я сам сделал конвератции (нормально, с калькулятором), чтобы узнать, каковы будут результаты наших вызовов. Мы используем <code>toEqual</code> matcher, чтобы проверить, проходят ли наши тесты.</p> <p>Вот тесты для объемов:</p> <pre class="brush: noskimlinks noskimwords">describe( "volume converter", function () {    it("converts litres to gallons", function () {        expect(Convert(3, "litres").to("gallons")).toEqual(0.79);    });    it("converts gallons to cups", function () {        expect(Convert(2, "gallons").to("cups")).toEqual(32);    });});</pre> <p>И я собираюсь добавить еще два теста в наш вызов <code>describe</code> верхнего уровня:</p> <pre class="brush: noskimlinks noskimwords">it("throws an error when passed an unknown from-unit", function () {    var testFn = function () {        Convert(1, "dollar").to("yens");    }    expect(testFn).toThrow(new Error("unrecognized from-unit"));});it("throws an error when passed an unknown to-unit", function () {    var testFn = function () {        Convert(1, "cm").to("furlongs");    }    expect(testFn).toThrow(new Error("unrecognized to-unit"));});</pre> <p>Они проверяют ошибки, которые должны быть выброшены, когда неизвестные единицы передаются либо в функцию <code>Convert</code>, либо в метод <code>to</code>. Вы заметите, что я обертываю фактическое преобразование в функцию и передаю ее функции <code>expect</code>. Это потому, что мы не можем вызывать функцию в качестве параметра <code>expect</code>; нам нужно передать ему функцию и дать ей вызов самой функции. Поскольку нам нужно передать параметр в функцию <code>to</code>, мы можем сделать это таким образом.</p> <p>Важно отметить, что я представляю новый matcher: <code>toThrow</code>, который принимает объект ошибки. В ближайшее время мы рассмотрим еще несколько помощников. </p> <p>Теперь, если вы откроете <code>SpecRunner.html</code> в браузере, вы получите следующее:</p> <div><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=583/net/uploads/legacy/1026_jasmine/convert-failed.png" alt="Тестируем JavaScript с Jasmine..." title="Тестируем JavaScript с Jasmine..." width="50" height="50"></div> <p>Отлично! Наши тесты терпят неудачу. Теперь давайте откроем наш файл <code>convert.js</code> и проделаем определенную работу:</p> <pre class="brush: noskimlinks noskimwords">function Convert(number, fromUnit) {    var conversions = {            distance : {                meters : 1,                cm     : 0.01,                feet   : 0.3048,                inches : 0.0254,                yards  : 0.9144            },            volume : {                liters : 1,                gallons: 3.785411784,                cups   : 0.236588236             }        },        betweenUnit = false,        type, unit;    for (type in conversions) {        if (conversions(type)) {            if ( (unit = conversions[type][fromUnit]) ) {                betweenUnit = number * unit * 1000;            }        }    }    return {        to : function (toUnit) {            if (betweenUnit) {                for (type in conversions) {                    if (conversions.hasOwnProperty(type)) {                        if ( (unit = conversions[type][toUnit]) ) {                            return fix(betweenUnit / (unit * 1000));                        }                    }                }                throw new Error("unrecognized to-unit");            } else {                throw new Error("unrecognized from-unit");            }              function fix (num) {                return parseFloat( num.toFixed(2) );            }        }    };}</pre> <p>Мы не собираемся обсуждать это, потому что здесь мы изучаем Jasmine. Но вот основные моменты:</p> <ul><li>Мы делаем преобразования, сохраняя конвертацию в объекте; конвертации классифицируются по типу (расстояние, объем, добавьте свои собственные). Для каждого поля измерения мы имеем базовое значение (метры или литры, здесь), к которому все преобразовывается. Поэтому, когда вы видите <code>yards: 0.9144</code>, вы знаете, что это количество ярдов в метрах. Затем, чтобы преобразовать ярды, скажем, в сантиметры, мы умножаем <code>yards</code> на первый параметр (чтобы получить количество метров), а затем разделим произведение на <code>cm</code>, количество метров в сантиметре. Таким образом, нам не нужно сохранять коэффициенты конверсии для каждой пары значений. Это также упрощает добавление новых значений позже.</li> <li>В нашем случае мы ожидаем, что переданные единицы будут такими же, как ключи, которые мы используем в таблице преобразования. Если бы это была настоящая библиотека, мы бы хотели поддерживать несколько форматов - « in», « inch» и « inches» - и поэтому мы хотели бы добавить некоторую логику, чтобы соответствовать <code>fromUnit</code>.</li> <li>В конце функции <code>Convert</code> мы сохраняем промежуточное значение в <code>betweenUnit</code>, которое инициализируется значением <code>false</code>. Таким образом, если у нас не будет <code>fromUnit</code>, <code>betweenUnit</code> будет <code>false</code> в методе <code>to</code>, и, следовательно будет выброшена ошибка.</li> <li>Если у нас нет <code>toUnit</code>, будет выброшена другая ошибка. В противном случае мы разделим по мере необходимости и вернем преобразованное значение.</li> </ul><p>Теперь вернитесь к <code>SpecRunner.html</code> и перезагрузите страницу. Вы должны увидеть это (после установки флажка «Показать успешные»):</p> <div><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cdn.tutsplus.com/cdn-cgi/image/width=598/net/uploads/legacy/1026_jasmine/convert-passed.png" alt="Тестируем JavaScript с Jasmine..." title="Тестируем JavaScript с Jasmine..." width="50" height="50"></div> <p>Вот так! Наши тесты проходят. Если бы мы здесь разрабатывали настоящий проект, мы бы написали тесты на определенную часть функционала, заставляли их проходить, потом написали бы тесты для другой проверки, заставили бы их проходить и т.д. Но так как это был простой пример, мы только что сделали все это одним махом.</p> <p>И теперь, когда вы видели этот простой пример использования Jasmine, давайте рассмотрим еще несколько функций, которые он нам предлагает.</p> <hr><h2>Шаг 4: Изучение матчеров</h2> <p>До сих пор мы использовали два матчеры: <code>toEqual</code> и <code>toThrow</code>. Есть, конечно, и многие другие. Вот некоторые из них, которые вы, вероятно, найдете полезными; вы можете увидеть весь<span> список в вики</span>.</p> <h3>toBeDefined / toBeUndefined</h3> <p>Если вы просто хотите убедиться, что переменная или свойство определено, для этого есть совпадение. Также можно подтвердить, что переменная или свойство <code>undefined</code>.</p> <pre class="brush: noskimlinks noskimwords">it("is defined", function () {    var name = "Andrew";    expect(name).toBeDefined();})it("is not defined", function () {    var name;    expect(name).toBeUndefined();});</pre> <h3>toBeTruthy / toBeFalsy</h3> <p>Если что-то должно быть истинным или ложным, эти помощники сделают это.</p> <pre class="brush: noskimlinks noskimwords">it("is true", function () {    expect(Lib.isAWeekDay()).toBeTruthy();});it("is false", function () {    expect(Lib.finishedQuiz).toBeFalsy();});</pre> <h3>toBeLessThan / toBeGreaterThan</h3> <p>Для всех математиков. Вы знаете, как они работают:</p> <pre class="brush: noskimlinks noskimwords">it("is less than 10", function () {    expect(5).toBeLessThan(10);});it("is greater than 10", function () {    expect(20).toBeGreaterThan(10);});</pre> <h3>toMatch</h3> <p>Есть ли какой-нибудь выходной текст, который должен соответствовать регулярному выражению? Матчер <code>toMatch</code> готов для этого.</p> <pre class="brush: noskimlinks noskimwords">it("outputs the right text", function () {    expect(cart.total()).toMatch(/\$\d*.\d\d/);});</pre> <h3>toContain</h3> <p>Этот очень полезен. Он проверяет, содержит ли массив или строка элемент или подстроку.</p> <pre class="brush: noskimlinks noskimwords">it("should contain oranges", function () {    expect(["apples", "oranges", "pears"]).toContain("oranges");});</pre> <p>Есть еще несколько помощников, которые вы можете найти в <span>вики</span>. Но что, если вы хотите свой матчер? На самом деле, вы должны иметь возможность делать что угодно с некоторым кодом настройки и матчерами Jasmine, но иногда лучше отвлечь часть этой логики, чтобы получить более читаемый тест. Серьезно (ну, на самом деле нет), Jasmine позволяет нам создавать свои собственные матчи. Но для этого нам сначала нужно кое-что узнать.</p> <h2>Шаг 5: Выполнение до и после</h2> <p>Часто - при тестировании базы кода - вы хотите выполнить несколько строк кода настройки для каждого теста в серии. Было бы больно и многословно копировать это для каждого <code>it</code> вызова, поэтому у Jasmine есть удобная небольшая функция, которая позволяет нам назначать код для запуска до или после каждого теста. Давайте посмотрим, как это работает:</p> <pre class="brush: noskimlinks noskimwords">describe("MyObject", function () {    var obj = new MyObject();    beforeEach(function () {        obj.setState("clean");    });    it("changes state", function () {        obj.setState("dirty");        expect(obj.getState()).toEqual("dirty");    })    it("adds states", function () {        obj.addState("packaged");        expect(obj.getState()).toEqual(["clean", "packaged"]);    })});</pre> <p>В этом надуманном примере вы можете видеть, как до запуска каждого теста состояние <code>obj</code> установлено в «clean». Если мы этого не сделали, изменения, внесенные в объект в предыдущем тесте, сохраняются до следующего теста по умолчанию. Конечно, мы могли бы сделать что-то подобное с функцией <code>AfterEach</code>:</p> <pre class="brush: noskimlinks noskimwords">describe("MyObject", function () {    var obj = new MyObject("clean"); // sets initial state    afterEach(function () {        obj.setState("clean");    });    it("changes state", function () {        obj.setState("dirty");        expect(obj.getState()).toEqual("dirty");    })    it("adds states", function () {        obj.addState("packaged");        expect(obj.getState()).toEqual(["clean", "packaged"]);    })});</pre> <p>Здесь мы создаем объект для начала, а затем исправляем его <em>после</em> каждого теста. Если вы хотите функцию <code>MyObject</code>, чтобы попробовать этот код, вы можете получить его <span>здесь, на GitHub</span>.</p> <h2>Шаг 6: Создание пользовательских матчеров</h2> <p>Как мы уже говорили ранее, клиентские помощники, вероятно, иногда могут быть полезны. Так что давайте напишем один. Мы можем добавить матчер либо к вызову <code>BeforeEach</code>, либо к вызову <code>it</code> (ну, я думаю, вы <em>могли бы</em> сделать это в вызове <code>AfterEach</code>, но это не имело бы большого смысла). Вот как вы начинаете:</p> <pre class="brush: noskimlinks noskimwords">beforeEach(function () {    this.addMatchers({    });});</pre> <p>Довольно просто, не так ли? Мы вызываем <code>this.addMatchers</code>, передавая ему параметр объекта. Каждый ключ в этом объекте станет именем матчера, и связанная с ним функция (значение) будет выполняться. Предположим, мы хотим создать матчер с проверкой, чтобы узнать, находится ли одно число между двумя другими. Вот что вы должны написать:</p> <pre class="brush: noskimlinks noskimwords">beforeEach(function () {    this.addMatchers({        toBeBetween: function (rangeFloor, rangeCeiling) {            if (rangeFloor &gt; rangeCeiling) {                var temp = rangeFloor;                rangeFloor = rangeCeiling;                rangeCeiling = temp;            }            return this.actual &gt; rangeFloor &amp;&amp; this.actual &lt; rangeCeiling;        }    });});</pre> <p>Мы просто берем два параметра, проверяем, что первый из них меньше второго, и возвращаем логическое выражение, которое выполняется в true, если выполняются наши условия. Здесь важно заметить, как мы получаем значение, которое было передано функции <code>expect</code>: <code>this.actual</code>. </p> <pre class="brush: noskimlinks noskimwords">it("is between 5 and 30", function () {    expect(10).toBeBetween(5, 30);});it("is between 30 and 500", function () {    expect(100).toBeBetween(500, 30);});</pre> <p>Это то, что делает файл <code>SpecHelper.js</code>; у него есть вызов <code>beforeEach</code>, который добавляет совпадение <code>tobePlaying()</code>. Проверьте это!</p> <hr><h2>Заключение: повеселитесь!</h2> <p>С Jasmine вы многое можете сделать: функциональные тесты, шпионы, асинхронные спецификации и многое другое. Я рекомендую вам <span>изучить вики</span>, если вы заинтересованы. Есть также несколько сопутствующих библиотек, которые облегчают тестирование в DOM: <span>Jasmine-jQuery</span> и <span>Jasmine-fixture</span> (которая зависит от Jasmine-jQuery).</p> <p>Поэтому, если вы до сих пор еще не тестируете свой JavaScript, сейчас самое подходящее время чтобы начать. Как мы видели, быстрый и простой синтаксис Jasmine делает процесс тестирование довольно простым. Просто уже не осталось причин, чтобы не начать писать тесты, не так ли?</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825679-testiruem-javascript-s-jasmine" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825679-testiruem-javascript-s-jasmine" class="tm-article-body__tags-item-link">Web Development</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
40296</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
413</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
