
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом
... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом
... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом
... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом
... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="Ежедневная жизнь разработчика заполнена однообразными и повторяющимися задачами. К счастью, мы живем в век-автоматизации, а это значит, что компьютеры отлично справляются со скучными делами, и они почти никогда не жалуются на это! Итак, давайте создадим некоторую автоматизацию, чтобы сделать нашу ежедневную шлифовку немного менее хрустящей....">
<meta property="og:description" content="Ежедневная жизнь разработчика заполнена однообразными и повторяющимися задачами. К счастью, мы живем в век-автоматизации, а это значит, что компьютеры отлично справляются со скучными делами, и они почти никогда не жалуются на это! Итак, давайте создадим некоторую автоматизацию, чтобы сделать нашу ежедневную шлифовку немного менее хрустящей....">
<meta name="twitter:description" content="Ежедневная жизнь разработчика заполнена однообразными и повторяющимися задачами. К счастью, мы живем в век-автоматизации, а это значит, что компьютеры отлично справляются со скучными делами, и они почти никогда не жалуются на это! Итак, давайте создадим некоторую автоматизацию, чтобы сделать нашу ежедневную шлифовку немного менее хрустящей....">
<meta property="aiturec:description" content="Ежедневная жизнь разработчика заполнена однообразными и повторяющимися задачами. К счастью, мы живем в век-автоматизации, а это значит, что компьютеры отлично справляются со скучными делами, и они почти никогда не жалуются на это! Итак, давайте создадим некоторую автоматизацию, чтобы сделать нашу ежедневную шлифовку немного менее хрустящей....">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/01_github_create.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/01_github_create.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/01_github_create.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/01_github_create.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/01_github_create.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825501-nastrojka-nepreryvnoj-integratsii-i-nepreryvnogo-razvertyvaniya-s-dzhenkinsom.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825501-nastrojka-nepreryvnoj-integratsii-i-nepreryvnogo-razvertyvaniya-s-dzhenkinsom.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825501-nastrojka-nepreryvnoj-integratsii-i-nepreryvnogo-razvertyvaniya-s-dzhenkinsom.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825501-nastrojka-nepreryvnoj-integratsii-i-nepreryvnogo-razvertyvaniya-s-dzhenkinsom.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825501-nastrojka-nepreryvnoj-integratsii-i-nepreryvnogo-razvertyvaniya-s-dzhenkinsom.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825501-nastrojka-nepreryvnoj-integratsii-i-nepreryvnogo-razvertyvaniya-s-dzhenkinsom.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825501-nastrojka-nepreryvnoj-integratsii-i-nepreryvnogo-razvertyvaniya-s-dzhenkinsom.html" title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом
... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом
... | envatomarket.ru | norma-studio.github.io" title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом
... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/64533jghfdd.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825501-nastrojka-nepreryvnoj-integratsii-i-nepreryvnogo-razvertyvaniya-s-dzhenkinsom.html" class="tm-user-info__username" title="
Д. Слесарев" aria-label="
Д. Слесарев">
Д. Слесарев</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом
...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825501-nastrojka-nepreryvnoj-integratsii-i-nepreryvnogo-razvertyvaniya-s-dzhenkinsom" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825501-nastrojka-nepreryvnoj-integratsii-i-nepreryvnogo-razvertyvaniya-s-dzhenkinsom" class="tm-article-snippet__hubs-item-link"><span>Web Development</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825501-nastrojka-nepreryvnoj-integratsii-i-nepreryvnogo-razvertyvaniya-s-dzhenkinsom.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/01_github_create.jpg">
    <meta itemprop="headline name" content="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом
... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="Ежедневная жизнь разработчика заполнена однообразными и повторяющимися задачами. К счастью, мы живем в век-автоматизации, а это значит, что компьютеры отлично справляются со скучными делами, и они почти никогда не жалуются на это! Итак, давайте создадим некоторую автоматизацию, чтобы сделать нашу ежедневную шлифовку немного менее хрустящей....">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">Ежедневная жизнь разработчика заполнена однообразными и повторяющимися задачами. К счастью, мы живем в век-автоматизации, а это значит, что компьютеры отлично справляются со скучными делами, и они почти никогда не жалуются на это! Итак, давайте создадим некоторую автоматизацию, чтобы сделать нашу ежедневную шлифовку немного менее хрустящей....</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>Ежедневная жизнь разработчика заполнена однообразными и повторяющимися задачами. К счастью, мы живем в век автоматизации, а это значит, что компьютеры отлично справляются со скучными делами, и они <i>почти</i> никогда не жалуются на это! Итак, давайте создадим некоторую автоматизацию, чтобы сделать нашу ежедневную шлифовку немного менее хрустящей.</p><p>Тестирование и развертывание - два неотъемлемых элемента веб-разработки. При некоторой смешанной автоматизации они становятся решениями, которые обычно называют «непрерывной интеграцией» (CI) и «непрерывным развертыванием» (CD). «Непрерывный» аспект этих решений означает, что ваши проекты будут автоматически протестированы и развернуты, что позволит вам больше сосредоточиться на написании кода и о том, чтобы пасти его на серверы.<br></p><p>В этом уроке мы создадим популярный сервер непрерывной интеграции <span>Jenkins</span> и синхронизируем его с <span>GitHub</span>, чтобы он запускал тесты каждый раз при пуше нового кода. После этого мы создадим решение для автоматического перевода этого кода на наш сервер приложений, устраняя необходимость развертывания вручную.<br></p><p>Мы будем использовать <span>DigitalOcean</span> для быстрого и легкого создания виртуальных частных серверов на основе облачных вычислений (VPS) для размещения нашего приложения и Jenkins.<br></p><p>Примечание. В этом учебном пособии предполагается, что у вас есть базовое знание работы с командной строкой и что на вашем компьютере установлены как Git, так и Node.js.<br></p><h2>Наше приложение<br></h2><p>Прежде чем мы можем протестировать или развернуть что-либо, нам нужно <i>что-то</i> испытать и развернуть. Позвольте мне познакомить вас с нашим дружественным тестовым приложением, точно названным «hello-jenkins».</p><p>Мы будем писать простое приложение Node.js в соответствии с нашими целями. Оно просто будет отображать строку текста в браузере, но этого достаточно, чтобы обеспечить правильную настройку непрерывной интеграции и непрерывного развертывания.</p><h3>Git Up на GitHub</h3><p>Поскольку мы будем хранить наш проект на GitHub, давайте начнем там. Войдите в (или создайте) свою учетную запись GitHub и создайте новый репозиторий. Назовите его «hello-jenkins» и дайте ему следующее описание:</p><pre class="brush: plain noskimlinks noskimwords">My super sample app to test out Jenkins.</pre><p>Для простоты, давайте сохраним repo <b>Public</b>. Идите и проверьте <b>инициализацию этого репозитория с помощью опции README</b> и выберите опцию <b>Node</b> из раскрывающегося списка <b>Добавить .gitignore</b>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/01_github_create.jpg" alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." width="50" height="50"></figure><p>Нажмите кнопку <b>Create repository</b>, и наш репозиторий будет готов.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/02_github_repo.jpg" alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." width="50" height="50"></figure><p>Теперь давайте клонируем наш новый репозиторий на нашу локальную машину и перейдем к нему:</p><pre class="brush: bash noskimlinks noskimwords">git clone git@github.com:&lt;you&gt;/hello-jenkins.gitcd hello-jenkins</pre><h3>Наше node приложение</h3><p>Вот, какова будет окончательная структура нашего приложения:</p><pre class="brush: plain noskimlinks noskimwords">├── .gitignore├── app.js├── package.json├── README.md├── script│   ├── deploy│   └── test└── test    └── test.js</pre><p>Давайте рассмотрим его по шагам. Первым шагом к созданию любого приложения Node.js является создание файла <code class="inline">package.json</code>. Вот наш:<br></p><pre class="brush: javascript noskimlinks noskimwords">{  "name": "hello-jenkins",  "description": "hello jenkins test app",  "version": "0.0.1",  "private": true,  "dependencies": {    "express": "3.12.0"  },  "devDependencies": {    "mocha": "1.20.1",    "supertest": "0.13.0"  }}</pre><p>В <code class="inline">dependencies</code> мы добавили <code class="inline">express</code>, который мы будем использовать, чтобы создать наше приложение Node.js. В <code class="inline">devDependencies</code> мы добавили <code class="inline">mocha</code> и <code class="inline">supertest</code>, оба из которых помогут нам написать наши тесты.<br></p><p>Теперь, когда наш <code class="inline">package.json</code> определен, установите наши зависимости приложения, запустив:</p><pre class="brush: bash noskimlinks noskimwords">npm install</pre><p>Пришло время написать наш код приложения. Создайте файл с именем <code class="inline">app.js</code> и добавьте к нему следующее:</p><pre class="brush: javascript noskimlinks noskimwords">var express = require("express");var app = express();app.get("/", function (req, res) {  res.send("hello world");});app.listen(process.env.PORT || 5000);module.exports = app;</pre><p>Давайте раскроем наше простое приложение Node.js:</p><ul><li>Сначала мы импортируем библиотеку <code class="inline">express</code>, указанную в нашем <code class="inline">package.json</code>.</li> <li>Мы используем <code class="inline">express</code> для создания нового <code class="inline">app</code>. </li> <li>Мы сообщим нашему <code class="inline">app</code> отвечать на все запросы, которые попадают в корень нашего сайта (<code class="inline">/</code>), с текстом «hello world».</li> <li>Затем мы расскажем нашему <code class="inline">app</code> о том, какой порт прослушивает запросы (<code class="inline">process.env.PORT</code> ссылается на переменную окружения, называемую «PORT», а если она не существует, мы вместо этого по умолчанию устанавливаем порт 5000).</li> <li>Наконец, мы делаем наше <code class="inline">app</code> доступным для других модулей Node.js через <code class="inline">module.exports</code> (это будет полезно позже, когда мы добавим тесты).</li> </ul><p>Это оно! Наше приложение готово - давайте запустим его:<br></p><pre class="brush: bash noskimlinks noskimwords">node app.js</pre><p>Откройте свой любимый браузер и перейдите по адресу <span><code class="inline">http://localhost:5000</code></span>, и вы должны увидеть <b>hello wolrd</b>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/03_local_server.jpg" alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." width="50" height="50"></figure><p>Это не самое захватывающее тестовое приложение, но оно работает! Идите дальше и выключите наше приложение Node.js с помощью <b>Ctrl-C</b>, и давайте двигаться дальше.</p><h3>Тестирование</h3><p>Пришло время написать тест для нашего приложения - в конце концов, если нам нечего тестировать, тогда Дженкинсу нечего делать!</p><p>Создайте папку с именем <code class="inline">test</code> и создайте файл с именем <code class="inline">test.js</code>. Добавьте следующий код для <code class="inline">test/test.js</code>:</p><pre class="brush: javascript noskimlinks noskimwords">var request = require("supertest");var app = require("../app.js");describe("GET /", function() {  it("respond with hello world", function(done) {    request(app).get("/").expect("hello world", done);  });});</pre><p>Как работает наш тест? Во-первых, мы импортируем как <code class="inline">supertest</code>, так и наше <code class="inline">app</code>. Затем мы добавляем один тест, описывающий, что должно произойти, когда запрос <code class="inline">GET</code> попадает в корень нашего сайта. Мы говорим нашему тесту, что ответ будет «hello world», и если это так, тест проходит.<br></p><p>Чтобы запустить тест, мы будем использовать библиотеку <span>Mocha</span>. Мы установили Mocha как часть наших <code class="inline">devDependencies</code>, поэтому мы просто запустим команду, которая передает наш тестовый файл в Mocha и Mocha запустит наши тесты:</p><pre class="brush: bash noskimlinks noskimwords">./node_modules/.bin/mocha ./test/test.js</pre><p>Когда закончите, вы увидите зеленую точку вместе с информацией о том, что один тест прошел. Это означает, что наш тест прошел успешно! Но набрав эту команду снова и снова, скоро появятся судороги пальцев и подергивания глаз, поэтому давайте сделаем для нас вспомогательный скрипт (помните, компьютеры не скучают!).</p><p>Создайте новый каталог с именем <code class="inline">script</code>, и в нем создайте файл с именем <code class="inline">test</code> (обратите внимание, что расширение не существует). Добавьте в <code class="inline">script/test</code> следующее:<br></p><pre class="brush: bash noskimlinks noskimwords">#!/bin/sh./node_modules/.bin/mocha ./test/test.js</pre><p>Теперь у нас есть сценарий оболочки для выполнения этой линии для нас. Но прежде чем мы сможем использовать его, мы должны предоставить ему исполняемые разрешения:<br></p><pre class="brush: bash noskimlinks noskimwords">chmod +x script/test</pre><p>Давайте проверим это! Запускаем:<br></p><pre class="brush: bash noskimlinks noskimwords">./script/test</pre><p>... и вы должны увидеть прохождение того же теста, что и раньше.<br></p><h3>Время пушить</h3><p>Хорошо, у нас есть рабочее приложение и рабочий тест, поэтому давайте добавим наш новый код в GitHub:<br></p><pre class="brush: bash noskimlinks noskimwords">git add .git commit -m "Add node app"git push origin master</pre><p>И это все - наше приложение сделано и на GitHub!<br></p><h2>Наше приложение обслуживается<br></h2><p>У нас есть увлекательное приложение (у «hello world» есть своего рода поэзия к нему, вы не согласны?), Но никто этого не видит! Давайте изменим это и запустим наше приложение на сервере.<br></p><p>Для наших потребностей хостинга мы обратимся к DigitalOcean. DigitalOcean обеспечивает быстрый и простой способ разворота виртуальных облаков VPS, что делает его идеальным местом для нашей игровой площадки CI / CD.<br></p><h3>The First Drop<br></h3><p><span>Войдите</span> в систему (или <span>зарегистрируйтесь</span> для) DigitalOcean и нажмите кнопку <b>Create Droplet</b>. Для имени хоста назовите его «hello-jenkins». Экземпляр самого низкого размера (<b>512 МБ / 1/20 ГБ</b>) будет соответствовать нашим потребностям и выберите ближайший к вам географический регион. Затем нам нужно выбрать образ, используемый для создания droplet. DigitalOcean предлагает широкий выбор операционных систем на выбор, но очень приятно, что они также предоставляют изображения, специально предназначенные для определенных типов приложений.</p><p>Перейдите на вкладку <b>Applications</b> и выберите опцию <b>node-v0.10.29 on Ubuntu 14.04</b> - это создаст сервер, который хорошо загружен для нашего приложения Node.js.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/04_create_hello_jenkins_droplet.jpg" alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." width="50" height="50"></figure><p>Теперь нажмите <b>Create Droplet</b>, и DigitalOcean начнет инициализацию нашего сервера.</p><h3>Настройка сервера<br></h3><p>Через минуту наш новый сервер должен быть готов, и вы должны получить электронное письмо с учетными данными вашего сервера. Давайте использовать эту информацию для входа:<br></p><pre class="brush: bash noskimlinks noskimwords">ssh root@APP.SERVER.IP.ADDRESS</pre><p>Вам будет предложено ввести пароль, указанный в письме, а затем сразу же необходимо создать новый пароль (сделайте его очень сильным и сохраните его в безопасном месте, например, в базе данных <span>KeePass</span>).<br></p><p>Сейчас мы вошли в систему под именем <code class="inline">root</code>, который является полнофункциональным полубогом Linux-land. Но тяжелая голова, которая носит корону, и работать под <code class="inline">root</code>, как правило, плохая идея. Итак, первое, что мы хотим сделать, это создать нового пользователя - назовем его «app»:<br></p><pre class="brush: bash noskimlinks noskimwords">adduser app</pre><p>Вам нужно будет предоставить пароль (<i>другой</i> надежный пароль, надежно сохраненный), а затем команда задаст ряд необязательных вопросов.<br></p><p>Мы хотим перейти к нашему пользователю <code class="inline">app</code>, но перед выходом в систему нам нужно предоставить нашим новым пользователям права <code class="inline">sudo</code>, чтобы он мог выполнять административные действия:<br></p><pre class="brush: bash noskimlinks noskimwords">usermod -a -G sudo app</pre><p>Теперь закройте соединение командой <code class="inline">exit</code>, а затем подключитесь как <code class="inline">app</code>:<br></p><pre class="brush: bash noskimlinks noskimwords">ssh app@APP.SERVER.IP.ADDRESS</pre><p>Вам будет предложено ввести пароль пользователя <code class="inline">app</code>, а затем вы должны войти в систему и продолжить работу.<br></p><h3>Установка нашего приложения</h3><p>Давайте добавим наше приложение на машину. Благодаря изображениям приложений DigitalOcean наша машина поставляется с предустановленными Node.js и npm, но нам все равно нужно установить Git:<br></p><pre class="brush: bash noskimlinks noskimwords">sudo apt-get install git</pre><p>Вам будет предложено ввести пароль (поскольку вы используете <code class="inline">sudo</code>), и вам нужно будет подтвердить установку с помощью <b>Y</b>. Как только Git будет установлен, мы можем использовать его для получения нашего приложения из GitHub.</p><p>Скопируйте URL-адрес клонирования HTTPS с страницы проекта GitHub и затем клонируйте репозиторий в свою домашнюю папку на сервере:<br></p><pre class="brush: bash noskimlinks noskimwords">cdgit clone https://github.com/&lt;you&gt;/hello-jenkins.git</pre><p>Теперь наше приложение находится на нашем сервере в папке «hello-jenkins». Давайте перейдем к следующему:<br></p><pre class="brush: bash noskimlinks noskimwords">cd hello-jenkins</pre><p>Первое, что нам нужно сделать, это установить зависимости приложений:<br></p><pre class="brush: bash noskimlinks noskimwords">npm install --production</pre><p>Как только это будет сделано, мы сможем запустить наше приложение! <br></p><pre class="brush: bash noskimlinks noskimwords">node app.js</pre><p>... и перейдите к IP-адресу вашего сервера в вашем браузере.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/05_hello_jenkins_failed.jpg" alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." width="50" height="50"></figure><p>Но подождите, это не сработает! В чем дело?<br></p><p>Ну, давайте вспомним эту строку кода в нашем <code class="inline">app.js</code>:<br></p><pre class="brush: javascript noskimlinks noskimwords">app.listen(process.env.PORT || 5000);</pre><p>Прямо сейчас у нас нет установленной переменной окружения <code class="inline">PORT</code>, поэтому наше приложение по умолчанию использует порт 5000, и вам нужно добавить порт к IP-адресу в браузере (<span><code class="inline">http://YOUR.SERVER.IP.ADDRESS:5000 </code></span>).</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/06_hello_jenkins_5000_port.jpg" alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." width="50" height="50"></figure><p>Итак, как мы можем заставить наше приложение обслуживать, как ожидалось, без необходимости указывать порт? Ну, когда браузер делает HTTP-запрос, по умолчанию он имеет порт 80. Поэтому нам просто нужно установить переменную среды <code class="inline">PORT</code> в <code class="inline">80</code>.<br></p><p>Мы установим переменные среды в файле <code class="inline">/etc/environment</code> на сервере - этот файл будет загружен при входе в систему, а набор переменных будет доступен по всему миру для всех приложений. Откройте файл:</p><pre class="brush: bash noskimlinks noskimwords">sudo nano /etc/environment<br></pre><p>Вы увидите, что прямо сейчас в этом файле установлен <code class="inline">PATH</code>. Добавьте после него следующую строку:<br></p><pre class="brush: bash noskimlinks noskimwords">PORT=80</pre><p>Затем введите <b>Ctrl-X</b>, <b>Y</b> и <b>Enter</b>, чтобы сохранить и выйти. Выход из сервера (<code class="inline">exit</code>) и SSH обратно (это загрузит новую переменную среды).<br></p><p>Последняя маленькая задача - запуск приложения на порту 80 требует прав root, но выполнение <code class="inline">sudo node app.js</code> не сохранит переменные среды, которые мы установили. Чтобы обойти это, мы разрешим <code class="inline">node</code> иметь возможность запускать на порту 80 под <code class="inline">sudo</code>:<br></p><pre class="brush: bash noskimlinks noskimwords">sudo setcap cap_net_bind_service=+ep /usr/local/bin/node</pre><p>Это должно сработать. Теперь запустите:<br></p><pre class="brush: bash noskimlinks noskimwords">node app.js</pre><p>Перейдите в <span><code class="inline">http://YOUR.SERVER.IP.ADDRESS</code></span>, и вы увидите <b>hello world</b>!</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/07_hello_jenkins_success.jpg" alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." width="50" height="50"></figure><h3>Продолжайте<br></h3><p>Сейчас наше приложение работает только во время выполнения процесса - если мы его закрываем, наш сайт больше не доступен. Нам нужно, чтобы наше приложение Node.js работало в фоновом режиме. Для этого мы будем использовать <span>forever</span>. Первый шаг - установить его глобально:<br></p><pre class="brush: bash noskimlinks noskimwords">sudo npm install -g forever</pre><p>Теперь вместо запуска нашего приложения с <code class="inline">node app.js</code> мы будем использовать:<br></p><pre class="brush: bash noskimlinks noskimwords">forever start app.js</pre><p>Обратите внимание, что вместо процесса, зависающего при выполнении, он немедленно завершает работу и дает вам обратный контроль. Это связано с тем, что сервер Node.js работает в фоновом режиме. Теперь нам не нужно беспокоиться о том, что наш сервер отключается при выходе из сервера. <code class="inline">forever</code> даже автоматически перезапустит наше приложение, если произойдет сбой!</p><p>Чтобы остановить наше приложение, мы можем запустить:<br></p><pre class="brush: bash noskimlinks noskimwords">forever stopall</pre><p>Пока давайте продолжим работать и перейдем к Дженкинсу.<br></p><h2>Время тестов<br></h2><p>Мы будем размещать наш сервер Jenkins на отдельном дроплете DigitalOcean. Давайте сейчас это сделаем.<br></p><h3>Второй дроп</h3><p>Создайте новый дроп с именем хоста «jenkins-box». Выберите снова <b>512MB/1/20GB</b>, вместе с тем же местом и тем же типом приложения (<b>node-v0.10.29 on Ubuntu 14.04</b>), как и с предыдущим дроплетом.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/08_create_jenkins_box_droplet.jpg" alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." width="50" height="50"></figure><p>Нажмите <b>Create Droplet</b>, и как только она будет завершена, используйте учетные данные, отправленные вам по электронной почте, чтобы войти в систему через SSH (вам нужно будет установить новый пароль, как и раньше).<br></p><p>Как и прежде, мы должны создать нового пользователя, прежде чем мы сделаем что-нибудь еще. На этот раз назовем его <code class="inline">admin</code>:<br></p><pre class="brush: bash noskimlinks noskimwords">adduser adminusermod -a -G sudo admin</pre><p>Войдите в систему как пользователь <code class="inline">root</code> и войдите в систему как новый созданный <code class="inline">admin</code>.<br></p><p>Поскольку цель Jenkins - это получить наш проект и выполнить его тесты, наша машина должна установить все зависимости проекта. Мы создали этот экземпляр с помощью приложения Node.js от DigitalOcean, поэтому Node.js и npm уже установлены. Но нам еще нужно установить Git:<br></p><pre class="brush: bash noskimlinks noskimwords">sudo apt-get install git</pre><h3>Нанимаем дворецкого</h3><p>Далее - Дженкинс. Установка Дженкинса довольно проста -  <code class="inline">apt-get</code> все сделает за нас. Единственное, что перед началом установки нам нужно добавить новый <code class="inline">apt</code>-репозиторий:<br></p><pre class="brush: bash noskimlinks noskimwords">sudo wget -q -O - http://pkg.jenkins-ci.org/debian/jenkins-ci.org.key | sudo apt-key add -sudo sh -c "echo deb http://pkg.jenkins-ci.org/debian binary/ &gt; /etc/apt/sources.list.d/jenkins.list"sudo apt-get update</pre><p>Теперь мы можем установить Jenkins:<br></p><pre class="brush: bash noskimlinks noskimwords">sudo apt-get install jenkins</pre><p>После завершения Jenkins будет запущен и доступен на порту 8080. Перейдите в свой браузер к IP-адресу <code class="inline">jenkins-box </code>на порту 8080, и вы увидите целевую страницу Jenkins.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/09_jenkins_landing.jpg" alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." width="50" height="50"></figure><p>Нажмите ссылку <b>Manage Jenkins</b>, а затем ссылку <b>Manage Plugins</b>. Перейдите на вкладку <b>Available</b> и найдите <b>GitHub Plugin</b>. Установите флажок « <b>Install</b>», а затем кнопку <b>Download now and install after restart</b>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/10_jenkins_plugins.jpg" alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." width="50" height="50"></figure><p>Это инициирует последовательность установки. Плагин GitHub имеет несколько зависимостей, поэтому будут установлены несколько плагинов. В нижней части страницы установите флажок <b>Restart Jenkins when installation is complete and no jobs are running </b>- это заставит Jenkins перезапустится после завершения установки.<br></p><p>Как только Jenkins перезапустится, пришло время добавить наш проект. Нажмите кнопку <b>New Item</b>. Используйте «hello-jenkins» для имени элемента, выберите <b>Build a free-style software project</b> и нажмите кнопку «<b>ОК</b>».</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/11_jenkins_create.jpg" alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." width="50" height="50"></figure><p>Как только проект будет настроен, вы попадете на страницу настроек проекта. Добавьте URL-адрес проекта GitHub в поле <b>проекта GitHub</b>:<br></p><pre class="brush: plain noskimlinks noskimwords">https://github.com/&lt;you&gt;/hello-jenkins</pre><p>Затем выберите опцию <b>Git</b> в разделе <b>Source Code Management</b>. В новых появляющихся полях добавьте URL-адрес нашего репозитория проекта GitHub в поле <b>Repository URL</b>:<br></p><pre class="brush: plain noskimlinks noskimwords">https://github.com/&lt;you&gt;/hello-jenkins.git</pre><p>Прокрутите еще немного вниз и нажмите на квадрат, чтобы включить <b>Build when a change is pushed to GitHub</b>. Если эта опция будет установлена, наш проект будет строиться каждый раз, когда вы делаете пуш в репозиторий GitHub. Конечно, нам нужно, чтобы Дженкинс знал, что делать, когда он запускает сборку. Нажмите раскрывающийся список <b>Add build step</b> и выберите <b>Execute shell</b>. Это сделает диалог <b>Command</b> доступным, и то, что мы добавим в этот диалог, будет запущено, когда инициируется сборка. Добавьте к нему следующее:<br></p><pre class="brush: bash noskimlinks noskimwords">npm install./script/test</pre><p>Наша сборка состоит из двух этапов. Во-первых, он устанавливает зависимости приложений. Затем он запускает <code class="inline">./script/test</code> для запуска наших тестов.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/12_jenkins_initial_configure.jpg" alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." width="50" height="50"></figure><p>Нажмите «<b>Save</b>».<br></p><p>Чтобы завершить настройку интеграции, перейдите к репозиторию GitHub и нажмите « <b>Settings</b>». Перейдите на вкладку <b>Webhooks &amp; Services</b>, а затем в раскрывающемся списке <b>Add service</b>. Выберите сервис <b>Jenkins (GitHub plugin)</b>.</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/13_github_jenkins_service.jpg" alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." width="50" height="50"></figure><p>Добавьте в качестве <b>URL-адреса хука Дженкинса</b> следующее:<br></p><pre class="brush: plain noskimlinks noskimwords">http://JENKINS.SERVER.IP.ADDRESS:8080/github-webhook/</pre><p>Нажмите <b>Add service</b>. Наш проект теперь готов к первому непрерывному тесту интеграции!<br></p><p>Давайте дадим ему что-то испытать. Откройте <code class="inline">app.js</code> локально и измените эту строку:<br></p><pre class="brush: javascript noskimlinks noskimwords">res.send("hello world");</pre><p>...к этому:<br></p><pre class="brush: javascript noskimlinks noskimwords">res.send("hello jenkins");</pre><p>Сохраните изменения и зафиксируйте их:<br></p><pre class="brush: bash noskimlinks noskimwords">git add .git commit -m "Switch to hello jenkins"</pre><p>Теперь следите за Дженкинсом, пока вы пушите свои изменения на GitHub:<br></p><pre class="brush: bash noskimlinks noskimwords">git push origin master</pre><p>Через секунду или две вы должны увидеть, что для нашего проекта <code class="inline">hello-jenkins</code> в Jenkins была начата новая работа - наши непрерывные интеграционные работы!</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/14_jenkins_first_build.jpg" alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." width="50" height="50"></figure><h3>Поток непрерывной интеграции<br></h3><p>Но ... работа терпит неудачу! Почему?</p><p>Хорошо, помните, что наш тест ожидает, что корневой вызов вернет «hello world», но мы изменили его на «hello jenkins». Поэтому давайте изменим ожидания нашего теста. Поменяйте эту строку:<br></p><pre class="brush: javascript noskimlinks noskimwords">request(app).get("/").expect("hello world", done);</pre><p>... на эту строку:</p><pre class="brush: javascript noskimlinks noskimwords">request(app).get("/").expect("hello jenkins", done);</pre><p>Сохраним, зафиксируем и пушим еще раз:<br></p><pre class="brush: bash noskimlinks noskimwords">git add .git commit -m "Switch test to hello jenkins"git push origin master</pre><p>Посмотрите Дженкинс - еще раз, вы увидите, что сборка автоматически запускается, и на этот раз ей это удается!<br></p><p>Это поток непрерывной интеграции. Контрольный сервер постоянно тестирует любой новый код, который вы пушите, чтобы вы быстро узнали о любых неудачных тестах.<br></p><h2>Деплоим<br></h2><p>Хорошо, поэтому мы автоматически проверяем наши изменения, но как насчет развертывания этих изменений? Нет проблем!<br></p><p>Если вы внимательно наблюдаете, вы, несомненно, заметили, что чего-то не хватает в нашем проекте. В структуре проекта в начале учебника существует файл <code class="inline">script/deploy</code>, но мы еще не создали такой файл. Ну, теперь мы создадим!<br></p><h3>Ключ к аутентификации<br></h3><p>Но сначала обсудим, как будет работать развертывание. Наш скрипт (под управлением Jenkin"s build step) войдет на сервер приложений через SSH, перейдет в нашу папку app, обновит приложение и перезапустит сервер. Перед написанием нашего сценария развертывания нам нужно обработать, как наш Jenkins-сервер будет осуществлять SSH доступ на наш сервер приложений.<br></p><p>До сих пор мы обращались к нашим серверам вручную, вводя пароли, но этот подход не будет работать для автоматизированных сценариев. Вместо этого мы создадим ключ SSH, который сервер Jenkins будет использовать для аутентификации с сервером приложений.<br></p><p>Когда Jenkins устанавливается, он создает нового пользователя под именем <code class="inline">jenkins</code>. Jenkins выполняет все команды от этого пользователя, поэтому нам нужно сгенерировать наш ключ с пользователем <code class="inline">jenkins</code>, чтобы он имел соответствующий доступ к нему.<br></p><p>При входе в систему в качестве <code class="inline">admin</code> в <code class="inline">jenkins-box</code> выполните следующие действия:<br></p><pre class="brush: bash noskimlinks noskimwords">sudo su</pre><p>Предоставьте пароль <code class="inline">admin</code>, и он переключит вас на пользователя <code class="inline">root</code>. Затем выполните:<br></p><pre class="brush: bash noskimlinks noskimwords">su jenkins</pre><p>Теперь вы действуете как пользователь <code class="inline">jenkins</code>. Создайте ключ SSH:<br></p><pre class="brush: bash noskimlinks noskimwords">ssh-keygen -t rsa</pre><p>Сохраните файл в местоположении по умолчанию (<code class="inline">/var/lib/jenkins/.ssh/id_rsa</code>) и <i>не используйте парольную фразу</i> (иначе для доступа SSH потребуется пароль и не будет работать при автоматическом режиме).<br></p><p>Затем нам нужно скопировать открытый ключ, который был создан. Запустите это:<br></p><pre class="brush: bash noskimlinks noskimwords">cat ~/.ssh/id_rsa.pub</pre><p>... и скопируйте вывод. Это должна быть длинная строка, начинающаяся с «ssh-rsa» и заканчивающаяся «jenkins @ jenkins-box».<br></p><p>Выйдите из <code class="inline">jenkins-box</code> и войдите в наш сервер приложений (<code class="inline">hello-jenkins</code>) в качестве пользователя <code class="inline">app</code>. Нам нужно создать файл с именем <code class="inline">authorized_keys</code> в папке <code class="inline">.ssh</code> нашего пользователя <code class="inline">app</code>:<br></p><pre class="brush: bash noskimlinks noskimwords">mkdir ~/.sshnano ~/.ssh/authorized_keys</pre><p>Вставьте открытый ключ, который вы скопировали, а затем <b>Ctrl-X</b>/<b>Y</b>/<b>Enter</b>, чтобы сохранить и выйти. Чтобы этот файл работал правильно, на нем должны быть установлены строгие разрешения:<br></p><pre class="brush: bash noskimlinks noskimwords">chmod 700 ~/.sshchmod 600 ~/.ssh/*</pre><p>Вернитесь в бокс <code class="inline">jenkins</code>, переключитесь на пользователя <code class="inline">jenkins</code> и убедитесь, что вы можете войти на наш сервер приложений, не вводя пароль:<br></p><pre class="brush: bash noskimlinks noskimwords">ssh app@APP.SERVER.IP.ADDRESS</pre><p>Вы должны успешно войти на сервер приложений, не вводя пароль. С учетом этого мы теперь можем перейти к развертыванию.</p><h3>Автоматический деплой</h3><p>Создайте файл в папке <code class="inline">script</code> с именем <code class="inline">deploy</code> (обратите внимание, что расширение не существует). Добавьте следующее в <code class="inline">script/deploy</code>:<br></p><pre class="brush: bash noskimlinks noskimwords">#!/bin/shssh app@APP.SERVER.IP.ADDRESS &lt;&lt;EOF  cd ~/hello-jenkins  git pull  npm install --production  forever restartall  exitEOF</pre><p>Давайте пройдем через это:</p><ul><li>Во-первых, мы заходим на сервер приложений в качестве пользователя <code class="inline">app</code>.</li> <li>Затем мы переходим в нашу папку приложений и обновляем последнюю версию GitHub.</li> <li>После этого мы устанавливаем наши зависимости.</li> <li>Наконец, как только наш код приложения будет обновлен, мы перезагрузим наш сервер с помощью команды <code class="inline">forever restartall</code>.</li> </ul><p>Сделайте наш новый исполняемый файл сценария:<br></p><pre class="brush: bash noskimlinks noskimwords">chmod +x script/deploy</pre><p>Добавьте этот новый файл и зафиксируйте его:<br></p><pre class="brush: bash noskimlinks noskimwords">git add .git commit -m "Add deploy script"</pre><p>Но давайте пока не будем пушить. Сначала вернитесь к нашей конфигурации проекта в Jenkins и прокрутите вниз до команды сборки. Добавьте эту новую строку в конец:</p><pre class="brush: bash noskimlinks noskimwords">./script/deploy</pre><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/15_jenkins_configure_add_deploy.jpg" alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." width="50" height="50"></figure><p>Сохраните проект Дженкинса.<br></p><p>Теперь делаем пуш на GitHub, и смотрите, как Дженкинс автоматически начинает сборку. После того, как сборка будет выполнена (она будет успешной), перейдите в свой браузер на IP-адрес нашего сервера приложений. Presto! Наш захватывающий «hello world» был заменен волнующим «hello jenkins»!</p><figure><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" class="lazy07" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=600/uploads/users/383/posts/21511/image/16_deploy_success.jpg" alt="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." title="Настройка непрерывной интеграции и непрерывного развертывания с Дженкинсом..." width="50" height="50"></figure><p>Наше приложение теперь постоянно развертывается!<br></p><h2>All"s Well That Automates Well<br></h2><p>Уф. Это было настоящее преключение!</p><p>В итоге мы успешно создали как непрерывную интеграцию, так <i>и</i> непрерывное развертывание, что обеспечивает очень хороший уровень автоматизации в повседневной жизни разработчиков. Помните, что компьютеры не скучают, поэтому, пока они обрабатывают тестирование и развертывание, вы можете делать важные вещи, например, сделать себе бутерброд. Так что сделай этот бутерброд и съешь его, как чемпион по автоматизации!</p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825501-nastrojka-nepreryvnoj-integratsii-i-nepreryvnogo-razvertyvaniya-s-dzhenkinsom" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="Web Development" href="https://norma-studio.github.io/article5/220825501-nastrojka-nepreryvnoj-integratsii-i-nepreryvnogo-razvertyvaniya-s-dzhenkinsom" class="tm-article-body__tags-item-link">Web Development</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
39887</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
537</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
