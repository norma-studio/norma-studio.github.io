
<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Практические примеры анимации в React NativeСоздайте социальное приложение с-React NativeНачало работы с макетами React ... | envatomarket.ru | norma-studio.github.io</title>
<meta name="twitter:card" content="summary_large_image">
<meta property="og:title" content="Практические примеры анимации в React NativeСоздайте социальное приложение с-React NativeНачало работы с макетами React ... | envatomarket.ru | norma-studio.github.io">
<meta name="twitter:title" content="Практические примеры анимации в React NativeСоздайте социальное приложение с-React NativeНачало работы с макетами React ... | envatomarket.ru | norma-studio.github.io">
<meta name="aiturec:title" content="Практические примеры анимации в React NativeСоздайте социальное приложение с-React NativeНачало работы с макетами React ... | envatomarket.ru | norma-studio.github.io">
<meta name="description" content="В этом уроке вы узнаете, как реализовать анимацию, которую вы обычно используете в мобильных приложениях. В частности, вы узнаете, как реализовать анимацию, которая:...">
<meta property="og:description" content="В этом уроке вы узнаете, как реализовать анимацию, которую вы обычно используете в мобильных приложениях. В частности, вы узнаете, как реализовать анимацию, которая:...">
<meta name="twitter:description" content="В этом уроке вы узнаете, как реализовать анимацию, которую вы обычно используете в мобильных приложениях. В частности, вы узнаете, как реализовать анимацию, которая:...">
<meta property="aiturec:description" content="В этом уроке вы узнаете, как реализовать анимацию, которую вы обычно используете в мобильных приложениях. В частности, вы узнаете, как реализовать анимацию, которая:...">
<meta property="og:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1125/posts/27328/preview_image/rn.jpg">
<meta property="aiturec:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1125/posts/27328/preview_image/rn.jpg">
<meta name="twitter:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1125/posts/27328/preview_image/rn.jpg">
<meta property="vk:image" content="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1125/posts/27328/preview_image/rn.jpg">
<meta property="og:type" content="article">
<link image_src="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1125/posts/27328/preview_image/rn.jpg">
<meta property="og:locale" content="ru_RU"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta name="robots" content="all">
<meta name="author" content="https://norma-studio.github.io/article5/220825084-prakticheskie-primery-animatsii-v-react-nativesozdajte-sotsialnoe-prilozhenie-s-react-nativenachalo-raboty-s-maketami-react-.html">
<meta name="copyright" lang="ru" content="https://norma-studio.github.io/article5/220825084-prakticheskie-primery-animatsii-v-react-nativesozdajte-sotsialnoe-prilozhenie-s-react-nativenachalo-raboty-s-maketami-react-.html">
<link rel="canonical" href="https://norma-studio.github.io/article5/220825084-prakticheskie-primery-animatsii-v-react-nativesozdajte-sotsialnoe-prilozhenie-s-react-nativenachalo-raboty-s-maketami-react-.html">
<meta property="og:url" content="https://norma-studio.github.io/article5/220825084-prakticheskie-primery-animatsii-v-react-nativesozdajte-sotsialnoe-prilozhenie-s-react-nativenachalo-raboty-s-maketami-react-.html">
<meta name="twitter:site" content="https://norma-studio.github.io/article5/220825084-prakticheskie-primery-animatsii-v-react-nativesozdajte-sotsialnoe-prilozhenie-s-react-nativenachalo-raboty-s-maketami-react-.html">
<meta name="twitter:creator" content="https://norma-studio.github.io/article5/220825084-prakticheskie-primery-animatsii-v-react-nativesozdajte-sotsialnoe-prilozhenie-s-react-nativenachalo-raboty-s-maketami-react-.html">

<meta name="apple-mobile-web-app-status-bar-style" content="#303b44"><meta name="msapplication-TileColor" content="#629FBC">
<link rel="shortcut icon" type="image/ico" sizes="64x64" href="https://norma-studio.github.io//norma-logo-64.png">
<link rel="shortcut icon" href="https://norma-studio.github.io//favicon.ico" type="image/x-icon">
<style>body{opacity: 0;}</style>
<meta name="yandex-verification" content="da91da9b0b6d5dba"><meta name="google-site-verification" content="_BCz7bv6IKv32EI5NSdb9dPwP4PnhlsToVoSOpbZlZI"></head><body>
<div id="app"><div class="tm-layout__wrapper"><div></div>
<header id="extop" class="tm-header"><div class="tm-page-width"><div class="tm-header__container">

<span class="tm-header__logo-wrap"><a aria-label="norma-studio.github.io" href="https://norma-studio.github.io/" class="tm-header__logo tm-header__logo_ru" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге norma-studio.github.io">norma-studio.github.io</a></span><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title><svg id="arrow-down" viewBox="0 0 24 24"><path d="m6.47 9.47c.293-.293.768-.293 1.061 0l4.47 4.47 4.47-4.47c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-5 5c-.293.293-.768.293-1.061 0l-5-5c-.293-.293-.293-.768 0-1.061z"></path></svg></svg></button></div></div><a aria-label="Написать нам" href="https://wa.me/79603570433?text=https://norma-studio.github.io/_Добрый_день" class="tm-header__become-author-btn" title="Подборка эксклюзивных материалов о создании и продвижении сайтов, дизайне сайтов и интернет-маркетинге. Как создать и продвигать сайт, как выбрать дизайн сайта и интернет-стратегию, как защитить свои права в интернете, как продать контент для сайтов? Все ответы в блоге envatomarket.ru.">Написать нам</a><div class="tm-feature tm-header__feature tm-feature_variant-inline"></div></div></div></header>

<div class="tm-layout">
<main class="tm-layout__container"><div class="tm-page"><div class="tm-page-width"><div class="tm-page__wrapper">
<div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down">
<div class="tm-page-article__body data-container" style="background-color: #f0f0f0;" id="data-container">


<article class="tm-page-article__content tm-page-article__content_inner" style="background-color: #fff;">
<!-- article-header -->
<div class="tm-page-article__head-wrapper"><div class="tm-article-snippet tm-page-article__snippet">

<div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a aria-label="author-image" href="https://norma-studio.github.io/article5/220825084-prakticheskie-primery-animatsii-v-react-nativesozdajte-sotsialnoe-prilozhenie-s-react-nativenachalo-raboty-s-maketami-react-.html" title="Практические примеры анимации в React NativeСоздайте социальное приложение с-React NativeНачало работы с макетами React ... | envatomarket.ru | norma-studio.github.io" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="Практические примеры анимации в React NativeСоздайте социальное приложение с-React NativeНачало работы с макетами React ... | envatomarket.ru | norma-studio.github.io" title="Практические примеры анимации в React NativeСоздайте социальное приложение с-React NativeНачало работы с макетами React ... | envatomarket.ru | norma-studio.github.io" height="24" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/i3/654345654.webp" width="24" class="tm-entity-image__pic lazy07"></div></a><span class="tm-user-info__user">
<a href="https://norma-studio.github.io/article5/220825084-prakticheskie-primery-animatsii-v-react-nativesozdajte-sotsialnoe-prilozhenie-s-react-nativenachalo-raboty-s-maketami-react-.html" class="tm-user-info__username" title="
А. Кузнецов" aria-label="
А. Кузнецов">
А. Кузнецов</a>
</span></span><span class="tm-article-snippet__datetime-published"><time datetime="2023-12-09T15:24:38.000Z" title="22023-12-09, 19:24"> 09.12.2023</time></span></div></div>
<h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1" itemprop="name"><span><span>Практические примеры анимации в React NativeСоздайте социальное приложение с-React NativeНачало работы с макетами React ...</span></span></h1>
<div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825084-prakticheskie-primery-animatsii-v-react-nativesozdajte-sotsialnoe-prilozhenie-s-react-nativenachalo-raboty-s-maketami-react-" class="tm-article-snippet__hubs-item-link"><span>Code</span></a></span><span class="tm-article-snippet__hubs-item"><a aria-label="React Native" href="https://norma-studio.github.io/article5/220825084-prakticheskie-primery-animatsii-v-react-nativesozdajte-sotsialnoe-prilozhenie-s-react-nativenachalo-raboty-s-maketami-react-" class="tm-article-snippet__hubs-item-link"><span>React Native</span></a></span><br></div></div>

<div itemscope itemtype="https://schema.org/Article" style="display:none;">
    <link itemprop="mainEntityOfPage" href="https://norma-studio.github.io/article5/220825084-prakticheskie-primery-animatsii-v-react-nativesozdajte-sotsialnoe-prilozhenie-s-react-nativenachalo-raboty-s-maketami-react-.html" />
    <link itemprop="image" href="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1125/posts/27328/preview_image/rn.jpg">
    <meta itemprop="headline name" content="Практические примеры анимации в React NativeСоздайте социальное приложение с-React NativeНачало работы с макетами React ... | envatomarket.ru | norma-studio.github.io">
    <meta itemprop="description" content="В этом уроке вы узнаете, как реализовать анимацию, которую вы обычно используете в мобильных приложениях. В частности, вы узнаете, как реализовать анимацию, которая:...">
    <meta itemprop="author" content="norma-studio.github.io">
    <meta itemprop="datePublished" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <meta itemprop="dateModified" datetime="2023-12-09T15:24:38.000Z" content="09.12.2023">
    <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
        <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
            <img class="lazy07" itemprop="url image" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://envatomarket.ru/apple-touch-icon-120.ico" alt="Шаблоны сайтов | Лендинги" title="Шаблоны сайтов | Лендинги" style="display:none;"/>
        </div>
        <meta itemprop="name" content="https://norma-studio.github.io/">
        <meta itemprop="telephone" content="">
        <meta itemprop="address" content="Россия">
    </div>
    <p>Интро</p>
    <span itemprop="articleBody">В этом уроке вы узнаете, как реализовать анимацию, которую вы обычно используете в мобильных приложениях. В частности, вы узнаете, как реализовать анимацию, которая:...</span>
</div>


<!-- article-body -->

<div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-2">



<p>В этом уроке вы узнаете, как реализовать анимацию, которую вы обычно используете в мобильных приложениях. В частности, вы узнаете, как реализовать анимацию, которая:</p><ul><li> <strong>Предоставляет визуальную обратную связь</strong>: например, когда пользователь нажимает кнопку, вы хотите использовать анимацию, чтобы показать пользователю, что кнопка действительно нажата.</li> <li> <strong>Показывает текущий статус системы:</strong> при выполнении процесса, который не завершается мгновенно (например, при загрузке фотографии или отправке сообщения электронной почты), вы хотите показать анимацию, чтобы пользователь понял, сколько времени займет этот процесс.</li> <li> <strong>Визуально соединяет состояния перехода:</strong> когда пользователь нажимает кнопку, чтобы что-то перенести в начало экрана, этот переход должен быть анимированным, чтобы пользователь знал, откуда возник элемент. </li> <li> <strong>Получает внимание пользователя:</strong> когда есть важное уведомление, вы можете использовать анимацию, чтобы привлечь внимание пользователя.</li> </ul><p>Этот учебник является продолжением моей статьи <span>«Анимация вашего React Native приложения»</span>. Поэтому, если вы новичок в анимации в React Native, обязательно сначала посетите ту статью, потому что некоторые из концепций, которые будут использоваться в этом руководстве, более подробно объясняются там.<br></p><ul class="roundup-block__contents posts--half-width roundup-block--list"><li class="roundup-block__content"><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1125/posts/27328/preview_image/rn.jpg" alt="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." title="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." width="50" height="50"><div class="roundup-block__primary-category topic-code">React Native</div> <div class="roundup-block__content-title">Анимация вашего React Native приложения</div> <div class="roundup-block__author">Вернер-Бел-Анчета</div></span></li></ul><p>Кроме того, если хотите, вы можете найти полный исходный код, используемый в этом учебнике, в репозитории на <span>GitHub</span>.<br></p><h2>Что мы строим</h2><p>Мы собираемся создать приложение, которое реализует каждый из различных типов анимации, о котором я упоминал ранее. В частности, мы собираемся создать следующие страницы, каждая из которых будет реализовывать анимации для разных целей.</p><ul><li> <strong>Страница новостей:</strong> использует жесты для визуальной обратной связи и отображения текущего состояния системы.</li> <li> <strong>Страница кнопок:</strong> использует кнопки для визуальной обратной связи и отображения текущего состояния системы.</li> <li> <strong>Страница прогресса:</strong> использует индикатор выполнения для отображения текущего состояния системы.</li> <li> <strong>Страница расширения:</strong> визуально связывает переходные состояния с использованием расширяющихся и сокращающихся движений.</li> <li> <strong>Страница привлечения внимания:</strong> использует захватывающие внимание движения, чтобы привлечь внимание пользователя. </li> </ul><p>Если вы хотите получить привью каждой из анимаций, ознакомьтесь с этим <span>альбомом Imgur.</span></p><h2>Настройка проекта</h2><p>Начните с создания нового проекта React Native:</p><pre class="brush: bash noskimlinks noskimwords">react-native init RNPracticalAnimations</pre><p>После создания проекта перейдите во вновь созданную папку, откройте файл <code class="inline">package.json</code> и добавьте следующие <code class="inline">dependencies</code>:</p><pre class="brush: javascript noskimlinks noskimwords">"react-native-animatable": "^0.6.1","react-native-vector-icons": "^3.0.0"</pre><p>Выполните команду <code class="inline">npm install</code> для установки этих двух пакетов. <span><strong>react-native-animatable</strong></span> используется для легкого внедрения анимаций, а для создания значков для страницы расширенного использования используются <strong><span>react-native-vector-icons</span></strong>. Если вы не хотите использовать значки, вы можете просто использовать компонент <code class="inline">Text</code>. В противном случае следуйте инструкциям по установке react-native-vector-icons на <span>их странице GitHub</span>.</p><h2>Создание приложения</h2><p>Откройте файл <code class="inline">index.android.js</code> или файл <code class="inline">index.ios.js</code> и замените существующее содержимое следующим:</p><pre class="brush: javascript noskimlinks noskimwords">import React, { Component } from "react";import {  AppRegistry} from "react-native";import NewsPage from "./src/pages/NewsPage";import ButtonsPage from "./src/pages/ButtonsPage";import ProgressPage from "./src/pages/ProgressPage";import ExpandPage from "./src/pages/ExpandPage";import AttentionSeekerPage from "./src/pages/AttentionSeekerPage";class RNPracticalAnimation extends Component {  render() {    return (       &lt;NewsPage /&gt;    );  }}AppRegistry.registerComponent("RNPracticalAnimation", () =&gt; RNPracticalAnimation);</pre><p>Как только это будет сделано, обязательно создайте соответствующие файлы, чтобы вы не получили никаких ошибок. Все файлы, над которыми мы будем работать, хранятся в каталоге src. Внутри этого каталога находятся следующие папки:</p><ul><li> <code class="inline">components</code>: повторно используемые компоненты, которые будут использоваться другими компонентами или страницами. </li> <li> <code class="inline">img</code>: изображения, которые будут использоваться во всем приложении. Вы можете получить изображения из репозитория <span>GitHub</span>.</li> <li> <code class="inline">pages</code>: страницы приложения.</li> </ul><h2>Страница новостей</h2><p>Начнем с страницы новостей. </p><p>Во-первых, добавьте компоненты, которые мы будем использовать:</p><pre class="brush: javascript noskimlinks noskimwords">import React, { Component } from "react";import {  StyleSheet,  Text,  View,  Animated,  Easing,  ScrollView,  RefreshControl} from "react-native";import NewsItem from "../components/NewsItem";</pre><p>Вы уже должны быть знакомы с большинством из них, за исключением <code class="inline">RefreshControl</code> и настраиваемого компонента <code class="inline">NewsItem</code>, который мы будем создавать позже. <code class="inline">RefreshControl</code> используется для добавления функциональности «pull to refresh» внутри компонента <code class="inline">ScrollView</code> или <code class="inline">ListView</code>. Таким образом, это на самом деле тот компонент, который будет обрабатывать жесты и анимацию для нас, когда мы тянем вниз. Не нужно реализовывать наши собственные. По мере того как вы приобретете больше опыта использования React Native, вы заметите, что анимации фактически встроены в некоторые компоненты, и нет необходимости использовать класс <code class="inline">Animated</code> для реализации своих собственных.</p><p>Создайте компонент, который будет содержать всю страницу: </p><pre class="brush: javascript noskimlinks noskimwords">export default class NewsPage extends Component {    ...}</pre><p>Внутри <code class="inline">constructor</code> инициализируйте анимированное значение для сохранения текущей непрозрачности (<code class="inline">opacityValue</code>) новостей. Мы хотим, чтобы новостные объекты имели меньшую прозрачность, в то время как новостные статьи обновляются. Это дает пользователю представление о том, что они не могут взаимодействовать со всей страницей во время обновления новостей. Функция <code class="inline">is_news_refreshing</code> используется в качестве переключателя для указания того, обновляется ли новостная лента или нет. </p><pre class="brush: javascript noskimlinks noskimwords">constructor(props) {    super(props);    this.opacityValue = new Animated.Value(0);    this.state = {        is_news_refreshing: false,        news_items: [            {                title: "CTO Mentor Network – a virtual peer-to-peer network of CTOs",                website: "ctomentor.network",                url: "https://ctomentor.network/"            },            {                title: "The No More Ransom Project",                website: "nomoreransom.org",                url: "https://www.nomoreransom.org/"            },            {                title: "NASA Scientists Suggest We’ve Been Underestimating Sea Level Rise",                website: "vice.com",                url: "http://motherboard.vice.com/read/nasa-scientists-suggest-weve-been-underestimating-sea-level-rise"            },            {                title: "Buttery Smooth Emacs",                website: "facebook.com",                url: "https://www.facebook.com/notes/daniel-colascione/buttery-smooth-emacs/10155313440066102/"            },            {                title: "Elementary OS",                website: "taoofmac.com",                url: "http://taoofmac.com/space/blog/2016/10/29/2240"            },            {                title: "The Strange Inevitability of Evolution",                website: "nautil.us",                url: "http://nautil.us/issue/41/selection/the-strange-inevitability-of-evolution-rp"            },        ]    }}</pre><p>Функция <code class="inline">opacity()</code> - это функция, которая запускает анимацию для изменения непрозрачности.</p><pre class="brush: javascript noskimlinks noskimwords">opacity() {    this.opacityValue.setValue(0);    Animated.timing(      this.opacityValue,      {        toValue: 1,        duration: 3500,        easing: Easing.linear      }    ).start();}</pre><p>Внутри функции <code class="inline">render()</code> определите, как изменится значение непрозрачности. Здесь <code class="inline">outputRange</code> равен <code class="inline">[1, 0, 1]</code>, что означает, что он начнется с полной прозрачностью, затем перейдит в нулевую прозрачность и снова вернится к полной непрозрачности. Как определено внутри функции <code class="inline">opacity()</code>, этот переход будет выполнен в течение 3500 миллисекунд (3,5 секунды). </p><pre class="brush: javascript noskimlinks noskimwords">render() {    const opacity = this.opacityValue.interpolate({      inputRange: [0, 0.5, 1],      outputRange: [1, 0, 1]    });    ...}</pre><p>Компонент <code class="inline">&lt;RefreshControl&gt;</code> добавляется в <code class="inline">&lt;ScrollView&gt;</code>. Это вызывает функцию <code class="inline">refreshNews()</code> всякий раз, когда делает свайп вниз, пока он находится в верхней части списка (когда <code class="inline">scrollY</code> равно <code class="inline">0</code>). Вы можете добавить поддержку <code class="inline">colors</code> для настройки цвета анимации обновления.</p><pre class="brush: javascript noskimlinks noskimwords">return (    &lt;View style={styles.container}&gt;        &lt;View style={styles.header}&gt;        &lt;/View&gt;        &lt;ScrollView             refreshControl={                &lt;RefreshControl                    colors={["#1e90ff"]}                    refreshing={this.state.is_news_refreshing}                    onRefresh={this.refreshNews.bind(this)}                /&gt;            }            style={styles.news_container}&gt;            ...        &lt;/ScrollView&gt;    &lt;/View&gt;);</pre><p>Внутри <code class="inline">&lt;ScrollView&gt;</code> используйте компонент <code class="inline">&lt;Animated.View&gt;</code> и установите для <code class="inline">style</code> значение <code class="inline">opacity</code>:</p><pre class="brush: javascript noskimlinks noskimwords">&lt;Animated.View style={[{opacity}]}&gt;    { this.renderNewsItems() }&lt;/Animated.View&gt;</pre><p>Функция <code class="inline">refreshNews()</code> вызывает функцию <code class="inline">opacity()</code> и обновляет значение <code class="inline">is_news_refreshing</code> до <code class="inline">true</code>. Это позволяет компоненту <code class="inline">&lt;RefreshControl&gt;</code> узнать, что анимация обновления должна быть уже показана. После этого используйте функцию <code class="inline">setTimeout()</code>, чтобы обновить значение <code class="inline">is_news_refreshing</code> до <code class="inline">false</code> после 3500 миллисекунд (3,5 секунды). Это скроет анимацию обновления из представления. К тому времени анимация прозрачности также должна быть выполнена, поскольку мы устанавливаем ранее то же самое значение для продолжительности в функции <code class="inline">opacity</code>.</p><pre class="brush: javascript noskimlinks noskimwords">refreshNews() {    this.opacity();    this.setState({is_news_refreshing: true});    setTimeout(() =&gt; {        this.setState({is_news_refreshing: false});    }, 3500);}</pre><p><code class="inline">RenderNewsItems()</code> принимает массив новостей, которые мы объявили ранее внутри <code class="inline">constructor()</code>, и отображает каждую из них с помощью компонента <code class="inline">&lt;NewsItem&gt;</code>.</p><pre class="brush: javascript noskimlinks noskimwords">renderNewsItems() {    return this.state.news_items.map((news, index) =&gt; {        return (            &lt;NewsItem key={index} index={index} news={news} /&gt;        );    });}</pre><h4>Компонент NewsItem<br></h4><p>Компонент <code class="inline">NewsItem</code> (<code class="inline">src/components/NewsItem.js</code>) отображает заголовок и сайт новостной статьи и обертывает их внутри компонента <code class="inline">&lt;Button&gt;</code>, чтобы с ними можно было взаимодействовать.</p><pre class="brush: javascript noskimlinks noskimwords">import React, { Component } from "react";import {  StyleSheet,  Text,  View,} from "react-native";import Button from "./Button";const NewsItem = ({ news, index }) =&gt; {    function onPress(news) {        //do anything you want    }        return (        &lt;Button            key={index}            noDefaultStyles={true}            onPress={onPress.bind(this, news)}        &gt;            &lt;View style={styles.news_item}&gt;                &lt;Text style={styles.title}&gt;{news.title}&lt;/Text&gt;                &lt;Text&gt;{news.website}&lt;/Text&gt;            &lt;/View&gt;        &lt;/Button&gt;    );}const styles = StyleSheet.create({    news_item: {        flex: 1,        flexDirection: "column",        paddingRight: 20,        paddingLeft: 20,        paddingTop: 30,        paddingBottom: 30,        borderBottomWidth: 1,        borderBottomColor: "#E4E4E4"    },    title: {        fontSize: 20,        fontWeight: "bold"    }});export default NewsItem;</pre><h4>Компонент кнопки</h4><p>Компонент <code class="inline">Button</code> (<code class="inline">src/components/Button.js</code>) использует компонент <code class="inline">TouchableHighlight</code> для создания кнопки. Свойство <code class="inline">underlayColor</code> используется для указания цвета подкладки при нажатии кнопки. Это встроенный способ React Native, обеспечивающий визуальную обратную связь; Позже в разделе <strong>«Страница кнопок»</strong> мы рассмотрим другие способы, которыми кнопки могут обеспечивать визуальную обратную связь.</p><pre class="brush: javascript noskimlinks noskimwords">import React, { Component } from "react";import {  StyleSheet,  Text,  TouchableHighlight,} from "react-native";const Button = (props) =&gt; {    function getContent() {        if(props.children){            return props.children;        }        return &lt;Text style={props.styles.label}&gt;{props.label}&lt;/Text&gt;    }    return (        &lt;TouchableHighlight             underlayColor="#ccc"             onPress={props.onPress}             style={[                props.noDefaultStyles ? "" : styles.button,                 props.styles ? props.styles.button : ""]}        &gt;            { getContent() }        &lt;/TouchableHighlight&gt;    );}const styles = StyleSheet.create({    button: {        alignItems: "center",        justifyContent: "center",        padding: 20,        borderWidth: 1,        borderColor: "#eee",        margin: 20    }});export default Button;</pre><p>Возвращаясь к компоненту <code class="inline">NewsPage</code>, добавьте стиль:</p><pre class="brush: javascript noskimlinks noskimwords">const styles = StyleSheet.create({    container: {        flex: 1,    },    header: {        flexDirection: "row",        backgroundColor: "#FFF",        padding: 20,        justifyContent: "space-between",        borderBottomColor: "#E1E1E1",        borderBottomWidth: 1    },    news_container: {        flex: 1,    }});</pre><h2>Страница кнопок</h2><p>На странице кнопок (<code class="inline">src/pages/ButtonsPage.js</code>) отображаются три вида кнопок: обычно используемая кнопка, которая подсвечивается, кнопка, которая становится немного больше, и кнопка, отображающая текущее состояние операции. Начните с добавления необходимых компонентов:</p><pre class="brush: javascript noskimlinks noskimwords">import React, { Component } from "react";import {  StyleSheet,  View} from "react-native";import Button from "../components/Button";import ScalingButton from "../components/ScalingButton";import StatefulButton from "../components/StatefulButton";</pre><p>Раньше вы видели, как работает компонент <code class="inline">Button</code>, поэтому мы просто сосредоточимся на двух других кнопках.</p><h4>Компонент кнопки масштабирования</h4><p>Сначала давайте посмотрим на кнопку масштабирования (<code class="inline">src/components/ScalingButton.js</code>). В отличие от кнопки, которую мы использовали ранее, для ее создания используется встроенный компонент <code class="inline">TouchableWithoutFeedback</code>. Раньше мы использовали компонент <code class="inline">TouchableHighlight</code>, который поставляется со всеми необходимыми для кнопки настройками. Вы можете рассматривать <code class="inline">TouchableWithoutFeedback</code> как голую кнопку, в которой вы должны указать все, что нужно, когда пользователь нажимает на нее. Это идеально подходит для нашего случая, потому что нам не нужно беспокоиться о поведении кнопки по умолчанию, мешающем анимации, которую мы хотим реализовать.</p><pre class="brush: javascript noskimlinks noskimwords">import React, { Component } from "react";import {  StyleSheet,  Text,  Animated,  Easing,  TouchableWithoutFeedback} from "react-native";</pre><p>Подобно компоненту <code class="inline">Button</code>, это будет функциональный тип компонента, так как нам действительно не нужно работать с состоянием.</p><pre class="brush: javascript noskimlinks noskimwords">const ScalingButton = (props) =&gt; {    ...}</pre><p>Внутри компонента создайте анимированное значение, которое сохранит текущую шкалу кнопок.</p><pre class="brush: javascript noskimlinks noskimwords">var scaleValue = new Animated.Value(0); </pre><p>Добавьте функцию, которая запустит анимацию масштаба. Мы не хотим, чтобы приложение выглядело медленным, поэтому сделайте <code class="inline">duration</code> максимально маленьким, но одновременно достаточно высоким, чтобы пользователь мог понять, что происходит. <code class="inline">300</code> миллисекунд - хорошая отправная точка, но не стесняйтесь поиграть с этим значением.</p><pre class="brush: javascript noskimlinks noskimwords">function scale() {    scaleValue.setValue(0);    Animated.timing(        scaleValue,        {          toValue: 1,          duration: 300,          easing: Easing.easeOutBack        }    ).start();}</pre><p>Определите то, как кнопка будет масштабироваться (<code class="inline">outputRange</code>) в зависимости от текущего значения (<code class="inline">inputRange</code>). Мы не хотим, чтобы она стала слишком большой, поэтому мы придерживаемся <code class="inline">1.1</code> как самого высокого значения. Это означает, что она будет на <code class="inline">0,1</code> больше, чем ее первоначальный размер на полпути (<code class="inline">0.5</code>) всей анимации.</p><pre class="brush: javascript noskimlinks noskimwords">const buttonScale = scaleValue.interpolate({  inputRange: [0, 0.5, 1],  outputRange: [1, 1.1, 1]});return (    &lt;TouchableWithoutFeedback onPress={onPress}&gt;        &lt;Animated.View style={[             props.noDefaultStyles ? styles.default_button : styles.button,             props.styles ? props.styles.button : "",            {                transform: [                    {scale: buttonScale}                ]            }            ]}        &gt;            { getContent() }        &lt;/Animated.View&gt;    &lt;/TouchableWithoutFeedback&gt;);</pre><p>Функция <code class="inline">onPress()</code> выполняет анимацию масштаба сначала перед вызовом метода, переданного пользователем через свойства.</p><pre class="brush: javascript noskimlinks noskimwords">function onPress() {    scale();    props.onPress();}</pre><p>Функция <code class="inline">getContent()</code> выводит дочерние компоненты, если они доступны. Если нет, отображается компонент <code class="inline">Text</code>, содержащий свойства <code class="inline">label</code>.</p><pre class="brush: javascript noskimlinks noskimwords">function getContent() {    if(props.children){        return props.children;    }    return &lt;Text style={props.styles.label}&gt;{ props.label }&lt;/Text&gt;;}</pre><p>Добавьте стили и экспортируйте кнопку:</p><pre class="brush: javascript noskimlinks noskimwords">const styles = StyleSheet.create({    default_button: {        alignItems: "center",        justifyContent: "center"    },    button: {        alignItems: "center",        justifyContent: "center",        padding: 20,        borderWidth: 1,        borderColor: "#eee",        margin: 20    },});export default ScalingButton;</pre><h4>Компонент кнопки с состоянием</h4><p>Далее находится кнопка состояния (<code class="inline">src/components/StatefulButton.js</code>). При нажатии эта кнопка меняет цвет фона и показывает загрузочное изображение до тех пор, пока выполняемая операция не будет выполнена. </p><p>Загружаемое изображение, которое мы будем использовать, является анимированным gif. По умолчанию React Native на Android не поддерживает анимированные gif. Чтобы это заработало, вам нужно отредактировать файл <code class="inline">android/app/build.gradle</code> и добавить <code class="inline">compile "com.facebook.fresco: animated-gif: 0.12.0"</code> под массивом <code class="inline">dependencies</code> следующим образом :</p><pre class="brush: plain noskimlinks noskimwords">dependencies {    //default dependencies here        compile "com.facebook.fresco:animated-gif:0.12.0"}</pre><p>Если вы работаете в iOS, анимированные gif будут работать по умолчанию.</p><p>Возвращаясь к компоненту кнопки состояния, как и кнопка масштабирования, для создания кнопки используется компонент <code class="inline">TouchableWithoutFeedback</code>, так как он также будет реализовывать свою собственную анимацию.</p><pre class="brush: javascript noskimlinks noskimwords">import React, { Component } from "react";import {  StyleSheet,  View,  Image,  Text,  TouchableWithoutFeedback,  Animated} from "react-native";</pre><p>В отличие от кнопки масштабирования, этот компонент будет полноценным компонентом класса, поскольку он управляет своим собственным состоянием.</p><p>Внутри <code class="inline">constructor()</code> создайте анимированное значение для сохранения текущего цвета фона. После этого инициализируйте состояние, которое действует как переключатель для сохранения текущего состояния кнопки. По умолчанию установлено значение <code class="inline">false</code>. Как только пользователь нажал на кнопку, оно будет обновлено <code class="inline">true</code> и будет снова установлено в значение <code class="inline">false</code> снова после выполнения воображаемого процесса.</p><pre class="brush: javascript noskimlinks noskimwords">export default class StatefulButton extends Component {    constructor(props) {        super(props);        this.colorValue = new Animated.Value(0);        this.state = {            is_loading: false        }    }}</pre><p>Внутри функции <code class="inline">render()</code> укажите различные цвета фона, которые будут использоваться на основе текущего значения анимированного значения.</p><pre class="brush: javascript noskimlinks noskimwords">render() {    const colorAnimation = this.colorValue.interpolate({      inputRange: [0, 50, 100],      outputRange: ["#2196f3", "#ccc", "#8BC34A"]    });    ...}</pre><p>Затем оберните все внутри компонента <code class="inline">TouchableWithoutFeedback</code>, а внутри <code class="inline">&lt;Animated.View&gt;</code> находится анимированный цвет фона. Мы также отображаем изображение загрузчика, если текущее значение <code class="inline">is_loading</code> равно <code class="inline">true</code>. Метка кнопки также изменяется в зависимости от этого значения.</p><pre class="brush: javascript noskimlinks noskimwords">return (    &lt;TouchableWithoutFeedback onPress={this.onPress.bind(this)}&gt;        &lt;Animated.View style={[            styles.button_container,            this.props.noDefaultStyles ? "" : styles.button,             this.props.styles ? this.props.styles.button : "",            {                backgroundColor: colorAnimation            },            ]}&gt;            {                 this.state.is_loading &amp;&amp;                 &lt;Image                  style={styles.loader}                  source={require("../img/ajax-loader.gif")}                /&gt;            }            &lt;Text style={this.props.styles.label}&gt;            { this.state.is_loading ? "loading..." : this.props.label}            &lt;/Text&gt;        &lt;/Animated.View&gt;    &lt;/TouchableWithoutFeedback&gt;);</pre><p>Когда кнопка нажата, она сначала выполняет функцию, которая была передана через свойства перед выполнением анимации.</p><pre class="brush: javascript noskimlinks noskimwords">onPress() {    this.props.onPress();    this.changeColor();}</pre><p>Функция <code class="inline">changeColor()</code> отвечает за обновление состояния и анимирование цвета фона кнопки. Здесь мы предполагаем, что процесс займет 3000 миллисекунд (3 секунды). Но в реальном сценарии вы не всегда можете знать, сколько времени займет процесс. Что вы можете сделать, так это выполнить анимацию в течение более короткого периода времени, а затем вызвать функцию <code class="inline">changeColor()</code> рекурсивно до тех пор, пока процесс не будет выполнен.</p><pre class="brush: javascript noskimlinks noskimwords">changeColor() {  this.setState({    is_loading: true  });  this.colorValue.setValue(0);  Animated.timing(this.colorValue, {    toValue: 100,    duration: 3000  }).start(() =&gt; {    this.setState({        is_loading: false    });  });  }</pre><p>Добавьте стили:</p><pre class="brush: javascript noskimlinks noskimwords">const styles = StyleSheet.create({    button_container: {        flexDirection: "row",        alignItems: "center",        backgroundColor: "#2196f3"    },    button: {        alignItems: "center",        justifyContent: "center",        padding: 20,        borderWidth: 1,        borderColor: "#eee",        margin: 20    },    loader: {        width: 16,        height: 16,        marginRight: 10    }});</pre><p>Вернемся к странице Кнопки: создайте компонент, отрисуйте три вида кнопок и добавьте их стили.</p><pre class="brush: javascript noskimlinks noskimwords">export default class ButtonsPage extends Component {    press() {        //do anything you want    }    render() {        return (            &lt;View style={styles.container}&gt;                &lt;Button                     underlayColor={"#ccc"}                     label="Ordinary Button"                     onPress={this.press.bind(this)}                    styles={{button: styles.ordinary_button, label: styles.button_label}} /&gt;                &lt;ScalingButton                     label="Scaling Button"                     onPress={this.press.bind(this)}                    styles={{button: styles.animated_button, label: styles.button_label}} /&gt;                &lt;StatefulButton                     label="Stateful Button"                     onPress={this.press.bind(this)}                    styles={{button: styles.stateful_button, label: styles.button_label}} /&gt;            &lt;/View&gt;        );    }} const styles = StyleSheet.create({    container: {        flex: 1,        flexDirection: "column",        padding: 30    },    ordinary_button: {        backgroundColor: "#4caf50",    },    animated_button: {        backgroundColor: "#ff5722"      },    button_label: {        color: "#fff",        fontSize: 20,        fontWeight: "bold"    }});</pre><h2>Страница прогресса</h2><p>Страница прогресса (<code class="inline">src/pages/ProgressPage.js</code>) показывает анимацию прогресса пользователю во время продолжительного процесса. Мы будем использовать наш собственный компонент, вместо встроенного, потому что у React Native нет единого способа реализации анимации индикатора выполнения. Если вам интересно, вот ссылки на два встроенных компонента индикатора выполнения:</p><ul><li><span>ProgressBarAndroid</span></li> <li><span>ProgressViewIOS</span></li> </ul><p>Чтобы создать страницу «Прогресс», начните с импорта необходимых нам компонентов:</p><pre class="brush: javascript noskimlinks noskimwords">import React, { Component } from "react";import {  StyleSheet,  Text,  View,  Animated,  Dimensions} from "react-native";</pre><p>Мы используем <code class="inline">Dimensions</code>, чтобы получить ширину устройства. В итоге мы можем рассчитать ширину, доступную для индикатора выполнения. Чтобы сделать это, мы вычтем сумму левого и правого paddings, которые мы добавим в контейнер, а также левую и правую границы, которые мы добавим в контейнер индикаторов выполнения. </p><pre class="brush: javascript noskimlinks noskimwords">var { width } = Dimensions.get("window");var available_width = width - 40 - 12;</pre><p>Для того чтобы приведенная выше формула имела смысл, перейдем к стилям:</p><pre class="brush: javascript noskimlinks noskimwords">const styles = StyleSheet.create({  container: {    flex: 1,    padding: 20,    justifyContent: "center"  },  progress_container: {    borderWidth: 6,    borderColor: "#333",    backgroundColor: "#ccc"  },  progress_status: {    color: "#333",    fontSize: 20,    fontWeight: "bold",    alignSelf: "center"  }});</pre><p><code class="inline">container</code> имеет <code class="inline">padding</code> по 20 с каждой стороны, поэтому мы вычитаем 40 из <code class="inline">available_width</code>. У <code class="inline">progress_container</code> есть граница шириной 6 с каждой стороны, поэтому мы просто удваиваем ее и вычитаем 12 из ширины прогресс бара.</p><pre class="brush: javascript noskimlinks noskimwords">export default class ProgressPage extends Component {    constructor(props) {    super(props);    this.progress = new Animated.Value(0);    this.state = {      progress: 0    };  }}</pre><p>Создайте компонент и внутри конструктора создайте анимированное значение для сохранения текущих значений анимации для индикатора выполнения. </p><p>Я сказал «значения», потому что на этот раз мы будем использовать это одиночное анимированное значение для анимации как ширины, так и цвета фона индикатора выполнения. Все это в действии вы увидите чуть позже. </p><p>Помимо этого, вам также необходимо инициализировать текущий прогресс в состоянии.</p><pre class="brush: javascript noskimlinks noskimwords">export default class ProgressPage extends Component {    constructor(props) {    super(props);    this.progress = new Animated.Value(0);    this.state = {      progress: 0    };  }}</pre><p>Внутри функции <code class="inline">render()</code>, <code class="inline">progress_container</code> действует как контейнер для индикатора выполнения, а <code class="inline">&lt;Animated.View&gt;</code> внутри него -как фактический индикатор выполнения, ширина и цвет фона которого будут меняться в зависимости от текущего прогресса. Ниже мы также показываем текущий прогресс в текстовой форме (от 0% до 100%). </p><pre class="brush: javascript noskimlinks noskimwords">render() {    return (        &lt;View style={styles.container}&gt;          &lt;View style={styles.progress_container}&gt;            &lt;Animated.View              style={[this.getProgressStyles.call(this)]}            &gt;             &lt;/Animated.View&gt;          &lt;/View&gt;          &lt;Text style={styles.progress_status}&gt;          { this.state.progress }          &lt;/Text&gt;        &lt;/View&gt;    );}</pre><p>Стили для прогресс бара возвращаются функцией <code class="inline">getProgressStyles()</code>. Здесь мы используем анимированное значение ранее, чтобы рассчитать ширину и цвет фона. Мы делаем так вместо создания отдельного анимированного значения для каждой анимации, как как мы все равно интерполируем одно и то же значение. Если бы мы использовали два отдельных значения, нам нужно было бы иметь две анимации параллельно, что менее эффективно.</p><pre class="brush: javascript noskimlinks noskimwords">getProgressStyles() {  var animated_width = this.progress.interpolate({    inputRange: [0, 50, 100],    outputRange: [0, available_width / 2, available_width]  });  //red -&gt; orange -&gt; green  const color_animation = this.progress.interpolate({    inputRange: [0, 50, 100],    outputRange: ["rgb(199, 45, 50)", "rgb(224, 150, 39)", "rgb(101, 203, 25)"]  });  return {    width: animated_width,    height: 50, //height of the progress bar    backgroundColor: color_animation  }}</pre><p>Анимация будет немедленно выполнена сразу после монтирования компонента. Начните с установки начального значения прогресса, а затем добавьте слушателя к текущему значению прогресса. Это позволяет нам обновлять состояние каждый раз, когда изменяется значение прогресса. Мы используем <code class="inline">parseInt()</code>, поэтому значение прогресса преобразуется в целое число. После этого мы запускаем анимацию продолжительностью 7000 миллисекунд (7 секунд). Как только это будет сделано, мы изменим текст прогресса на <strong>done</strong>!</p><pre class="brush: javascript noskimlinks noskimwords">componentDidMount() {    this.progress.setValue(0);    this.progress.addListener((progress) =&gt; {      this.setState({        progress: parseInt(progress.value) + "%"      });    });    Animated.timing(this.progress, {      duration: 7000,      toValue: 100    }).start(() =&gt; {      this.setState({        progress: "done!"      })    });}</pre><h2>Страница расширения</h2><p>Страница расширения (<code class="inline">src/pages/ExpandPage.js</code>) показывает, как визуально связывать переходные состояния с помощью расширяющихся и сокращающихся движений. Важно показать пользователю, как появился конкретный элемент. Он отвечает на вопросы о том, откуда взялся этот элемент и какова его роль в текущем контексте. Как всегда, начните с импорта необходимых нам вещей:<br></p><pre class="brush: javascript noskimlinks noskimwords">import React, { Component } from "react";import {  StyleSheet,  Text,  View,  Animated} from "react-native";import Icon from "react-native-vector-icons/FontAwesome";import ScalingButton from "../components/ScalingButton";</pre><p>Внутри <code class="inline">constructor()</code> создайте анимированное значение, которое будет сохранять y-позицию в меню. Идея состоит в том, чтобы получить большой бокс, достаточный для того, чтобы содержать все пункты меню. </p><p>Первоначально поле будет иметь отрицательное значение для позиции <code class="inline">bottom</code>. Это означает, что по умолчанию будет отображаться только верхушка всего окна. Как только пользователь нажимает на меню, весь бокс будет выглядеть так, как если бы он был расширен, когда на самом деле мы только меняем <code class="inline">bottom</code> позицию. </p><p>Вам может быть интересно, почему мы используем этот подход вместо того, чтобы просто масштабировать поле для размещения всех его дочерних элементов. Это потому, что нам нужно только масштабировать атрибут высоты. Подумайте, что происходит с изображениями, когда вы просто корректируете их высоту или ширину - они выглядят растянутыми. То же самое произойдет с элементами внутри бокса. </p><p>Возвращаясь к <code class="inline">constructor()</code>, мы также добавляем флаг состояния, который указывает, будет ли в настоящее время меню расширено или нет. Нам это нужно, так как нужно скрыть кнопку для расширения меню, если меню итак уже расширено. </p><pre class="brush: javascript noskimlinks noskimwords">export default class ExpandPage extends Component {  constructor(props) {    super(props);    this.y_translate = new Animated.Value(0);    this.state = {      menu_expanded: false    };  }  ...}</pre><p>Внутри функции <code class="inline">render()</code> укажите, как будет изменена <code class="inline">bottom</code> позиция. <code class="inline">inputRange</code> равен <code class="inline">0</code> и <code class="inline">1</code>, а <code class="inline">outputRange</code> равен <code class="inline">0</code> и <code class="inline">-300</code>. Поэтому, если <code class="inline">y_translate</code> значение <code class="inline">0</code>, ничего не произойдет, потому что эквивалент <code class="inline">outputRange</code> равен <code class="inline">0</code>. Но если значение становится равным <code class="inline">1</code>, <code class="inline">bottom</code> положение меню переводится на <code class="inline">-300 </code>из своего исходного положения. </p><p>Обратите внимание на отрицательный знак, потому что, если это будет просто <code class="inline">300</code>, то бокс расширится еще дальше. А если это отрицательное число, произойдет обратное.</p><pre class="brush: javascript noskimlinks noskimwords">render() {    const menu_moveY = this.y_translate.interpolate({        inputRange: [0, 1],        outputRange: [0, -300]    });        ...}</pre><p>Чтобы это имело больше смысла, давайте перейдем к стилям:</p><pre class="brush: javascript noskimlinks noskimwords">const styles = StyleSheet.create({  container: {    flex: 10,    flexDirection: "column"  },  body: {    flex: 10,    backgroundColor: "#ccc"  },  footer_menu: {    position: "absolute",    width: 600,    height: 350,     bottom: -300,     backgroundColor: "#1fa67a",    alignItems: "center"  },  tip_menu: {    flexDirection: "row"  },  button: {    backgroundColor: "#fff"  },  button_label: {    fontSize: 20,    fontWeight: "bold"  }});</pre><p>Обратите внимание на стиль <code class="inline">footer_menu</code>. Его общая <code class="inline">height</code> установлена равной <code class="inline">350</code>, а <code class="inline">bottom</code> позиция<code class="inline"> -300</code>, что означает, что по умолчанию отображается только верхняя часть <code class="inline">50</code>. Когда анимация трансляции выполняется для расширения меню, <code class="inline">bottom</code> позиция заканчивается значением <code class="inline">0</code>. Почему так? Потому что, если вы все еще помните правила при вычитании отрицательных чисел, два минусовых знака становятся положительными. Таким образом <code class="inline">(-300) - (-300)</code> становится <code class="inline">(-300) + 300</code>.</p><p>Мы все знаем, что происходит при добавлении положительных и отрицательных чисел: они отменяют друг друга. Таким образом, <code class="inline">bottom</code> позиция становится равной <code class="inline">0</code>, и отображается все меню.</p><p>Возвращаясь к функции <code class="inline">render()</code>, у нас есть основное содержимое (<code class="inline">body</code>) и меню нижнего колонтитула, которое будет расширяться и сокращаться. Преобразование <code class="inline">translateY</code> используется для перевода своего положения по оси Y. Поскольку весь <code class="inline">container</code> имеет <code class="inline">flex: 10</code>, и <code class="inline">body</code> также имеет<code class="inline"> flex: 10</code>, то  отправная точка находится в самом низу экрана.</p><pre class="brush: javascript noskimlinks noskimwords">return (  &lt;View style={styles.container}&gt;    &lt;View style={styles.body}&gt;&lt;/View&gt;    &lt;Animated.View       style={[         styles.footer_menu,        {          transform: [            {              translateY: menu_moveY            }          ]        }      ]}    &gt;            ...    &lt;/Animated.View&gt;  &lt;/View&gt;);  </pre><p>Внутри <code class="inline">&lt;Animated.View&gt;</code> находятся <code class="inline">tip_menu</code> и полное меню. Если меню расширено, мы не хотим, чтобы отображалось меню подсказок, поэтому мы отображаем его только в том случае, если для параметра <code class="inline">menu_expanded</code> установлено значение <code class="inline">false</code>. </p><pre class="brush: javascript noskimlinks noskimwords">{  !this.state.menu_expanded &amp;&amp;  &lt;View style={styles.tip_menu}&gt;    &lt;ScalingButton onPress={this.openMenu.bind(this)} noDefaultStyles={true}&gt;      &lt;Icon name="ellipsis-h" size={50} color="#fff" /&gt;    &lt;/ScalingButton&gt;  &lt;/View&gt;} </pre><p>С другой стороны, мы хотим отобразить полное меню, если для параметра <code class="inline">menu_expanded</code> будет установлено значение <code class="inline">true</code>. Каждая из кнопок вернет меню обратно в исходное положение.</p><pre class="brush: javascript noskimlinks noskimwords">{  !this.state.menu_expanded &amp;&amp;  &lt;View style={styles.tip_menu}&gt;    &lt;ScalingButton onPress={this.openMenu.bind(this)} noDefaultStyles={true}&gt;      &lt;Icon name="ellipsis-h" size={50} color="#fff" /&gt;    &lt;/ScalingButton&gt;  &lt;/View&gt;} </pre><p>При открытии меню сначала необходимо обновить состояние, чтобы отображались скрытые меню. Только после этого можно выполнить анимацию перевода. Это использует <code class="inline">Animated.spring</code>, а не <code class="inline">Animated.timing</code>, чтобы добавить немного анимации. Чем выше значение, которое вы придаете <code class="inline">friction</code>, тем меньше будет отскок. Помните, что не переусердствуйте с анимацией, потому что вместо того, чтобы помогать пользователю, они могут оказаться раздражающими.</p><pre class="brush: javascript noskimlinks noskimwords">openMenu() {  this.setState({    menu_expanded: true  }, () =&gt; {    this.y_translate.setValue(0);    Animated.spring(      this.y_translate,      {        toValue: 1,        friction: 3      }    ).start();  });}</pre><p><code class="inline">HideMenu()</code> делает противоположное <code class="inline">showMenu()</code>, поэтому мы просто отменяем то, что он делает:</p><pre class="brush: javascript noskimlinks noskimwords">hideMenu() {  this.setState({    menu_expanded: false  }, () =&gt; {    this.y_translate.setValue(1);    Animated.spring(      this.y_translate,      {        toValue: 0,        friction: 4      }    ).start();  });}</pre><h2>Страница привлечения внимания</h2><p>Последней, но не менее важной является страница привлечения внимания (<code class="inline">src/pages/AttentionSeekerPage.js</code>). Я знаю, что этот учебник уже довольно длинный, поэтому, чтобы немного сократить, давайте использовать пакет <strong>react-native-animatabl</strong>e для реализации анимаций для этой страницы.</p><pre class="brush: javascript noskimlinks noskimwords">import React, { Component } from "react";import {  StyleSheet,  Text,  View} from "react-native";import * as Animatable from "react-native-animatable";import ScalingButton from "../components/ScalingButton";</pre><p>Создайте массив, содержащий тип анимации и цвет фона, который будет использоваться для каждого окна:</p><pre class="brush: javascript noskimlinks noskimwords">var animations = [  ["bounce", "#62B42C"],  ["flash", "#316BA7"],  ["jello", "#A0A0A0"],  ["pulse", "#FFC600"],  ["rotate", "#1A7984"],  ["rubberBand", "#435056"],  ["shake", "#FF6800"],  ["swing", "#B4354F"],  ["tada", "#333333"]];</pre><p>Создайте компонент:</p><pre class="brush: javascript noskimlinks noskimwords">export default class AttentionSeekerPage extends Component {      ... }</pre><p>Функция <code class="inline">render()</code> использует функцию <code class="inline">renderBoxes()</code> для создания трех строк, каждая из которых будет отображать по три окна. </p><pre class="brush: javascript noskimlinks noskimwords">render() {  return (    &lt;View style={styles.container}&gt;      &lt;View style={styles.row}&gt;        { this.renderBoxes(0) }      &lt;/View&gt;      &lt;View style={styles.row}&gt;        { this.renderBoxes(3) }      &lt;/View&gt;      &lt;View style={styles.row}&gt;        { this.renderBoxes(6) }      &lt;/View&gt;    &lt;/View&gt;  );}</pre><p>Функция <code class="inline">renderBoxes()</code> отображает анимированные поля. Она использует начальный индекс, предоставленный в качестве аргумента, для извлечения определенной части массива и визуализации их по отдельности. </p><p>Здесь мы используем <code class="inline">&lt;Animatable.View&gt;</code> вместо <code class="inline">&lt;Animated.View&gt;</code>. Он принимает <code class="inline">animation</code> и <code class="inline">iterationCount</code> в качестве свойств. <code class="inline">animation</code> определяет тип анимации, которую вы хотите выполнить, и <code class="inline">iterationCount</code> указывает, сколько раз вы хотите выполнить анимацию. В этом случае мы просто хотим отключить пользователя, пока не нажмем на него.</p><pre class="brush: javascript noskimlinks noskimwords">renderBoxes(start) {    var selected_animations = animations.slice(start, start + 3);    return selected_animations.map((animation, index) =&gt; {      return (        &lt;ScalingButton           key={index}          onPress={this.stopAnimation.bind(this, animation[0])}           noDefaultStyles={true}        &gt;          &lt;Animatable.View             ref={animation[0]}            style={[styles.box, { backgroundColor: animation[1] }]}            animation={animation[0]}             iterationCount={"infinite"}&gt;            &lt;Text style={styles.box_text}&gt;{ animation[0] }&lt;/Text&gt;          &lt;/Animatable.View&gt;        &lt;/ScalingButton&gt;      );    });}</pre><p><code class="inline">stopAnimation()</code> просто прекращает анимацию на боксе. Она использует «refs», чтобы однозначно идентифицировать каждый бокс, чтобы их можно было остановить индивидуально.</p><pre class="brush: javascript noskimlinks noskimwords">stopAnimation(animation) {    this.refs[animation].stopAnimation();}</pre><p>Наконец, добавьте стили:</p><pre class="brush: javascript noskimlinks noskimwords">const styles = StyleSheet.create({  container: {    flex: 1,    flexDirection: "column",    padding: 20  },  row: {    flex: 1,    flexDirection: "row",    justifyContent: "space-between"  },  box: {    alignItems: "center",    justifyContent: "center",    height: 100,    width: 100,    backgroundColor: "#ccc"  },  box_text: {    color: "#FFF"  }});</pre><h2>Заключение</h2><p>В этом уроке вы узнали, как реализовать некоторые анимации, обычно используемые в мобильных приложениях. В частности, вы узнали, как реализовать анимацию, обеспечивающую визуальную обратную связь, отображение текущего состояния системы, визуальное связывание состояний перехода и привлечение внимания пользователя. </p><p>Как всегда, еще многое предстоит узнать, когда дело касается анимации. Например, мы до сих пор не затронули следующие области:</p><ul><li>Как выполнять анимацию для конкретных жестов пользователя, таких как перетаскивание, щелканье, сужение и расширение. Например, когда пользователь использует жест расширения, вы должны использовать анимацию масштаба, чтобы показать, как этот элемент становится больше.</li> <li>Как анимировать переход нескольких элементов из одного состояния в другое. Например, при отображении списка фотографий вы можете захотеть выполнить анимацию шага, чтобы задержать показ всех фотографий.</li> <li>Intro-анимация для первых пользователей приложения. В качестве альтернативы можно использовать видео, но это также хорошее место для реализации анимаций.</li> </ul><p>Возможно, я расскажу о некоторых из этих тем в следующем учебнике. Тем временем, ознакомьтесь с некоторыми из наших других курсов и учебников по React Native!</p><ul class="roundup-block__contents posts--half-width roundup-block--card"><li class="roundup-block__content posts__post"><article><header><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/71/courses/845/preview_image/React-social-3.png" alt="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." title="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." width="50" height="50"></span><span></span></header><div class="posts__post-teaser">React Native, созданный Facebook, позволяет писать собственные мобильные приложения в современном JavaScript. React Native приложения будут преобразованы в собственные виды ...</div> <footer class="posts__post-details"><div class="posts__post-teaser-overlay"></div> <div class="posts__post-publication-meta"> <img sizes="76px" class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/982/profiles/19491/profileImage/Professional%20400x400.jpg" alt="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." title="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." width="50" height="50"><div class="posts__post-details__info"> <address class="posts__post-author"><span>Маркус Мюльбергер</span></address> 13 мая 2016 года</div> </div> <div class="posts__post-primary-category topic-code"><span>React Native</span></div></footer></article></li> <li class="roundup-block__content posts__post"><article><header><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1125/posts/27418/preview_image/rn.jpg" alt="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." title="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." width="50" height="50"></span><span></span></header><div class="posts__post-teaser">В этом уроке вы узнаете, как выкладывать приложения React Native и как реализовать макеты, обычно используемые в приложениях.</div> <footer class="posts__post-details"><div class="posts__post-teaser-overlay"></div> <div class="posts__post-publication-meta"> <img sizes="76px" class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/769/profiles/19633/profileImage/717bcde740783a83a168468df0dbbb75.jpeg" alt="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." title="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." width="50" height="50"><div class="posts__post-details__info"> <address class="posts__post-author"><span>Вернер-Бел-Анчета</span></address> <time class="posts__post-publication-date" datetime="2016-10-26 14:59:48 UTC">26 октября 2016 г.</time></div> </div> <div class="posts__post-primary-category topic-code"><span>React Native</span></div></footer></article></li> <li class="roundup-block__content posts__post"><article><header><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/1125/posts/27328/preview_image/rn.jpg" alt="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." title="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." width="50" height="50"></span><span></span></header><div class="posts__post-teaser">Анимация может вдохнуть жизнь в ваше приложение и сделать ваши интерфейсы более интуитивными. В этом уроке вы узнаете, как реализовать различные виды анимаций в ...</div> <footer class="posts__post-details"><div class="posts__post-teaser-overlay"></div> <div class="posts__post-publication-meta"> <img sizes="76px" class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/769/profiles/19633/profileImage/717bcde740783a83a168468df0dbbb75.jpeg" alt="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." title="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." width="50" height="50"><div class="posts__post-details__info"> <address class="posts__post-author"><span>Вернер-Бел-Анчета</span></address> <time class="posts__post-publication-date" datetime="2016-10-03 14:18:33 UTC">03 октября 2016 г.</time></div> </div> <div class="posts__post-primary-category topic-code"><span>React Native</span></div></footer></article></li> <li class="roundup-block__content posts__post"><article><header><span><img class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/41/posts/24969/preview_image/react-native@2x.jpg" alt="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." title="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." width="50" height="50"></span><span></span></header><div class="posts__post-teaser">React Native от Facebook - мощная среда с открытым исходным кодом, которая позволяет вам быстро и без особых усилий создавать собственные приложения для Android и iOS, используя только ...</div> <footer class="posts__post-details"><div class="posts__post-teaser-overlay"></div> <div class="posts__post-publication-meta"> <img sizes="76px" class="lazy07" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="https://cms-assets.tutsplus.com/cdn-cgi/image/width=400/uploads/users/362/profiles/18808/profileImage/picGrid.jpg" alt="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." title="Практические примеры анимации в React NativeСоздайте социальное приложение с React NativeНачало работы с макетами React ..." width="50" height="50"><div class="posts__post-details__info"> <address class="posts__post-author"><span>Ашраф Хатибелагал</span></address> <time class="posts__post-publication-date" datetime="2015-10-19 16:45:10 UTC">19 октября 2015 г.</time></div> </div> <div class="posts__post-primary-category topic-code"><span>React Native</span></div></footer></article></li> </ul><p><br></p>

</div></div>

<div class="tm-article-body__tags"><div class="tm-article-body__tags-links tm-article-body__tags-links2"><span class="tm-article-body__tags-title">Теги:</span><span class="tm-article-body__tags-item"><a aria-label="Code" href="https://norma-studio.github.io/article5/220825084-prakticheskie-primery-animatsii-v-react-nativesozdajte-sotsialnoe-prilozhenie-s-react-nativenachalo-raboty-s-maketami-react-" class="tm-article-body__tags-item-link">Code</a></span><span class="tm-article-body__tags-item"><a aria-label="React Native" href="https://norma-studio.github.io/article5/220825084-prakticheskie-primery-animatsii-v-react-nativesozdajte-sotsialnoe-prilozhenie-s-react-nativenachalo-raboty-s-maketami-react-" class="tm-article-body__tags-item-link">React Native</a></span></div></div></div></article>

<div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="v-portal" style="display:none;"></div></div><span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title><svg id="counter-views" viewBox="0 0 56 32"><path d="M28 0c18.368 0 28 13.81 28 16s-9.632 16-28 16c-18.368 0-28-13.81-28-16s9.632-16 28-16zm0 28.309c6.874 0 12.446-5.511 12.446-12.309s-5.572-12.309-12.446-12.309-12.446 5.511-12.446 12.309 5.572 12.309 12.446 12.309zM28 16c.084-1.721 5.596-3.019 4.284-4.352-2.429-2.468-6.317-2.521-8.684-.117s-2.314 6.354.116 8.821c2.429 2.468 6.317 2.521 8.683.117 1.089-1.106-4.47-3.008-4.399-4.469z"></path></svg></svg><span class="tm-icon-counter__value">
30229</span></span><button aria-label="Добавить в закладки" title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item" onclick="return addBookmark(this);"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title><svg id="counter-favorite" viewBox="0 0 12 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 0C0.734784 0 0.48043 0.105357 0.292893 0.292893C0.105357 0.48043 0 0.734784 0 1V15C0 15.3603 0.193793 15.6927 0.507301 15.8702C0.82081 16.0477 1.20556 16.0429 1.5145 15.8575L6 13.1662L10.4855 15.8575C10.7944 16.0429 11.1792 16.0477 11.4927 15.8702C11.8062 15.6927 12 15.3603 12 15V1C12 0.447715 11.5523 0 11 0H1Z"></path></svg></svg></span><span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
361</span></button><div title="Поделиться" class="tm-sharing tm-data-icons__item">
<button aria-label="sharing" type="button" class="tm-sharing__button sharer button btn5242" data-sharer="vk" data-url="none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button></div><div class="v-portal" style="display:none;"></div></div></div>
</div>

<div class="tm-page-article__additional-blocks wr55"></div>
<!-- pagination -->
 </div></div>
<!-- sidebar -->
<div class="tm-page__sidebar"><div id="572480" class="tm-layout-sidebar">

<div class="tm-sexy-sidebar tm-sexy-sidebar_stick-top wr54" style="margin-top: 0px;">
<section class="tm-block tm-block_spacing-bottom wr12a"></section>
<section class="tm-block tm-block_spacing-bottom wr12">

</section>
</div></div></div></div></div></div></main></div><div id="exbottom" class="tm-footer wr56"></div></div><div class="vue-portal-target"></div></div>
<link rel="stylesheet" href="../style.css">
<script src="../jquery-3.7.0.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y9PLTD9XQE"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag("js", new Date());gtag("config", "G-Y9PLTD9XQE");</script><script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");ym(63258550, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src="https://mc.yandex.ru/watch/63258550" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body></html>
